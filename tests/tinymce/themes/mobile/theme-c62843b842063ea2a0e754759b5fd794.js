(function(){"use strict"
var n=function(){return(n=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])
return n}).apply(this,arguments)}
function t(n,t){var e={}
for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r])
if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0
for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}function e(n,t,e){if(e||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o])
return n.concat(r||Array.prototype.slice.call(t))}var r=function(n){return function(t){return function(n){var t=typeof n
return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t}(t)===n}},o=function(n){return function(t){return typeof t===n}},i=function(n){return function(t){return n===t}},u=r("string"),c=r("object"),a=r("array"),f=i(null),s=o("boolean"),l=i(void 0),d=function(n){return!function(n){return null==n}(n)},m=o("function"),g=o("number"),p=function(){},v=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r]
return n(t.apply(null,e))}},h=function(n){return function(){return n}},b=function(n){return n},y=function(n,t){return n===t}
function x(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e]
return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r]
var o=t.concat(e)
return n.apply(null,o)}}var w,S,O=function(n){return function(t){return!n(t)}},k=function(n){return function(){throw new Error(n)}},T=function(n){return n()},C=h(!1),E=h(!0),M=function(){return D},D={fold:function(n,t){return n()},isSome:C,isNone:E,getOr:S=b,getOrThunk:w=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:S,orThunk:w,map:M,each:p,bind:M,exists:C,forall:E,filter:function(){return M()},toArray:function(){return[]},toString:h("none()")},_=function(n){var t=h(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},isSome:E,isNone:C,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return _(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:D},toArray:function(){return[n]},toString:function(){return"some("+n+")"}}
return o},R={some:_,none:M,from:function(n){return null==n?D:_(n)}},F=function(n){var t,e=!1
return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o]
return e||(e=!0,t=n.apply(null,r)),t}},I=Array.prototype.slice,V=Array.prototype.indexOf,B=Array.prototype.push,A=function(n,t){return function(n,t){return V.call(n,t)}(n,t)>-1},N=function(n,t){for(var e=0,r=n.length;e<r;e++){if(t(n[e],e))return!0}return!1},H=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o]
r[o]=t(i,o)}return r},P=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e)}},z=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r]
t(i,r)&&e.push(i)}return e},j=function(n,t,e){return function(n,t){for(var e=n.length-1;e>=0;e--)t(n[e],e)}(n,(function(n,r){e=t(e,n,r)})),e},L=function(n,t,e){return P(n,(function(n,r){e=t(e,n,r)})),e},$=function(n,t){return function(n,t,e){for(var r=0,o=n.length;r<o;r++){var i=n[r]
if(t(i,r))return R.some(i)
if(e(i,r))break}return R.none()}(n,t,C)},G=function(n,t){for(var e=0,r=n.length;e<r;e++){if(t(n[e],e))return R.some(e)}return R.none()},U=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!a(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n)
B.apply(t,n[e])}return t},W=function(n,t){return U(H(n,t))},q=function(n,t){for(var e=0,r=n.length;e<r;++e){if(!0!==t(n[e],e))return!1}return!0},X=function(n){var t=I.call(n,0)
return t.reverse(),t},Y=function(n,t){return z(n,(function(n){return!A(t,n)}))},K=function(n){return[n]},J=function(n){return function(n,t){return t>=0&&t<n.length?R.some(n[t]):R.none()}(n,0)},Q=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e)
if(r.isSome())return r}return R.none()},Z=function(){return nn(0,0)},nn=function(n,t){return{major:n,minor:t}},tn={nu:nn,detect:function(n,t){var e=String(t).toLowerCase()
return 0===n.length?Z():function(n,t){var e=function(n,t){for(var e=0;e<n.length;e++){var r=n[e]
if(r.test(t))return r}}(n,t)
if(!e)return{major:0,minor:0}
var r=function(n){return Number(t.replace(e,"$"+n))}
return nn(r(1),r(2))}(n,e)},unknown:Z},en=function(n,t){var e=String(t).toLowerCase()
return $(n,(function(n){return n.search(e)}))},rn=function(n,t){return-1!==n.indexOf(t)},on=function(n){return function(t){return t.replace(n,"")}}(/^\s+|\s+$/g),un=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,cn=function(n){return function(t){return rn(t,n)}},an=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return rn(n,"edge/")&&rn(n,"chrome")&&rn(n,"safari")&&rn(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,un],search:function(n){return rn(n,"chrome")&&!rn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return rn(n,"msie")||rn(n,"trident")}},{name:"Opera",versionRegexes:[un,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:cn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:cn("firefox")},{name:"Safari",versionRegexes:[un,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(rn(n,"safari")||rn(n,"mobile/"))&&rn(n,"applewebkit")}}],fn=[{name:"Windows",search:cn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return rn(n,"iphone")||rn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:cn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:cn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:cn("linux"),versionRegexes:[]},{name:"Solaris",search:cn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:cn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:cn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],sn={browsers:h(an),oses:h(fn)},ln="Edge",dn="Chrome",mn="Opera",gn="Firefox",pn="Safari",vn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}}
return{current:t,version:e,isEdge:r(ln),isChrome:r(dn),isIE:r("IE"),isOpera:r(mn),isFirefox:r(gn),isSafari:r(pn)}},hn={unknown:function(){return vn({current:void 0,version:tn.unknown()})},nu:vn,edge:h(ln),chrome:h(dn),ie:h("IE"),opera:h(mn),firefox:h(gn),safari:h(pn)},bn="Windows",yn="Android",xn="Linux",wn="Solaris",Sn="FreeBSD",On="ChromeOS",kn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}}
return{current:t,version:e,isWindows:r(bn),isiOS:r("iOS"),isAndroid:r(yn),isOSX:r("OSX"),isLinux:r(xn),isSolaris:r(wn),isFreeBSD:r(Sn),isChromeOS:r(On)}},Tn={unknown:function(){return kn({current:void 0,version:tn.unknown()})},nu:kn,windows:h(bn),ios:h("iOS"),android:h(yn),linux:h(xn),osx:h("OSX"),solaris:h(wn),freebsd:h(Sn),chromeos:h(On)},Cn=function(n,t,e){var r=sn.browsers(),o=sn.oses(),i=t.bind((function(n){return function(n,t){return Q(t.brands,(function(t){var e=t.brand.toLowerCase()
return $(n,(function(n){var t
return e===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(n){return{current:n.name,version:tn.nu(parseInt(t.version,10),0)}}))}))}(r,n)})).orThunk((function(){return function(n,t){return en(n,t).map((function(n){var e=tn.detect(n.versionRegexes,t)
return{current:n.name,version:e}}))}(r,n)})).fold(hn.unknown,hn.nu),u=function(n,t){return en(n,t).map((function(n){var e=tn.detect(n.versionRegexes,t)
return{current:n.name,version:e}}))}(o,n).fold(Tn.unknown,Tn.nu),c=function(n,t,e,r){var o=n.isiOS()&&!0===/ipad/i.test(e),i=n.isiOS()&&!o,u=n.isiOS()||n.isAndroid(),c=u||r("(pointer:coarse)"),a=o||!i&&u&&r("(min-device-width:768px)"),f=i||u&&!a,s=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e),l=!f&&!a&&!s
return{isiPad:h(o),isiPhone:h(i),isTablet:h(a),isPhone:h(f),isTouch:h(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:h(s),isDesktop:h(l)}}(u,i,n,e)
return{browser:i,os:u,deviceType:c}},En=function(n){return window.matchMedia(n).matches},Mn=F((function(){return Cn(navigator.userAgent,R.from(navigator.userAgentData),En)})),Dn=function(){return Mn()},_n=h,Rn=_n("touchstart"),Fn=_n("touchmove"),In=_n("touchend"),Vn=_n("mousedown"),Bn=_n("mousemove"),An=_n("mouseup"),Nn=_n("mouseover"),Hn=_n("keydown"),Pn=_n("keyup"),zn=_n("input"),jn=_n("change"),Ln=_n("click"),$n=_n("transitionend"),Gn=_n("selectstart"),Un=function(n){return h("alloy."+n)},Wn={tap:Un("tap")},qn=Un("focus"),Xn=Un("blur.post"),Yn=Un("paste.post"),Kn=Un("receive"),Jn=Un("execute"),Qn=Un("focus.item"),Zn=Wn.tap,nt=Un("longpress"),tt=Un("system.init"),et=Un("system.attached"),rt=Un("system.detached"),ot=Un("focusmanager.shifted"),it=Un("highlight"),ut=Un("dehighlight"),ct=function(n,t){lt(n,n.element,t,{})},at=function(n,t,e){lt(n,n.element,t,e)},ft=function(n){ct(n,Jn())},st=function(n,t,e){lt(n,t,e,{})},lt=function(t,e,r,o){var i=n({target:e},o)
t.getSystem().triggerEvent(r,e,i)},dt=function(n){if(null==n)throw new Error("Node cannot be null or undefined")
return{dom:n}},mt={fromHtml:function(n,t){var e=(t||document).createElement("div")
if(e.innerHTML=n,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node")
return dt(e.childNodes[0])},fromTag:function(n,t){var e=(t||document).createElement(n)
return dt(e)},fromText:function(n,t){var e=(t||document).createTextNode(n)
return dt(e)},fromDom:dt,fromPoint:function(n,t,e){return R.from(n.dom.elementFromPoint(t,e)).map(dt)}},gt=function(n,t){var e=n.dom
if(1!==e.nodeType)return!1
var r=e
if(void 0!==r.matches)return r.matches(t)
if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t)
if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t)
if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t)
throw new Error("Browser lacks native selectors")},pt=function(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount},vt=function(n,t){var e=void 0===t?document:t.dom
return pt(e)?[]:H(e.querySelectorAll(n),mt.fromDom)},ht=function(n,t){var e=void 0===t?document:t.dom
return pt(e)?R.none():R.from(e.querySelector(n)).map(mt.fromDom)},bt=function(n,t){return n.dom===t.dom}
"undefined"!=typeof window?window:Function("return this;")()
var yt,xt=function(n){return n.dom.nodeName.toLowerCase()},wt=function(n){return function(t){return function(n){return n.dom.nodeType}(t)===n}},St=wt(1),Ot=wt(3),kt=wt(9),Tt=wt(11),Ct=function(n){return mt.fromDom(n.dom.ownerDocument)},Et=function(n){return kt(n)?n:Ct(n)},Mt=function(n){return R.from(n.dom.parentNode).map(mt.fromDom)},Dt=function(n){return H(n.dom.childNodes,mt.fromDom)},_t=function(n,t){var e=n.dom.childNodes
return R.from(e[t]).map(mt.fromDom)},Rt=function(n,t){Mt(n).each((function(e){e.dom.insertBefore(t.dom,n.dom)}))},Ft=function(n,t){(function(n){return R.from(n.dom.nextSibling).map(mt.fromDom)})(n).fold((function(){Mt(n).each((function(n){Vt(n,t)}))}),(function(n){Rt(n,t)}))},It=function(n,t){(function(n){return _t(n,0)})(n).fold((function(){Vt(n,t)}),(function(e){n.dom.insertBefore(t.dom,e.dom)}))},Vt=function(n,t){n.dom.appendChild(t.dom)},Bt=function(n,t){P(t,(function(t){Vt(n,t)}))},At=function(n){n.dom.textContent="",P(Dt(n),(function(n){Nt(n)}))},Nt=function(n){var t=n.dom
null!==t.parentNode&&t.parentNode.removeChild(t)},Ht=function(n){return Tt(n)&&d(n.dom.host)},Pt=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),zt=h(Pt),jt=Pt?function(n){return mt.fromDom(n.dom.getRootNode())}:Et,Lt=function(n){return mt.fromDom(n.dom.host)},$t=function(n){return d(n.dom.shadowRoot)},Gt=function(n){var t=Ot(n)?n.dom.parentNode:n.dom
if(null==t||null===t.ownerDocument)return!1
var e,r,o=t.ownerDocument
return function(n){var t=jt(n)
return Ht(t)?R.some(t):R.none()}(mt.fromDom(t)).fold((function(){return o.body.contains(t)}),(e=Gt,r=Lt,function(n){return e(r(n))}))},Ut=function(){return Wt(mt.fromDom(document))},Wt=function(n){var t=n.dom.body
if(null==t)throw new Error("Body is not available yet")
return mt.fromDom(t)},qt=function(n){ct(n,rt())
var t=n.components()
P(t,qt)},Xt=function(n){var t=n.components()
P(t,Xt),ct(n,et())},Yt=function(n,t){Vt(n.element,t.element)},Kt=function(n,t){var e=n.components();(function(n){P(n.components(),(function(n){return Nt(n.element)})),At(n.element),n.syncComponents()})(n)
var r=Y(e,t)
P(r,(function(t){qt(t),n.getSystem().removeFromWorld(t)})),P(t,(function(t){t.getSystem().isConnected()?Yt(n,t):(n.getSystem().addToWorld(t),Yt(n,t),Gt(n.element)&&Xt(t)),n.syncComponents()}))},Jt=function(n,t,e){n.getSystem().addToWorld(t),e(n.element,t.element),Gt(n.element)&&Xt(t),n.syncComponents()},Qt=function(n){var t=Mt(n.element).bind((function(t){return n.getSystem().getByDom(t).toOptional()}));(function(n){qt(n),Nt(n.element),n.getSystem().removeFromWorld(n)})(n),t.each((function(n){n.syncComponents()}))},Zt=function(n,t,e){e(n,t.element)
var r=Dt(t.element)
P(r,(function(n){t.getByDom(n).each(Xt)}))},ne=Object.keys,te=Object.hasOwnProperty,ee=function(n,t){for(var e=ne(n),r=0,o=e.length;r<o;r++){var i=e[r]
t(n[i],i)}},re=function(n,t){return oe(n,(function(n,e){return{k:e,v:t(n,e)}}))},oe=function(n,t){var e={}
return ee(n,(function(n,r){var o=t(n,r)
e[o.k]=o.v})),e},ie=function(n,t){var e={}
return function(n,t,e,r){ee(n,(function(n,o){(t(n,o)?e:r)(n,o)}))}(n,t,function(n){return function(t,e){n[e]=t}}(e),p),e},ue=function(n,t){var e=[]
return ee(n,(function(n,r){e.push(t(n,r))})),e},ce=function(n,t){return ae(n,t)?R.from(n[t]):R.none()},ae=function(n,t){return te.call(n,t)},fe=function(n,t){return ae(n,t)&&void 0!==n[t]&&null!==n[t]},se=function(n,t,e){if(!(u(e)||s(e)||g(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple")
n.setAttribute(t,e+"")},le=function(n,t,e){se(n.dom,t,e)},de=function(n,t){var e=n.dom
ee(t,(function(n,t){se(e,t,n)}))},me=function(n,t){var e=n.dom.getAttribute(t)
return null===e?void 0:e},ge=function(n,t){return R.from(me(n,t))},pe=function(n,t){var e=n.dom
return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},ve=function(n,t){n.dom.removeAttribute(t)},he=function(n,t){var e=me(n,t)
return void 0===e||""===e?[]:e.split(" ")},be=function(n){return void 0!==n.dom.classList},ye=function(n,t){return function(n,t,e){var r=he(n,t).concat([e])
return le(n,t,r.join(" ")),!0}(n,"class",t)},xe=function(n,t){return function(n,t,e){var r=z(he(n,t),(function(n){return n!==e}))
return r.length>0?le(n,t,r.join(" ")):ve(n,t),!1}(n,"class",t)},we=function(n,t){be(n)?n.dom.classList.add(t):ye(n,t)},Se=function(n){0===(be(n)?n.dom.classList:function(n){return he(n,"class")}(n)).length&&ve(n,"class")},Oe=function(n,t){be(n)?n.dom.classList.remove(t):xe(n,t)
Se(n)},ke=function(n,t){return be(n)&&n.dom.classList.contains(t)},Te=function(n,t,e){Oe(n,e),we(n,t)},Ce=Object.freeze({__proto__:null,toAlpha:function(n,t,e){Te(n.element,t.alpha,t.omega)},toOmega:function(n,t,e){Te(n.element,t.omega,t.alpha)},isAlpha:function(n,t,e){return ke(n.element,t.alpha)},isOmega:function(n,t,e){return ke(n.element,t.omega)},clear:function(n,t,e){Oe(n.element,t.alpha),Oe(n.element,t.omega)}}),Ee=function(n){return{isValue:E,isError:C,getOr:h(n),getOrThunk:h(n),getOrDie:h(n),or:function(t){return Ee(n)},orThunk:function(t){return Ee(n)},fold:function(t,e){return e(n)},map:function(t){return Ee(t(n))},mapError:function(t){return Ee(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOptional:function(){return R.some(n)}}},Me=function(n){return{isValue:C,isError:E,getOr:b,getOrThunk:function(n){return n()},getOrDie:function(){return k(String(n))()},or:b,orThunk:function(n){return n()},fold:function(t,e){return t(n)},map:function(t){return Me(n)},mapError:function(t){return Me(t(n))},each:p,bind:function(t){return Me(n)},exists:C,forall:E,toOptional:R.none}},De={value:Ee,error:Me,fromOption:function(n,t){return n.fold((function(){return Me(t)}),Ee)}};(function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"})(yt||(yt={}))
var _e,Re,Fe=function(n,t,e){return n.stype===yt.Error?t(n.serror):e(n.svalue)},Ie=function(n){return{stype:yt.Value,svalue:n}},Ve=function(n){return{stype:yt.Error,serror:n}},Be=function(n){return n.fold(Ve,Ie)},Ae=function(n){return Fe(n,De.error,De.value)},Ne=Ie,He=function(n){var t=[],e=[]
return P(n,(function(n){Fe(n,(function(n){return e.push(n)}),(function(n){return t.push(n)}))})),{values:t,errors:e}},Pe=Ve,ze=function(n,t){return n.stype===yt.Value?t(n.svalue):n},je=function(n,t){return n.stype===yt.Error?t(n.serror):n},Le=function(n,t){return n.stype===yt.Value?{stype:yt.Value,svalue:t(n.svalue)}:n},$e=function(n,t){return n.stype===yt.Error?{stype:yt.Error,serror:t(n.serror)}:n},Ge=Fe,Ue=function(n,t,e,r){return{tag:"field",key:n,newKey:t,presence:e,prop:r}},We=function(n,t,e){switch(n.tag){case"field":return t(n.key,n.newKey,n.presence,n.prop)
case"custom":return e(n.newKey,n.instantiator)}},qe=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(0===t.length)throw new Error("Can't merge zero objects")
for(var r={},o=0;o<t.length;o++){var i=t[o]
for(var u in i)ae(i,u)&&(r[u]=n(r[u],i[u]))}return r}},Xe=qe((function(n,t){return c(n)&&c(t)?Xe(n,t):t})),Ye=qe((function(n,t){return t})),Ke=function(n){return{tag:"defaultedThunk",process:n}},Je=function(n){return Ke(h(n))},Qe=function(n){return{tag:"mergeWithThunk",process:n}},Ze=function(n){return v(Pe,U)(n)},nr=function(n){var t=He(n)
return t.errors.length>0?Ze(t.errors):Ne(t.values)},tr=function(n){return c(n)&&ne(n).length>100?" removed due to size":JSON.stringify(n,null,2)},er=function(n,t){return Pe([{path:n,getErrorInfo:t}])},rr=function(n){return{extract:function(t,e){return je(n(e),(function(n){return function(n,t){return er(n,h(t))}(t,n)}))},toString:h("val")}},or=rr(Ne),ir=function(n,t,e,r){return ce(t,e).fold((function(){return function(n,t,e){return er(n,(function(){return'Could not find valid *required* value for "'+t+'" in '+tr(e)}))}(n,e,t)}),r)},ur=function(n,t,e,r){return r(ce(n,t).getOrThunk((function(){return e(n)})))},cr=function(n,t,e,r,o){var i=function(n){return o.extract(t.concat([r]),n)},u=function(n){return n.fold((function(){return Ne(R.none())}),(function(n){var e=o.extract(t.concat([r]),n)
return Le(e,R.some)}))}
switch(n.tag){case"required":return ir(t,e,r,i)
case"defaultedThunk":return ur(e,r,n.process,i)
case"option":return function(n,t,e){return e(ce(n,t))}(e,r,u)
case"defaultedOptionThunk":return function(n,t,e,r){return r(ce(n,t).map((function(t){return!0===t?e(n):t})))}(e,r,n.process,u)
case"mergeWithThunk":return ur(e,r,h({}),(function(t){var r=Xe(n.process(e),t)
return i(r)}))}},ar=function(n){return ne(ie(n,d))},fr=function(n){var t=sr(n),e=j(n,(function(n,t){return We(t,(function(t){var e
return Xe(n,((e={})[t]=!0,e))}),h(n))}),{})
return{extract:function(n,r){var o=s(r)?[]:ar(r),i=z(o,(function(n){return!fe(e,n)}))
return 0===i.length?t.extract(n,r):function(n,t){return er(n,(function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"}))}(n,i)},toString:t.toString}},sr=function(n){return{extract:function(t,e){return function(n,t,e){for(var r={},o=[],i=0,u=e;i<u.length;i++){var c=u[i]
We(c,(function(e,i,u,c){var a=cr(u,n,t,e,c)
Ge(a,(function(n){o.push.apply(o,n)}),(function(n){r[i]=n}))}),(function(n,e){r[n]=e(t)}))}return o.length>0?Pe(o):Ne(r)}(t,e,n)},toString:function(){return"obj{\n"+H(n,(function(n){return We(n,(function(n,t,e,r){return n+" -> "+r.toString()}),(function(n,t){return"state("+n+")"}))})).join("\n")+"}"}}},lr=function(n,t){var e=function(t,e){return function(n){return{extract:function(t,e){var r=H(e,(function(e,r){return n.extract(t.concat(["["+r+"]"]),e)}))
return nr(r)},toString:function(){return"array("+n.toString()+")"}}}(rr(n)).extract(t,e)}
return{extract:function(n,r){var o=ne(r),i=e(n,o)
return ze(i,(function(e){var o=H(e,(function(n){return Ue(n,n,{tag:"required",process:{}},t)}))
return sr(o).extract(n,r)}))},toString:function(){return"setOf("+t.toString()+")"}}},dr=h(or),mr=(_e=m,Re="function",rr((function(n){var t=typeof n
return _e(n)?Ne(n):Pe("Expected type: "+Re+" but got: "+t)}))),gr=function(n,t,e,r){return ce(e,r).fold((function(){return function(n,t,e){return er(n,(function(){return'The chosen schema: "'+e+'" did not exist in branches: '+tr(t)}))}(n,e,r)}),(function(e){return e.extract(n.concat(["branch: "+r]),t)}))},pr=function(n,t){return{extract:function(e,r){return ce(r,n).fold((function(){return function(n,t){return er(n,(function(){return'Choice schema did not contain choice key: "'+t+'"'}))}(e,n)}),(function(n){return gr(e,r,t,n)}))},toString:function(){return"chooseOn("+n+"). Possible values: "+ne(t)}}},vr=function(n){return rr((function(t){return n(t).fold(Pe,Ne)}))},hr=function(n,t){return lr((function(t){return Be(n(t))}),t)},br=function(n,t,e){return Ae(function(n,t,e){var r=t.extract([n],e)
return $e(r,(function(n){return{input:e,errors:n}}))}(n,t,e))},yr=function(n){return n.fold((function(n){throw new Error(wr(n))}),b)},xr=function(n,t,e){return yr(br(n,t,e))},wr=function(n){return"Errors: \n"+(t=n.errors,e=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:h("... (only showing first ten failures)")}]):t,H(e,(function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}))).join("\n")+"\n\nInput object: "+tr(n.input)
var t,e},Sr=function(n,t){return pr(n,re(t,sr))},Or=Ue,kr=function(n,t){return{tag:"custom",newKey:n,instantiator:t}},Tr=function(n){return Or(n,n,{tag:"required",process:{}},dr())},Cr=function(n,t){return Or(n,n,{tag:"required",process:{}},t)},Er=function(n,t){return Or(n,n,{tag:"required",process:{}},sr(t))},Mr=function(n){return Or(n,n,{tag:"option",process:{}},dr())},Dr=function(n,t){return Or(n,n,{tag:"option",process:{}},t)},_r=function(n,t){return Dr(n,sr(t))},Rr=function(n,t){return Dr(n,fr(t))},Fr=function(n,t){return Or(n,n,Je(t),dr())},Ir=function(n,t,e){return Or(n,n,Je(t),e)},Vr=[Tr("alpha"),Tr("omega")],Br=function(n){if(!a(n))throw new Error("cases must be an array")
if(0===n.length)throw new Error("there must be at least one case")
var t=[],e={}
return P(n,(function(r,o){var i=ne(r)
if(1!==i.length)throw new Error("one and only one name per case")
var u=i[0],c=r[u]
if(void 0!==e[u])throw new Error("duplicate key detected:"+u)
if("cata"===u)throw new Error("cannot have a case named cata (sorry)")
if(!a(c))throw new Error("case arguments must be an array")
t.push(u),e[u]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r]
var i=e.length
if(i!==c.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+i)
var a=function(n){var r=ne(n)
if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","))
if(!q(t,(function(n){return A(r,n)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "))
return n[u].apply(null,e)}
return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r]
if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length)
var i=t[o]
return i.apply(null,e)},match:a,log:function(n){console.log(n,{constructors:t,constructor:u,params:e})}}}})),e}
Br([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}])
var Ar,Nr=function(n,t){return function(n,t){var e={}
return ee(n,(function(n,r){A(t,r)||(e[r]=n)})),e}(n,t)},Hr=function(n,t){return function(n,t){var e
return(e={})[n]=t,e}(n,t)},Pr=function(n){return function(n){var t={}
return P(n,(function(n){t[n.key]=n.value})),t}(n)},zr=function(n,t){var e,r=function(n){var t=[],e=[]
return P(n,(function(n){n.fold((function(n){t.push(n)}),(function(n){e.push(n)}))})),{errors:t,values:e}}(n)
return r.errors.length>0?(e=r.errors,De.error(U(e))):function(n,t){return 0===n.length?De.value(t):De.value(Xe(t,Ye.apply(void 0,n)))}(r.values,t)},jr=function(n,t,e){return void 0===e&&(e=y),n.exists((function(n){return e(n,t)}))},Lr=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e)
return t},$r=function(n){return m(n)?n:C},Gr=function(n,t,e){var r=t(n),o=$r(e)
return r.orThunk((function(){return o(n)?R.none():function(n,t,e){for(var r=n.dom,o=$r(e);r.parentNode;){r=r.parentNode
var i=mt.fromDom(r),u=t(i)
if(u.isSome())return u
if(o(i))break}return R.none()}(n,t,o)}))},Ur=function(n,t){return bt(n.element,t.event.target)},Wr={can:E,abort:C,run:p},qr=function(t){if(!fe(t,"can")&&!fe(t,"abort")&&!fe(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!")
return n(n({},Wr),t)},Xr=function(n){return{can:function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r]
return L(n,(function(n,r){return n&&t(r).apply(void 0,e)}),!0)}}(n,(function(n){return n.can})),abort:function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r]
return L(n,(function(n,r){return n||t(r).apply(void 0,e)}),!1)}}(n,(function(n){return n.abort})),run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
P(n,(function(n){n.run.apply(void 0,t)}))}}},Yr=function(n){return Pr(n)},Kr=function(n,t){return{key:n,value:qr({abort:t})}},Jr=function(n,t){return{key:n,value:qr({run:t})}},Qr=function(n,t,e){return{key:n,value:qr({run:function(n,r){t.apply(void 0,[n,r].concat(e))}})}},Zr=function(n){return function(t){return{key:n,value:qr({run:function(n,e){Ur(n,e)&&t(n,e)}})}}},no=function(n,t,e){return function(n,t){return Jr(n,(function(e,r){e.getSystem().getByUid(t).each((function(t){(function(n,t,e,r){n.getSystem().triggerEvent(e,t,r.event)})(t,t.element,n,r)}))}))}(n,t.partUids[e])},to=function(n){return Jr(n,(function(n,t){t.cut()}))},eo=function(n){return Jr(n,(function(n,t){t.stop()}))},ro=function(n,t){return Zr(n)(t)},oo=Zr(et()),io=Zr(rt()),uo=Zr(tt()),co=function(n){return function(t){return Jr(n,t)}}(Jn()),ao=function(n){return H(n,(function(n){return function(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t}(t=n,e="/*",t.length-e.length)?n.substring(0,n.length-"/*".length):n
var t,e}))},fo=function(n,t){var e=n.toString(),r=e.indexOf(")")+1,o=e.indexOf("("),i=e.substring(o+1,r-1).split(/,\s*/)
return n.toFunctionAnnotation=function(){return{name:t,parameters:ao(i)}},n},so=function(n){return{classes:l(n.classes)?[]:n.classes,attributes:l(n.attributes)?{}:n.attributes,styles:l(n.styles)?{}:n.styles}},lo=function(n,t,e){return uo((function(r,o){e(r,n,t)}))},mo=function(n,t,e){return function(n,t,e){var r=e.toString(),o=r.indexOf(")")+1,i=r.indexOf("("),u=r.substring(i+1,o-1).split(/,\s*/)
return n.toFunctionAnnotation=function(){return{name:t,parameters:ao(u.slice(0,1).concat(u.slice(3)))}},n}((function(r){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i]
var u=[r].concat(o)
return r.config({name:h(n)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+e)}),(function(n){var e=Array.prototype.slice.call(u,1)
return t.apply(void 0,[r,n.config,n.state].concat(e))}))}),e,t)},go=function(n){return{key:n,value:void 0}},po=function(t,e,r,o,i,u,c){var a=function(n){return fe(n,r)?n[r]():R.none()},f=re(i,(function(n,t){return mo(r,n,t)})),s=re(u,(function(n,t){return fo(n,t)})),l=n(n(n({},s),f),{revoke:x(go,r),config:function(n){var e=xr(r+"-config",t,n)
return{key:r,value:{config:e,me:l,configAsRaw:F((function(){return xr(r+"-config",t,n)})),initialConfig:n,state:c}}},schema:h(e),exhibit:function(n,t){return(e=a(n),r=ce(o,"exhibit"),i=function(n,e){return e(t,n.config,n.state)},e.isSome()&&r.isSome()?R.some(i(e.getOrDie(),r.getOrDie())):R.none()).getOrThunk((function(){return so({})}))
var e,r,i},name:h(r),handlers:function(n){return a(n).map((function(n){return ce(o,"events").getOr((function(){return{}}))(n.config,n.state)})).getOr({})}})
return l},vo={init:function(){return ho({readState:h("No State required")})}},ho=function(n){return n},bo=function(n){return Pr(n)},yo=fr([Tr("fields"),Tr("name"),Fr("active",{}),Fr("apis",{}),Fr("state",vo),Fr("extra",{})]),xo=function(n){var t=xr("Creating behaviour: "+n.name,yo,n)
return function(n,t,e,r,o,i){var u=fr(n),c=_r(t,[Rr("config",n)])
return po(u,c,t,e,r,o,i)}(t.fields,t.name,t.active,t.apis,t.extra,t.state)},wo=fr([Tr("branchKey"),Tr("branches"),Tr("name"),Fr("active",{}),Fr("apis",{}),Fr("state",vo),Fr("extra",{})]),So=h(void 0),Oo=xo({fields:Vr,name:"swapping",apis:Ce}),ko=function(n){var t=n
return{get:function(){return t},set:function(n){t=n}}},To=function(n){return n.dom.focus()},Co=function(n){return n.dom.blur()},Eo=function(n){return void 0===n&&(n=mt.fromDom(document)),R.from(n.dom.activeElement).map(mt.fromDom)},Mo=function(n){return Eo(jt(n)).filter((function(t){return n.dom.contains(t.dom)}))},Do=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),_o=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Ro=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],Fo=["undo","bold","italic","link","image","bullist","styleselect"],Io="formatChanged",Vo="orientationChanged",Bo="dropupDismissed",Ao=function(n){return n.dom.innerHTML},No=function(n,t){var e,r,o=Ct(n).dom,i=mt.fromDom(o.createDocumentFragment()),u=(e=t,(r=(o||document).createElement("div")).innerHTML=e,Dt(mt.fromDom(r)))
Bt(i,u),At(n),Vt(n,i)},Ho=function(n){return function(n,t){return mt.fromDom(n.dom.cloneNode(t))}(n,!1)},Po=function(n){return Ht(n)?"#shadow-root":function(n){var t=mt.fromTag("div"),e=mt.fromDom(n.dom.cloneNode(!0))
return Vt(t,e),Ao(t)}(Ho(n))},zo=function(n){return Po(n)},jo=Object.freeze({__proto__:null,events:function(n){return Yr([Jr(Kn(),(function(t,e){var r=n.channels,o=ne(r),i=e,u=function(n,t){return t.universal?n:z(n,(function(n){return A(t.channels,n)}))}(o,i)
P(u,(function(n){var e=r[n],o=e.schema,u=xr("channel["+n+"] data\nReceiver: "+zo(t.element),o,i.data)
e.onReceive(t,u)}))}))])}}),Lo="unknown";(function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"})(Ar||(Ar={}))
var $o=ko({}),Go=function(n,t,e){switch(ce($o.get(),n).orThunk((function(){var t=ne($o.get())
return Q(t,(function(t){return n.indexOf(t)>-1?R.some($o.get()[t]):R.none()}))})).getOr(Ar.NORMAL)){case Ar.NORMAL:return e(qo())
case Ar.LOGGING:var r=function(n,t){var e=[],r=(new Date).getTime()
return{logEventCut:function(n,t,r){e.push({outcome:"cut",target:t,purpose:r})},logEventStopped:function(n,t,r){e.push({outcome:"stopped",target:t,purpose:r})},logNoParent:function(n,t,r){e.push({outcome:"no-parent",target:t,purpose:r})},logEventNoHandlers:function(n,t){e.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,r){e.push({outcome:"response",purpose:r,target:t})},write:function(){var o=(new Date).getTime()
A(["mousemove","mouseover","mouseout",tt()],n)||console.log(n,{event:n,time:o-r,target:t.dom,sequence:H(e,(function(n){return A(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+zo(n.target)+")":n.outcome}))})}}}(n,t),o=e(r)
return r.write(),o
case Ar.STOP:return!0}},Uo=["alloy/data/Fields","alloy/debugging/Debugging"],Wo=function(n,t,e){return Go(n,t,e)},qo=h({logEventCut:p,logEventStopped:p,logNoParent:p,logEventNoHandlers:p,logEventResponse:p,write:p}),Xo=h([Tr("menu"),Tr("selectedMenu")]),Yo=h([Tr("item"),Tr("selectedItem")])
h(sr(Yo().concat(Xo())))
var Ko,Jo=h(sr(Yo())),Qo=Er("initSize",[Tr("numColumns"),Tr("numRows")]),Zo=function(n,t,e){return function(){var n=new Error
if(void 0!==n.stack){var t=n.stack.split("\n")
return $(t,(function(n){return n.indexOf("alloy")>0&&!N(Uo,(function(t){return n.indexOf(t)>-1}))})).getOr(Lo)}}(),Or(t,t,e,vr((function(n){return De.value((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
return n.apply(void 0,t)}))})))},ni=function(n){return Zo(0,n,Je(p))},ti=function(n){return Zo(0,n,Je(R.none))},ei=function(n){return Zo(0,n,{tag:"required",process:{}})},ri=function(n){return Zo(0,n,{tag:"required",process:{}})},oi=function(n,t){return kr(n,h(t))},ii=function(n){return kr(n,b)},ui=h(Qo),ci=[Cr("channels",hr(De.value,fr([ei("onReceive"),Fr("schema",dr())])))],ai=xo({fields:ci,name:"receiving",active:jo}),fi=function(n,t,e){var r=t.aria
r.update(n,r,e.get())},si=function(n,t,e){t.toggleClass.each((function(t){e.get()?we(n.element,t):Oe(n.element,t)}))},li=function(n,t,e){gi(n,t,e,!e.get())},di=function(n,t,e){e.set(!0),si(n,t,e),fi(n,t,e)},mi=function(n,t,e){e.set(!1),si(n,t,e),fi(n,t,e)},gi=function(n,t,e,r){(r?di:mi)(n,t,e)},pi=function(n,t,e){gi(n,t,e,t.selected)},vi=Object.freeze({__proto__:null,onLoad:pi,toggle:li,isOn:function(n,t,e){return e.get()},on:di,off:mi,set:gi}),hi=Object.freeze({__proto__:null,exhibit:function(){return so({})},events:function(n,t){var e,r,o,i=(e=n,r=t,o=li,co((function(n){o(n,e,r)}))),u=lo(n,t,pi)
return Yr(U([n.toggleOnExecute?[i]:[],[u]]))}}),bi=function(n,t,e){le(n.element,"aria-expanded",e)},yi=[Fr("selected",!1),Mr("toggleClass"),Fr("toggleOnExecute",!0),Ir("aria",{mode:"none"},Sr("mode",{pressed:[Fr("syncWithExpanded",!1),oi("update",(function(n,t,e){le(n.element,"aria-pressed",e),t.syncWithExpanded&&bi(n,t,e)}))],checked:[oi("update",(function(n,t,e){le(n.element,"aria-checked",e)}))],expanded:[oi("update",bi)],selected:[oi("update",(function(n,t,e){le(n.element,"aria-selected",e)}))],none:[oi("update",p)]}))],xi=xo({fields:yi,name:"toggling",active:hi,apis:vi,state:(Ko=!1,{init:function(){var n=ko(Ko)
return{get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(Ko)},readState:function(){return n.get()}}}})}),wi=function(n,t){return ai.config({channels:Hr(Io,{onReceive:function(e,r){r.command===n&&t(e,r.state)}})})},Si=function(n){return ai.config({channels:Hr(Vo,{onReceive:n})})},Oi=function(n,t){return{key:n,value:{onReceive:t}}},ki="tinymce-mobile",Ti=function(n){return ki+"-"+n},Ci=function(){var n=function(n,t){t.stop(),ft(n)}
return[Jr(Ln(),n),Jr(Zn(),n),to(Rn()),to(Vn())]},Ei=function(n,t){t.ignore||(To(n.element),t.onFocus(n))},Mi=Object.freeze({__proto__:null,focus:Ei,blur:function(n,t){t.ignore||Co(n.element)},isFocused:function(n){return function(n){var t=jt(n).dom
return n.dom===t.activeElement}(n.element)}}),Di=Object.freeze({__proto__:null,exhibit:function(n,t){var e=t.ignore?{}:{attributes:{tabindex:"-1"}}
return so(e)},events:function(n){return Yr([Jr(qn(),(function(t,e){Ei(t,n),e.stop()}))].concat(n.stopMousedown?[Jr(Vn(),(function(n,t){t.event.prevent()}))]:[]))}}),_i=[ni("onFocus"),Fr("stopMousedown",!1),Fr("ignore",!1)],Ri=xo({fields:_i,name:"focusing",active:Di,apis:Mi}),Fi=function(n){return void 0!==n.style&&m(n.style.getPropertyValue)},Ii=function(n,t,e){if(!u(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e)
Fi(n)&&n.style.setProperty(t,e)},Vi=function(n,t,e){var r=n.dom
Ii(r,t,e)},Bi=function(n,t){var e=n.dom
ee(t,(function(n,t){Ii(e,t,n)}))},Ai=function(n,t){var e=n.dom,r=window.getComputedStyle(e).getPropertyValue(t)
return""!==r||Gt(n)?r:Ni(e,t)},Ni=function(n,t){return Fi(n)?n.style.getPropertyValue(t):""},Hi=function(n,t){var e=n.dom,r=Ni(e,t)
return R.from(r).filter((function(n){return n.length>0}))},Pi=function(n,t){(function(n,t){Fi(n)&&n.style.removeProperty(t)})(n.dom,t),jr(ge(n,"style").map(on),"")&&ve(n,"style")},zi=function(n){return n.dom.offsetWidth},ji=function(n,t){var e=function(e){var r=t(e)
if(r<=0||null===r){var o=Ai(e,n)
return parseFloat(o)||0}return r},r=function(n,t){return L(t,(function(t,e){var r=Ai(n,e),o=void 0===r?0:parseInt(r,10)
return isNaN(o)?t:t+o}),0)}
return{set:function(t,e){if(!g(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e)
var r=t.dom
Fi(r)&&(r.style[n]=e+"px")},get:e,getOuter:e,aggregate:r,max:function(n,t,e){var o=r(n,e)
return t>o?t-o:0}}},Li=ji("height",(function(n){var t=n.dom
return Gt(n)?t.getBoundingClientRect().height:t.offsetHeight})),$i=function(n){return Li.get(n)},Gi=function(n,t,e){return z(function(n,t){for(var e=m(t)?t:C,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=mt.fromDom(i)
if(o.push(u),!0===e(u))break
r=i}return o}(n,e),t)},Ui=function(n,t){return z(function(n){return Mt(n).map(Dt).map((function(t){return z(t,(function(t){return!bt(n,t)}))})).getOr([])}(n),t)},Wi=function(n,t,e){return Gi(n,(function(n){return gt(n,t)}),e)},qi=function(n,t){return Ui(n,(function(n){return gt(n,t)}))},Xi=function(n,t){return vt(t,n)}
function Yi(n,t,e,r,o){return n(e,r)?R.some(e):m(o)&&o(e)?R.none():t(e,r,o)}var Ki,Ji=function(n,t,e){for(var r=n.dom,o=m(e)?e:C;r.parentNode;){r=r.parentNode
var i=mt.fromDom(r)
if(t(i))return R.some(i)
if(o(i))break}return R.none()},Qi=function(n){return ht(n)},Zi=function(n,t,e){return Ji(n,(function(n){return gt(n,t)}),e)},nu=function(n,t){return ht(t,n)},tu=function(n,t,e){return Yi((function(n,t){return gt(n,t)}),Zi,n,t,e)},eu=[8],ru=[9],ou=[13],iu=[27],uu=[32],cu=[37],au=[38],fu=[39],su=[40],lu=function(n,t,e){var r=X(n.slice(0,t)),o=X(n.slice(t+1))
return $(r.concat(o),e)},du=function(n,t,e){var r=X(n.slice(0,t))
return $(r,e)},mu=function(n,t,e){var r=n.slice(0,t),o=n.slice(t+1)
return $(o.concat(r),e)},gu=function(n,t,e){var r=n.slice(t+1)
return $(r,e)},pu=function(n){return function(t){var e=t.raw
return A(n,e.which)}},vu=function(n){return function(t){return q(n,(function(n){return n(t)}))}},hu=function(n){return!0===n.raw.shiftKey},bu=function(n){return!0===n.raw.ctrlKey},yu=O(hu),xu=function(n,t){return{matches:n,classification:t}},wu=function(n,t,e,r){var o=n+t
return o>r?e:o<e?r:o},Su=function(n,t,e){return Math.min(Math.max(n,t),e)},Ou=function(n,t,e,r){var o=Xi(n.element,"."+t.highlightClass)
P(o,(function(e){N(r,(function(n){return n.element===e}))||(Oe(e,t.highlightClass),n.getSystem().getByDom(e).each((function(e){t.onDehighlight(n,e),ct(e,ut())})))}))},ku=function(n,t,e,r){Ou(n,t,0,[r]),Tu(n,t,e,r)||(we(r.element,t.highlightClass),t.onHighlight(n,r),ct(r,it()))},Tu=function(n,t,e,r){return ke(r.element,t.highlightClass)},Cu=function(n,t,e,r){var o=Xi(n.element,"."+t.itemClass)
return R.from(o[r]).fold((function(){return De.error(new Error("No element found with index "+r))}),n.getSystem().getByDom)},Eu=function(n,t,e){return nu(n.element,"."+t.itemClass).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},Mu=function(n,t,e){var r=Xi(n.element,"."+t.itemClass)
return(r.length>0?R.some(r[r.length-1]):R.none()).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},Du=function(n,t,e,r){var o=Xi(n.element,"."+t.itemClass)
return G(o,(function(n){return ke(n,t.highlightClass)})).bind((function(t){var e=wu(t,r,0,o.length-1)
return n.getSystem().getByDom(o[e]).toOptional()}))},_u=function(n,t,e){var r=Xi(n.element,"."+t.itemClass)
return Lr(H(r,(function(t){return n.getSystem().getByDom(t).toOptional()})))},Ru=Object.freeze({__proto__:null,dehighlightAll:function(n,t,e){return Ou(n,t,0,[])},dehighlight:function(n,t,e,r){Tu(n,t,e,r)&&(Oe(r.element,t.highlightClass),t.onDehighlight(n,r),ct(r,ut()))},highlight:ku,highlightFirst:function(n,t,e){Eu(n,t).each((function(r){ku(n,t,e,r)}))},highlightLast:function(n,t,e){Mu(n,t).each((function(r){ku(n,t,e,r)}))},highlightAt:function(n,t,e,r){Cu(n,t,e,r).fold((function(n){throw n}),(function(r){ku(n,t,e,r)}))},highlightBy:function(n,t,e,r){var o=_u(n,t)
$(o,r).each((function(r){ku(n,t,e,r)}))},isHighlighted:Tu,getHighlighted:function(n,t,e){return nu(n.element,"."+t.highlightClass).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},getFirst:Eu,getLast:Mu,getPrevious:function(n,t,e){return Du(n,t,0,-1)},getNext:function(n,t,e){return Du(n,t,0,1)},getCandidates:_u}),Fu=[Tr("highlightClass"),Tr("itemClass"),ni("onHighlight"),ni("onDehighlight")],Iu=xo({fields:Fu,name:"highlighting",apis:Ru}),Vu=function(n,t,e){t.exists((function(n){return e.exists((function(t){return bt(t,n)}))}))||at(n,ot(),{prevFocus:t,newFocus:e})},Bu=function(){var n=function(n){return Mo(n.element)}
return{get:n,set:function(t,e){var r=n(t)
t.getSystem().triggerFocus(e,t.element)
var o=n(t)
Vu(t,r,o)}}},Au=function(){var n=function(n){return Iu.getHighlighted(n).map((function(n){return n.element}))}
return{get:n,set:function(t,e){var r=n(t)
t.getSystem().getByDom(e).fold(p,(function(n){Iu.highlight(t,n)}))
var o=n(t)
Vu(t,r,o)}}};(function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"})(Ki||(Ki={}))
var Nu=function(n,t,e,r,o){var i=function(n,t,e,r,o){var i,u,c=e(n,t,r,o)
return(i=c,u=t.event,$(i,(function(n){return n.matches(u)})).map((function(n){return n.classification}))).bind((function(e){return e(n,t,r,o)}))},u={schema:function(){return n.concat([Fr("focusManager",Bu()),Ir("focusInside","onFocus",vr((function(n){return A(["onFocus","onEnterOrSpace","onApi"],n)?De.value(n):De.error("Invalid value for focusInside")}))),oi("handler",u),oi("state",t),oi("sendFocusIn",o)])},processKey:i,toEvents:function(n,t){var u=n.focusInside!==Ki.OnFocusMode?R.none():o(n).map((function(e){return Jr(qn(),(function(r,o){e(r,n,t),o.stop()}))})),c=[Jr(Hn(),(function(r,u){i(r,u,e,n,t).fold((function(){(function(e,r){var i=pu(uu.concat(ou))(r.event)
n.focusInside===Ki.OnEnterOrSpaceMode&&i&&Ur(e,r)&&o(n).each((function(o){o(e,n,t),r.stop()}))})(r,u)}),(function(n){u.stop()}))})),Jr(Pn(),(function(e,o){i(e,o,r,n,t).each((function(n){o.stop()}))}))]
return Yr(u.toArray().concat(c))}}
return u},Hu=function(n){var t=[Mr("onEscape"),Mr("onEnter"),Fr("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Fr("firstTabstop",0),Fr("useTabstopAt",E),Mr("visibilitySelector")].concat([n]),e=function(n,t){var e=n.visibilitySelector.bind((function(n){return tu(t,n)})).getOr(t)
return $i(e)>0},r=function(n,t,r){(function(n,t){var r=Xi(n.element,t.selector),o=z(r,(function(n){return e(t,n)}))
return R.from(o[t.firstTabstop])})(n,t).each((function(e){t.focusManager.set(n,e)}))},o=function(n,t,r,o,i){return i(t,r,(function(n){return function(n,t){return e(n,t)&&n.useTabstopAt(t)}(o,n)})).fold((function(){return o.cyclic?R.some(!0):R.none()}),(function(t){return o.focusManager.set(n,t),R.some(!0)}))},i=function(n,t,e,r){var i=Xi(n.element,e.selector)
return function(n,t){return t.focusManager.get(n).bind((function(n){return tu(n,t.selector)}))}(n,e).bind((function(t){return G(i,x(bt,t)).bind((function(t){return o(n,i,t,e,r)}))}))},u=h([xu(vu([hu,pu(ru)]),(function(n,t,e){var r=e.cyclic?lu:du
return i(n,0,e,r)})),xu(pu(ru),(function(n,t,e){var r=e.cyclic?mu:gu
return i(n,0,e,r)})),xu(pu(iu),(function(n,t,e){return e.onEscape.bind((function(e){return e(n,t)}))})),xu(vu([yu,pu(ou)]),(function(n,t,e){return e.onEnter.bind((function(e){return e(n,t)}))}))]),c=h([])
return Nu(t,vo.init,u,c,(function(){return R.some(r)}))},Pu=Hu(kr("cyclic",C)),zu=Hu(kr("cyclic",E)),ju=function(n){return"input"===xt(n)&&"radio"!==me(n,"type")||"textarea"===xt(n)},Lu=function(n,t,e){return ju(e)&&pu(uu)(t.event)?R.none():function(n,t,e){return st(n,e,Jn()),R.some(!0)}(n,0,e)},$u=function(n,t){return R.some(!0)},Gu=[Fr("execute",Lu),Fr("useSpace",!1),Fr("useEnter",!0),Fr("useControlEnter",!1),Fr("useDown",!1)],Uu=function(n,t,e){return e.execute(n,t,n.element)},Wu=Nu(Gu,vo.init,(function(n,t,e,r){var o=e.useSpace&&!ju(n.element)?uu:[],i=e.useEnter?ou:[],u=e.useDown?su:[],c=o.concat(i).concat(u)
return[xu(pu(c),Uu)].concat(e.useControlEnter?[xu(vu([bu,pu(ou)]),Uu)]:[])}),(function(n,t,e,r){return e.useSpace&&!ju(n.element)?[xu(pu(uu),$u)]:[]}),(function(){return R.none()})),qu=function(n){var t=ko(R.none()),e=function(){return t.get().each(n)}
return{clear:function(){e(),t.set(R.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(n){e(),t.set(R.some(n))}}},Xu=function(){var t=qu((function(n){return n.destroy()}))
return n(n({},t),{run:function(n){return t.get().each(n)}})},Yu=function(){var t=qu(p)
return n(n({},t),{on:function(n){return t.get().each(n)}})},Ku=function(){var n=Yu()
return ho({readState:function(){return n.get().map((function(n){return{numRows:String(n.numRows),numColumns:String(n.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,e){n.set({numRows:t,numColumns:e})},getNumRows:function(){return n.get().map((function(n){return n.numRows}))},getNumColumns:function(){return n.get().map((function(n){return n.numColumns}))}})},Ju=Object.freeze({__proto__:null,flatgrid:Ku,init:function(n){return n.state(n)}}),Qu=function(n,t){return function(e){return"rtl"===Zu(e)?t:n}},Zu=function(n){return"rtl"===Ai(n,"direction")?"rtl":"ltr"},nc=function(n){return function(t,e,r,o){var i=n(t.element)
return oc(i,t,e,r,o)}},tc=function(n,t){var e=Qu(n,t)
return nc(e)},ec=function(n,t){var e=Qu(t,n)
return nc(e)},rc=function(n){return function(t,e,r,o){return oc(n,t,e,r,o)}},oc=function(n,t,e,r,o){return r.focusManager.get(t).bind((function(e){return n(t.element,e,r,o)})).map((function(n){return r.focusManager.set(t,n),!0}))},ic=rc,uc=rc,cc=rc,ac=function(n){return!function(n){return n.offsetWidth<=0&&n.offsetHeight<=0}(n.dom)},fc=function(n,t,e){var r=Xi(n,e)
return function(n,t){return G(n,t).map((function(t){return{index:t,candidates:n}}))}(z(r,ac),(function(n){return bt(n,t)}))},sc=function(n,t){return G(n,(function(n){return bt(t,n)}))},lc=function(n,t,e,r){return r(Math.floor(t/e),t%e).bind((function(t){var r=t.row*e+t.column
return r>=0&&r<n.length?R.some(n[r]):R.none()}))},dc=function(n,t,e,r,o){return lc(n,t,r,(function(t,i){var u=t===e-1?n.length-t*r:r,c=wu(i,o,0,u-1)
return R.some({row:t,column:c})}))},mc=function(n,t,e,r,o){return lc(n,t,r,(function(t,i){var u=wu(t,o,0,e-1),c=u===e-1?n.length-u*r:r,a=Su(i,0,c-1)
return R.some({row:u,column:a})}))},gc=[Tr("selector"),Fr("execute",Lu),ti("onEscape"),Fr("captureTab",!1),ui()],pc=function(n,t,e){nu(n.element,t.selector).each((function(e){t.focusManager.set(n,e)}))},vc=function(n){return function(t,e,r,o){return fc(t,e,r.selector).bind((function(t){return n(t.candidates,t.index,o.getNumRows().getOr(r.initSize.numRows),o.getNumColumns().getOr(r.initSize.numColumns))}))}},hc=function(n,t,e){return e.captureTab?R.some(!0):R.none()},bc=vc((function(n,t,e,r){return dc(n,t,e,r,-1)})),yc=vc((function(n,t,e,r){return dc(n,t,e,r,1)})),xc=vc((function(n,t,e,r){return mc(n,t,e,r,-1)})),wc=vc((function(n,t,e,r){return mc(n,t,e,r,1)})),Sc=h([xu(pu(cu),tc(bc,yc)),xu(pu(fu),ec(bc,yc)),xu(pu(au),ic(xc)),xu(pu(su),uc(wc)),xu(vu([hu,pu(ru)]),hc),xu(vu([yu,pu(ru)]),hc),xu(pu(iu),(function(n,t,e){return e.onEscape(n,t)})),xu(pu(uu.concat(ou)),(function(n,t,e,r){return function(n,t){return t.focusManager.get(n).bind((function(n){return tu(n,t.selector)}))}(n,e).bind((function(r){return e.execute(n,t,r)}))}))]),Oc=h([xu(pu(uu),$u)]),kc=Nu(gc,Ku,Sc,Oc,(function(){return R.some(pc)})),Tc=function(n,t,e,r){var o=function(n,t,e){var i,u=wu(t,r,0,e.length-1)
return u===n?R.none():(i=e[u],"button"===xt(i)&&"disabled"===me(i,"disabled")?o(n,u,e):R.from(e[u]))}
return fc(n,e,t).bind((function(n){var t=n.index,e=n.candidates
return o(t,t,e)}))},Cc=[Tr("selector"),Fr("getInitial",R.none),Fr("execute",Lu),ti("onEscape"),Fr("executeOnMove",!1),Fr("allowVertical",!0)],Ec=function(n,t,e){return function(n,t){return t.focusManager.get(n).bind((function(n){return tu(n,t.selector)}))}(n,e).bind((function(r){return e.execute(n,t,r)}))},Mc=function(n,t,e){t.getInitial(n).orThunk((function(){return nu(n.element,t.selector)})).each((function(e){t.focusManager.set(n,e)}))},Dc=function(n,t,e){return Tc(n,e.selector,t,-1)},_c=function(n,t,e){return Tc(n,e.selector,t,1)},Rc=function(n){return function(t,e,r,o){return n(t,e,r,o).bind((function(){return r.executeOnMove?Ec(t,e,r):R.some(!0)}))}},Fc=function(n,t,e){return e.onEscape(n,t)},Ic=h([xu(pu(uu),$u)]),Vc=Nu(Cc,vo.init,(function(n,t,e,r){var o=cu.concat(e.allowVertical?au:[]),i=fu.concat(e.allowVertical?su:[])
return[xu(pu(o),Rc(tc(Dc,_c))),xu(pu(i),Rc(ec(Dc,_c))),xu(pu(ou),Ec),xu(pu(uu),Ec),xu(pu(iu),Fc)]}),Ic,(function(){return R.some(Mc)})),Bc=function(n,t,e){return R.from(n[t]).bind((function(n){return R.from(n[e]).map((function(n){return{rowIndex:t,columnIndex:e,cell:n}}))}))},Ac=function(n,t,e,r){var o=n[t].length,i=wu(e,r,0,o-1)
return Bc(n,t,i)},Nc=function(n,t,e,r){var o=wu(e,r,0,n.length-1),i=n[o].length,u=Su(t,0,i-1)
return Bc(n,o,u)},Hc=function(n,t,e,r){var o=n[t].length,i=Su(e+r,0,o-1)
return Bc(n,t,i)},Pc=function(n,t,e,r){var o=Su(e+r,0,n.length-1),i=n[o].length,u=Su(t,0,i-1)
return Bc(n,o,u)},zc=[Er("selectors",[Tr("row"),Tr("cell")]),Fr("cycles",!0),Fr("previousSelector",R.none),Fr("execute",Lu)],jc=function(n,t,e){t.previousSelector(n).orThunk((function(){var e=t.selectors
return nu(n.element,e.cell)})).each((function(e){t.focusManager.set(n,e)}))},Lc=function(n,t){return function(e,r,o){var i=o.cycles?n:t
return tu(r,o.selectors.row).bind((function(n){var t=Xi(n,o.selectors.cell)
return sc(t,r).bind((function(t){var r=Xi(e,o.selectors.row)
return sc(r,n).bind((function(n){var e=function(n,t){return H(n,(function(n){return Xi(n,t.selectors.cell)}))}(r,o)
return i(e,n,t).map((function(n){return n.cell}))}))}))}))}},$c=Lc((function(n,t,e){return Ac(n,t,e,-1)}),(function(n,t,e){return Hc(n,t,e,-1)})),Gc=Lc((function(n,t,e){return Ac(n,t,e,1)}),(function(n,t,e){return Hc(n,t,e,1)})),Uc=Lc((function(n,t,e){return Nc(n,e,t,-1)}),(function(n,t,e){return Pc(n,e,t,-1)})),Wc=Lc((function(n,t,e){return Nc(n,e,t,1)}),(function(n,t,e){return Pc(n,e,t,1)})),qc=h([xu(pu(cu),tc($c,Gc)),xu(pu(fu),ec($c,Gc)),xu(pu(au),ic(Uc)),xu(pu(su),uc(Wc)),xu(pu(uu.concat(ou)),(function(n,t,e){return Mo(n.element).bind((function(r){return e.execute(n,t,r)}))}))]),Xc=h([xu(pu(uu),$u)]),Yc=Nu(zc,vo.init,qc,Xc,(function(){return R.some(jc)})),Kc=[Tr("selector"),Fr("execute",Lu),Fr("moveOnTab",!1)],Jc=function(n,t,e){return e.focusManager.get(n).bind((function(r){return e.execute(n,t,r)}))},Qc=function(n,t,e){nu(n.element,t.selector).each((function(e){t.focusManager.set(n,e)}))},Zc=function(n,t,e){return Tc(n,e.selector,t,-1)},na=function(n,t,e){return Tc(n,e.selector,t,1)},ta=h([xu(pu(au),cc(Zc)),xu(pu(su),cc(na)),xu(vu([hu,pu(ru)]),(function(n,t,e,r){return e.moveOnTab?cc(Zc)(n,t,e,r):R.none()})),xu(vu([yu,pu(ru)]),(function(n,t,e,r){return e.moveOnTab?cc(na)(n,t,e,r):R.none()})),xu(pu(ou),Jc),xu(pu(uu),Jc)]),ea=h([xu(pu(uu),$u)]),ra=Nu(Kc,vo.init,ta,ea,(function(){return R.some(Qc)})),oa=[ti("onSpace"),ti("onEnter"),ti("onShiftEnter"),ti("onLeft"),ti("onRight"),ti("onTab"),ti("onShiftTab"),ti("onUp"),ti("onDown"),ti("onEscape"),Fr("stopSpaceKeyup",!1),Mr("focusIn")],ia=Nu(oa,vo.init,(function(n,t,e){return[xu(pu(uu),e.onSpace),xu(vu([yu,pu(ou)]),e.onEnter),xu(vu([hu,pu(ou)]),e.onShiftEnter),xu(vu([hu,pu(ru)]),e.onShiftTab),xu(vu([yu,pu(ru)]),e.onTab),xu(pu(au),e.onUp),xu(pu(su),e.onDown),xu(pu(cu),e.onLeft),xu(pu(fu),e.onRight),xu(pu(uu),e.onSpace),xu(pu(iu),e.onEscape)]}),(function(n,t,e){return e.stopSpaceKeyup?[xu(pu(uu),$u)]:[]}),(function(n){return n.focusIn})),ua=Pu.schema(),ca=zu.schema(),aa=Vc.schema(),fa=kc.schema(),sa=Yc.schema(),la=Wu.schema(),da=ra.schema(),ma=ia.schema(),ga=function(n){var t=xr("Creating behaviour: "+n.name,wo,n)
return function(n,t,e,r,o,i){var u=n,c=_r(t,[Dr("config",n)])
return po(u,c,t,e,r,o,i)}(Sr(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)}({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:ua,cyclic:ca,flow:aa,flatgrid:fa,matrix:sa,execution:la,menu:da,special:ma}),name:"keying",active:{events:function(n,t){return n.handler.toEvents(n,t)}},apis:{focusIn:function(n,t,e){t.sendFocusIn(t).fold((function(){n.getSystem().triggerFocus(n.element,n.element)}),(function(r){r(n,t,e)}))},setGridSize:function(n,t,e,r,o){!function(n){return fe(n,"setGridSize")}(e)?console.error("Layout does not support setGridSize"):e.setGridSize(r,o)}},state:Ju}),pa=function(n,t){return e=n,r={},o=H(t,(function(t){return e=t.name(),r="Cannot configure "+t.name()+" for "+n,Or(e,e,{tag:"option",process:{}},rr((function(n){return Pe("The field: "+e+" is forbidden. "+r)})))
var e,r})).concat([kr("dump",b)]),Ir(e,r,sr(o))
var e,r,o},va=function(n){return n.dump},ha=function(t,e){return n(n({},bo(e)),t.dump)},ba=pa,ya=ha,xa="placeholder",wa=Br([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Sa=function(n){return ae(n,"uiType")},Oa=function(n,t,e,r){return Sa(e)&&e.uiType===xa?function(n,t,e,r){return n.exists((function(n){return n!==e.owner}))?wa.single(!0,h(e)):ce(r,e.name).fold((function(){throw new Error("Unknown placeholder component: "+e.name+"\nKnown: ["+ne(r)+"]\nNamespace: "+n.getOr("none")+"\nSpec: "+JSON.stringify(e,null,2))}),(function(n){return n.replace()}))}(n,0,e,r):wa.single(!1,h(e))},ka=function(t,e,r,o){return Oa(t,0,r,o).fold((function(i,u){var c=Sa(r)?u(e,r.config,r.validated):u(e),a=ce(c,"components").getOr([]),f=W(a,(function(n){return ka(t,e,n,o)}))
return[n(n({},c),{components:f})]}),(function(n,t){if(Sa(r)){var o=t(e,r.config,r.validated)
return r.validated.preprocess.getOr(b)(o)}return t(e)}))},Ta=function(n,t,e,r){var o=re(r,(function(n,t){return r=n,o=!1,{name:h(e=t),required:function(){return r.fold((function(n,t){return n}),(function(n,t){return n}))},used:function(){return o},replace:function(){if(o)throw new Error("Trying to use the same placeholder more than once: "+e)
return o=!0,r}}
var e,r,o})),i=function(n,t,e,r){return W(e,(function(e){return ka(n,t,e,r)}))}(n,t,e,o)
return ee(o,(function(e){if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),i},Ca=wa.single,Ea=wa.multiple,Ma=h(xa),Da=0,_a=function(n){var t=(new Date).getTime()
return n+"_"+Math.floor(1e9*Math.random())+ ++Da+String(t)},Ra=Br([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Fa=Fr("factory",{sketch:b}),Ia=Fr("schema",[]),Va=Tr("name"),Ba=Or("pname","pname",Ke((function(n){return"<alloy."+_a(n.name)+">"})),dr()),Aa=kr("schema",(function(){return[Mr("preprocess")]})),Na=Fr("defaults",h({})),Ha=Fr("overrides",h({})),Pa=sr([Fa,Ia,Va,Ba,Na,Ha]),za=sr([Fa,Ia,Va,Na,Ha]),ja=sr([Fa,Ia,Va,Ba,Na,Ha]),La=sr([Fa,Aa,Va,Tr("unit"),Ba,Na,Ha]),$a=function(n){var t=function(n){return n.name}
return n.fold(t,t,t,t)},Ga=function(n,t){return function(e){var r=xr("Converting part type",t,e)
return n(r)}},Ua=Ga(Ra.required,Pa)
Ga(Ra.external,za)
var Wa=Ga(Ra.optional,ja),qa=Ga(Ra.group,La),Xa=h("entirety"),Ya=function(n,t,e,r){return Xe(t.defaults(n,e,r),e,{uid:n.partUids[t.name]},t.overrides(n,e,r))},Ka=function(t,e){var r={}
return P(e,(function(e){(function(n){return n.fold(R.some,R.none,R.some,R.some)})(e).each((function(e){var o=Ja(t,e.pname)
r[e.name]=function(r){var i=xr("Part: "+e.name+" in "+t,sr(e.schema),r)
return n(n({},o),{config:r,validated:i})}}))})),r},Ja=function(n,t){return{uiType:Ma(),owner:n,name:t}},Qa=function(n,t,e){return function(n,t,e){var r={},o={}
return P(e,(function(n){n.fold((function(n){r[n.pname]=Ca(!0,(function(t,e,r){return n.factory.sketch(Ya(t,n,e,r))}))}),(function(n){var e=t.parts[n.name]
o[n.name]=h(n.factory.sketch(Ya(t,n,e[Xa()]),e))}),(function(n){r[n.pname]=Ca(!1,(function(t,e,r){return n.factory.sketch(Ya(t,n,e,r))}))}),(function(n){r[n.pname]=Ea(!0,(function(t,e,r){var o=t[n.name]
return H(o,(function(e){return n.factory.sketch(Xe(n.defaults(t,e,r),e,n.overrides(t,e)))}))}))}))})),{internals:h(r),externals:h(o)}}(0,t,e)},Za=function(n,t,e){return Ta(R.some(n),t,t.components,e)},nf=function(n,t,e){var r=t.partUids[e]
return n.getSystem().getByUid(r).toOptional()},tf=function(n,t,e){return nf(n,t,e).getOrDie("Could not find part: "+e)},ef=function(n,t){var e=function(n){return H(n,$a)}(t)
return Pr(H(e,(function(t){return{key:t,value:n+"-"+t}})))},rf=function(n){return Or("partUids","partUids",Qe((function(t){return ef(t.uid,n)})),dr())},of=_a("alloy-premade"),uf=function(n){return Hr(of,n)},cf=function(n){return function(n,t){var e=t.toString(),r=e.indexOf(")")+1,o=e.indexOf("("),i=e.substring(o+1,r-1).split(/,\s*/)
return n.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:ao(i.slice(1))}},n}((function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o]
return n.apply(void 0,e([t.getApis(),t],r,!1))}),n)},af=h("alloy-id-"),ff=h("data-alloy-id"),sf=af(),lf=ff(),df=function(n,t){Object.defineProperty(n.dom,lf,{value:t,writable:!0})},mf=function(n){var t=St(n)?n.dom[lf]:null
return R.from(t)},gf=function(n){return _a(n)},pf=function(n,t,e,r,o){var i=function(n,t){return(n.length>0?[Er("parts",n)]:[]).concat([Tr("uid"),Fr("dom",{}),Fr("components",[]),ii("originalSpec"),Fr("debug.sketcher",{})]).concat(t)}(r,o)
return xr(n+" [SpecSchema]",fr(i.concat(t)),e)},vf=function(n,t,e,r,o){var i=hf(o),u=function(n){return W(n,(function(n){return n.fold(R.none,R.some,R.none,R.none).map((function(n){return Er(n.name,n.schema.concat([ii(Xa())]))})).toArray()}))}(e),c=rf(e),a=pf(n,t,i,u,[c]),f=Qa(0,a,e)
return r(a,Za(n,a,f.internals()),i,f.externals())},hf=function(t){return function(n){return ae(n,"uid")}(t)?t:n(n({},t),{uid:gf("uid")})},bf=fr([Tr("name"),Tr("factory"),Tr("configFields"),Fr("apis",{}),Fr("extraApis",{})]),yf=fr([Tr("name"),Tr("factory"),Tr("configFields"),Tr("partFields"),Fr("apis",{}),Fr("extraApis",{})]),xf=function(t){var e=xr("Sketcher for "+t.name,bf,t),r=re(e.apis,cf),o=re(e.extraApis,(function(n,t){return fo(n,t)}))
return n(n({name:e.name,configFields:e.configFields,sketch:function(n){return function(n,t,e,r){var o=hf(r)
return e(pf(n,t,o,[],[]),o)}(e.name,e.configFields,e.factory,n)}},r),o)},wf=function(t){var e=xr("Sketcher for "+t.name,yf,t),r=Ka(e.name,e.partFields),o=re(e.apis,cf),i=re(e.extraApis,(function(n,t){return fo(n,t)}))
return n(n({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(n){return vf(e.name,e.configFields,e.partFields,e.factory,n)},parts:r},o),i)},Sf=xf({name:"Button",factory:function(t){var e,r=(e=t.action,Yr(U([e.map((function(n){return co((function(t,e){n(t),e.stop()}))})).toArray(),Ci()]))),o=t.dom.tag,i=function(n){return ce(t.dom,"attributes").bind((function(t){return ce(t,n)}))}
return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:ya(t.buttonBehaviours,[Ri.config({}),ga.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"===o){var t=i("type").getOr("button"),e=i("role").map((function(n){return{role:n}})).getOr({})
return n({type:t},e)}return{role:i("role").getOr("button")}}()},eventOrder:t.eventOrder}},configFields:[Fr("uid",void 0),Tr("dom"),Fr("components",[]),ba("buttonBehaviours",[Ri,ga]),Mr("action"),Mr("role"),Fr("eventOrder",{})]}),Of=Object.freeze({__proto__:null,events:function(){return Yr([Kr(Gn(),E)])},exhibit:function(){return so({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),kf=xo({fields:[],name:"unselecting",active:Of}),Tf=function(t){var e=mt.fromHtml(t),r=Dt(e),o=function(t){var e=void 0!==t.dom.attributes?t.dom.attributes:[]
return L(e,(function(t,e){var r
return"class"===e.name?t:n(n({},t),((r={})[e.name]=e.value,r))}),{})}(e),i=function(n){return Array.prototype.slice.call(n.dom.classList,0)}(e),u=0===r.length?{}:{innerHtml:Ao(e)}
return n({tag:xt(e),classes:i,attributes:o},u)},Cf=function(n){var t,e=(t={prefix:ki},n.replace(/\$\{([^{}]*)\}/g,(function(n,e){var r=t[e]
return function(n){var t=typeof n
return"string"===t||"number"===t}(r)?r.toString():n})))
return Tf(e)},Ef=function(n){return{dom:Cf(n)}},Mf=function(n){return bo([xi.config({toggleClass:Ti("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),wi(n,(function(n,t){(t?xi.on:xi.off)(n)}))])},Df=function(n,t,e,r){var o=Mf(e)
return Rf(t,r,o,n)},_f=function(n,t){var e=t.ui.registry.getAll().icons
return R.from(e[n]).fold((function(){return Cf('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+n+' ${prefix}-icon"></span>')}),(function(n){return Cf('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item">'+n+"</span>")}))},Rf=function(n,t,e,r){return Sf.sketch({dom:_f(n,r),action:t,buttonBehaviours:Xe(bo([kf.config({})]),e)})},Ff=Wa({schema:[Tr("dom")],name:"label"}),If=function(n){return Wa({name:n+"-edge",overrides:function(t){return t.model.manager.edgeActions[n].fold((function(){return{}}),(function(n){return{events:Yr([Qr(Rn(),(function(t,e,r){return n(t,r)}),[t]),Qr(Vn(),(function(t,e,r){return n(t,r)}),[t]),Qr(Bn(),(function(t,e,r){r.mouseIsDown.get()&&n(t,r)}),[t])])}}))}})},Vf=If("top-left"),Bf=If("top"),Af=If("top-right"),Nf=If("right"),Hf=If("bottom-right"),Pf=If("bottom"),zf=If("bottom-left"),jf=[Ff,If("left"),Nf,Bf,Pf,Vf,Af,zf,Hf,Ua({name:"thumb",defaults:h({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:Yr([no(Rn(),n,"spectrum"),no(Fn(),n,"spectrum"),no(In(),n,"spectrum"),no(Vn(),n,"spectrum"),no(Bn(),n,"spectrum"),no(An(),n,"spectrum")])}}}),Ua({schema:[kr("mouseIsDown",(function(){return ko(!1)}))],name:"spectrum",overrides:function(n){var t=n.model.manager,e=function(e,r){return t.getValueFromEvent(r).map((function(r){return t.setValueFrom(e,n,r)}))}
return{behaviours:bo([ga.config({mode:"special",onLeft:function(e){return t.onLeft(e,n)},onRight:function(e){return t.onRight(e,n)},onUp:function(e){return t.onUp(e,n)},onDown:function(e){return t.onDown(e,n)}}),Ri.config({})]),events:Yr([Jr(Rn(),e),Jr(Fn(),e),Jr(Vn(),e),Jr(Bn(),(function(t,r){n.mouseIsDown.get()&&e(t,r)}))])}}})],Lf=function(n,t,e){t.store.manager.onLoad(n,t,e)},$f=function(n,t,e){t.store.manager.onUnload(n,t,e)},Gf=Object.freeze({__proto__:null,onLoad:Lf,onUnload:$f,setValue:function(n,t,e,r){t.store.manager.setValue(n,t,e,r)},getValue:function(n,t,e){return t.store.manager.getValue(n,t,e)},getState:function(n,t,e){return e}}),Uf=Object.freeze({__proto__:null,events:function(n,t){var e=n.resetOnDom?[oo((function(e,r){Lf(e,n,t)})),io((function(e,r){$f(e,n,t)}))]:[lo(n,t,Lf)]
return Yr(e)}}),Wf=function(){var n=ko(null)
return ho({set:n.set,get:n.get,isNotSet:function(){return null===n.get()},clear:function(){n.set(null)},readState:function(){return{mode:"memory",value:n.get()}}})},qf=function(){var t=ko({}),e=ko({})
return ho({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return ce(t.get(),n).orThunk((function(){return ce(e.get(),n)}))},update:function(r){var o=t.get(),i=e.get(),u={},c={}
P(r,(function(n){u[n.value]=n,ce(n,"meta").each((function(t){ce(t,"text").each((function(t){c[t]=n}))}))})),t.set(n(n({},o),u)),e.set(n(n({},i),c))},clear:function(){t.set({}),e.set({})}})},Xf=Object.freeze({__proto__:null,memory:Wf,dataset:qf,manual:function(){return ho({readState:p})},init:function(n){return n.store.manager.state(n)}}),Yf=function(n,t,e,r){var o=t.store
e.update([r]),o.setValue(n,r),t.onSetValue(n,r)},Kf=[Mr("initialValue"),Tr("getFallbackEntry"),Tr("getDataKey"),Tr("setValue"),oi("manager",{setValue:Yf,getValue:function(n,t,e){var r=t.store,o=r.getDataKey(n)
return e.lookup(o).getOrThunk((function(){return r.getFallbackEntry(o)}))},onLoad:function(n,t,e){t.store.initialValue.each((function(r){Yf(n,t,e,r)}))},onUnload:function(n,t,e){e.clear()},state:qf})],Jf=[Tr("getValue"),Fr("setValue",p),Mr("initialValue"),oi("manager",{setValue:function(n,t,e,r){t.store.setValue(n,r),t.onSetValue(n,r)},getValue:function(n,t,e){return t.store.getValue(n)},onLoad:function(n,t,e){t.store.initialValue.each((function(e){t.store.setValue(n,e)}))},onUnload:p,state:vo.init})],Qf=[Mr("initialValue"),oi("manager",{setValue:function(n,t,e,r){e.set(r),t.onSetValue(n,r)},getValue:function(n,t,e){return e.get()},onLoad:function(n,t,e){t.store.initialValue.each((function(n){e.isNotSet()&&e.set(n)}))},onUnload:function(n,t,e){e.clear()},state:Wf})],Zf=[Ir("store",{mode:"memory"},Sr("mode",{memory:Qf,manual:Jf,dataset:Kf})),ni("onSetValue"),Fr("resetOnDom",!1)],ns=xo({fields:Zf,name:"representing",active:Uf,apis:Gf,extra:{setValueFrom:function(n,t){var e=ns.getValue(t)
ns.setValue(n,e)}},state:Xf}),ts=ji("width",(function(n){return n.dom.offsetWidth})),es=function(n,t){return ts.set(n,t)},rs=function(n){return ts.get(n)},os=function(n,t){return{left:n,top:t,translate:function(e,r){return os(n+e,t+r)}}},is=os,us=h("slider.change.value"),cs=function(n){var t=n.event.raw
if(function(n){return-1!==n.type.indexOf("touch")}(t)){var e=t
return void 0!==e.touches&&1===e.touches.length?R.some(e.touches[0]).map((function(n){return is(n.clientX,n.clientY)})):R.none()}var r=t
return void 0!==r.clientX?R.some(r).map((function(n){return is(n.clientX,n.clientY)})):R.none()},as=function(n){return n.model.minX},fs=function(n){return n.model.minY},ss=function(n){return n.model.minX-1},ls=function(n){return n.model.minY-1},ds=function(n){return n.model.maxX},ms=function(n){return n.model.maxY},gs=function(n){return n.model.maxX+1},ps=function(n){return n.model.maxY+1},vs=function(n,t,e){return t(n)-e(n)},hs=function(n){return vs(n,ds,as)},bs=function(n){return vs(n,ms,fs)},ys=function(n){return hs(n)/2},xs=function(n){return bs(n)/2},ws=function(n){return n.stepSize},Ss=function(n){return n.snapToGrid},Os=function(n){return n.snapStart},ks=function(n){return n.rounded},Ts=function(n,t){return void 0!==n[t+"-edge"]},Cs=function(n){return Ts(n,"left")},Es=function(n){return Ts(n,"right")},Ms=function(n){return Ts(n,"top")},Ds=function(n){return Ts(n,"bottom")},_s=function(n){return n.model.value.get()},Rs=function(n){return{x:n}},Fs=function(n){return{y:n}},Is=function(n,t){return{x:n,y:t}},Vs=function(n,t){at(n,us(),{value:t})},Bs=function(n,t,e,r){return n<t?n:n>e?e:n===t?t-1:Math.max(t,n-r)},As=function(n,t,e,r){return n>e?n:n<t?t:n===e?e+1:Math.min(e,n+r)},Ns=function(n,t,e){return Math.max(t,Math.min(e,n))},Hs=function(n){var t=n.min,e=n.max,r=n.range,o=n.value,i=n.step,u=n.snap,c=n.snapStart,a=n.rounded,f=n.hasMinEdge,s=n.hasMaxEdge,l=n.minBound,d=n.maxBound,m=n.screenRange,g=f?t-1:t,p=s?e+1:e
if(o<l)return g
if(o>d)return p
var v=function(n,t,e){return Math.min(e,Math.max(n,t))-t}(o,l,d),h=Ns(v/m*r+t,g,p)
return u&&h>=t&&h<=e?function(n,t,e,r,o){return o.fold((function(){var o=n-t,i=Math.round(o/r)*r
return Ns(t+i,t-1,e+1)}),(function(t){var o=(n-t)%r,i=Math.round(o/r),u=Math.floor((n-t)/r),c=Math.floor((e-t)/r),a=t+Math.min(c,u+i)*r
return Math.max(t,a)}))}(h,t,e,i,c):a?Math.round(h):h},Ps=function(n){var t=n.min,e=n.max,r=n.range,o=n.value,i=n.hasMinEdge,u=n.hasMaxEdge,c=n.maxBound,a=n.maxOffset,f=n.centerMinEdge,s=n.centerMaxEdge
return o<t?i?0:f:o>e?u?c:s:(o-t)/r*a},zs="top",js="right",Ls="bottom",$s="left",Gs=function(n){return n.element.dom.getBoundingClientRect()},Us=function(n,t){return n[t]},Ws=function(n){var t=Gs(n)
return Us(t,$s)},qs=function(n){var t=Gs(n)
return Us(t,js)},Xs=function(n){var t=Gs(n)
return Us(t,zs)},Ys=function(n){var t=Gs(n)
return Us(t,Ls)},Ks=function(n){var t=Gs(n)
return Us(t,"width")},Js=function(n){var t=Gs(n)
return Us(t,"height")},Qs=function(n,t,e){return(n+t)/2-e},Zs=function(n,t){var e=Gs(n),r=Gs(t),o=Us(e,$s),i=Us(e,js),u=Us(r,$s)
return Qs(o,i,u)},nl=function(n,t){var e=Gs(n),r=Gs(t),o=Us(e,zs),i=Us(e,Ls),u=Us(r,zs)
return Qs(o,i,u)},tl=function(n,t){at(n,us(),{value:t})},el=function(n){return{x:n}},rl=function(n,t,e){var r={min:as(t),max:ds(t),range:hs(t),value:e,step:ws(t),snap:Ss(t),snapStart:Os(t),rounded:ks(t),hasMinEdge:Cs(t),hasMaxEdge:Es(t),minBound:Ws(n),maxBound:qs(n),screenRange:Ks(n)}
return Hs(r)},ol=function(n){return function(t,e){return function(n,t,e){var r=(n>0?As:Bs)(_s(e).x,as(e),ds(e),ws(e))
return tl(t,el(r)),R.some(r)}(n,t,e).map(E)}},il=function(n,t,e,r,o,i){var u=function(n,t,e,r,o){var i=Ks(n),u=r.bind((function(t){return R.some(Zs(t,n))})).getOr(0),c=o.bind((function(t){return R.some(Zs(t,n))})).getOr(i),a={min:as(t),max:ds(t),range:hs(t),value:e,hasMinEdge:Cs(t),hasMaxEdge:Es(t),minBound:Ws(n),minOffset:0,maxBound:qs(n),maxOffset:i,centerMinEdge:u,centerMaxEdge:c}
return Ps(a)}(t,i,e,r,o)
return Ws(t)-Ws(n)+u},ul=ol(-1),cl=ol(1),al=R.none,fl=R.none,sl={"top-left":R.none(),top:R.none(),"top-right":R.none(),right:R.some((function(n,t){Vs(n,Rs(gs(t)))})),"bottom-right":R.none(),bottom:R.none(),"bottom-left":R.none(),left:R.some((function(n,t){Vs(n,Rs(ss(t)))}))},ll=Object.freeze({__proto__:null,setValueFrom:function(n,t,e){var r=rl(n,t,e),o=el(r)
return tl(n,o),r},setToMin:function(n,t){var e=as(t)
tl(n,el(e))},setToMax:function(n,t){var e=ds(t)
tl(n,el(e))},findValueOfOffset:rl,getValueFromEvent:function(n){return cs(n).map((function(n){return n.left}))},findPositionOfValue:il,setPositionFromValue:function(n,t,e,r){var o=_s(e),i=il(n,r.getSpectrum(n),o.x,r.getLeftEdge(n),r.getRightEdge(n),e),u=rs(t.element)/2
Vi(t.element,"left",i-u+"px")},onLeft:ul,onRight:cl,onUp:al,onDown:fl,edgeActions:sl}),dl=function(n,t){at(n,us(),{value:t})},ml=function(n){return{y:n}},gl=function(n,t,e){var r={min:fs(t),max:ms(t),range:bs(t),value:e,step:ws(t),snap:Ss(t),snapStart:Os(t),rounded:ks(t),hasMinEdge:Ms(t),hasMaxEdge:Ds(t),minBound:Xs(n),maxBound:Ys(n),screenRange:Js(n)}
return Hs(r)},pl=function(n){return function(t,e){return function(n,t,e){var r=(n>0?As:Bs)(_s(e).y,fs(e),ms(e),ws(e))
return dl(t,ml(r)),R.some(r)}(n,t,e).map(E)}},vl=function(n,t,e,r,o,i){var u=function(n,t,e,r,o){var i=Js(n),u=r.bind((function(t){return R.some(nl(t,n))})).getOr(0),c=o.bind((function(t){return R.some(nl(t,n))})).getOr(i),a={min:fs(t),max:ms(t),range:bs(t),value:e,hasMinEdge:Ms(t),hasMaxEdge:Ds(t),minBound:Xs(n),minOffset:0,maxBound:Ys(n),maxOffset:i,centerMinEdge:u,centerMaxEdge:c}
return Ps(a)}(t,i,e,r,o)
return Xs(t)-Xs(n)+u},hl=R.none,bl=R.none,yl=pl(-1),xl=pl(1),wl={"top-left":R.none(),top:R.some((function(n,t){Vs(n,Fs(ls(t)))})),"top-right":R.none(),right:R.none(),"bottom-right":R.none(),bottom:R.some((function(n,t){Vs(n,Fs(ps(t)))})),"bottom-left":R.none(),left:R.none()},Sl=Object.freeze({__proto__:null,setValueFrom:function(n,t,e){var r=gl(n,t,e),o=ml(r)
return dl(n,o),r},setToMin:function(n,t){var e=fs(t)
dl(n,ml(e))},setToMax:function(n,t){var e=ms(t)
dl(n,ml(e))},findValueOfOffset:gl,getValueFromEvent:function(n){return cs(n).map((function(n){return n.top}))},findPositionOfValue:vl,setPositionFromValue:function(n,t,e,r){var o=_s(e),i=vl(n,r.getSpectrum(n),o.y,r.getTopEdge(n),r.getBottomEdge(n),e),u=$i(t.element)/2
Vi(t.element,"top",i-u+"px")},onLeft:hl,onRight:bl,onUp:yl,onDown:xl,edgeActions:wl}),Ol=function(n,t){at(n,us(),{value:t})},kl=function(n,t){return{x:n,y:t}},Tl=function(n,t){return function(e,r){return function(n,t,e,r){var o=n>0?As:Bs,i=t?_s(r).x:o(_s(r).x,as(r),ds(r),ws(r)),u=t?o(_s(r).y,fs(r),ms(r),ws(r)):_s(r).y
return Ol(e,kl(i,u)),R.some(i)}(n,t,e,r).map(E)}},Cl=Tl(-1,!1),El=Tl(1,!1),Ml=Tl(-1,!0),Dl=Tl(1,!0),_l={"top-left":R.some((function(n,t){Vs(n,Is(ss(t),ls(t)))})),top:R.some((function(n,t){Vs(n,Is(ys(t),ls(t)))})),"top-right":R.some((function(n,t){Vs(n,Is(gs(t),ls(t)))})),right:R.some((function(n,t){Vs(n,Is(gs(t),xs(t)))})),"bottom-right":R.some((function(n,t){Vs(n,Is(gs(t),ps(t)))})),bottom:R.some((function(n,t){Vs(n,Is(ys(t),ps(t)))})),"bottom-left":R.some((function(n,t){Vs(n,Is(ss(t),ps(t)))})),left:R.some((function(n,t){Vs(n,Is(ss(t),xs(t)))}))},Rl=Object.freeze({__proto__:null,setValueFrom:function(n,t,e){var r=rl(n,t,e.left),o=gl(n,t,e.top),i=kl(r,o)
return Ol(n,i),i},setToMin:function(n,t){var e=as(t),r=fs(t)
Ol(n,kl(e,r))},setToMax:function(n,t){var e=ds(t),r=ms(t)
Ol(n,kl(e,r))},getValueFromEvent:function(n){return cs(n)},setPositionFromValue:function(n,t,e,r){var o=_s(e),i=il(n,r.getSpectrum(n),o.x,r.getLeftEdge(n),r.getRightEdge(n),e),u=vl(n,r.getSpectrum(n),o.y,r.getTopEdge(n),r.getBottomEdge(n),e),c=rs(t.element)/2,a=$i(t.element)/2
Vi(t.element,"left",i-c+"px"),Vi(t.element,"top",u-a+"px")},onLeft:Cl,onRight:El,onUp:Ml,onDown:Dl,edgeActions:_l}),Fl=[Fr("stepSize",1),Fr("onChange",p),Fr("onChoose",p),Fr("onInit",p),Fr("onDragStart",p),Fr("onDragEnd",p),Fr("snapToGrid",!1),Fr("rounded",!0),Mr("snapStart"),Cr("model",Sr("mode",{x:[Fr("minX",0),Fr("maxX",100),kr("value",(function(n){return ko(n.mode.minX)})),Tr("getInitialValue"),oi("manager",ll)],y:[Fr("minY",0),Fr("maxY",100),kr("value",(function(n){return ko(n.mode.minY)})),Tr("getInitialValue"),oi("manager",Sl)],xy:[Fr("minX",0),Fr("maxX",100),Fr("minY",0),Fr("maxY",100),kr("value",(function(n){return ko({x:n.mode.minX,y:n.mode.minY})})),Tr("getInitialValue"),oi("manager",Rl)]})),pa("sliderBehaviours",[ga,ns]),kr("mouseIsDown",(function(){return ko(!1)}))],Il=h("mouse.released"),Vl=wf({name:"Slider",configFields:Fl,partFields:jf,factory:function(n,t,e,r){var o,i=function(t){return tf(t,n,"thumb")},u=function(t){return tf(t,n,"spectrum")},c=function(t){return nf(t,n,"left-edge")},a=function(t){return nf(t,n,"right-edge")},f=function(t){return nf(t,n,"top-edge")},s=function(t){return nf(t,n,"bottom-edge")},l=n.model,d=l.manager,m=function(t,e){d.setPositionFromValue(t,e,n,{getLeftEdge:c,getRightEdge:a,getTopEdge:f,getBottomEdge:s,getSpectrum:u})},g=function(n,t){l.value.set(t)
var e=i(n)
m(n,e)},p=function(t){var e=n.mouseIsDown.get()
n.mouseIsDown.set(!1),e&&nf(t,n,"thumb").each((function(e){var r=l.value.get()
n.onChoose(t,e,r)}))},v=function(t,e){e.stop(),n.mouseIsDown.set(!0),n.onDragStart(t,i(t))},h=function(t,e){e.stop(),n.onDragEnd(t,i(t)),p(t)}
return{uid:n.uid,dom:n.dom,components:t,behaviours:ha(n.sliderBehaviours,[ga.config({mode:"special",focusIn:function(t){return nf(t,n,"spectrum").map(ga.focusIn).map(E)}}),ns.config({store:{mode:"manual",getValue:function(n){return l.value.get()}}}),ai.config({channels:(o={},o[Il()]={onReceive:p},o)})]),events:Yr([Jr(us(),(function(t,e){(function(t,e){g(t,e)
var r=i(t)
n.onChange(t,r,e),R.some(!0)})(t,e.event.value)})),oo((function(t,e){var r=l.getInitialValue()
l.value.set(r)
var o=i(t)
m(t,o)
var c=u(t)
n.onInit(t,o,c,l.value.get())})),Jr(Rn(),v),Jr(In(),h),Jr(Vn(),v),Jr(An(),h)]),apis:{resetToMin:function(t){d.setToMin(t,n)},resetToMax:function(t){d.setToMax(t,n)},setValue:g,refresh:m},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(n,t,e){n.setValue(t,e)},resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}}),Bl=function(n,t,e,r){return Rf(t,(function(){var r=e()
n.setContextToolbar([{label:t+" group",items:r}])}),{},r)},Al=function(n){var t=function(n){return n<0?"black":n>360?"white":"hsl("+n+", 100%, 50%)"}
return Vl.sketch({dom:Cf('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[Vl.parts["left-edge"](Ef('<div class="${prefix}-hue-slider-black"></div>')),Vl.parts.spectrum({dom:Cf('<div class="${prefix}-slider-gradient-container"></div>'),components:[Ef('<div class="${prefix}-slider-gradient"></div>')],behaviours:bo([xi.config({toggleClass:Ti("thumb-active")})])}),Vl.parts["right-edge"](Ef('<div class="${prefix}-hue-slider-white"></div>')),Vl.parts.thumb({dom:Cf('<div class="${prefix}-slider-thumb"></div>'),behaviours:bo([xi.config({toggleClass:Ti("thumb-active")})])})],onChange:function(e,r,o){var i=t(o.x())
Vi(r.element,"background-color",i),n.onChange(e,r,i)},onDragStart:function(n,t){xi.on(t)},onDragEnd:function(n,t){xi.off(t)},onInit:function(n,e,r,o){var i=t(o.x())
Vi(e.element,"background-color",i)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:n.getInitialValue()}}},sliderBehaviours:bo([Si(Vl.refresh)])})},Nl=function(n,t){var e={onChange:function(n,e,r){t.undoManager.transact((function(){t.formatter.apply("forecolor",{value:r}),t.nodeChanged()}))},getInitialValue:h(-1)}
return Bl(n,"color-levels",(function(){return function(n){return[Al(n)]}(e)}),t)},Hl=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],Pl=function(n,t){return(St(t)?R.some(t):Mt(t).filter(St)).map((function(t){return function(n,t,e){return Yi((function(n,t){return t(n)}),Ji,n,t,e)}(t,(function(n){return Hi(n,"font-size").isSome()}),n).bind((function(n){return Hi(n,"font-size")})).getOrThunk((function(){return Ai(t,"font-size")}))})).getOr("")},zl=function(n){var t=n.selection.getStart(),e=mt.fromDom(t),r=mt.fromDom(n.getBody()),o=Pl((function(n){return bt(r,n)}),e)
return $(Hl,(function(n){return o===n})).getOr("medium")},jl=function(n){return function(n){return G(Hl,(function(t){return t===n}))}(zl(n)).getOr(2)},Ll=function(n,t){(function(n){return R.from(Hl[n])})(t).each((function(t){(function(n,t){zl(n)!==t&&n.execCommand("fontSize",!1,t)})(n,t)}))},$l=h(Hl),Gl=fr([Tr("getInitialValue"),Tr("onChange"),Tr("category"),Tr("sizes")]),Ul=function(n){var t=xr("SizeSlider",Gl,n)
return Vl.sketch({dom:{tag:"div",classes:[Ti("slider-"+t.category+"-size-container"),Ti("slider"),Ti("slider-size-container")]},onChange:function(n,e,r){var o=r.x();(function(n){return n>=0&&n<t.sizes.length})(o)&&t.onChange(o)},onDragStart:function(n,t){xi.on(t)},onDragEnd:function(n,t){xi.off(t)},model:{mode:"x",minX:0,maxX:t.sizes.length-1,getInitialValue:function(){return{x:t.getInitialValue()}}},stepSize:1,snapToGrid:!0,sliderBehaviours:bo([Si(Vl.refresh)]),components:[Vl.parts.spectrum({dom:Cf('<div class="${prefix}-slider-size-container"></div>'),components:[Ef('<div class="${prefix}-slider-size-line"></div>')]}),Vl.parts.thumb({dom:Cf('<div class="${prefix}-slider-thumb"></div>'),behaviours:bo([xi.config({toggleClass:Ti("thumb-active")})])})]})},Wl=$l(),ql=function(n){return Ul({onChange:n.onChange,sizes:Wl,category:"font",getInitialValue:n.getInitialValue})},Xl=function(n){return[Ef('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),ql(n),Ef('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')]},Yl=function(t){var e=function(n){return void 0!==n.uid}(t)&&fe(t,"uid")?t.uid:gf("memento")
return{get:function(n){return n.getSystem().getByUid(e).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(e).toOptional()},asSpec:function(){return n(n({},t),{uid:e})}}},Kl={},Jl={exports:Kl};(function(n,t,e,r){(function(r,o){"object"==typeof t&&void 0!==e?e.exports=o():"function"==typeof n&&n.amd?n(o):(r="undefined"!=typeof globalThis?globalThis:r||self).EphoxContactWrapper=o()})(this,(function(){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={exports:{}};(function(t){(function(n){var e=setTimeout
function r(){}function o(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new")
if("function"!=typeof n)throw new TypeError("not a function")
this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(n,this)}function i(n,t){for(;3===n._state;)n=n._value
0!==n._state?(n._handled=!0,o._immediateFn((function(){var e=1===n._state?t.onFulfilled:t.onRejected
if(null!==e){var r
try{r=e(n._value)}catch(o){return void c(t.promise,o)}u(t.promise,r)}else(1===n._state?u:c)(t.promise,n._value)}))):n._deferreds.push(t)}function u(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.")
if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then
if(t instanceof o)return n._state=3,n._value=t,void a(n)
if("function"==typeof e)return void s((r=e,i=t,function(){r.apply(i,arguments)}),n)}n._state=1,n._value=t,a(n)}catch(u){c(n,u)}var r,i}function c(n,t){n._state=2,n._value=t,a(n)}function a(n){2===n._state&&0===n._deferreds.length&&o._immediateFn((function(){n._handled||o._unhandledRejectionFn(n._value)}))
for(var t=0,e=n._deferreds.length;t<e;t++)i(n,n._deferreds[t])
n._deferreds=null}function f(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function s(n,t){var e=!1
try{n((function(n){e||(e=!0,u(t,n))}),(function(n){e||(e=!0,c(t,n))}))}catch(r){if(e)return
e=!0,c(t,r)}}o.prototype.catch=function(n){return this.then(null,n)},o.prototype.then=function(n,t){var e=new this.constructor(r)
return i(this,new f(n,t,e)),e},o.all=function(n){var t=Array.prototype.slice.call(n)
return new o((function(n,e){if(0===t.length)return n([])
var r=t.length
function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then
if("function"==typeof c)return void c.call(u,(function(n){o(i,n)}),e)}t[i]=u,0==--r&&n(t)}catch(a){e(a)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},o.resolve=function(n){return n&&"object"==typeof n&&n.constructor===o?n:new o((function(t){t(n)}))},o.reject=function(n){return new o((function(t,e){e(n)}))},o.race=function(n){return new o((function(t,e){for(var r=0,o=n.length;r<o;r++)n[r].then(t,e)}))},o._immediateFn="function"==typeof setImmediate?function(n){setImmediate(n)}:function(n){e(n,0)},o._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},o._setImmediateFn=function(n){o._immediateFn=n},o._setUnhandledRejectionFn=function(n){o._unhandledRejectionFn=n},t.exports?t.exports=o:n.Promise||(n.Promise=o)})(n)})(t)
var e=t.exports
return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||e}}))})(void 0,Kl,Jl)
var Ql,Zl,nd,td=Jl.exports.boltExport,ed=function(n){return function(n){return new td((function(t){var e=new FileReader
e.onloadend=function(){t(e.result)},e.readAsDataURL(n)}))}(n).then((function(n){return n.split(",")[1]}))},rd=function(n,t){(function(n){return ed(n)})(t).then((function(e){n.undoManager.transact((function(){var r=n.editorUpload.blobCache,o=r.create(_a("mceu"),t,e)
r.add(o)
var i=n.dom.createHTML("img",{src:o.blobUri()})
n.insertContent(i)}))}))},od=function(n){var t=Yl({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:Yr([to(Ln()),Jr(jn(),(function(t,e){(function(n){var t=n.event.raw,e=t.target.files||t.dataTransfer.files
return R.from(e[0])})(e).each((function(t){rd(n,t)}))}))])})
return Sf.sketch({dom:_f("image",n),components:[t.asSpec()],action:function(n){t.get(n).element.dom.click()}})},id=function(n){return n.dom.textContent},ud=function(n){return n.length>0},cd=function(n){return null==n?"":n},ad=function(n){return ld(n).fold((function(){return function(n){return{url:"",text:n.selection.getContent({format:"text"}),title:"",target:"",link:R.none()}}(n)}),(function(n){return function(n){var t=id(n),e=me(n,"href"),r=me(n,"title"),o=me(n,"target")
return{url:cd(e),text:t!==e?cd(t):"",title:cd(r),target:cd(o),link:R.some(n)}}(n)}))},fd=function(n,t,e){return e.text.toOptional().filter(ud).fold((function(){return function(n){return me(n,"href")===id(n)}(n)?R.some(t):R.none()}),R.some)},sd=function(n,t){t.url.toOptional().filter(ud).fold((function(){(function(n,t){t.link.bind(b).each((function(t){n.execCommand("unlink")}))})(n,t)}),(function(e){var r=function(n,t){var e={}
return e.href=n,t.title.toOptional().filter(ud).each((function(n){e.title=n})),t.target.toOptional().filter(ud).each((function(n){e.target=n})),e}(e,t)
t.link.bind(b).fold((function(){var o=t.text.toOptional().filter(ud).getOr(e)
n.insertContent(n.dom.createHTML("a",r,n.dom.encode(o)))}),(function(n){var o=fd(n,e,t)
de(n,r),o.each((function(t){(function(n,t){n.dom.textContent=t})(n,t)}))}))}))},ld=function(n){var t=mt.fromDom(n.selection.getStart())
return tu(t,"a")},dd=Dn(),md=function(n,t){var e=t.selection.getRng()
n(),t.selection.setRng(e)},gd=function(n,t){return{key:n,value:{config:{},me:function(n,t){var e=Yr(t)
return xo({fields:[Tr("enabled")],name:n,active:{events:h(e)}})}(n,t),configAsRaw:h({}),initialConfig:{},state:vo}}},pd=Object.freeze({__proto__:null,getCurrent:function(n,t,e){return t.find(n)}}),vd=[Tr("find")],hd=xo({fields:vd,name:"composing",apis:pd}),bd=xf({name:"Container",factory:function(e){var r=e.dom,o=r.attributes,i=t(r,["attributes"])
return{uid:e.uid,dom:n({tag:"div",attributes:n({role:"presentation"},o)},i),components:e.components,behaviours:va(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[Fr("components",[]),pa("containerBehaviours",[]),Fr("events",{}),Fr("domModification",{}),Fr("eventOrder",{})]}),yd=xf({name:"DataField",factory:function(n){return{uid:n.uid,dom:n.dom,behaviours:ya(n.dataBehaviours,[ns.config({store:{mode:"memory",initialValue:n.getInitialValue()}}),hd.config({find:R.some})]),events:Yr([oo((function(t,e){ns.setValue(t,n.getInitialValue())}))])}},configFields:[Tr("uid"),Tr("dom"),Tr("getInitialValue"),ba("dataBehaviours",[ns,hd])]}),xd=function(n){return n.dom.value},wd=function(n,t){if(void 0===t)throw new Error("Value.set was undefined")
n.dom.value=t},Sd=h([Mr("data"),Fr("inputAttributes",{}),Fr("inputStyles",{}),Fr("tag","input"),Fr("inputClasses",[]),ni("onSetValue"),Fr("styles",{}),Fr("eventOrder",{}),pa("inputBehaviours",[ns,Ri]),Fr("selectOnFocus",!0)]),Od=function(t){return n(n({},function(n){return bo([Ri.config({onFocus:n.selectOnFocus?function(n){var t=n.element,e=xd(t)
t.dom.setSelectionRange(0,e.length)}:p})])}(t)),ha(t.inputBehaviours,[ns.config({store:n(n({mode:"manual"},t.data.map((function(n){return{initialValue:n}})).getOr({})),{getValue:function(n){return xd(n.element)},setValue:function(n,t){xd(n.element)!==t&&wd(n.element,t)}}),onSetValue:t.onSetValue})]))},kd=function(t){return{tag:t.tag,attributes:n({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},Td=xf({name:"Input",configFields:Sd(),factory:function(n,t){return{uid:n.uid,dom:kd(n),components:[],behaviours:Od(n),eventOrder:n.eventOrder}}}),Cd=Object.freeze({__proto__:null,exhibit:function(n,t){return so({attributes:Pr([{key:t.tabAttr,value:"true"}])})}}),Ed=[Fr("tabAttr","data-alloy-tabstop")],Md=xo({fields:Ed,name:"tabstopping",active:Cd}),Dd=tinymce.util.Tools.resolve("tinymce.util.I18n"),_d=function(n,t){var e=Yl(Td.sketch({inputAttributes:{placeholder:Dd.translate(t)},onSetValue:function(n,t){ct(n,zn())},inputBehaviours:bo([hd.config({find:R.some}),Md.config({}),ga.config({mode:"execution"})]),selectOnFocus:!1})),r=Yl(Sf.sketch({dom:Cf('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(n){var t=e.get(n)
ns.setValue(t,"")}}))
return{name:n,spec:bd.sketch({dom:Cf('<div class="${prefix}-input-container"></div>'),components:[e.asSpec(),r.asSpec()],containerBehaviours:bo([xi.config({toggleClass:Ti("input-container-empty")}),hd.config({find:function(n){return R.some(e.get(n))}}),gd("input-clearing",[Jr(zn(),(function(n){var t=e.get(n);(ns.getValue(t).length>0?xi.off:xi.on)(n)}))])])})}},Rd=function(n){return{name:n,spec:yd.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return R.none()}})}},Fd=["input","button","textarea","select"],Id=function(n,t,e){(t.disabled()?Pd:zd)(n,t)},Vd=function(n,t){return!0===t.useNative&&A(Fd,xt(n.element))},Bd=function(n){le(n.element,"disabled","disabled")},Ad=function(n){ve(n.element,"disabled")},Nd=function(n){le(n.element,"aria-disabled","true")},Hd=function(n){le(n.element,"aria-disabled","false")},Pd=function(n,t,e){t.disableClass.each((function(t){we(n.element,t)})),(Vd(n,t)?Bd:Nd)(n),t.onDisabled(n)},zd=function(n,t,e){t.disableClass.each((function(t){Oe(n.element,t)})),(Vd(n,t)?Ad:Hd)(n),t.onEnabled(n)},jd=function(n,t){return Vd(n,t)?function(n){return pe(n.element,"disabled")}(n):function(n){return"true"===me(n.element,"aria-disabled")}(n)},Ld=Object.freeze({__proto__:null,enable:zd,disable:Pd,isDisabled:jd,onLoad:Id,set:function(n,t,e,r){(r?Pd:zd)(n,t)}}),$d=Object.freeze({__proto__:null,exhibit:function(n,t){return so({classes:t.disabled()?t.disableClass.toArray():[]})},events:function(n,t){return Yr([Kr(Jn(),(function(t,e){return jd(t,n)})),lo(n,t,Id)])}}),Gd=[(Ql="disabled",Zl=C,Ir(Ql,Zl,mr)),Fr("useNative",!0),Mr("disableClass"),ni("onDisabled"),ni("onEnabled")],Ud=xo({fields:Gd,name:"disabling",active:$d,apis:Ld}),Wd="form",qd=[pa("formBehaviours",[ns])],Xd=function(n){return"<alloy.field."+n+">"},Yd=function(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:ha(n.formBehaviours,[ns.config({store:{mode:"manual",getValue:function(t){var e=function(n,t){var e=n.getSystem()
return re(t.partUids,(function(n,t){return h(e.getByUid(n))}))}(t,n)
return re(e,(function(n,t){return n().bind((function(n){var e,r,o=hd.getCurrent(n)
return e=o,r=new Error("Cannot find a current component to extract the value from for form part '"+t+"': "+zo(n.element)),e.fold((function(){return De.error(r)}),De.value)})).map(ns.getValue)}))},setValue:function(t,e){ee(e,(function(e,r){nf(t,n,r).each((function(n){hd.getCurrent(n).each((function(n){ns.setValue(n,e)}))}))}))}}})]),apis:{getField:function(t,e){return nf(t,n,e).bind(hd.getCurrent)}}}},Kd=(cf((function(n,t,e){return n.getField(t,e)})),function(n){var t=function(){var n=[]
return{field:function(t,e){return n.push(t),function(n,t,e){return{uiType:Ma(),owner:n,name:t,config:e,validated:{}}}(Wd,Xd(t),e)},record:h(n)}}(),e=n(t),r=t.record(),o=H(r,(function(n){return Ua({name:n,pname:Xd(n)})}))
return vf(Wd,qd,o,Yd,e)}),Jd=function(n){var t="navigateEvent",e=sr([Tr("fields"),Fr("maxFieldIndex",n.fields.length-1),Tr("onExecute"),Tr("getInitialValue"),kr("state",(function(){return{dialogSwipeState:Yu(),currentScreen:ko(0)}}))]),r=xr("SerialisedDialog",e,n),o=function(n,e,r){return Sf.sketch({dom:Cf('<span class="${prefix}-icon-'+e+' ${prefix}-icon"></span>'),action:function(e){at(e,t,{direction:n})},buttonBehaviours:bo([Ud.config({disableClass:Ti("toolbar-navigation-disabled"),disabled:function(){return!r}})])})},i=function(n,t){var e=Xi(n.element,"."+Ti("serialised-dialog-screen"))
nu(n.element,"."+Ti("serialised-dialog-chain")).each((function(n){r.state.currentScreen.get()+t>=0&&r.state.currentScreen.get()+t<e.length&&(Hi(n,"left").each((function(r){var o=parseInt(r,10),i=rs(e[0])
Vi(n,"left",o-t*i+"px")})),r.state.currentScreen.set(r.state.currentScreen.get()+t))}))},u=function(n){var t=Xi(n.element,"input")
R.from(t[r.state.currentScreen.get()]).each((function(t){n.getSystem().getByDom(t).each((function(t){var e,r
e=n,r=t.element,e.getSystem().triggerFocus(r,e.element)}))}))
var e=a.get(n)
Iu.highlightAt(e,r.state.currentScreen.get())},c=Yl(Kd((function(n){return{dom:Cf('<div class="${prefix}-serialised-dialog"></div>'),components:[bd.sketch({dom:Cf('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:H(r.fields,(function(t,e){return e<=r.maxFieldIndex?bd.sketch({dom:Cf('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[o(-1,"previous",e>0),n.field(t.name,t.spec),o(1,"next",e<r.maxFieldIndex)]}):n.field(t.name,t.spec)}))})],formBehaviours:bo([Si((function(n,t){(function(n,t){nu(n.element,"."+Ti("serialised-dialog-chain")).each((function(n){Vi(n,"left",-r.state.currentScreen.get()*t.width+"px")}))})(n,t)})),ga.config({mode:"special",focusIn:function(n,t){u(n)},onTab:function(n,t){return i(n,1),R.some(!0)},onShiftTab:function(n,t){return i(n,-1),R.some(!0)}}),gd("form-events",[oo((function(n,t){r.state.currentScreen.set(0),r.state.dialogSwipeState.clear()
var e=a.get(n)
Iu.highlightFirst(e),r.getInitialValue(n).each((function(t){ns.setValue(n,t)}))})),co(r.onExecute),Jr($n(),(function(n,t){"left"===t.event.raw.propertyName&&u(n)})),Jr(t,(function(n,t){var e=t.event.direction
i(n,e)}))])])}}))),a=Yl({dom:Cf('<div class="${prefix}-dot-container"></div>'),behaviours:bo([Iu.config({highlightClass:Ti("dot-active"),itemClass:Ti("dot-item")})]),components:W(r.fields,(function(n,t){return t<=r.maxFieldIndex?[Ef('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]}))})
return{dom:Cf('<div class="${prefix}-serializer-wrapper"></div>'),components:[c.asSpec(),a.asSpec()],behaviours:bo([ga.config({mode:"special",focusIn:function(n){var t=c.get(n)
ga.focusIn(t)}}),gd("serializer-wrapper-events",[Jr(Rn(),(function(n,t){var e=t.event
r.state.dialogSwipeState.set(function(n){return{xValue:n,points:[]}}(e.raw.touches[0].clientX))})),Jr(Fn(),(function(n,t){var e=t.event
r.state.dialogSwipeState.on((function(n){t.event.prevent(),r.state.dialogSwipeState.set(function(n,t){if(t===n.xValue)return n
var e=t-n.xValue>0?1:-1,r={direction:e,xValue:t}
return{xValue:t,points:(0===n.points.length?[]:n.points[n.points.length-1].direction===e?n.points.slice(0,n.points.length-1):n.points).concat([r])}}(n,e.raw.touches[0].clientX))}))})),Jr(In(),(function(n,t){r.state.dialogSwipeState.on((function(t){var e=c.get(n),r=-1*function(n){if(0===n.points.length)return 0
var t=n.points[0].direction,e=n.points[n.points.length-1].direction
return-1===t&&-1===e?-1:1===t&&1===e?1:0}(t)
i(e,r)}))}))])])}},Qd=F((function(n,t){return[{label:"the link group",items:[Jd({fields:[_d("url","Type or paste URL"),_d("text","Link text"),_d("title","Link title"),_d("target","Link target"),Rd("link")],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return R.some(ad(t))},onExecute:function(e,r){var o=ns.getValue(e)
sd(t,o),n.restoreToolbar(),t.focus()}})]}]})),Zd=function(n,t){return Df(t,"link","link",(function(){var e=Qd(n,t)
n.setContextToolbar(e),function(n,t){(dd.os.isAndroid()?md:T)(t,n)}(t,(function(){n.focusToolbar()})),ld(t).each((function(n){t.selection.select(n.dom)}))}))},nm=Yr([function(n,t){return{key:n,value:qr({can:t})}}(qn(),(function(n,t){var e=t.event,r=e.originator,o=e.target
return!function(n,t,e){return bt(t,n.element)&&!bt(t,e)}(n,r,o)||(console.warn(qn()+" did not get interpreted by the desired target. \nOriginator: "+zo(r)+"\nTarget: "+zo(o)+"\nCheck the "+qn()+" event handlers"),!1)}))]),tm=Object.freeze({__proto__:null,events:nm}),em=b,rm=function(n){var t=function(t){return"The component must be in a context to execute: "+t+(n?"\n"+zo(n().element)+" is not in context.":"")},e=function(n){return function(){throw new Error(t(n))}},r=function(n){return function(){console.warn(t(n))}}
return{debugInfo:h("fake"),triggerEvent:r("triggerEvent"),triggerFocus:r("triggerFocus"),triggerEscape:r("triggerEscape"),broadcast:r("broadcast"),broadcastOn:r("broadcastOn"),broadcastEvent:r("broadcastEvent"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),isConnected:C}},om=rm(),im=function(n,t){var e={}
return ee(n,(function(n,r){ee(n,(function(n,o){var i=ce(e,o).getOr([])
e[o]=i.concat([t(r,n)])}))})),e},um=function(n,t,e,r){try{var o=(i=e,u=function(e,o){var i=e[t],u=o[t],c=r.indexOf(i),a=r.indexOf(u)
if(-1===c)throw new Error("The ordering for "+n+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2))
if(-1===a)throw new Error("The ordering for "+n+" does not have an entry for "+u+".\nOrder specified: "+JSON.stringify(r,null,2))
return c<a?-1:a<c?1:0},(c=I.call(i,0)).sort(u),c)
return De.value(o)}catch(a){return De.error([a])}var i,u,c},cm=function(n){return n.cHandler},am=function(n,t){return{name:n,handler:t}},fm=function(t,e,r){var o=n(n({},r),function(n,t){var e={}
return P(n,(function(n){e[n.name()]=n.handlers(t)})),e}(e,t))
return im(o,am)},sm=function(n){var t=function(n){return m(n)?{can:E,abort:C,run:n}:n}(n)
return function(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o]
var i=[n,e].concat(r)
t.abort.apply(void 0,i)?e.stop():t.can.apply(void 0,i)&&t.run.apply(void 0,i)}},lm=function(n,t,e){var r=t[e]
return r?um("Event: "+e,"name",n,r).map((function(n){var t=H(n,(function(n){return n.handler}))
return Xr(t)})):function(n,t){return De.error(["The event ("+n+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(H(t,(function(n){return n.name})),null,2)])}(e,n)},dm=function(n,t){var e=ue(n,(function(n,e){return(1===n.length?De.value(n[0].handler):lm(n,t,e)).map((function(r){var o=sm(r),i=n.length>1?z(t[e],(function(t){return N(n,(function(n){return n.name===t}))})).join(" > "):n[0].name
return Hr(e,function(n,t){return{handler:n,purpose:t}}(o,i))}))}))
return zr(e,{})},mm="alloy.base.behaviour",gm=sr([Or("dom","dom",{tag:"required",process:{}},sr([Tr("tag"),Fr("styles",{}),Fr("classes",[]),Fr("attributes",{}),Mr("value"),Mr("innerHtml")])),Tr("components"),Tr("uid"),Fr("events",{}),Fr("apis",{}),Or("eventOrder","eventOrder",function(n){return Qe(h(n))}((nd={},nd[Jn()]=["disabling",mm,"toggling","typeaheadevents"],nd[qn()]=[mm,"focusing","keying"],nd[tt()]=[mm,"disabling","toggling","representing"],nd[zn()]=[mm,"representing","streaming","invalidating"],nd[rt()]=[mm,"representing","item-events","tooltipping"],nd[Vn()]=["focusing",mm,"item-type-events"],nd[Rn()]=["focusing",mm,"item-type-events"],nd[Nn()]=["item-type-events","tooltipping"],nd[Kn()]=["receiving","reflecting","tooltipping"],nd)),dr()),Mr("domModification")]),pm=function(n){return n.events},vm=function(n,t){P(t,(function(t){we(n,t)}))},hm=function(n,t){P(t,(function(t){Oe(n,t)}))},bm=function(n,t){return function(n,t){var e=H(t,(function(n){return _r(n.name(),[Tr("config"),Fr("state",vo)])})),r=br("component.behaviours",sr(e),n.behaviours).fold((function(t){throw new Error(wr(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),b)
return{list:t,data:re(r,(function(n){var t=n.map((function(n){return{config:n.config,state:n.state.init(n.config)}}))
return h(t)}))}}(n,t)},ym=function(n){var t=function(n){var t=ce(n,"behaviours").getOr({})
return W(ne(t),(function(n){var e=t[n]
return d(e)?[e.me]:[]}))}(n)
return bm(n,t)},xm=function(t,e,r){var o,i,u,c=n(n({},(o=t).dom),{uid:o.uid,domChildren:H(o.components,(function(n){return n.element}))}),a=function(n){return n.domModification.fold((function(){return so({})}),so)}(t),f={"alloy.base.modification":a},s=e.length>0?function(t,e,r,o){var i=n({},e)
P(r,(function(n){i[n.name()]=n.exhibit(t,o)}))
var u=im(i,(function(n,t){return{name:n,modification:t}})),c=function(t){return j(t,(function(t,e){return n(n({},e.modification),t)}),{})},a=j(u.classes,(function(n,t){return t.modification.concat(n)}),[]),f=c(u.attributes),s=c(u.styles)
return so({classes:a,attributes:f,styles:s})}(r,f,e,c):a
return u=s,n(n({},i=c),{attributes:n(n({},i.attributes),u.attributes),styles:n(n({},i.styles),u.styles),classes:i.classes.concat(u.classes)})},wm=function(n,t,e){var r={"alloy.base.behaviour":pm(n)}
return function(n,t,e,r){var o=fm(n,e,r)
return dm(o,t)}(e,n.eventOrder,t,r).getOrDie()},Sm=function(n){var t=function(){return s},e=ko(om),r=yr(function(n){return br("custom.definition",gm,n)}(n)),o=ym(n),i=function(n){return n.list}(o),u=function(n){return n.data}(o),c=function(n){var t=mt.fromTag(n.tag)
de(t,n.attributes),vm(t,n.classes),Bi(t,n.styles),n.innerHtml.each((function(n){return No(t,n)}))
var e=n.domChildren
return Bt(t,e),n.value.each((function(n){wd(t,n)})),n.uid,df(t,n.uid),t}(xm(r,i,u)),a=wm(r,i,u),f=ko(r.components),s={uid:n.uid,getSystem:e.get,config:function(t){var e=u
return(m(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(n){return m(u[n.name()])},spec:n,readState:function(n){return u[n]().map((function(n){return n.state.readState()})).getOr("not enabled")},getApis:function(){return r.apis},connect:function(n){e.set(n)},disconnect:function(){e.set(rm(t))},element:c,syncComponents:function(){var n=Dt(c),t=W(n,(function(n){return e.get().getByDom(n).fold((function(){return[]}),K)}))
f.set(t)},components:f.get,events:a}
return s},Om=function(e){var r=em(e),o=r.events,i=t(r,["events"]),u=function(n){var t=ce(n,"components").getOr([])
return H(t,Em)}(i),c=n(n({},i),{events:n(n({},tm),o),components:u})
return De.value(Sm(c))},km=function(n){var t=mt.fromText(n)
return Tm({element:t})},Tm=function(n){var t=xr("external.component",fr([Tr("element"),Mr("uid")]),n),e=ko(rm()),r=t.uid.getOrThunk((function(){return gf("external")}))
df(t.element,r)
var o={uid:r,getSystem:e.get,config:R.none,hasConfigured:C,connect:function(n){e.set(n)},disconnect:function(){e.set(rm((function(){return o})))},getApis:function(){return{}},element:t.element,spec:n,readState:h("No state"),syncComponents:p,components:h([]),events:{}}
return uf(o)},Cm=gf,Em=function(t){return function(n){return ce(n,of)}(t).getOrThunk((function(){var e=function(n){return ae(n,"uid")}(t)?t:n({uid:Cm("")},t)
return Om(e).getOrDie()}))},Mm=uf,Dm="alloy.item-hover",_m="alloy.item-focus",Rm=function(n){(Mo(n.element).isNone()||Ri.isFocused(n))&&(Ri.isFocused(n)||Ri.focus(n),at(n,Dm,{item:n}))},Fm=function(n){at(n,_m,{item:n})},Im=h(Dm),Vm=h(_m),Bm=[Tr("data"),Tr("components"),Tr("dom"),Fr("hasSubmenu",!1),Mr("toggling"),ba("itemBehaviours",[xi,Ri,ga,ns]),Fr("ignoreFocus",!1),Fr("domModification",{}),oi("builder",(function(t){return{dom:t.dom,domModification:n(n({},t.domModification),{attributes:n(n(n({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:ya(t.itemBehaviours,[t.toggling.fold(xi.revoke,(function(t){return xi.config(n({aria:{mode:"checked"}},t))})),Ri.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(n){Fm(n)}}),ga.config({mode:"execution"}),ns.config({store:{mode:"memory",initialValue:t.data}}),gd("item-type-events",e(e([],Ci(),!0),[Jr(Nn(),Rm),Jr(Qn(),Ri.focus)],!1))]),components:t.components,eventOrder:t.eventOrder}})),Fr("eventOrder",{})],Am=[Tr("dom"),Tr("components"),oi("builder",(function(n){return{dom:n.dom,components:n.components,events:Yr([eo(Qn())])}}))],Nm=h("item-widget"),Hm=h([Ua({name:"widget",overrides:function(n){return{behaviours:bo([ns.config({store:{mode:"manual",getValue:function(t){return n.data},setValue:p}})])}}})]),Pm=[Tr("uid"),Tr("data"),Tr("components"),Tr("dom"),Fr("autofocus",!1),Fr("ignoreFocus",!1),ba("widgetBehaviours",[ns,Ri,ga]),Fr("domModification",{}),rf(Hm()),oi("builder",(function(n){var t=Qa(Nm(),n,Hm()),e=Za(Nm(),n,t.internals()),r=function(t){return nf(t,n,"widget").map((function(n){return ga.focusIn(n),n}))},o=function(t,e){return ju(e.event.target)?R.none():n.autofocus?(e.setSource(t.element),R.none()):R.none()}
return{dom:n.dom,components:e,domModification:n.domModification,events:Yr([co((function(n,t){r(n).each((function(n){t.stop()}))})),Jr(Nn(),Rm),Jr(Qn(),(function(t,e){n.autofocus?r(t):Ri.focus(t)}))]),behaviours:ya(n.widgetBehaviours,[ns.config({store:{mode:"memory",initialValue:n.data}}),Ri.config({ignore:n.ignoreFocus,onFocus:function(n){Fm(n)}}),ga.config({mode:"special",focusIn:n.autofocus?function(n){r(n)}:So(),onLeft:o,onRight:o,onEscape:function(t,e){return Ri.isFocused(t)||n.autofocus?n.autofocus?(e.setSource(t.element),R.none()):R.none():(Ri.focus(t),R.some(!0))}})])}}))],zm=Sr("type",{widget:Pm,item:Bm,separator:Am}),jm=h([qa({factory:{sketch:function(n){var t=xr("menu.spec item",zm,n)
return t.builder(t)}},name:"items",unit:"item",defaults:function(t,e){return ae(e,"uid")?e:n(n({},e),{uid:gf("item")})},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),Lm=h([Tr("value"),Tr("items"),Tr("dom"),Tr("components"),Fr("eventOrder",{}),pa("menuBehaviours",[Iu,ns,hd,ga]),Ir("movement",{mode:"menu",moveOnTab:!0},Sr("mode",{grid:[ui(),oi("config",(function(n,t){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:n.focusManager}}))],matrix:[oi("config",(function(n,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}})),Tr("rowSelector")],menu:[Fr("moveOnTab",!0),oi("config",(function(n,t){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:t.moveOnTab,focusManager:n.focusManager}}))]})),Cr("markers",Jo()),Fr("fakeFocus",!1),Fr("focusManager",Bu()),ni("onHighlight")]),$m=h("alloy.menu-focus"),Gm=wf({name:"Menu",configFields:Lm(),partFields:jm(),factory:function(n,t,e,r){return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:ha(n.menuBehaviours,[Iu.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight}),ns.config({store:{mode:"memory",initialValue:n.value}}),hd.config({find:R.some}),ga.config(n.movement.config(n,n.movement))]),events:Yr([Jr(Vm(),(function(n,t){var e=t.event
n.getSystem().getByDom(e.target).each((function(e){Iu.highlight(n,e),t.stop(),at(n,$m(),{menu:n,item:e})}))})),Jr(Im(),(function(n,t){var e=t.event.item
Iu.highlight(n,e)}))]),components:t,eventOrder:n.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Um=function(n,t){var e=jt(t),r=Eo(e).bind((function(n){var e,r,o=function(t){return bt(n,t)}
return o(t)?R.some(t):(e=o,(r=function(n){for(var t=0;t<n.childNodes.length;t++){var o=mt.fromDom(n.childNodes[t])
if(e(o))return R.some(o)
var i=r(n.childNodes[t])
if(i.isSome())return i}return R.none()})(t.dom))})),o=n(t)
return r.each((function(n){Eo(e).filter((function(t){return bt(t,n)})).fold((function(){To(n)}),p)})),o},Wm=function(n,t,e,r){var o=n.getSystem().build(r)
Jt(n,o,e)},qm=function(n,t,e,r){var o=Xm(n)
$(o,(function(n){return bt(r.element,n.element)})).each(Qt)},Xm=function(n,t){return n.components()},Ym=function(n,t,e,r,o){var i=Xm(n)
return R.from(i[r]).map((function(t){return qm(n,0,0,t),o.each((function(t){Wm(n,0,(function(n,t){(function(n,t,e){_t(n,e).fold((function(){Vt(n,t)}),(function(n){Rt(n,t)}))})(n,t,r)}),t)})),t}))},Km=xo({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(n,t,e,r){Wm(n,0,Vt,r)},prepend:function(n,t,e,r){Wm(n,0,It,r)},remove:qm,replaceAt:Ym,replaceBy:function(n,t,e,r,o){var i=Xm(n)
return G(i,r).bind((function(t){return Ym(n,0,0,t,o)}))},set:function(n,t,e,r){Um((function(){var t=H(r,n.getSystem().build)
Kt(n,t)}),n.element)},contents:Xm})}),Jm=function(n,t,e,r){return ce(e,r).bind((function(r){return ce(n,r).bind((function(r){var o=Jm(n,t,e,r)
return R.some([r].concat(o))}))})).getOr([])},Qm=function(n,t){var e={}
ee(n,(function(n,t){P(n,(function(n){e[n]=t}))}))
var r=t,o=oe(t,(function(n,t){return{k:n,v:t}})),i=re(o,(function(n,t){return[t].concat(Jm(e,r,o,t))}))
return re(e,(function(n){return ce(i,n).getOr([n])}))},Zm=function(n){return"prepared"===n.type?R.some(n.menu):R.none()},ng={init:function(){var t=ko({}),e=ko({}),r=ko({}),o=Yu(),i=ko({}),u=function(n){return function(n,t){for(var e=ne(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i]
if(t(u,i,n))return R.some(u)}return R.none()}(t.get(),(function(t,e){return t===n}))},c=function(n){return a(n).bind(Zm)},a=function(n){return ce(e.get(),n)},f=function(n){return ce(t.get(),n)}
return{setMenuBuilt:function(t,r){var o
e.set(n(n({},e.get()),((o={})[t]={type:"prepared",menu:r},o)))},setContents:function(n,u,c,a){o.set(n),t.set(c),e.set(u),i.set(a)
var f=Qm(a,c)
r.set(f)},expand:function(n){return ce(t.get(),n).map((function(t){var e=ce(r.get(),n).getOr([])
return[t].concat(e)}))},refresh:function(n){return ce(r.get(),n)},collapse:function(n){return ce(r.get(),n).bind((function(n){return n.length>1?R.some(n.slice(1)):R.none()}))},lookupMenu:a,lookupItem:f,otherMenus:function(n){var t=i.get()
return Y(ne(t),n)},getPrimary:function(){return o.get().bind(c)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),r.set({}),o.clear()},isClear:function(){return o.get().isNone()},getTriggeringPath:function(n,t){var e=z(f(n).toArray(),(function(n){return c(n).isSome()}))
return ce(r.get(),n).bind((function(n){var r=X(e.concat(n))
return function(n){for(var t=[],e=0;e<n.length;e++){var r=n[e]
if(!r.isSome())return R.none()
t.push(r.getOrDie())}return R.some(t)}(W(r,(function(n,e){return function(n,t,e){return c(n).bind((function(r){return u(n).bind((function(n){return t(n).map((function(n){return{triggeredMenu:r,triggeringItem:n,triggeringPath:e}}))}))}))}(n,t,r.slice(0,e+1)).fold((function(){return jr(o.get(),n)?[]:[R.none()]}),(function(n){return[R.some(n)]}))})))}))}}},extractPreparedMenu:Zm},tg=h("collapse-item"),eg=xf({name:"TieredMenu",configFields:[ri("onExecute"),ri("onEscape"),ei("onOpenMenu"),ei("onOpenSubmenu"),ni("onRepositionMenu"),ni("onCollapseMenu"),Fr("highlightImmediately",!0),Er("data",[Tr("primary"),Tr("menus"),Tr("expansions")]),Fr("fakeFocus",!1),ni("onHighlight"),ni("onHover"),Er("markers",[Tr("backgroundMenu")].concat(Xo()).concat(Yo())),Tr("dom"),Fr("navigateOnHover",!0),Fr("stayInDom",!1),pa("tmenuBehaviours",[ga,Iu,hd,Km]),Fr("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)},highlightPrimary:function(n,t){n.highlightPrimary(t)},repositionMenus:function(n,t){n.repositionMenus(t)}},factory:function(t,e){var r,o=Yu(),i=ng.init(),u=function(e){var r=function(e,r,o){return re(o,(function(o,i){var u=function(){return Gm.sketch(n(n({},o),{value:i,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?Au():Bu()}))}
return i===r?{type:"prepared",menu:e.getSystem().build(u())}:{type:"notbuilt",nbMenu:u}}))}(e,t.data.primary,t.data.menus),o=a()
return i.setContents(t.data.primary,r,t.data.expansions,o),i.getPrimary()},c=function(n){return ns.getValue(n).value},a=function(n){return re(t.data.menus,(function(n,t){return W(n.items,(function(n){return"separator"===n.type?[]:[n.data.value]}))}))},f=function(n,t){Iu.highlight(n,t),Iu.getHighlighted(t).orThunk((function(){return Iu.getFirst(t)})).each((function(t){st(n,t.element,Qn())}))},s=function(n,t){return Lr(H(t,(function(t){return n.lookupMenu(t).bind((function(n){return"prepared"===n.type?R.some(n.menu):R.none()}))})))},l=function(n,e,r){var o=s(e,e.otherMenus(r))
P(o,(function(e){hm(e.element,[t.markers.backgroundMenu]),t.stayInDom||Km.remove(n,e)}))},d=function(n,e){var r=function(n){return o.get().getOrThunk((function(){var e={},r=Xi(n.element,"."+t.markers.item),i=z(r,(function(n){return"true"===me(n,"aria-haspopup")}))
return P(i,(function(t){n.getSystem().getByDom(t).each((function(n){var t=c(n)
e[t]=n}))})),o.set(e),e}))}(n)
ee(r,(function(n,t){var r=A(e,t)
le(n.element,"aria-expanded",r)}))},m=function(n,e,r){return R.from(r[0]).bind((function(o){return e.lookupMenu(o).bind((function(o){if("notbuilt"===o.type)return R.none()
var i=o.menu,u=s(e,r.slice(1))
return P(u,(function(n){we(n.element,t.markers.backgroundMenu)})),Gt(i.element)||Km.append(n,Mm(i)),hm(i.element,[t.markers.backgroundMenu]),f(n,i),l(n,e,r),R.some(i)}))}))};(function(n){n[n.HighlightSubmenu=0]="HighlightSubmenu",n[n.HighlightParent=1]="HighlightParent"})(r||(r={}))
var g=function(n,e,o){if(void 0===o&&(o=r.HighlightSubmenu),e.hasConfigured(Ud)&&Ud.isDisabled(e))return R.some(e)
var u=c(e)
return i.expand(u).bind((function(u){return d(n,u),R.from(u[0]).bind((function(c){return i.lookupMenu(c).bind((function(a){var f=function(n,t,e){if("notbuilt"===e.type){var r=n.getSystem().build(e.nbMenu())
return i.setMenuBuilt(t,r),r}return e.menu}(n,c,a)
return Gt(f.element)||Km.append(n,Mm(f)),t.onOpenSubmenu(n,e,f,X(u)),o===r.HighlightSubmenu?(Iu.highlightFirst(f),m(n,i,u)):(Iu.dehighlightAll(f),R.some(e))}))}))}))},v=function(n,e){var r=c(e)
return i.collapse(r).bind((function(r){return d(n,r),m(n,i,r).map((function(r){return t.onCollapseMenu(n,e,r),r}))}))},h=function(n){return function(e,r){return tu(r.getSource(),"."+t.markers.item).bind((function(t){return e.getSystem().getByDom(t).toOptional().bind((function(t){return n(e,t).map(E)}))}))}},y=Yr([Jr($m(),(function(n,t){var e=t.event.item
i.lookupItem(c(e)).each((function(){var e=t.event.menu
Iu.highlight(n,e)
var r=c(t.event.item)
i.refresh(r).each((function(t){return l(n,i,t)}))}))})),co((function(n,e){var o=e.event.target
n.getSystem().getByDom(o).each((function(e){0===c(e).indexOf("collapse-item")&&v(n,e),g(n,e,r.HighlightSubmenu).fold((function(){t.onExecute(n,e)}),p)}))})),oo((function(n,e){u(n).each((function(e){Km.append(n,Mm(e)),t.onOpenMenu(n,e),t.highlightImmediately&&f(n,e)}))}))].concat(t.navigateOnHover?[Jr(Im(),(function(n,e){var o=e.event.item;(function(n,t){var e=c(t)
i.refresh(e).bind((function(t){return d(n,t),m(n,i,t)}))})(n,o),g(n,o,r.HighlightParent),t.onHover(n,o)}))]:[])),x=function(n){return Iu.getHighlighted(n).bind(Iu.getHighlighted)},w={collapseMenu:function(n){x(n).each((function(t){v(n,t)}))},highlightPrimary:function(n){i.getPrimary().each((function(t){f(n,t)}))},repositionMenus:function(n){i.getPrimary().bind((function(t){return x(n).bind((function(n){var t,e=c(n),r=(t=i.getMenus(),ue(t,b)),o=Lr(H(r,ng.extractPreparedMenu))
return i.getTriggeringPath(e,(function(n){return function(n,t,e){return Q(t,(function(n){if(!n.getSystem().isConnected())return R.none()
var t=Iu.getCandidates(n)
return $(t,(function(n){return c(n)===e}))}))}(0,o,n)}))})).map((function(n){return{primary:t,triggeringPath:n}}))})).fold((function(){(function(n){return R.from(n.components()[0]).filter((function(n){return"menu"===me(n.element,"role")}))})(n).each((function(e){t.onRepositionMenu(n,e,[])}))}),(function(e){var r=e.primary,o=e.triggeringPath
t.onRepositionMenu(n,r,o)}))}}
return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ha(t.tmenuBehaviours,[ga.config({mode:"special",onRight:h((function(n,t){return ju(t.element)?R.none():g(n,t,r.HighlightSubmenu)})),onLeft:h((function(n,t){return ju(t.element)?R.none():v(n,t)})),onEscape:h((function(n,e){return v(n,e).orThunk((function(){return t.onEscape(n,e).map((function(){return n}))}))})),focusIn:function(n,t){i.getPrimary().each((function(t){st(n,t.element,Qn())}))}}),Iu.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),hd.config({find:function(n){return Iu.getHighlighted(n)}}),Km.config({})]),eventOrder:t.eventOrder,apis:w,events:y}},extraApis:{tieredData:function(n,t,e){return{primary:n,menus:t,expansions:e}},singleData:function(n,t){return{primary:n,menus:Hr(n,t),expansions:{}}},collapseItem:function(n){return{value:_a(tg()),meta:{text:n}}}}}),rg=function(n,t,e,r){return ce(t.routes,r.start).bind((function(n){return ce(n,r.destination)}))},og=function(n,t,e,r){return rg(0,t,0,r).bind((function(n){return n.transition.map((function(t){return{transition:t,route:n}}))}))},ig=function(n,t,e){(function(n,t,e){return ug(n,t).bind((function(r){return og(n,t,e,r)}))})(n,t,e).each((function(e){var r=e.transition
Oe(n.element,r.transitionClass),ve(n.element,t.destinationAttr)}))},ug=function(n,t,e){var r=n.element
return ge(r,t.destinationAttr).map((function(e){return{start:me(n.element,t.stateAttr),destination:e}}))},cg=function(n,t,e,r){ig(n,t,e),pe(n.element,t.stateAttr)&&me(n.element,t.stateAttr)!==r&&t.onFinish(n,r),le(n.element,t.stateAttr,r)},ag=Object.freeze({__proto__:null,findRoute:rg,disableTransition:ig,getCurrentRoute:ug,jumpTo:cg,progressTo:function(n,t,e,r){(function(n,t,e,r){pe(n.element,t.destinationAttr)&&(ge(n.element,t.destinationAttr).each((function(e){le(n.element,t.stateAttr,e)})),ve(n.element,t.destinationAttr))})(n,t)
var o=function(n,t,e,r){return{start:me(n.element,t.stateAttr),destination:r}}(n,t,0,r)
og(n,t,e,o).fold((function(){cg(n,t,e,r)}),(function(o){ig(n,t,e)
var i=o.transition
we(n.element,i.transitionClass),le(n.element,t.destinationAttr,r)}))},getState:function(n,t,e){return ge(n.element,t.stateAttr)}}),fg=Object.freeze({__proto__:null,events:function(n,t){return Yr([Jr($n(),(function(e,r){var o=r.event.raw
ug(e,n).each((function(r){rg(0,n,0,r).each((function(i){i.transition.each((function(i){o.propertyName===i.property&&(cg(e,n,t,r.destination),n.onTransition(e,r))}))}))}))})),oo((function(e,r){cg(e,n,t,n.initialState)}))])}}),sg=[Fr("destinationAttr","data-transitioning-destination"),Fr("stateAttr","data-transitioning-state"),Tr("initialState"),ni("onTransition"),ni("onFinish"),Cr("routes",hr(De.value,hr(De.value,fr([Rr("transition",[Tr("property"),Tr("transitionClass")])]))))],lg=xo({fields:sg,name:"transitioning",active:fg,apis:ag,extra:{createRoutes:function(n){var t={}
return ee(n,(function(n,e){var r=e.split("<->")
t[r[0]]=Hr(r[1],n),t[r[1]]=Hr(r[0],n)})),t},createBistate:function(n,t,e){return Pr([{key:n,value:Hr(t,e)},{key:t,value:Hr(n,e)}])},createTristate:function(n,t,e,r){return Pr([{key:n,value:Pr([{key:t,value:r},{key:e,value:r}])},{key:t,value:Pr([{key:n,value:r},{key:e,value:r}])},{key:e,value:Pr([{key:n,value:r},{key:t,value:r}])}])}}}),dg=Ti("scrollable"),mg=function(n){we(n,dg)},gg=function(n){Oe(n,dg)},pg=dg,vg=function(n){return ce(n,"format").getOr(n.title)},hg=function(n,t,e,r,o){return{data:{value:n,text:t},type:"item",dom:{tag:"div",classes:o?[Ti("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:Ti("format-matches"),selected:e},itemBehaviours:bo(o?[]:[wi(n,(function(n,t){(t?xi.on:xi.off)(n)}))]),components:[{dom:{tag:"div",attributes:{style:r},innerHtml:t}}]}},bg=function(n,t,e,r){return{value:n,dom:{tag:"div"},components:[Sf.sketch({dom:{tag:"div",classes:[Ti("styles-collapser")]},components:r?[{dom:{tag:"span",classes:[Ti("styles-collapse-icon")]}},km(n)]:[km(n)],action:function(n){if(r){var t=e().get(n)
eg.collapseMenu(t)}}}),{dom:{tag:"div",classes:[Ti("styles-menu-items-container")]},components:[Gm.parts.items({})],behaviours:bo([gd("adhoc-scrollable-menu",[oo((function(n,t){Vi(n.element,"overflow-y","auto"),Vi(n.element,"-webkit-overflow-scrolling","touch"),mg(n.element)})),io((function(n){Pi(n.element,"overflow-y"),Pi(n.element,"-webkit-overflow-scrolling"),gg(n.element)}))])])}],items:t,menuBehaviours:bo([lg.config({initialState:"after",routes:lg.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},yg=function(n){var t,e,r,o,i,u=(t=n.formats,e=function(){return c},r=bg("Styles",[].concat(H(t.items,(function(n){return hg(vg(n),n.title,n.isSelected(),n.getPreview(),fe(t.expansions,vg(n)))}))),e,!1),o=re(t.menus,(function(n,r){var o=H(n,(function(n){return hg(vg(n),n.title,void 0!==n.isSelected&&n.isSelected(),void 0!==n.getPreview?n.getPreview():"",fe(t.expansions,vg(n)))}))
return bg(r,o,e,!0)})),i=Xe(o,Hr("styles",r)),{tmenu:eg.tieredData("styles",i,t.expansions)}),c=Yl(eg.sketch({dom:{tag:"div",classes:[Ti("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,e){var r=ns.getValue(e)
return n.handle(e,r.value),R.none()},onEscape:function(){return R.none()},onOpenMenu:function(n,t){var e=rs(n.element)
es(t.element,e),lg.jumpTo(t,"current")},onOpenSubmenu:function(n,t,e){var r=rs(n.element),o=Zi(t.element,'[role="menu"]').getOrDie("hacky"),i=n.getSystem().getByDom(o).getOrDie()
es(e.element,r),lg.progressTo(i,"before"),lg.jumpTo(e,"after"),lg.progressTo(e,"current")},onCollapseMenu:function(n,t,e){var r=Zi(t.element,'[role="menu"]').getOrDie("hacky"),o=n.getSystem().getByDom(r).getOrDie()
lg.progressTo(o,"after"),lg.progressTo(e,"current")},navigateOnHover:!1,highlightImmediately:!0,data:u.tmenu,markers:{backgroundMenu:Ti("styles-background-menu"),menu:Ti("styles-menu"),selectedMenu:Ti("styles-selected-menu"),item:Ti("styles-item"),selectedItem:Ti("styles-selected-item")}}))
return c.asSpec()},xg=function(n){return fe(n,"items")?function(n){var t=Xe(Nr(n,["items"]),{menu:!0}),e=wg(n.items)
return{item:t,menus:Xe(e.menus,Hr(n.title,e.items)),expansions:Xe(e.expansions,Hr(n.title,n.title))}}(n):{item:n,menus:{},expansions:{}}},wg=function(n){return j(n,(function(n,t){var e=xg(t)
return{menus:Xe(n.menus,e.menus),items:[e.item].concat(n.items),expansions:Xe(n.expansions,e.expansions)}}),{menus:{},expansions:{},items:[]})},Sg=function(n){var t=function(t){return function(){return n.formatter.match(t)}},e=function(t){return function(){return n.formatter.getCssText(t)}},r=function(o){return H(o,(function(o){if(fe(o,"items")){var i=r(o.items)
return Xe(function(n){return Xe(n,{isSelected:C,getPreview:h("")})}(o),{items:i})}return fe(o,"format")?function(n){return Xe(n,{isSelected:t(n.format),getPreview:e(n.format)})}(o):function(r){var o=_a(r.title),i=Xe(r,{format:o,isSelected:t(o),getPreview:e(o)})
return n.formatter.register(o,i),i}(o)}))}
return r(function(n){return n.getParam("style_formats",Ro,"array")}(n))},Og=function(n,t,e){var r=function(n,t){var e=function(t){return W(t,(function(t){return void 0!==t.items?e(t.items).length>0?[t]:[]:!fe(t,"format")||n.formatter.canApply(t.format)?[t]:[]}))},r=e(t)
return wg(r)}(n,t)
return yg({formats:r,handle:function(t,r){n.undoManager.transact((function(){xi.isOn(t)?n.formatter.remove(r):n.formatter.apply(r)})),e()}})},kg=function(n){var t=n.replace(/\|/g," ").trim()
return t.length>0?t.split(/\s+/):[]},Tg=function(n){return W(n,(function(n){return a(n)?Tg(n):kg(n)}))},Cg=function(n){var t=function(n){return n.getParam("toolbar",Fo,"array")}(n)
return a(t)?Tg(t):kg(t)},Eg=function(n,t){var e=function(n){return function(){return function(n,t){return Rf(t,(function(){n.execCommand(t)}),{},n)}(t,n)}},r=function(n){return function(){return function(n,t){var e=Mf(t)
return Rf(t,(function(){n.execCommand(t)}),e,n)}(t,n)}},o=function(n,e,r){return function(){return Df(t,n,e,r)}},i=e("undo"),u=e("redo"),c=r("bold"),a=r("italic"),f=r("underline"),s=e("removeformat"),l=o("unlink","link",(function(){t.execCommand("unlink",null,!1)})),d=o("unordered-list","ul",(function(){t.execCommand("InsertUnorderedList",null,!1)})),m=o("ordered-list","ol",(function(){t.execCommand("InsertOrderedList",null,!1)})),g=Sg(t),p=function(){return Og(t,g,(function(){t.fire("scrollIntoView")}))},v=function(n,e){return{isSupported:function(){var e=t.ui.registry.getAll().buttons
return n.forall((function(n){return fe(e,n)}))},sketch:e}}
return{undo:v(R.none(),i),redo:v(R.none(),u),bold:v(R.none(),c),italic:v(R.none(),a),underline:v(R.none(),f),removeformat:v(R.none(),s),link:v(R.none(),(function(){return Zd(n,t)})),unlink:v(R.none(),l),image:v(R.none(),(function(){return od(t)})),bullist:v(R.some("bullist"),d),numlist:v(R.some("numlist"),m),fontsizeselect:v(R.none(),(function(){return function(n,t){var e={onChange:function(n){Ll(t,n)},getInitialValue:function(){return jl(t)}}
return Bl(n,"font-size",(function(){return Xl(e)}),t)}(n,t)})),forecolor:v(R.none(),(function(){return Nl(n,t)})),styleselect:v(R.none(),(function(){return Rf("style-formats",(function(e){t.fire("toReading"),n.dropup.appear(p,xi.on,e)}),bo([xi.config({toggleClass:Ti("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),ai.config({channels:Pr([Oi(Vo,xi.off),Oi(Bo,xi.off)])})]),t)}))}},Mg=function(n){var t=mt.fromDom(function(n){if(zt()&&d(n.target)){var t=mt.fromDom(n.target)
if(St(t)&&$t(t)&&n.composed&&n.composedPath){var e=n.composedPath()
if(e)return J(e)}}return R.from(n.target)}(n).getOr(n.target)),e=function(){return n.stopPropagation()},r=function(){return n.preventDefault()},o=v(r,e)
return function(n,t,e,r,o,i,u){return{target:n,x:t,y:e,stop:r,prevent:o,kill:i,raw:u}}(t,n.clientX,n.clientY,e,r,o,n)},Dg=function(n,t,e,r,o){var i=function(n,t){return function(e){n(e)&&t(Mg(e))}}(e,r)
return n.dom.addEventListener(t,i,o),{unbind:x(_g,n,t,i,o)}},_g=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},Rg=E,Fg=function(n,t,e){return function(n,t,e,r){return Dg(n,t,e,r,!1)}(n,t,Rg,e)},Ig=function(n,t,e){return function(n,t,e,r){return Dg(n,t,e,r,!0)}(n,t,Rg,e)},Vg=tinymce.util.Tools.resolve("tinymce.util.Delay"),Bg=function(n){var t=n.matchMedia("(orientation: portrait)").matches
return{isPortrait:h(t)}},Ag=function(n){var t=Dn().os.isiOS(),e=Bg(n).isPortrait()
return t&&!e?n.screen.height:n.screen.width},Ng=function(n,t){var e=mt.fromDom(n),r=null,o=Fg(e,"orientationchange",(function(){Vg.clearInterval(r)
var e=Bg(n)
t.onChange(e),i((function(){t.onReady(e)}))})),i=function(t){Vg.clearInterval(r)
var e=n.innerHeight,o=0
r=Vg.setInterval((function(){e!==n.innerHeight?(Vg.clearInterval(r),t(R.some(n.innerHeight))):o>20&&(Vg.clearInterval(r),t(R.none())),o++}),50)}
return{onAdjustment:i,destroy:function(){o.unbind()}}},Hg=function(n,t,e){var r,o=n.document.createRange()
return r=o,t.fold((function(n){r.setStartBefore(n.dom)}),(function(n,t){r.setStart(n.dom,t)}),(function(n){r.setStartAfter(n.dom)})),function(n,t){t.fold((function(t){n.setEndBefore(t.dom)}),(function(t,e){n.setEnd(t.dom,e)}),(function(t){n.setEndAfter(t.dom)}))}(o,e),o},Pg=function(n,t,e,r,o){var i=n.document.createRange()
return i.setStart(t.dom,e),i.setEnd(r.dom,o),i},zg=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},jg=Br([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Lg=function(n,t,e){return t(mt.fromDom(e.startContainer),e.startOffset,mt.fromDom(e.endContainer),e.endOffset)},$g=function(n,t){return function(n,t){var e=t.ltr()
return e.collapsed?t.rtl().filter((function(n){return!1===n.collapsed})).map((function(n){return jg.rtl(mt.fromDom(n.endContainer),n.endOffset,mt.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return Lg(0,jg.ltr,e)})):Lg(0,jg.ltr,e)}(0,function(n,t){return t.match({domRange:function(n){return{ltr:h(n),rtl:R.none}},relative:function(t,e){return{ltr:F((function(){return Hg(n,t,e)})),rtl:F((function(){return R.some(Hg(n,e,t))}))}},exact:function(t,e,r,o){return{ltr:F((function(){return Pg(n,t,e,r,o)})),rtl:F((function(){return R.some(Pg(n,r,o,t,e))}))}}})}(n,t))}
jg.ltr,jg.rtl
var Gg=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},Ug=function(n,t){var e=function(t){return n(t)?R.from(t.dom.nodeValue):R.none()}
return{get:function(r){if(!n(r))throw new Error("Can only get "+t+" value of a "+t+" node")
return e(r).getOr("")},getOption:e,set:function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node")
e.dom.nodeValue=r}}}(Ot,"text"),Wg=function(n){return"img"===xt(n)?1:function(n){return Ug.getOption(n)}(n).fold((function(){return Dt(n).length}),(function(n){return n.length}))},qg=Br([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Xg={before:qg.before,on:qg.on,after:qg.after,cata:function(n,t,e,r){return n.fold(t,e,r)},getStart:function(n){return n.fold(b,b,b)}},Yg=Br([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Kg={domRange:Yg.domRange,relative:Yg.relative,exact:Yg.exact,exactFromRange:function(n){return Yg.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){return function(n){return mt.fromDom(Et(n).dom.defaultView)}(function(n){return n.match({domRange:function(n){return mt.fromDom(n.startContainer)},relative:function(n,t){return Xg.getStart(n)},exact:function(n,t,e,r){return n}})}(n))},range:Gg},Jg=function(n,t){var e=xt(n)
return"input"===e?Xg.after(n):A(["br","img"],e)?0===t?Xg.before(n):Xg.after(n):Xg.on(n,t)},Qg=function(n,t,e,r){var o=function(n,t,e,r){var o=Ct(n).dom.createRange()
return o.setStart(n.dom,t),o.setEnd(e.dom,r),o}(n,t,e,r),i=bt(n,e)&&t===r
return o.collapsed&&!i},Zg=function(n){return R.from(n.getSelection())},np=function(n,t,e,r,o){(function(n,t){Zg(n).each((function(n){n.removeAllRanges(),n.addRange(t)}))})(n,Pg(n,t,e,r,o))},tp=function(n,t,e,r,o){(function(n,t){$g(n,t).match({ltr:function(t,e,r,o){np(n,t,e,r,o)},rtl:function(t,e,r,o){Zg(n).each((function(i){if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom,e,r.dom,o)
else if(i.extend)try{(function(n,t,e,r,o,i){t.collapse(e.dom,r),t.extend(o.dom,i)})(0,i,t,e,r,o)}catch(u){np(n,r,o,t,e)}else np(n,r,o,t,e)}))}})})(n,function(n,t,e,r){var o=Jg(n,t),i=Jg(e,r)
return Kg.relative(o,i)}(t,e,r,o))},ep=function(n){if(n.rangeCount>0){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1)
return R.some(Gg(mt.fromDom(t.startContainer),t.startOffset,mt.fromDom(e.endContainer),e.endOffset))}return R.none()},rp=function(n){if(null===n.anchorNode||null===n.focusNode)return ep(n)
var t=mt.fromDom(n.anchorNode),e=mt.fromDom(n.focusNode)
return Qg(t,n.anchorOffset,e,n.focusOffset)?R.some(Gg(t,n.anchorOffset,e,n.focusOffset)):ep(n)},op=function(n){return Zg(n).filter((function(n){return n.rangeCount>0})).bind(rp)},ip=function(n,t){return function(n){var t=n.getClientRects(),e=t.length>0?t[0]:n.getBoundingClientRect()
return e.width>0||e.height>0?R.some(e).map(zg):R.none()}(function(n,t){return $g(n,t).match({ltr:function(t,e,r,o){var i=n.document.createRange()
return i.setStart(t.dom,e),i.setEnd(r.dom,o),i},rtl:function(t,e,r,o){var i=n.document.createRange()
return i.setStart(r.dom,o),i.setEnd(t.dom,e),i}})}(n,t))},up=function(n){return R.from(n.dom.contentWindow)},cp=function(n){return up(n).bind(op)},ap=function(n){return n.getFrame()},fp=function(n,t,e,r){return n[e].getOrThunk((function(){return function(n){return Fg(t,r,n)}}))},sp=function(n){var t=ap(n)
return function(n){return R.some(mt.fromDom(n.dom.contentWindow.document.body))}(t).bind((function(e){return function(n){return R.some(mt.fromDom(n.dom.contentWindow.document))}(t).bind((function(r){return up(t).map((function(o){var i=mt.fromDom(r.dom.documentElement),u=n.getCursorBox.getOrThunk((function(){return function(){return function(n){return op(n).map((function(n){return Kg.exact(n.start,n.soffset,n.finish,n.foffset)}))}(o).bind((function(n){return ip(o,n).orThunk((function(){return function(n){return op(n).filter((function(n){return bt(n.start,n.finish)&&n.soffset===n.foffset})).bind((function(n){var t=n.start.dom.getBoundingClientRect()
return t.width>0||t.height>0?R.some(t):R.none()}))}(o)}))}))}})),c=n.setSelection.getOrThunk((function(){return function(n,t,e,r){tp(o,n,t,e,r)}})),a=n.clearSelection.getOrThunk((function(){return function(){(function(n){Zg(n).each((function(n){return n.removeAllRanges()}))})(o)}}))
return{body:e,doc:r,win:o,html:i,getSelection:x(cp,t),setSelection:c,clearSelection:a,frame:t,onKeyup:fp(n,r,"onKeyup","keyup"),onNodeChanged:fp(n,r,"onNodeChanged","SelectionChange"),onDomChanged:n.onDomChanged,onScrollToCursor:n.onScrollToCursor,onScrollToElement:n.onScrollToElement,onToReading:n.onToReading,onToEditing:n.onToEditing,onToolbarScrollStart:n.onToolbarScrollStart,onTouchContent:n.onTouchContent,onTapContent:n.onTapContent,onTouchToolstrip:n.onTouchToolstrip,getCursorBox:u}}))}))}))},lp=function(n,t){return function(e){return e[n].getOrThunk((function(){var n=ap(e)
return function(){return t(n)}}))()}}("getWin",up),dp=function(){var n=Qi("head").getOrDie(),t=Qi('meta[name="viewport"]').getOrThunk((function(){var t=mt.fromTag("meta")
return le(t,"name","viewport"),Vt(n,t),t})),e=me(t,"content")
return{maximize:function(){le(t,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){null!=e&&e.length>0?le(t,"content",e):le(t,"content","user-scalable=yes")}}},mp="data-ephox-mobile-fullscreen-style",gp="position:absolute!important;",pp="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",vp=Dn().os.isAndroid(),hp=function(n,t){var e=function(n){return function(t){var e=me(t,"style"),r=void 0===e?"no-styles":e.trim()
r!==n&&(le(t,mp,r),le(t,"style",n))}},r=Wi(n,"*"),o=W(r,(function(n){return qi(n,"*")})),i=function(n){var t=Ai(n,"background-color")
return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"}(t)
P(o,e("display:none!important;")),P(r,e(gp+pp+i)),e((!0===vp?"":gp)+pp+i)(n)},bp=function(){var n=vt("["+mp+"]")
P(n,(function(n){var t=me(n,mp)
"no-styles"!==t?le(n,"style",t):ve(n,"style"),ve(n,mp)}))},yp=function(n){var t=n.raw
return void 0===t.touches||1!==t.touches.length?R.none():R.some(t.touches[0])},xp=function(n){var t,e,r,o=Yu(),i=ko(!1),u=(t=function(t){n.triggerEvent(nt(),t),i.set(!0)},e=400,r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o]
r=setTimeout((function(){t.apply(null,n),r=null}),e)}}),c=Pr([{key:Rn(),value:function(n){return yp(n).each((function(t){u.cancel()
var e={x:t.clientX,y:t.clientY,target:n.target}
u.schedule(n),i.set(!1),o.set(e)})),R.none()}},{key:Fn(),value:function(n){return u.cancel(),yp(n).each((function(n){o.on((function(t){(function(n,t){var e=Math.abs(n.clientX-t.x),r=Math.abs(n.clientY-t.y)
return e>5||r>5})(n,t)&&o.clear()}))})),R.none()}},{key:In(),value:function(t){u.cancel()
return o.get().filter((function(n){return bt(n.target,t.target)})).map((function(e){return i.get()?(t.prevent(),!1):n.triggerEvent(Zn(),t)}))}}])
return{fireIfReady:function(n,t){return ce(c,t).bind((function(t){return t(n)}))}}},wp=function(n){var t=xp({triggerEvent:function(t,e){n.onTapContent(e)}})
return{fireTouchstart:function(n){t.fireIfReady(n,"touchstart")},onTouchend:function(){return Fg(n.body,"touchend",(function(n){t.fireIfReady(n,"touchend")}))},onTouchmove:function(){return Fg(n.body,"touchmove",(function(n){t.fireIfReady(n,"touchmove")}))}}},Sp=Dn().os.version.major>=6,Op=function(n,t,e){var r=wp(n),o=Ct(t),i=function(n){return!bt(n.start,n.finish)||n.soffset!==n.foffset},u=function(){var r=n.doc.dom.hasFocus()&&n.getSelection().exists(i)
e.getByDom(t).each(!0===(r||Eo(o).filter((function(n){return"input"===xt(n)})).exists((function(n){return n.dom.selectionStart!==n.dom.selectionEnd})))?xi.on:xi.off)},c=[Fg(n.body,"touchstart",(function(t){n.onTouchContent(),r.fireTouchstart(t)})),r.onTouchmove(),r.onTouchend(),Fg(t,"touchstart",(function(t){n.onTouchToolstrip()})),n.onToReading((function(){Co(n.body)})),n.onToEditing(p),n.onScrollToCursor((function(t){t.preventDefault(),n.getCursorBox().each((function(t){var e=n.win,r=t.top>e.innerHeight||t.bottom>e.innerHeight?t.bottom-e.innerHeight+50:0
0!==r&&e.scrollTo(e.pageXOffset,e.pageYOffset+r)}))}))].concat(!0===Sp?[]:[Fg(mt.fromDom(n.win),"blur",(function(){e.getByDom(t).each(xi.off)})),Fg(o,"select",u),Fg(n.doc,"selectionchange",u)])
return{destroy:function(){P(c,(function(n){n.unbind()}))}}},kp=function(n,t){var e=parseInt(me(n,t),10)
return isNaN(e)?0:e},Tp=function(t){return n(n({},t),{width:2})},Cp=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},Ep=function(n){var t=n.getSelection()
return void 0!==t&&t.rangeCount>0?function(n){if(n.collapsed){var t=mt.fromDom(n.startContainer)
return Mt(t).bind((function(e){var r=Kg.exact(t,n.startOffset,e,Wg(e))
return ip(n.startContainer.ownerDocument.defaultView,r).map(Tp).map(K)})).getOr([])}return H(n.getClientRects(),Cp)}(t.getRangeAt(0)):[]},Mp=function(n){n.focus()
var t=mt.fromDom(n.document.body);(Eo().exists((function(n){return A(["input","textarea"],xt(n))}))?function(n){Vg.setTimeout((function(){n()}),0)}:T)((function(){Eo().each(Co),To(t)}))},Dp="data-"+Ti("last-outer-height"),_p=function(n,t){le(n,Dp,t)},Rp=function(n){return{top:n.top,bottom:n.top+n.height}},Fp=function(n,t){var e=function(n){return kp(n,Dp)}(t),r=n.innerHeight
return e>r?R.some(e-r):R.none()},Ip=function(n,t){var e=mt.fromDom(t.document.body),r=Fg(mt.fromDom(n),"resize",(function(){Fp(n,e).each((function(n){(function(n){var t=Ep(n)
return t.length>0?R.some(t[0]).map(Rp):R.none()})(t).each((function(e){var r=function(n,t,e){return t.top>n.innerHeight||t.bottom>n.innerHeight?Math.min(e,t.bottom-n.innerHeight+50):0}(t,e,n)
0!==r&&t.scrollTo(t.pageXOffset,t.pageYOffset+r)}))})),_p(e,n.innerHeight)}))
_p(e,n.innerHeight)
return{toEditing:function(){Mp(t)},destroy:function(){r.unbind()}}},Vp=function(n,t){var e=null,r=function(){f(e)||(clearTimeout(e),e=null)}
return{cancel:r,throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i]
r(),e=setTimeout((function(){e=null,n.apply(null,o)}),t)}}},Bp=function(n,t){var e,r,o,i=Yl(bd.sketch({dom:Cf('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:bo([xi.config({toggleClass:Ti("mask-tap-icon-selected"),toggleOnExecute:!1})])})),u=(e=n,r=200,o=null,{cancel:function(){f(o)||(clearTimeout(o),o=null)},throttle:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]
f(o)&&(o=setTimeout((function(){o=null,e.apply(null,n)}),r))}})
return bd.sketch({dom:Cf('<div class="${prefix}-disabled-mask"></div>'),components:[bd.sketch({dom:Cf('<div class="${prefix}-content-container"></div>'),components:[Sf.sketch({dom:Cf('<div class="${prefix}-content-tap-section"></div>'),components:[i.asSpec()],action:function(n){u.throttle()},buttonBehaviours:bo([xi.config({toggleClass:Ti("mask-tap-icon-selected")})])})]})]})},Ap=h({unbind:p}),Np=sr([Er("editor",[Tr("getFrame"),Mr("getBody"),Mr("getDoc"),Mr("getWin"),Mr("getSelection"),Mr("setSelection"),Mr("clearSelection"),Mr("cursorSaver"),Mr("onKeyup"),Mr("onNodeChanged"),Mr("getCursorBox"),Tr("onDomChanged"),Fr("onTouchContent",p),Fr("onTapContent",p),Fr("onTouchToolstrip",p),Fr("onScrollToCursor",Ap),Fr("onScrollToElement",Ap),Fr("onToEditing",Ap),Fr("onToReading",Ap),Fr("onToolbarScrollStart",b)]),Tr("socket"),Tr("toolstrip"),Tr("dropup"),Tr("toolbar"),Tr("container"),Tr("alloy"),kr("win",(function(n){return Ct(n.socket).dom.defaultView})),kr("body",(function(n){return mt.fromDom(n.socket.dom.ownerDocument.body)})),Fr("translate",b),Fr("setReadOnly",p),Fr("readOnlyOnInit",E)]),Hp=function(n){var t=xr("Getting AndroidWebapp schema",Np,n)
Vi(t.toolstrip,"width","100%")
var e=Em(Bp((function(){t.setReadOnly(t.readOnlyOnInit()),o.enter()}),t.translate))
t.alloy.add(e)
var r={show:function(){t.alloy.add(e)},hide:function(){t.alloy.remove(e)}}
Vt(t.container,e.element)
var o=function(n,t){var e=dp(),r=Xu(),o=Xu()
return{enter:function(){t.hide(),we(n.container,Ti("fullscreen-maximized")),we(n.container,Ti("android-maximized")),e.maximize(),we(n.body,Ti("android-scroll-reload")),r.set(Ip(n.win,lp(n.editor).getOrDie("no"))),sp(n.editor).each((function(t){hp(n.container,t.body),o.set(Op(t,n.toolstrip,n.alloy))}))},exit:function(){e.restore(),t.show(),Oe(n.container,Ti("fullscreen-maximized")),Oe(n.container,Ti("android-maximized")),bp(),Oe(n.body,Ti("android-scroll-reload")),o.clear(),r.clear()}}}(t,r)
return{setReadOnly:t.setReadOnly,refreshStructure:p,enter:o.enter,exit:o.exit,destroy:p}},Pp=h([Tr("dom"),Fr("shell",!0),pa("toolbarBehaviours",[Km])]),zp=h([Wa({name:"groups",overrides:function(){return{behaviours:bo([Km.config({})])}}})]),jp=wf({name:"Toolbar",configFields:Pp(),partFields:zp(),factory:function(n,t,e,r){var o=function(t){return n.shell?R.some(t):nf(t,n,"groups")},i=n.shell?{behaviours:[Km.config({})],components:[]}:{behaviours:[],components:t}
return{uid:n.uid,dom:n.dom,components:i.components,behaviours:ha(n.toolbarBehaviours,i.behaviours),apis:{setGroups:function(n,t){o(n).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(n){Km.set(n,t)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,t,e){n.setGroups(t,e)}}}),Lp=h([Tr("items"),function(n){return Er("markers",H(n,Tr))}(["itemSelector"]),pa("tgroupBehaviours",[ga])]),$p=h([qa({name:"items",unit:"item"})]),Gp=wf({name:"ToolbarGroup",configFields:Lp(),partFields:$p(),factory:function(n,t,e,r){return{uid:n.uid,dom:n.dom,components:t,behaviours:ha(n.tgroupBehaviours,[ga.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),Up="data-"+Ti("horizontal-scroll"),Wp=function(n){return"true"===me(n,Up)?function(n){return n.dom.scrollLeft>0||function(n){n.dom.scrollLeft=1
var t=0!==n.dom.scrollLeft
return n.dom.scrollLeft=0,t}(n)}(n):function(n){return n.dom.scrollTop>0||function(n){n.dom.scrollTop=1
var t=0!==n.dom.scrollTop
return n.dom.scrollTop=0,t}(n)}(n)},qp=function(){var n=function(n){var t=!0===n.scrollable?"${prefix}-toolbar-scrollable-group":""
return{dom:Cf('<div aria-label="'+n.label+'" class="${prefix}-toolbar-group '+t+'"></div>'),tgroupBehaviours:bo([gd("adhoc-scrollable-toolbar",!0===n.scrollable?[uo((function(n,t){var e
Vi(n.element,"overflow-x","auto"),e=n.element,le(e,Up,"true"),mg(n.element)}))]:[])]),components:[bd.sketch({components:[Gp.parts.items({})]})],markers:{itemSelector:"."+Ti("toolbar-group-item")},items:n.items}},t=Em(jp.sketch({dom:Cf('<div class="${prefix}-toolbar"></div>'),components:[jp.parts.groups({})],toolbarBehaviours:bo([xi.config({toggleClass:Ti("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),ga.config({mode:"cyclic"})]),shell:!0})),e=Em(bd.sketch({dom:{classes:[Ti("toolstrip")]},components:[Mm(t)],containerBehaviours:bo([xi.config({toggleClass:Ti("android-selection-context-toolbar"),toggleOnExecute:!1})])})),r=function(){jp.setGroups(t,o.get()),xi.off(t)},o=ko([])
return{wrapper:e,toolbar:t,createGroups:function(t){return H(t,v(Gp.sketch,n))},setGroups:function(n){o.set(n),r()},setContextToolbar:function(n){xi.on(t),jp.setGroups(t,n)},restoreToolbar:function(){xi.isOn(t)&&r()},refresh:function(){},focus:function(){ga.focusIn(t)}}},Xp=function(n){return Em(Sf.sketch({dom:Cf('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){n.run((function(n){n.setReadOnly(!1)}))}}))},Yp=function(){return Em(bd.sketch({dom:Cf('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:bo([Km.config({})])}))},Kp=function(n,t){Km.append(n,Mm(t))},Jp=function(n,t){Km.remove(n,t)},Qp=function(n,t,e,r){(!0===e?Oo.toAlpha:Oo.toOmega)(r),(e?Kp:Jp)(n,t)},Zp=function(n,t){return t.getAnimationRoot.fold((function(){return n.element}),(function(t){return t(n)}))},nv=function(n){return n.dimension.property},tv=function(n,t){return n.dimension.getDimension(t)},ev=function(n,t){var e=Zp(n,t)
hm(e,[t.shrinkingClass,t.growingClass])},rv=function(n,t){Oe(n.element,t.openClass),we(n.element,t.closedClass),Vi(n.element,nv(t),"0px"),zi(n.element)},ov=function(n,t){Oe(n.element,t.closedClass),we(n.element,t.openClass),Pi(n.element,nv(t))},iv=function(n,t,e,r){e.setCollapsed(),Vi(n.element,nv(t),tv(t,n.element)),zi(n.element),ev(n,t),rv(n,t),t.onStartShrink(n),t.onShrunk(n)},uv=function(n,t,e,r){var o=r.getOrThunk((function(){return tv(t,n.element)}))
e.setCollapsed(),Vi(n.element,nv(t),o),zi(n.element)
var i=Zp(n,t)
Oe(i,t.growingClass),we(i,t.shrinkingClass),rv(n,t),t.onStartShrink(n)},cv=function(n,t,e){var r=tv(t,n.element);("0px"===r?iv:uv)(n,t,e,R.some(r))},av=function(n,t,e){var r=Zp(n,t),o=ke(r,t.shrinkingClass),i=tv(t,n.element)
ov(n,t)
var u=tv(t,n.element);(o?function(){Vi(n.element,nv(t),i),zi(n.element)}:function(){rv(n,t)})(),Oe(r,t.shrinkingClass),we(r,t.growingClass),ov(n,t),Vi(n.element,nv(t),u),e.setExpanded(),t.onStartGrow(n)},fv=function(n,t,e){var r=Zp(n,t)
return!0===ke(r,t.growingClass)},sv=function(n,t,e){var r=Zp(n,t)
return!0===ke(r,t.shrinkingClass)},lv=Object.freeze({__proto__:null,refresh:function(n,t,e){if(e.isExpanded()){Pi(n.element,nv(t))
var r=tv(t,n.element)
Vi(n.element,nv(t),r)}},grow:function(n,t,e){e.isExpanded()||av(n,t,e)},shrink:function(n,t,e){e.isExpanded()&&cv(n,t,e)},immediateShrink:function(n,t,e){e.isExpanded()&&iv(n,t,e)},hasGrown:function(n,t,e){return e.isExpanded()},hasShrunk:function(n,t,e){return e.isCollapsed()},isGrowing:fv,isShrinking:sv,isTransitioning:function(n,t,e){return fv(n,t)||sv(n,t)},toggleGrow:function(n,t,e){(e.isExpanded()?cv:av)(n,t,e)},disableTransitions:ev}),dv=Object.freeze({__proto__:null,exhibit:function(n,t,e){var r=t.expanded
return so(r?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Hr(t.dimension.property,"0px")})},events:function(n,t){return Yr([ro($n(),(function(e,r){r.event.raw.propertyName===n.dimension.property&&(ev(e,n),t.isExpanded()&&Pi(e.element,n.dimension.property),(t.isExpanded()?n.onGrown:n.onShrunk)(e))}))])}}),mv=[Tr("closedClass"),Tr("openClass"),Tr("shrinkingClass"),Tr("growingClass"),Mr("getAnimationRoot"),ni("onShrunk"),ni("onStartShrink"),ni("onGrown"),ni("onStartGrow"),Fr("expanded",!1),Cr("dimension",Sr("property",{width:[oi("property","width"),oi("getDimension",(function(n){return rs(n)+"px"}))],height:[oi("property","height"),oi("getDimension",(function(n){return $i(n)+"px"}))]}))],gv=xo({fields:mv,name:"sliding",active:dv,apis:lv,state:Object.freeze({__proto__:null,init:function(n){var t=ko(n.expanded)
return ho({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:x(t.set,!1),setExpanded:x(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),pv=function(n,t){var e=Em(bd.sketch({dom:{tag:"div",classes:[Ti("dropup")]},components:[],containerBehaviours:bo([Km.config({}),gv.config({closedClass:Ti("dropup-closed"),openClass:Ti("dropup-open"),shrinkingClass:Ti("dropup-shrinking"),growingClass:Ti("dropup-growing"),dimension:{property:"height"},onShrunk:function(e){n(),t(),Km.set(e,[])},onGrown:function(e){n(),t()}}),Si((function(n,t){r(p)}))])})),r=function(n){window.requestAnimationFrame((function(){n(),gv.shrink(e)}))}
return{appear:function(n,t,r){!0===gv.hasShrunk(e)&&!1===gv.isTransitioning(e)&&window.requestAnimationFrame((function(){t(r),Km.set(e,[n()]),gv.grow(e)}))},disappear:r,component:e,element:e.element}},vv=function(n){var t,e
return n.raw.which===eu[0]&&!A(["input","textarea"],xt(n.target))&&(t=n.target,!tu(t,'[contenteditable="true"]',e).isSome())},hv=function(){return Dn().browser.isFirefox()},bv=function(t,e){var r=n({stopBackspace:!0},e),o=xp(r),i=H(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(n){return Fg(t,n,(function(t){o.fireIfReady(t,n).each((function(n){n&&t.kill()})),r.triggerEvent(n,t)&&t.kill()}))})),u=Yu(),c=Fg(t,"paste",(function(n){o.fireIfReady(n,"paste").each((function(t){t&&n.kill()})),r.triggerEvent("paste",n)&&n.kill(),u.set(setTimeout((function(){r.triggerEvent(Yn(),n)}),0))})),a=Fg(t,"keydown",(function(n){r.triggerEvent("keydown",n)?n.kill():r.stopBackspace&&vv(n)&&n.prevent()})),f=function(n,t){return hv()?Ig(n,"focus",t):Fg(n,"focusin",t)}(t,(function(n){r.triggerEvent("focusin",n)&&n.kill()})),s=Yu(),l=function(n,t){return hv()?Ig(n,"blur",t):Fg(n,"focusout",t)}(t,(function(n){r.triggerEvent("focusout",n)&&n.kill(),s.set(setTimeout((function(){r.triggerEvent(Xn(),n)}),0))}))
return{unbind:function(){P(i,(function(n){n.unbind()})),a.unbind(),f.unbind(),l.unbind(),c.unbind(),u.on(clearTimeout),s.on(clearTimeout)}}},yv=function(n,t){var e=ce(n,"target").getOr(t)
return ko(e)},xv=Br([{stopped:[]},{resume:["element"]},{complete:[]}]),wv=function(n,t,e,r,o,i){var u=n(t,r),c=function(n,t){var e=ko(!1),r=ko(!1)
return{stop:function(){e.set(!0)},cut:function(){r.set(!0)},isStopped:e.get,isCut:r.get,event:n,setSource:t.set,getSource:t.get}}(e,o)
return u.fold((function(){return i.logEventNoHandlers(t,r),xv.complete()}),(function(n){var e=n.descHandler
return cm(e)(c),c.isStopped()?(i.logEventStopped(t,n.element,e.purpose),xv.stopped()):c.isCut()?(i.logEventCut(t,n.element,e.purpose),xv.complete()):Mt(n.element).fold((function(){return i.logNoParent(t,n.element,e.purpose),xv.complete()}),(function(r){return i.logEventResponse(t,n.element,e.purpose),xv.resume(r)}))}))},Sv=function(n,t,e,r,o,i){return wv(n,t,e,r,o,i).fold(E,(function(r){return Sv(n,t,e,r,o,i)}),C)},Ov=function(n,t,e){var r=function(n){var t=ko(!1)
return{stop:function(){t.set(!0)},cut:p,isStopped:t.get,isCut:C,event:n,setSource:k("Cannot set source of a broadcasted event"),getSource:k("Cannot get source of a broadcasted event")}}(t)
return P(n,(function(n){var t=n.descHandler
cm(t)(r)})),r.isStopped()},kv=function(n,t,e,r,o){var i=yv(e,r)
return Sv(n,t,e,r,i,o)},Tv=function(){var n={}
return{registerId:function(t,e,r){ee(r,(function(r,o){var i=void 0!==n[o]?n[o]:{}
i[e]=function(n,t){return e=x.apply(void 0,[n.handler].concat(t)),r=n.purpose,{cHandler:e,purpose:r}
var e,r}(r,t),n[o]=i}))},unregisterId:function(t){ee(n,(function(n,e){ae(n,t)&&delete n[t]}))},filterByType:function(t){return ce(n,t).map((function(n){return ue(n,(function(n,t){return function(n,t){return{id:n,descHandler:t}}(t,n)}))})).getOr([])},find:function(t,e,r){return ce(n,e).bind((function(n){return Gr(r,(function(t){return function(n,t){return mf(t).bind((function(t){return ce(n,t)})).map((function(n){return function(n,t){return{element:n,descHandler:t}}(t,n)}))}(n,t)}),t)}))}}},Cv=function(){var n=Tv(),t={},e=function(n){var t=n.element
return mf(t).getOrThunk((function(){return function(n,t){var e=_a(sf+n)
return df(t,e),e}("uid-",n.element)}))},r=function(e){mf(e.element).each((function(e){delete t[e],n.unregisterId(e)}))}
return{find:function(t,e,r){return n.find(t,e,r)},filter:function(t){return n.filterByType(t)},register:function(o){var i=e(o)
fe(t,i)&&function(n,e){var o=t[e]
if(o!==n)throw new Error('The tagId "'+e+'" is already used by: '+zo(o.element)+"\nCannot use it for: "+zo(n.element)+"\nThe conflicting element is"+(Gt(o.element)?" ":" not ")+"already in the DOM")
r(n)}(o,i)
var u=[o]
n.registerId(u,i,o.events),t[i]=o},unregister:r,getById:function(n){return ce(t,n)}}},Ev=function(n){var t=function(t){return Mt(n.element).fold(E,(function(n){return bt(t,n)}))},e=Cv(),r=function(n,r){return e.find(t,n,r)},o=bv(n.element,{triggerEvent:function(n,t){return Wo(n,t.target,(function(e){return function(n,t,e,r){return kv(n,t,e,e.target,r)}(r,n,t,e)}))}}),i={debugInfo:h("real"),triggerEvent:function(n,t,e){Wo(n,t,(function(o){return kv(r,n,e,t,o)}))},triggerFocus:function(n,t){mf(n).fold((function(){To(n)}),(function(e){Wo(qn(),n,(function(e){return function(n,t,e,r,o){var i=yv(e,r)
wv(n,t,e,r,i,o)}(r,qn(),{originator:t,kill:p,prevent:p,target:n},n,e),!1}))}))},triggerEscape:function(n,t){i.triggerEvent("keydown",n.element,t.event)},getByUid:function(n){return g(n)},getByDom:function(n){return v(n)},build:Em,addToGui:function(n){a(n)},removeFromGui:function(n){f(n)},addToWorld:function(n){u(n)},removeFromWorld:function(n){c(n)},broadcast:function(n){l(n)},broadcastOn:function(n,t){d(n,t)},broadcastEvent:function(n,t){m(n,t)},isConnected:E},u=function(n){n.connect(i),Ot(n.element)||(e.register(n),P(n.components(),u),i.triggerEvent(tt(),n.element,{target:n.element}))},c=function(n){Ot(n.element)||(P(n.components(),c),e.unregister(n)),n.disconnect()},a=function(t){(function(n,t){Jt(n,t,Vt)})(n,t)},f=function(n){Qt(n)},s=function(n){var t=e.filter(Kn())
P(t,(function(t){var e=t.descHandler
cm(e)(n)}))},l=function(n){s({universal:!0,data:n})},d=function(n,t){s({universal:!1,channels:n,data:t})},m=function(n,t){var r=e.filter(n)
return Ov(r,t)},g=function(n){return e.getById(n).fold((function(){return De.error(new Error('Could not find component with uid: "'+n+'" in system.'))}),De.value)},v=function(n){var t=mf(n).getOr("not found")
return g(t)}
return u(n),{root:n,element:n.element,destroy:function(){o.unbind(),Nt(n.element)},add:a,remove:f,getByUid:g,getByDom:v,addToWorld:u,removeFromWorld:c,broadcast:l,broadcastOn:d,broadcastEvent:m}},Mv=Ti("readonly-mode"),Dv=Ti("edit-mode")
function _v(n){var t=Em(bd.sketch({dom:{classes:[Ti("outer-container")].concat(n.classes)},containerBehaviours:bo([Oo.config({alpha:Mv,omega:Dv})])}))
return Ev(t)}var Rv=function(n,t){var e=mt.fromTag("input")
Bi(e,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),Vt(n,e),To(e),t(e),Nt(e)},Fv=function(n){var t=n.getSelection()
if(t.rangeCount>0){var e=t.getRangeAt(0),r=n.document.createRange()
r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset),t.removeAllRanges(),t.addRange(r)}},Iv=function(n,t){Eo().each((function(n){bt(n,t)||Co(n)})),n.focus(),To(mt.fromDom(n.document.body)),Fv(n)},Vv=function(n,t,e,r){var o=function(){Iv(t,r)},i=Fg(e,"keydown",(function(n){A(["input","textarea"],xt(n.target))||o()}))
return{toReading:function(){Rv(n,Co)},toEditing:o,onToolbarTouch:p,destroy:function(){i.unbind()}}},Bv=function(n,t,e,r,o){var i=function(){t.run((function(n){n.refreshSelection()}))},u=function(n,e){var o=n-r.dom.scrollTop
t.run((function(n){n.scrollIntoView(o,o+e)}))},c=function(){t.run((function(n){n.clearSelection()}))},a=function(){n.getCursorBox().each((function(n){u(n.top,n.height)})),t.run((function(n){n.syncHeight()}))},f=wp(n),s=Vp(a,300),l=[n.onKeyup((function(){c(),s.throttle()})),n.onNodeChanged(i),n.onDomChanged(s.throttle),n.onDomChanged(i),n.onScrollToCursor((function(n){n.preventDefault(),s.throttle()})),n.onScrollToElement((function(n){n.element,u(t,r)})),n.onToEditing((function(){t.run((function(n){n.toEditing()}))})),n.onToReading((function(){t.run((function(n){n.toReading()}))})),Fg(n.doc,"touchend",(function(t){bt(n.html,t.target)||bt(n.body,t.target)})),Fg(e,"transitionend",(function(n){var r
"height"===n.raw.propertyName&&(r=$i(e),t.run((function(n){n.setViewportOffset(r)})),i(),a())})),Ig(e,"touchstart",(function(e){var r
t.run((function(n){n.highlightSelection()})),r=e,t.run((function(n){n.onToolbarTouch(r)})),n.onTouchToolstrip()})),Fg(n.body,"touchstart",(function(t){c(),n.onTouchContent(),f.fireTouchstart(t)})),f.onTouchmove(),f.onTouchend(),Fg(n.body,"click",(function(n){n.kill()})),Fg(e,"touchmove",(function(){n.onToolbarScrollStart()}))]
return{destroy:function(){P(l,(function(n){n.unbind()}))}}}
var Av,Nv=function(n){var t=R.none(),e=[],r=function(n){o()?u(n):e.push(n)},o=function(){return t.isSome()},i=function(n){P(n,u)},u=function(n){t.each((function(t){setTimeout((function(){n(t)}),0)}))}
return n((function(n){o()||(t=R.some(n),i(e),e=[])})),{get:r,map:function(n){return Nv((function(t){r((function(e){t(n(e))}))}))},isReady:o}},Hv={nu:Nv,pure:function(n){return Nv((function(t){t(n)}))}},Pv=function(n){setTimeout((function(){throw n}),0)},zv=function(n){var t=function(t){n().then(t,Pv)}
return{map:function(t){return zv((function(){return n().then(t)}))},bind:function(t){return zv((function(){return n().then((function(n){return t(n).toPromise()}))}))},anonBind:function(t){return zv((function(){return n().then((function(){return t.toPromise()}))}))},toLazy:function(){return Hv.nu(t)},toCached:function(){var t=null
return zv((function(){return null===t&&(t=n()),t}))},toPromise:n,get:t}},jv=function(n){return zv((function(){return new td(n)}))},Lv=function(n){return zv((function(){return td.resolve(n)}))},$v=function(n,t){return Q([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],(function(e){return function(n,t){return n?R.some(t):R.none()}(n<=e.width&&t<=e.height,e.keyboard)})).getOr({portrait:t/5,landscape:n/4})},Gv=function(n){var t=Bg(n).isPortrait(),e=function(n){return $v(n.screen.width,n.screen.height)}(n),r=t?e.portrait:e.landscape
return(t?n.screen.height:n.screen.width)-n.innerHeight>r?0:r},Uv=function(n,t){var e=Ct(n).dom.defaultView
return $i(n)+$i(t)-Gv(e)},Wv=function(n,t,e){var r=Uv(t,e),o=$i(t)+$i(e)-r
Vi(n,"padding-bottom",o+"px")},qv=Br([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),Xv="data-"+Ti("position-y-fixed"),Yv="data-"+Ti("y-property"),Kv="data-"+Ti("scrolling"),Jv="data-"+Ti("last-window-height"),Qv=function(n){return kp(n,Xv)},Zv=function(n,t){var e=function(n){return me(n,Yv)}(n)
return qv.fixed(n,e,t)},nh=function(n,t){return qv.scroller(n,t)},th=function(n){var t=Qv(n)
return("true"===me(n,Kv)?nh:Zv)(n,t)},eh=function(n,t,e){var r=Ct(n).dom.defaultView.innerHeight
return le(n,Jv,r+"px"),r-t-e},rh=function(n,t,e,r){var o=Ct(n).dom.defaultView,i=function(n){var t=me(n,"style")
return Bi(n,{position:"absolute",top:"0px"}),le(n,Xv,"0px"),le(n,Yv,"top"),{restore:function(){le(n,"style",t||""),ve(n,Xv),ve(n,Yv)}}}(e),u=$i(e),c=$i(r),a=function(n,t,e){var r=me(e,"style")
return mg(e),Bi(e,{position:"absolute",height:t+"px",width:"100%",top:n+"px"}),le(e,Xv,n+"px"),le(e,Kv,"true"),le(e,Yv,"top"),{restore:function(){gg(e),le(e,"style",r||""),ve(e,Xv),ve(e,Kv),ve(e,Yv)}}}(u,eh(n,u,c),n),f=function(n){var t=me(n,"style")
return Bi(n,{position:"absolute",bottom:"0px"}),le(n,Xv,"0px"),le(n,Yv,"bottom"),{restore:function(){le(n,"style",t||""),ve(n,Xv),ve(n,Yv)}}}(r),s=!0,l=function(){return o.innerHeight>function(n){return kp(n,Jv)}(n)},d=function(){if(s){var o=$i(e),i=$i(r),u=eh(n,o,i)
le(n,Xv,o+"px"),Vi(n,"height",u+"px"),Wv(t,n,r)}}
return Wv(t,n,r),{setViewportOffset:function(t){le(n,Xv,t+"px"),d()},isExpanding:l,isShrinking:O(l),refresh:d,restore:function(){s=!1,i.restore(),a.restore(),f.restore()}}},oh=(Av=null,{animate:function(n,t,e,r,o,i){var u=!1,c=function(n){u=!0,o(n)}
Vg.clearInterval(Av)
var a=function(n){Vg.clearInterval(Av),c(n)}
Av=Vg.setInterval((function(){var o=n();(function(n,t,e){return Math.abs(n-t)<=e?R.none():n<t?R.some(n+e):R.some(n-e)})(o,t,e).fold((function(){Vg.clearInterval(Av),c(t)}),(function(e){if(r(e,a),!u){var i=n();(i!==e||Math.abs(i-t)>Math.abs(o-t))&&(Vg.clearInterval(Av),c(t))}}))}),i)}}),ih="data-"+Ti("last-scroll-top"),uh=function(n){var t=Hi(n,"top").getOr("0")
return parseInt(t,10)},ch=function(n){return parseInt(n.dom.scrollTop,10)},ah=function(n,t){return jv((function(e){var r=x(ch,n)
le(n,ih,r())
var o=Math.abs(t-r()),i=Math.ceil(o/10)
oh.animate(r,t,i,(function(t,e){kp(n,ih)!==n.dom.scrollTop?e(n.dom.scrollTop):(n.dom.scrollTop=t,le(n,ih,t))}),(function(){n.dom.scrollTop=t,le(n,ih,t),e(t)}),10)}))},fh=function(n,t){var e=t+Qv(n)+"px"
Vi(n,"top",e)}
var sh=function(n,t){return t((function(t){var e=[],r=0
0===n.length?t([]):P(n,(function(o,i){o.get(function(o){return function(i){e[o]=i,++r>=n.length&&t(e)}}(i))}))}))},lh=function(n,t,e){var r=t+e,o=Hi(n,"top").getOr(e),i=r-parseInt(o,10)
return function(n,t,e){return jv((function(r){var o=x(ch,n)
oh.animate(o,t,15,(function(t){n.dom.scrollTop=t,Vi(n,"top",uh(n)+15+"px")}),(function(){n.dom.scrollTop=t,Vi(n,"top",e+"px"),r(t)}),10)}))}(n,n.dom.scrollTop+i,r)},dh=function(n,t){return n.fold((function(n,e,r){return function(n,t,e,r){return Vi(n,t,e+r+"px"),Lv(r)}(n,e,t,r)}),(function(n,e){return lh(n,t,e)}))},mh=function(n,t){var e=function(n){var t=Xi(n,"["+Xv+"]")
return H(t,th)}(n),r=H(e,(function(n){return dh(n,t)}))
return sh(r,jv)},gh=function(n,t,e,r,o,i){var u,c,a=(u=function(e){return function(n,t,e){var r=Ct(n).dom.defaultView
return jv((function(o){fh(n,e),fh(t,e),r.scrollTo(0,e),o(e)}))}(n,t,e)},c=ko(Hv.pure({})),{start:function(n){var t=Hv.nu((function(t){return u(n).get(t)}))
c.set(t)},idle:function(n){c.get().get((function(){n()}))}}),f=Vp((function(){a.idle((function(){mh(e,r.pageYOffset).get((function(){var n;(n=Ep(i),R.from(n[0]).bind((function(n){var e=n.top-t.dom.scrollTop
return e>r.innerHeight+5||e<-5?R.some({top:e,bottom:e+n.height}):R.none()}))).each((function(n){t.dom.scrollTop=t.dom.scrollTop+n.top})),a.start(0),o.refresh()}))}))}),1e3),s=Fg(mt.fromDom(r),"scroll",(function(){r.pageYOffset<0||f.throttle()}))
return mh(e,r.pageYOffset).get(b),{unbind:s.unbind}},ph=function(n){var t=n.cWin,e=n.ceBody,r=n.socket,o=n.toolstrip,i=n.contentElement,u=n.keyboardType,c=n.outerWindow,a=n.dropup,f=n.outerBody,s=rh(r,e,o,a),l=u(f,t,Ut(),i),d=Ng(c,{onChange:p,onReady:s.refresh})
d.onAdjustment((function(){s.refresh()}))
var m=Fg(mt.fromDom(c),"resize",(function(){s.isExpanding()&&s.refresh()})),g=gh(o,r,f,c,s,t),v=function(n,t){var e=n.document,r=mt.fromTag("div")
we(r,Ti("unfocused-selections")),Vt(mt.fromDom(e.documentElement),r)
var o=Fg(r,"touchstart",(function(e){e.prevent(),Iv(n,t),u()})),i=function(n){var t=mt.fromTag("span")
return vm(t,[Ti("layer-editor"),Ti("unfocused-selection")]),Bi(t,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),t},u=function(){At(r)}
return{update:function(){u()
var t=Ep(n),e=H(t,i)
Bt(r,e)},isActive:function(){return Dt(r).length>0},destroy:function(){o.unbind(),Nt(r)},clear:u}}(t,i),h=function(){v.clear()}
return{toEditing:function(){l.toEditing(),h()},toReading:function(){l.toReading()},onToolbarTouch:function(n){l.onToolbarTouch()},refreshSelection:function(){v.isActive()&&v.update()},clearSelection:h,highlightSelection:function(){v.update()},scrollIntoView:function(n,e){(function(n,t,e,r,o){var i=Uv(t,e),u=x(Fv,n)
r>i||o>i?ah(t,t.dom.scrollTop-i+o).get(u):r<0&&ah(t,t.dom.scrollTop+r).get(u)})(t,r,a,n,e)},updateToolbarPadding:p,setViewportOffset:function(n){s.setViewportOffset(n),function(n,t){return jv((function(e){var r=x(uh,n),o=function(t){Vi(n,"top",t+"px")},i=Math.abs(t-r()),u=Math.ceil(i/10)
oh.animate(r,t,u,o,(function(){o(t),e(t)}),10)}))}(r,n).get(b)},syncHeight:function(){Vi(i,"height",i.dom.contentWindow.document.body.scrollHeight+"px")},refreshStructure:s.refresh,destroy:function(){s.restore(),d.destroy(),g.unbind(),m.unbind(),l.destroy(),v.destroy(),Rv(Ut(),Co)}}},vh=function(n){var t=xr("Getting IosWebapp schema",Np,n)
Vi(t.toolstrip,"width","100%"),Vi(t.container,"position","relative")
var e=Em(Bp((function(){t.setReadOnly(t.readOnlyOnInit()),o.enter()}),t.translate))
t.alloy.add(e)
var r={show:function(){t.alloy.add(e)},hide:function(){t.alloy.remove(e)}},o=function(n,t){var e=dp(),r=Yu(),o=Yu(),i=Xu(),u=Xu()
return{enter:function(){t.hide()
var c=mt.fromDom(document)
sp(n.editor).each((function(t){var a,f
r.set({socketHeight:Hi(n.socket,"height"),iframeHeight:Hi(t.frame,"height"),outerScroll:document.body.scrollTop}),o.set({exclusives:(a=c,f="."+pg,Fg(a,"touchmove",(function(n){tu(n.target,f).filter(Wp).fold((function(){n.prevent()}),p)})))}),we(n.container,Ti("fullscreen-maximized")),hp(n.container,t.body),e.maximize(),Vi(n.socket,"overflow","scroll"),Vi(n.socket,"-webkit-overflow-scrolling","touch"),To(t.body),i.set(ph({cWin:t.win,ceBody:t.body,socket:n.socket,toolstrip:n.toolstrip,dropup:n.dropup.element,contentElement:t.frame,outerBody:n.body,outerWindow:n.win,keyboardType:Vv})),i.run((function(n){n.syncHeight()})),u.set(Bv(t,i,n.toolstrip,n.socket,n.dropup))}))},refreshStructure:function(){i.run((function(n){n.refreshStructure()}))},exit:function(){e.restore(),u.clear(),i.clear(),t.show(),r.on((function(t){t.socketHeight.each((function(t){Vi(n.socket,"height",t)})),t.iframeHeight.each((function(t){Vi(n.editor.getFrame(),"height",t)})),document.body.scrollTop=t.scrollTop})),r.clear(),o.on((function(n){n.exclusives.unbind()})),o.clear(),Oe(n.container,Ti("fullscreen-maximized")),bp(),gg(n.toolbar),Pi(n.socket,"overflow"),Pi(n.socket,"-webkit-overflow-scrolling"),Co(n.editor.getFrame()),sp(n.editor).each((function(n){n.clearSelection()}))}}}(t,r)
return{setReadOnly:t.setReadOnly,refreshStructure:o.refreshStructure,enter:o.enter,exit:o.exit,destroy:p}}
var hh=tinymce.util.Tools.resolve("tinymce.EditorManager"),bh=function(n,t,e){n.system.broadcastOn([Io],{command:t,state:e})},yh=function(n){return function(){var t=function(){n._skinLoaded=!0,n.fire("SkinLoaded")}
n.initialized?t():n.on("init",t)}},xh="toReading",wh="toEditing",Sh=function(n){return{getNotificationManagerImpl:function(){return{open:h({progressBar:{value:p},close:p,text:p,getEl:h(null),moveTo:p,moveRel:p,settings:{}}),close:p,reposition:p,getArgs:h({})}},renderUI:function(){var t=n.getElement(),e=function(n){var t=R.from(function(n){return n.getParam("skin_url")}(n)).getOrThunk((function(){return hh.baseURL+"/skins/ui/oxide"}))
return{content:t+"/content.mobile.min.css",ui:t+"/skin.mobile.min.css"}}(n)
if(!1===function(n){return!1===n.getParam("skin")}(n)){var r=Do.DOM.styleSheetLoader
n.contentCSS.push(e.content),r.load(e.ui,yh(n)),n.on("remove",(function(){return r.unload(e.ui)}))}else yh(n)()
var o=function(){n.fire("ScrollIntoView")},i=Dn().os.isAndroid()?function(n){var t=_v({classes:[Ti("android-container")]}),e=qp(),r=Xu(),o=Xp(r),i=Yp(),u=pv(p,n)
return t.add(e.wrapper),t.add(i),t.add(u.component),{system:t,element:t.element,init:function(n){r.set(Hp(n))},exit:function(){r.run((function(n){n.exit(),Km.remove(i,o)}))},setToolbarGroups:function(n){var t=e.createGroups(n)
e.setGroups(t)},setContextToolbar:function(n){var t=e.createGroups(n)
e.setContextToolbar(t)},focusToolbar:function(){e.focus()},restoreToolbar:function(){e.restoreToolbar()},updateMode:function(n){Qp(i,o,n,t.root)},socket:i,dropup:u}}(o):function(n){var t=_v({classes:[Ti("ios-container")]}),e=qp(),r=Xu(),o=Xp(r),i=Yp(),u=pv((function(){r.run((function(n){n.refreshStructure()}))}),n)
return t.add(e.wrapper),t.add(i),t.add(u.component),{system:t,element:t.element,init:function(n){r.set(vh(n))},exit:function(){r.run((function(n){Km.remove(i,o),n.exit()}))},setToolbarGroups:function(n){var t=e.createGroups(n)
e.setGroups(t)},setContextToolbar:function(n){var t=e.createGroups(n)
e.setContextToolbar(t)},focusToolbar:function(){e.focus()},restoreToolbar:function(){e.restoreToolbar()},updateMode:function(n){Qp(i,o,n,t.root)},socket:i,dropup:u}}(o);(function(n,t){Zt(n,t,Ft)})(mt.fromDom(t),i.system)
var u=t.ownerDocument.defaultView,c=Ng(u,{onChange:function(){i.system.broadcastOn([Vo],{width:Ag(u)})},onReady:p}),a=function(t,e,r,o){!1===o&&n.selection.collapse()
var u=f(t,e,r)
i.setToolbarGroups(!0===o?u.readOnly:u.main),n.setMode(!0===o?"readonly":"design"),n.fire(!0===o?xh:wh),i.updateMode(o)},f=function(n,t,e){var r=n.get()
return{readOnly:r.backToMask.concat(t.get()),main:r.backToMask.concat(e.get())}},s=function(t,e){return n.on(t,e),{unbind:function(){n.off(t)}}}
return n.on("init",(function(){i.init({editor:{getFrame:function(){return mt.fromDom(n.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:p}},onToReading:function(n){return s(xh,n)},onToEditing:function(n){return s(wh,n)},onScrollToCursor:function(t){n.on("ScrollIntoView",(function(n){t(n)}))
return{unbind:function(){n.off("ScrollIntoView"),c.destroy()}}},onTouchToolstrip:function(){t()},onTouchContent:function(){var e,r=mt.fromDom(n.editorContainer.querySelector("."+Ti("toolbar")));(e=r,Mo(e).bind((function(n){return i.system.getByDom(n).toOptional()}))).each(ft),i.restoreToolbar(),t()},onTapContent:function(t){var e=t.target
if("img"===xt(e))n.selection.select(e.dom),t.kill()
else if("a"===xt(e)){i.system.getByDom(mt.fromDom(n.editorContainer)).each((function(n){Oo.isAlpha(n)&&function(n){var t=document.createElement("a")
t.target="_blank",t.href=n.href,t.rel="noreferrer noopener"
var e=document.createEvent("MouseEvents")
e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(e.dom)}))}}},container:mt.fromDom(n.editorContainer),socket:mt.fromDom(n.contentAreaContainer),toolstrip:mt.fromDom(n.editorContainer.querySelector("."+Ti("toolstrip"))),toolbar:mt.fromDom(n.editorContainer.querySelector("."+Ti("toolbar"))),dropup:i.dropup,alloy:i.system,translate:p,setReadOnly:function(n){a(m,d,l,n)},readOnlyOnInit:function(){return!1}})
var t=function(){i.dropup.disappear((function(){i.system.broadcastOn([Bo],{})}))},e={label:"The first group",scrollable:!1,items:[Rf("back",(function(){n.selection.collapse(),i.exit()}),{},n)]},r={label:"Back to read only",scrollable:!1,items:[Rf("readonly-back",(function(){a(m,d,l,!0)}),{},n)]},o=Eg(i,n),u=function(n,t){var e=Cg(n),r={}
return W(e,(function(n){var e=!fe(r,n)&&fe(t,n)&&t[n].isSupported()?[t[n].sketch()]:[]
return r[n]=!0,e}))}(n,o),f={label:"The extra group",scrollable:!1,items:[]},l=ko([{label:"the action group",scrollable:!0,items:u},f]),d=ko([{label:"The read only mode group",scrollable:!0,items:[]},f]),m=ko({backToMask:[e],backToReadOnly:[r]});(function(n,t){var e=ne(t.formatter.get())
P(e,(function(e){t.formatter.formatChanged(e,(function(t){bh(n,e,t)}))})),P(["ul","ol"],(function(e){t.selection.selectorChanged(e,(function(t,r){bh(n,e,t)}))}))})(i,n)})),n.on("remove",(function(){i.exit()})),n.on("detach",(function(){var n,t
n=i.system,t=Dt(n.element),P(t,(function(t){n.getByDom(t).each(qt)})),Nt(n.element),i.system.destroy()})),{iframeContainer:i.socket.element.dom,editorContainer:i.element.dom}}}}
_o.add("mobile",Sh)})()
