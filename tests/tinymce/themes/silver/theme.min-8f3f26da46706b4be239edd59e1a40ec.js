!function(){"use strict"
function t(t){return function(n){return o=typeof(e=n),(null===e?"null":"object"==o&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==o&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":o)===t
var e,o}}function n(t){return function(n){return typeof n===t}}function e(t){return function(n){return t===n}}function o(t){return null==t}function r(t,n){if(d(t)){for(var e=0,o=t.length;e<o;++e)if(!n(t[e]))return
return 1}}function i(){}function u(t,n){return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o]
return t(n.apply(null,e))}}function a(t){return function(){return t}}function c(t){return t}function s(t,n){return t===n}var l=t("string"),f=t("object"),d=t("array"),m=e(null),g=n("boolean"),p=e(void 0),h=function(t){return!o(t)},v=n("function"),b=n("number")
function y(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e]
return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o]
var r=n.concat(e)
return t.apply(null,r)}}function x(t){return function(n){return!t(n)}}function w(t){return function(){throw new Error(t)}}var S=a(!1),C=a(!0),k=tinymce.util.Tools.resolve("tinymce.ThemeManager"),O=function(){return(O=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])
return t}).apply(this,arguments)}
function _(t,n){var e={}
for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r])
if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(e[r[o]]=t[r[o]])
return e}function T(t,n,e){if(e||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||((o=o||Array.prototype.slice.call(n,0,r))[r]=n[r])
return t.concat(o||Array.prototype.slice.call(n))}function E(){return D}var D={fold:function(t,n){return t()},isSome:S,isNone:C,getOr:c,getOrThunk:B,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:c,orThunk:B,map:E,each:i,bind:E,exists:S,forall:C,filter:function(){return D},toArray:function(){return[]},toString:a("none()")}
function B(t){return t()}function M(t,n){return yt.call(t,n)}function A(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return!0
return!1}function F(t,n){for(var e=[],o=0;o<t;o++)e.push(n(o))
return e}function I(t,n){for(var e=[],o=0;o<t.length;o+=n){var r=bt.call(t,o,o+n)
e.push(r)}return e}function R(t,n){for(var e=t.length,o=new Array(e),r=0;r<e;r++){var i=t[r]
o[r]=n(i,r)}return o}function V(t,n){for(var e=[],o=[],r=0,i=t.length;r<i;r++){var u=t[r];(n(u,r)?e:o).push(u)}return{pass:e,fail:o}}function P(t,n){for(var e=[],o=0,r=t.length;o<r;o++){var i=t[o]
n(i,o)&&e.push(i)}return e}function H(t,n,e){return function(t){for(var o,r=t.length-1;0<=r;r--)o=t[r],e=n(e,o,r)}(t),e}function z(t,n,e){return St(t,(function(t,o){e=n(e,t,o)})),e}function N(t,n){return function(t,n,e){for(var o=0,r=t.length;o<r;o++){var i=t[o]
if(n(i,o))return vt.some(i)
if(e(i,o))break}return vt.none()}(t,n,S)}function L(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return vt.some(e)
return vt.none()}function W(t){for(var n=[],e=0,o=t.length;e<o;++e){if(!d(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t)
xt.apply(n,t[e])}return n}function U(t,n){return W(R(t,n))}function j(t,n){for(var e=0,o=t.length;e<o;++e)if(!0!==n(t[e],e))return!1
return!0}function G(t){var n=bt.call(t,0)
return n.reverse(),n}function X(t,n){return P(t,(function(t){return!wt(n,t)}))}function q(t,n){for(var e={},o=0,r=t.length;o<r;o++){var i=t[o]
e[String(i)]=n(i,o)}return e}function Y(t){return[t]}function K(t,n){var e=bt.call(t,0)
return e.sort(n),e}function J(t,n){return 0<=n&&n<t.length?vt.some(t[n]):vt.none()}function $(t){return J(t,0)}function Q(t){return J(t,t.length-1)}function Z(t,n){for(var e=0;e<t.length;e++){var o=n(t[e],e)
if(o.isSome())return o}return vt.none()}function tt(t,n){for(var e=kt(t),o=0,r=e.length;o<r;o++){var i=e[o]
n(t[i],i)}}function nt(t,n){return _t(t,(function(t,e){return{k:e,v:n(t,e)}}))}function et(t,n){var e=[]
return tt(t,(function(t,o){e.push(n(t,o))})),e}function ot(t,n){for(var e=kt(t),o=0,r=e.length;o<r;o++){var i=e[o],u=t[i]
if(n(u,i,t))return vt.some(u)}return vt.none()}function rt(t){return et(t,c)}function it(t,n){return Tt(t,n)?vt.from(t[n]):vt.none()}function ut(t,n){return Tt(t,n)&&void 0!==t[n]&&null!==t[n]}function at(t,n,e){return void 0===e&&(e=s),t.exists((function(t){return e(t,n)}))}function ct(t){for(var n=[],e=function(t){n.push(t)},o=0;o<t.length;o++)t[o].each(e)
return n}function st(t,n){return t?vt.some(n):vt.none()}function lt(t,n,e){return""===n||t.length>=n.length&&t.substr(e,e+n.length)===n}function ft(t,n){return-1!==t.indexOf(n)}function dt(t){return 0<t.length}function mt(t){return void 0!==t.style&&v(t.style.getPropertyValue)}function gt(t){if(null==t)throw new Error("Node cannot be null or undefined")
return{dom:t}}var pt,ht=function(t){function n(){return r}function e(n){return n(t)}var o=a(t),r={fold:function(n,e){return e(t)},isSome:C,isNone:S,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:n,orThunk:n,map:function(n){return ht(n(t))},each:function(n){n(t)},bind:e,exists:e,forall:e,filter:function(n){return n(t)?r:D},toArray:function(){return[t]},toString:function(){return"some("+t+")"}}
return r},vt={some:ht,none:E,from:function(t){return null==t?D:ht(t)}},bt=Array.prototype.slice,yt=Array.prototype.indexOf,xt=Array.prototype.push,wt=function(t,n){return-1<M(t,n)},St=function(t,n){for(var e=0,o=t.length;e<o;e++)n(t[e],e)},Ct=v(Array.from)?Array.from:function(t){return bt.call(t)},kt=Object.keys,Ot=Object.hasOwnProperty,_t=function(t,n){var e={}
return tt(t,(function(t,o){var r=n(t,o)
e[r.k]=r.v})),e},Tt=function(t,n){return Ot.call(t,n)},Et=function(t,n,e){return t.isSome()&&n.isSome()?vt.some(e(t.getOrDie(),n.getOrDie())):vt.none()},Dt=function(t,n){return lt(t,n,0)},Bt=function(t,n){return lt(t,n,t.length-n.length)},Mt=(pt=/^\s+|\s+$/g,function(t){return t.replace(pt,"")}),At={fromHtml:function(t,n){var e=(n||document).createElement("div")
if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node")
return gt(e.childNodes[0])},fromTag:function(t,n){return gt((n||document).createElement(t))},fromText:function(t,n){return gt((n||document).createTextNode(t))},fromDom:gt,fromPoint:function(t,n,e){return vt.from(t.dom.elementFromPoint(n,e)).map(gt)}}
function Ft(t){return t.dom.nodeName.toLowerCase()}function It(t){return function(n){return n.dom.nodeType===t}}function Rt(t){var n,e=!1
return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r]
return e||(e=!0,n=t.apply(null,o)),n}}function Vt(t,n){var e=String(n).toLowerCase()
return N(t,(function(t){return t.search(e)}))}function Pt(t){return function(n){return ft(n,t)}}function Ht(t){return window.matchMedia(t).matches}function zt(t,n){var e=t.dom
if(1!==e.nodeType)return!1
var o=e
if(void 0!==o.matches)return o.matches(n)
if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(n)
if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(n)
if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(n)
throw new Error("Browser lacks native selectors")}function Nt(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount}function Lt(t,n){return t.dom===n.dom}function Wt(t,n){return se().browser.isIE()?(e=t.dom,o=n.dom,r=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(e.compareDocumentPosition(o)&r)):(i=t.dom)!==(u=n.dom)&&i.contains(u)
var e,o,r,i,u}function Ut(t){return At.fromDom(t.dom.ownerDocument)}function jt(t){return qn(t)?t:Ut(t)}function Gt(t){return At.fromDom(jt(t).dom.documentElement)}function Xt(t){return At.fromDom(jt(t).dom.defaultView)}function qt(t){return vt.from(t.dom.parentNode).map(At.fromDom)}function Yt(t){return vt.from(t.dom.offsetParent).map(At.fromDom)}function Kt(t){return R(t.dom.childNodes,At.fromDom)}function Jt(t,n){var e=t.dom.childNodes
return vt.from(e[n]).map(At.fromDom)}function $t(t,n){return{element:t,offset:n}}function Qt(t,n){var e=Kt(t)
return 0<e.length&&n<e.length?$t(e[n],0):$t(t,n)}function Zt(t){return Yn(t)&&h(t.dom.host)}function tn(t){return Zt(t)?t:At.fromDom(jt(t).dom.body)}function nn(t){return At.fromDom(t.dom.host)}function en(t,n,e){if(!(l(e)||g(e)||b(e)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple")
t.setAttribute(n,e+"")}function on(t,n,e){en(t.dom,n,e)}function rn(t,n){var e=t.dom.getAttribute(n)
return null===e?void 0:e}function un(t,n){return vt.from(rn(t,n))}function an(t,n){var e=t.dom
return!(!e||!e.hasAttribute)&&e.hasAttribute(n)}function cn(t,n){t.dom.removeAttribute(n)}function sn(t,n,e){if(!l(e))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",e,":: Element ",t),new Error("CSS value must be a string: "+e)
mt(t)&&t.style.setProperty(n,e)}function ln(t,n){mt(t)&&t.style.removeProperty(n)}function fn(t,n,e){sn(t.dom,n,e)}function dn(t,n){var e=t.dom
tt(n,(function(t,n){sn(e,n,t)}))}function mn(t,n){var e=t.dom
tt(n,(function(t,n){t.fold((function(){ln(e,n)}),(function(t){sn(e,n,t)}))}))}function gn(t,n){var e=t.dom,o=window.getComputedStyle(e).getPropertyValue(n)
return""!==o||he(t)?o:ye(e,n)}function pn(t,n){var e=t.dom,o=ye(e,n)
return vt.from(o).filter((function(t){return 0<t.length}))}function hn(t,n,e){var o=At.fromTag(t)
return fn(o,n,e),pn(o,n).isSome()}function vn(t,n){ln(t.dom,n),at(un(t,"style").map(Mt),"")&&cn(t,"style")}function bn(t){return t.dom.offsetWidth}function yn(t,n){function e(e){var o=n(e)
if(o<=0||null===o){var r=gn(e,t)
return parseFloat(r)||0}return o}function o(t,n){return z(n,(function(n,e){var o=gn(t,e),r=void 0===o?0:parseInt(o,10)
return isNaN(r)?n:n+r}),0)}return{set:function(n,e){if(!b(e)&&!e.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+e)
var o=n.dom
mt(o)&&(o.style[t]=e+"px")},get:e,getOuter:e,aggregate:o,max:function(t,n,e){var r=o(t,e)
return r<n?n-r:0}}}function xn(t){return xe.get(t)}function wn(t){return xe.getOuter(t)}function Sn(t,n){return void 0!==t?t:void 0!==n?n:0}function Cn(t){var n=t.dom.ownerDocument,e=n.body,o=n.defaultView,r=n.documentElement
if(e===t.dom)return Se(e.offsetLeft,e.offsetTop)
var i=Sn(null==o?void 0:o.pageYOffset,r.scrollTop),u=Sn(null==o?void 0:o.pageXOffset,r.scrollLeft),a=Sn(r.clientTop,e.clientTop),c=Sn(r.clientLeft,e.clientLeft)
return Ce(t).translate(u-c,i-a)}function kn(t){return ke.get(t)}function On(t){return ke.getOuter(t)}function _n(t){function n(){return t.stopPropagation()}function e(){return t.preventDefault()}var o=u(e,n)
return{target:At.fromDom(function(t){if(de()&&h(t.target)){var n=At.fromDom(t.target)
if(Gn(n)&&pe(n)&&t.composed&&t.composedPath){var e=t.composedPath()
if(e)return $(e)}}return vt.from(t.target)}(t).getOr(t.target)),x:t.clientX,y:t.clientY,stop:n,prevent:e,kill:o,raw:t}}function Tn(t,n,e,o,r){var i,u,a=(i=e,u=o,function(t){i(t)&&u(_n(t))})
return t.dom.addEventListener(n,a,r),{unbind:y(Oe,t,n,a,r)}}function En(t,n){qt(t).each((function(e){e.dom.insertBefore(n.dom,t.dom)}))}function Dn(t,n){vt.from(t.dom.nextSibling).map(At.fromDom).fold((function(){qt(t).each((function(t){_e(t,n)}))}),(function(t){En(t,n)}))}function Bn(t,n){Jt(t,0).fold((function(){_e(t,n)}),(function(e){t.dom.insertBefore(n.dom,e.dom)}))}function Mn(t,n){St(n,(function(n){_e(t,n)}))}function An(t){t.dom.textContent="",St(Kt(t),(function(t){Te(t)}))}function Fn(t){var n,e=Kt(t)
0<e.length&&(n=t,St(e,(function(t){En(n,t)}))),Te(t)}function In(t){var n=void 0!==t?t.dom:document,e=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop
return Se(e,o)}function Rn(t,n,e){var o=(void 0!==e?e.dom:document).defaultView
o&&o.scrollTo(t,n)}function Vn(t,n,e,o){return{x:t,y:n,width:e,height:o,right:t+e,bottom:n+o}}function Pn(t){var n=void 0===t?window:t,e=n.document,o=In(At.fromDom(e)),r=void 0===n?window:n
return(se().browser.isFirefox()?vt.none():vt.from(r.visualViewport)).fold((function(){var t=n.document.documentElement,e=t.clientWidth,r=t.clientHeight
return Vn(o.left,o.top,e,r)}),(function(t){return Vn(Math.max(t.pageLeft,o.left),Math.max(t.pageTop,o.top),t.width,t.height)}))}function Hn(t){var n,e=In(At.fromDom(document)),o=(n=De).owner(t),r=Ee(n,o)
return vt.some(r).fold(y(Cn,t),(function(n){var o=Ce(t),r=H(n,(function(t,n){var e=Ce(n)
return{left:t.left+e.left,top:t.top+e.top}}),{left:0,top:0})
return Se(r.left+o.left+e.left,r.top+o.top+e.top)}))}function zn(t){var n=Hn(t),e=On(t),o=wn(t)
return Be(n.left,n.top,e,o)}function Nn(){return Kn(0,0)}function Ln(t){function n(t){return function(){return e===t}}var e=t.current,o=t.version
return{current:e,version:o,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(Zn),isSafari:n("Safari")}}function Wn(t){function n(t){return function(){return e===t}}var e=t.current,o=t.version
return{current:e,version:o,isWindows:n(ee),isiOS:n("iOS"),isAndroid:n(oe),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(re),isFreeBSD:n(ie),isChromeOS:n(ue)}}"undefined"!=typeof window||Function("return this;")()
var Un,jn,Gn=It(1),Xn=It(3),qn=It(9),Yn=It(11),Kn=function(t,n){return{major:t,minor:n}},Jn={nu:Kn,detect:function(t,n){var e,o,r=String(n).toLowerCase()
return 0===t.length?Nn():(o=function(t,n){for(var e=0;e<t.length;e++){var o=t[e]
if(o.test(n))return o}}(t,e=r))?Kn(i(1),i(2)):{major:0,minor:0}
function i(t){return Number(e.replace(o,"$"+t))}},unknown:Nn},$n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qn={browsers:a([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return ft(t,"edge/")&&ft(t,"chrome")&&ft(t,"safari")&&ft(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$n],search:function(t){return ft(t,"chrome")&&!ft(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return ft(t,"msie")||ft(t,"trident")}},{name:"Opera",versionRegexes:[$n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pt("firefox")},{name:"Safari",versionRegexes:[$n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(ft(t,"safari")||ft(t,"mobile/"))&&ft(t,"applewebkit")}}]),oses:a([{name:"Windows",search:Pt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return ft(t,"iphone")||ft(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Pt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pt("linux"),versionRegexes:[]},{name:"Solaris",search:Pt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Zn="Firefox",te=function(){return Ln({current:void 0,version:Jn.unknown()})},ne=Ln,ee=(a("Edge"),a("Chrome"),a("IE"),a("Opera"),a(Zn),a("Safari"),"Windows"),oe="Android",re="Solaris",ie="FreeBSD",ue="ChromeOS",ae=function(){return Wn({current:void 0,version:Jn.unknown()})},ce=Wn,se=(a(ee),a("iOS"),a(oe),a("Linux"),a("OSX"),a(re),a(ie),a(ue),Rt((function(){return t=navigator.userAgent,n=vt.from(navigator.userAgentData),e=Ht,h=Qn.browsers(),v=Qn.oses(),{browser:b=n.bind((function(t){return n=h,Z(t.brands,(function(t){var e=t.brand.toLowerCase()
return N(n,(function(t){var n
return e===(null===(n=t.brand)||void 0===n?void 0:n.toLowerCase())})).map((function(n){return{current:n.name,version:Jn.nu(parseInt(t.version,10),0)}}))}))
var n})).orThunk((function(){return Vt(h,n=t).map((function(t){var e=Jn.detect(t.versionRegexes,n)
return{current:t.name,version:e}}))
var n})).fold(te,ne),os:y=Vt(v,o=t).map((function(t){var n=Jn.detect(t.versionRegexes,o)
return{current:t.name,version:n}})).fold(ae,ce),deviceType:(i=b,u=t,c=e,s=(r=y).isiOS()&&!0===/ipad/i.test(u),l=r.isiOS()&&!s,d=(f=r.isiOS()||r.isAndroid())||c("(pointer:coarse)"),m=s||!l&&f&&c("(min-device-width:768px)"),g=l||f&&!m,p=i.isSafari()&&r.isiOS()&&!1===/safari/i.test(u),{isiPad:a(s),isiPhone:a(l),isTablet:a(m),isPhone:a(g),isTouch:a(d),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:a(p),isDesktop:a(!g&&!m&&!p)})}
var t,n,e,o,r,i,u,c,s,l,f,d,m,g,p,h,v,b,y}))),le=qt,fe=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode),de=a(fe),me=fe?function(t){return At.fromDom(t.dom.getRootNode())}:jt,ge=function(t){var n=me(t)
return Zt(n)?vt.some(n):vt.none()},pe=function(t){return h(t.dom.shadowRoot)},he=function(t){var n=Xn(t)?t.dom.parentNode:t.dom
if(null==n||null===n.ownerDocument)return!1
var e,o,r=n.ownerDocument
return ge(At.fromDom(n)).fold((function(){return r.body.contains(n)}),(e=he,o=nn,function(t){return e(o(t))}))},ve=function(){return be(At.fromDom(document))},be=function(t){var n=t.dom.body
if(null==n)throw new Error("Body is not available yet")
return At.fromDom(n)},ye=function(t,n){return mt(t)?t.style.getPropertyValue(n):""},xe=yn("height",(function(t){var n=t.dom
return he(t)?n.getBoundingClientRect().height:n.offsetHeight})),we=function(t,n){return{left:t,top:n,translate:function(e,o){return we(t+e,n+o)}}},Se=we,Ce=function(t){var n,e=t.dom,o=e.ownerDocument.body
return o===e?Se(o.offsetLeft,o.offsetTop):he(t)?(n=e.getBoundingClientRect(),Se(n.left,n.top)):Se(0,0)},ke=yn("width",(function(t){return t.dom.offsetWidth})),Oe=function(t,n,e,o){t.dom.removeEventListener(n,e,o)},_e=function(t,n){t.dom.appendChild(n.dom)},Te=function(t){var n=t.dom
null!==n.parentNode&&n.parentNode.removeChild(n)},Ee=function(t,n){return t.view(n).fold(a([]),(function(n){var e=t.owner(n),o=Ee(t,e)
return[n].concat(o)}))},De=Object.freeze({__proto__:null,view:function(t){var n
return(t.dom===document?vt.none():vt.from(null===(n=t.dom.defaultView)||void 0===n?void 0:n.frameElement)).map(At.fromDom)},owner:Ut}),Be=function(t,n,e,o){return{x:t,y:n,width:e,height:o,right:t+e,bottom:n+o}},Me=function(t){var n=Cn(t),e=On(t),o=wn(t)
return Be(n.left,n.top,e,o)},Ae=function(){return Pn(window)},Fe=function(t){return{isValue:C,isError:S,getOr:a(t),getOrThunk:a(t),getOrDie:a(t),or:function(n){return Fe(t)},orThunk:function(n){return Fe(t)},fold:function(n,e){return e(t)},map:function(n){return Fe(n(t))},mapError:function(n){return Fe(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return vt.some(t)}}},Ie=function(t){return{isValue:S,isError:C,getOr:c,getOrThunk:function(t){return t()},getOrDie:function(){return w(String(t))()},or:c,orThunk:function(t){return t()},fold:function(n,e){return n(t)},map:function(n){return Ie(t)},mapError:function(n){return Ie(n(t))},each:i,bind:function(n){return Ie(t)},exists:S,forall:C,toOptional:vt.none}},Re={value:Fe,error:Ie,fromOption:function(t,n){return t.fold((function(){return Ie(n)}),Fe)}}
function Ve(t,n,e){return t.stype===Un.Error?n(t.serror):e(t.svalue)}function Pe(t){return{stype:Un.Value,svalue:t}}function He(t){return{stype:Un.Error,serror:t}}function ze(t,n,e,o){return{tag:"field",key:t,newKey:n,presence:e,prop:o}}function Ne(t,n,e){switch(t.tag){case"field":return n(t.key,t.newKey,t.presence,t.prop)
case"custom":return e(t.newKey,t.instantiator)}}function Le(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e]
if(0===n.length)throw new Error("Can't merge zero objects")
for(var o={},r=0;r<n.length;r++){var i,u=n[r]
for(i in u)Tt(u,i)&&(o[i]=t(o[i],u[i]))}return o}}function We(t){return{tag:"defaultedThunk",process:t}}function Ue(t){return We(a(t))}function je(t){return{tag:"mergeWithThunk",process:t}}function Ge(t){return f(t)&&100<kt(t).length?" removed due to size":JSON.stringify(t,null,2)}function Xe(t,n){return Ho([{path:t,getErrorInfo:n}])}function qe(t){return{extract:function(n,e){return No(t(e),(function(t){return Xe(n,a(t))}))},toString:a("val")}}function Ye(t,n,e,o){return o(it(t,n).getOrThunk((function(){return e(t)})))}function Ke(t,n,e,o,r){function i(t){return r.extract(n.concat([o]),t)}function u(t){return t.fold((function(){return Po(vt.none())}),(function(t){var e=r.extract(n.concat([o]),t)
return Lo(e,vt.some)}))}var c,s,l,f,d,m
switch(t.tag){case"required":return l=n,m=i,it(f=e,d=o).fold((function(){return t=d,n=f,Xe(l,(function(){return'Could not find valid *required* value for "'+t+'" in '+Ge(n)}))
var t,n}),m)
case"defaultedThunk":return Ye(e,o,t.process,i)
case"option":return u(it(e,o))
case"defaultedOptionThunk":return s=t.process,u(it(c=e,o).map((function(t){return!0===t?s(c):t})))
case"mergeWithThunk":return Ye(e,o,a({}),(function(n){return i(jo(t.process(e),n))}))}}function Je(t){return{extract:function(n,e){return t().extract(n,e)},toString:function(){return t().toString()}}}function $e(t){var n=Yo(t),e=H(t,(function(t,n){return Ne(n,(function(n){var e
return jo(t,((e={})[n]=!0,e))}),a(t))}),{})
return{extract:function(t,o){var r,u,a,c,s,l,f=P(g(o)?[]:kt((a=h,c=u={},s=function(t,n){c[n]=t},l=i,tt(o,(function(t,n){(a(t,n)?s:l)(t,n)})),u)),(function(t){return!ut(e,t)}))
return 0===f.length?n.extract(t,o):(r=f,Xe(t,(function(){return"There are unsupported fields: ["+r.join(", ")+"] specified"})))},toString:n.toString}}function Qe(t){return{extract:function(n,e){var o=R(e,(function(e,o){return t.extract(n.concat(["["+o+"]"]),e)}))
return Xo(o)},toString:function(){return"array("+t.toString()+")"}}}function Ze(t){return{extract:function(n,e){for(var o=[],r=0,i=t;r<i.length;r++){var u=i[r].extract(n,e)
if(u.stype===Un.Value)return u
o.push(u)}return Xo(o)},toString:function(){return"oneOf("+R(t,(function(t){return t.toString()})).join(", ")+")"}}}function to(t,n){return qe((function(e){var o=typeof e
return t(e)?Po(e):Ho("Expected type: "+n+" but got: "+o)}))}function no(t,n){return{extract:function(e,o){return it(o,t).fold((function(){return n=t,Xe(e,(function(){return'Choice schema did not contain choice key: "'+n+'"'}))
var n}),(function(t){return r=e,i=o,it(u=n,a=t).fold((function(){return t=u,n=a,Xe(r,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+Ge(t)}))
var t,n}),(function(t){return t.extract(r.concat(["branch: "+a]),i)}))
var r,i,u,a}))},toString:function(){return"chooseOn("+t+"). Possible values: "+kt(n)}}}function eo(t){return qe((function(n){return t(n).fold(Ho,Po)}))}function oo(t,n){return e=function(n){return t(n).fold(He,Pe)},o=n,{extract:function(t,n){var r=kt(n),i=Qe(qe(e)).extract(t,r)
return zo(i,(function(e){var r=R(e,(function(t){return ze(t,t,{tag:"required",process:{}},o)}))
return Yo(r).extract(t,n)}))},toString:function(){return"setOf("+o.toString()+")"}}
var e,o}function ro(t,n,e){return Vo((r=n.extract([t],o=e),Wo(r,(function(t){return{input:o,errors:t}}))))
var o,r}function io(t){return t.fold((function(t){throw new Error(or(t))}),c)}function uo(t,n,e){return io(ro(t,n,e))}function ao(t,n){return no(t,nt(n,Yo))}function co(t){return eo((function(n){return wt(t,n)?Re.value(n):Re.error('Unsupported value: "'+n+'", choose one of "'+t.join(", ")+'".')}))}function so(t){return rr(t,t,{tag:"required",process:{}},Jo())}function lo(t,n){return rr(t,t,{tag:"required",process:{}},n)}function fo(t){return lo(t,Qo)}function mo(t,n){return rr(t,t,{tag:"required",process:{}},co(n))}function go(t){return lo(t,tr)}function po(t,n){return rr(t,t,{tag:"required",process:{}},Yo(n))}function ho(t,n){return rr(t,t,{tag:"required",process:{}},Ko(n))}function vo(t,n){return rr(t,t,{tag:"required",process:{}},Qe(n))}function bo(t){return rr(t,t,{tag:"option",process:{}},Jo())}function yo(t,n){return rr(t,t,{tag:"option",process:{}},n)}function xo(t){return yo(t,$o)}function wo(t){return yo(t,Qo)}function So(t){return yo(t,tr)}function Co(t,n){return yo(t,Qe(n))}function ko(t,n){return yo(t,Yo(n))}function Oo(t,n){return rr(t,t,Ue(n),Jo())}function _o(t,n,e){return rr(t,t,Ue(n),e)}function To(t,n){return _o(t,n,$o)}function Eo(t,n){return _o(t,n,Qo)}function Do(t,n,e){return _o(t,n,co(e))}function Bo(t,n){return _o(t,n,Zo)}function Mo(t,n){return _o(t,n,tr)}function Ao(t,n,e){return _o(t,n,Qe(e))}function Fo(t,n,e){return _o(t,n,Yo(e))}function Io(t){var n=t
return{get:function(){return n},set:function(t){n=t}}}function Ro(t){if(!d(t))throw new Error("cases must be an array")
if(0===t.length)throw new Error("there must be at least one case")
var n=[],e={}
return St(t,(function(o,r){var i=kt(o)
if(1!==i.length)throw new Error("one and only one name per case")
var u=i[0],a=o[u]
if(void 0!==e[u])throw new Error("duplicate key detected:"+u)
if("cata"===u)throw new Error("cannot have a case named cata (sorry)")
if(!d(a))throw new Error("case arguments must be an array")
n.push(u),e[u]=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o]
var i=e.length
if(i!==a.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+i)
return{fold:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o]
if(n.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+n.length)
return n[r].apply(null,e)},match:function(t){var o=kt(t)
if(n.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+o.join(","))
if(!j(n,(function(t){return wt(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+n.join(", "))
return t[u].apply(null,e)},log:function(t){console.log(t,{constructors:n,constructor:u,params:e})}}}})),e}(jn=Un={})[jn.Error=0]="Error",jn[jn.Value=1]="Value"
var Vo=function(t){return Ve(t,Re.error,Re.value)},Po=Pe,Ho=He,zo=function(t,n){return t.stype===Un.Value?n(t.svalue):t},No=function(t,n){return t.stype===Un.Error?n(t.serror):t},Lo=function(t,n){return t.stype===Un.Value?{stype:Un.Value,svalue:n(t.svalue)}:t},Wo=function(t,n){return t.stype===Un.Error?{stype:Un.Error,serror:n(t.serror)}:t},Uo=Ve,jo=Le((function(t,n){return f(t)&&f(n)?jo(t,n):n})),Go=Le((function(t,n){return n})),Xo=function(t){var n,e,o=(n=[],e=[],St(t,(function(t){Ve(t,(function(t){return e.push(t)}),(function(t){return n.push(t)}))})),{values:n,errors:e})
return 0<o.errors.length?u(Ho,W)(o.errors):Po(o.values)},qo=qe(Po),Yo=function(t){return{extract:function(n,e){for(var o={},r=[],i=0,u=t;i<u.length;i++)Ne(u[i],(function(t,i,u,a){var c=Ke(u,n,e,t,a)
Uo(c,(function(t){r.push.apply(r,t)}),(function(t){o[i]=t}))}),(function(t,n){o[t]=n(e)}))
return 0<r.length?Ho(r):Po(o)},toString:function(){return"obj{\n"+R(t,(function(t){return Ne(t,(function(t,n,e,o){return t+" -> "+o.toString()}),(function(t,n){return"state("+t+")"}))})).join("\n")+"}"}}},Ko=u(Qe,Yo),Jo=a(qo),$o=to(b,"number"),Qo=to(l,"string"),Zo=to(g,"boolean"),tr=to(v,"function"),nr=function(t){if(Object(t)!==t)return!0
switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0
case"Array":case"Object":return Object.keys(t).every((function(n){return nr(t[n])}))
default:return!1}},er=qe((function(t){return nr(t)?Po(t):Ho("Expected value to be acceptable for sending via postMessage")})),or=function(t){return"Errors: \n"+R(10<(n=t.errors).length?n.slice(0,10).concat([{path:[],getErrorInfo:a("... (only showing first ten failures)")}]):n,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})).join("\n")+"\n\nInput object: "+Ge(t.input)
var n},rr=ze,ir=function(t,n){return{tag:"custom",newKey:t,instantiator:n}}
function ur(t,n){return(e={})[t]=n,e
var e}function ar(t){return n={},St(t,(function(t){n[t.key]=t.value})),n
var n}function cr(t){return v(t)?t:S}function sr(t,n,e){for(var o=t.dom,r=cr(e);o.parentNode;){o=o.parentNode
var i=At.fromDom(o),u=n(i)
if(u.isSome())return u
if(r(i))break}return vt.none()}function lr(t,n,e){var o=n(t),r=cr(e)
return o.orThunk((function(){return r(t)?vt.none():sr(t,n,r)}))}function fr(t,n){return Lt(t.element,n.event.target)}function dr(t){if(!ut(t,"can")&&!ut(t,"abort")&&!ut(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!")
return O(O({},ti),t)}function mr(t){return a("alloy."+t)}function gr(t,n){Yi(t,t.element,n,{})}function pr(t,n,e){Yi(t,t.element,n,e)}function hr(t){gr(t,Ti())}function vr(t,n,e){Yi(t,n,e,{})}function br(t,n,e,o){t.getSystem().triggerEvent(e,n,o.event)}function yr(t,n){return{key:t,value:dr({abort:n})}}function xr(t){return{key:t,value:dr({run:function(t,n){n.event.prevent()}})}}function wr(t,n){return{key:t,value:dr({run:n})}}function Sr(t,n,e){return{key:t,value:dr({run:function(t,o){n.apply(void 0,[t,o].concat(e))}})}}function Cr(t){return function(n){return{key:t,value:dr({run:function(t,e){fr(t,e)&&n(t,e)}})}}}function kr(t,n,e){var o,r=n.partUids[e]
return wr(o=t,(function(t,n){t.getSystem().getByUid(r).each((function(t){br(t,t.element,o,n)}))}))}function Or(t,n){return wr(t,(function(t,e){var o=e.event,r=t.getSystem().getByDom(o.target).getOrThunk((function(){return lr(o.target,(function(n){return t.getSystem().getByDom(n).toOptional()}),S).getOr(t)}))
n(t,r,e)}))}function _r(t){return wr(t,(function(t,n){n.cut()}))}function Tr(t,n){return Cr(t)(n)}function Er(t){return t.dom.innerHTML}function Dr(t,n){var e,o,r=Ut(t).dom,i=At.fromDom(r.createDocumentFragment())
Mn(i,(e=n,(o=(r||document).createElement("div")).innerHTML=e,Kt(At.fromDom(o)))),An(t),_e(t,i)}function Br(t){if(Zt(t))return"#shadow-root"
var n=At.fromDom(t.dom.cloneNode(!1)),e=At.fromTag("div"),o=At.fromDom(n.dom.cloneNode(!0))
return _e(e,o),Er(e)}function Mr(t){var n=(new Date).getTime()
return t+"_"+Math.floor(1e9*Math.random())+ ++eu+String(n)}function Ar(t){var n=Gn(t)?t.dom[uu]:null
return vt.from(n)}function Fr(t){function n(n){return"The component must be in a context to execute: "+n+(t?"\n"+Br(t().element)+" is not in context.":"")}function e(t){return function(){throw new Error(n(t))}}function o(t){return function(){console.warn(n(t))}}return{debugInfo:a("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),isConnected:S}}function Ir(t,n){var e=t.toString(),o=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,o-1).split(/,\s*/)
return t.toFunctionAnnotation=function(){return{name:n,parameters:fu(i)}},t}function Rr(t){return ur(du,t)}function Vr(t){return n=function(n){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o]
return t.apply(void 0,T([n.getApis(),n],e,!1))},o=(e=t.toString()).indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,o-1).split(/,\s*/),n.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:fu(i.slice(1))}},n
var n,e,o,r,i}function Pr(t,n){var e={}
return tt(t,(function(t,o){tt(t,(function(t,r){var i=it(e,r).getOr([])
e[r]=i.concat([n(o,t)])}))})),e}function Hr(t){return{classes:p(t.classes)?[]:t.classes,attributes:p(t.attributes)?{}:t.attributes,styles:p(t.styles)?{}:t.styles}}function zr(t){return t.cHandler}function Nr(t,n){return{name:t,handler:n}}function Lr(t,n){var e=rn(t,n)
return void 0===e||""===e?[]:e.split(" ")}function Wr(t){return void 0!==t.dom.classList}function Ur(t,n){var e,o,r
Wr(t)?t.dom.classList.add(n):(o=n,r=Lr(e=t,"class").concat([o]),on(e,"class",r.join(" ")))}function jr(t,n){var e,o,r,i
Wr(t)?t.dom.classList.remove(n):(r=n,0<(i=P(Lr(o=t,"class"),(function(t){return t!==r}))).length?on(o,"class",i.join(" ")):cn(o,"class")),0===(Wr(e=t)?e.dom.classList:Lr(e,"class")).length&&cn(e,"class")}function Gr(t,n){return Wr(t)&&t.dom.classList.contains(n)}function Xr(t,n){St(n,(function(n){Ur(t,n)}))}function qr(t,n){St(n,(function(n){jr(t,n)}))}function Yr(t){return t.dom.value}function Kr(t,n){if(void 0===n)throw new Error("Value.set was undefined")
t.dom.value=n}function Jr(t){function n(){return d}var e=Io(lu),o=io(ro("custom.definition",vu,t)),r=function(t){var n,e,o,r,i=(n=it(t,"behaviours").getOr({}),U(kt(n),(function(t){var e=n[t]
return h(e)?[e.me]:[]})))
return e=t,r=R(o=i,(function(t){return ko(t.name(),[so("config"),Oo("state",mu)])})),{list:o,data:nt(ro("component.behaviours",Yo(r),e.behaviours).fold((function(t){throw new Error(or(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))}),c),(function(t){return a(t.map((function(t){return{config:t.config,state:t.state.init(t.config)}})))}))}}(t),i=r.list,u=r.data,s=function(t){var n=At.fromTag(t.tag),e=t.attributes,o=n.dom
tt(e,(function(t,n){en(o,n,t)})),Xr(n,t.classes),dn(n,t.styles),t.innerHtml.each((function(t){return Dr(n,t)}))
var r=t.domChildren
return Mn(n,r),t.value.each((function(t){Kr(n,t)})),t.uid,au(n,t.uid),n}(function(t,n,e){var o,r,i=O(O({},(o=t).dom),{uid:o.uid,domChildren:R(o.components,(function(t){return t.element}))}),u=t.domModification.fold((function(){return Hr({})}),Hr),a=0<n.length?function(t,n,e,o){var r=O({},n)
function i(t){return H(t,(function(t,n){return O(O({},n.modification),t)}),{})}St(e,(function(n){r[n.name()]=n.exhibit(t,o)}))
var u=Pr(r,(function(t,n){return{name:t,modification:n}}))
return Hr({classes:H(u.classes,(function(t,n){return n.modification.concat(t)}),[]),attributes:i(u.attributes),styles:i(u.styles)})}(e,{"alloy.base.modification":u},n,i):u
return O(O({},r=i),{attributes:O(O({},r.attributes),a.attributes),styles:O(O({},r.styles),a.styles),classes:r.classes.concat(a.classes)})}(o,i,u)),l=function(t,n,e){var o,r,i,u,a,c={"alloy.base.behaviour":t.events},s=t.eventOrder
return r=e,i=n,o=Pr(O(O({},c),(u=r,a={},St(i,(function(t){a[t.name()]=t.handlers(u)})),a)),Nr),pu(o,s).getOrDie()}(o,i,u),f=Io(o.components),d={uid:t.uid,getSystem:e.get,config:function(n){var e=u
return(v(e[n.name()])?e[n.name()]:function(){throw new Error("Could not find "+n.name()+" in "+JSON.stringify(t,null,2))})()},hasConfigured:function(t){return v(u[t.name()])},spec:t,readState:function(t){return u[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},getApis:function(){return o.apis},connect:function(t){e.set(t)},disconnect:function(){e.set(Fr(n))},element:s,syncComponents:function(){var t=U(Kt(s),(function(t){return e.get().getByDom(t).fold((function(){return[]}),Y)}))
f.set(t)},components:f.get,events:l}
return d}function $r(t){var n=At.fromText(t)
return bu({element:n})}Ro([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}])
var Qr,Zr,ti={can:C,abort:S,run:i},ni=a,ei=ni("touchstart"),oi=ni("touchmove"),ri=ni("touchend"),ii=ni("touchcancel"),ui=ni("mousedown"),ai=ni("mousemove"),ci=ni("mouseout"),si=ni("mouseup"),li=ni("mouseover"),fi=ni("focusin"),di=ni("focusout"),mi=ni("keydown"),gi=ni("keyup"),pi=ni("input"),hi=ni("change"),vi=ni("click"),bi=ni("transitioncancel"),yi=ni("transitionend"),xi=ni("transitionstart"),wi=ni("selectstart"),Si={tap:mr("tap")},Ci=mr("focus"),ki=mr("blur.post"),Oi=mr("paste.post"),_i=mr("receive"),Ti=mr("execute"),Ei=mr("focus.item"),Di=Si.tap,Bi=mr("longpress"),Mi=mr("sandbox.close"),Ai=mr("typeahead.cancel"),Fi=mr("system.init"),Ii=mr("system.touchmove"),Ri=mr("system.touchend"),Vi=mr("system.scroll"),Pi=mr("system.resize"),Hi=mr("system.attached"),zi=mr("system.detached"),Ni=mr("system.dismissRequested"),Li=mr("system.repositionRequested"),Wi=mr("focusmanager.shifted"),Ui=mr("slotcontainer.visibility"),ji=mr("change.tab"),Gi=mr("dismiss.tab"),Xi=mr("highlight"),qi=mr("dehighlight"),Yi=function(t,n,e,o){var r=O({target:n},o)
t.getSystem().triggerEvent(e,n,r)},Ki=ar,Ji=Cr(Hi()),$i=Cr(zi()),Qi=Cr(Fi()),Zi=(Qr=Ti(),function(t){return wr(Qr,t)}),tu=Ki([{key:Ci(),value:dr({can:function(t,n){var e,o=n.event,r=o.originator,i=o.target
return!(Lt(e=r,t.element)&&!Lt(e,i)&&(console.warn(Ci()+" did not get interpreted by the desired target. \nOriginator: "+Br(r)+"\nTarget: "+Br(i)+"\nCheck the "+Ci()+" event handlers"),1))}})}]),nu=Object.freeze({__proto__:null,events:tu}),eu=0,ou=a("alloy-id-"),ru=a("data-alloy-id"),iu=ou(),uu=ru(),au=function(t,n){Object.defineProperty(t.dom,uu,{value:n,writable:!0})},cu=Mr,su=c,lu=Fr(),fu=function(t){return R(t,(function(t){return Bt(t,"/*")?t.substring(0,t.length-"/*".length):t}))},du=Mr("alloy-premade"),mu={init:function(){return gu({readState:a("No State required")})}},gu=function(t){return t},pu=function(t,n){var e,o,r,i,u,a,c=et(t,(function(t,e){return(1===t.length?Re.value(t[0].handler):function(t,n,e){var o=n[e]
return o?function(t,n,e){try{var o=K(n,(function(n,o){var r=n.name,i=o.name,u=e.indexOf(r),a=e.indexOf(i)
if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+r+".\nOrder specified: "+JSON.stringify(e,null,2))
if(-1===a)throw new Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(e,null,2))
return u<a?-1:a<u?1:0}))
return Re.value(o)}catch(n){return Re.error([n])}}("Event: "+e,t,o).map((function(t){var n,e,o,r,i=R(t,(function(t){return t.handler}))
return{can:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
return z(e,(function(n,e){return n&&e.can.apply(void 0,t)}),!0)},abort:(o=e=n=i,r=function(t){return t.abort},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
return z(o,(function(n,e){return n||r(e).apply(void 0,t)}),!1)}),run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
St(n,(function(n){n.run.apply(void 0,t)}))}}})):Re.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(R(t,(function(t){return t.name})),null,2)])}(t,n,e)).map((function(o){var r,i,u=(i=v(r=o)?{can:C,abort:S,run:r}:r,function(t,n){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o]
var r=[t,n].concat(e)
i.abort.apply(void 0,r)?n.stop():i.can.apply(void 0,r)&&i.run.apply(void 0,r)}),a=1<t.length?P(n[e],(function(n){return A(t,(function(t){return t.name===n}))})).join(" > "):t[0].name
return ur(e,{handler:u,purpose:a})}))}))
return e={},o=[],r=[],St(c,(function(t){t.fold((function(t){o.push(t)}),(function(t){r.push(t)}))})),0<(a={errors:o,values:r}).errors.length?Re.error(W(a.errors)):(u=e,0===(i=a.values).length?Re.value(u):Re.value(jo(u,Go.apply(void 0,i))))},hu="alloy.base.behaviour",vu=Yo([rr("dom","dom",{tag:"required",process:{}},Yo([so("tag"),Oo("styles",{}),Oo("classes",[]),Oo("attributes",{}),bo("value"),bo("innerHtml")])),so("components"),so("uid"),Oo("events",{}),Oo("apis",{}),rr("eventOrder","eventOrder",((Zr={})[Ti()]=["disabling",hu,"toggling","typeaheadevents"],Zr[Ci()]=[hu,"focusing","keying"],Zr[Fi()]=[hu,"disabling","toggling","representing"],Zr[pi()]=[hu,"representing","streaming","invalidating"],Zr[zi()]=[hu,"representing","item-events","tooltipping"],Zr[ui()]=["focusing",hu,"item-type-events"],Zr[ei()]=["focusing",hu,"item-type-events"],Zr[li()]=["item-type-events","tooltipping"],Zr[_i()]=["receiving","reflecting","tooltipping"],je(a(Zr))),Jo()),bo("domModification")]),bu=function(t){var n=uo("external.component",$e([so("element"),bo("uid")]),t),e=Io(Fr()),o=n.uid.getOrThunk((function(){return cu("external")}))
au(n.element,o)
var r={uid:o,getSystem:e.get,config:vt.none,hasConfigured:S,connect:function(t){e.set(t)},disconnect:function(){e.set(Fr((function(){return r})))},getApis:function(){return{}},element:n.element,spec:t,readState:a("No state"),syncComponents:i,components:a([]),events:{}}
return Rr(r)},yu=cu,xu=function(t){return it(t,du).getOrThunk((function(){var n,e,o,r,i,u=Tt(t,"uid")?t:O({uid:yu("")},t)
return e=(n=su(u)).events,r=R(it(o=_(n,["events"]),"components").getOr([]),xu),i=O(O({},o),{events:O(O({},nu),e),components:r}),Re.value(Jr(i)).getOrDie()}))},wu=Rr
function Su(t,n,e,o,r){return t(e,o)?vt.some(e):v(r)&&r(e)?vt.none():n(e,o,r)}function Cu(t,n,e){for(var o=t.dom,r=v(e)?e:S;o.parentNode;){o=o.parentNode
var i=At.fromDom(o)
if(n(i))return vt.some(i)
if(r(i))break}return vt.none()}function ku(t,n,e){return Su((function(t,n){return n(t)}),Cu,t,n,e)}function Ou(t,n,e){return ku(t,n,e).isSome()}function _u(t,n,e){return Cu(t,(function(t){return zt(t,n)}),e)}function Tu(t,n){return e=n,Nt(o=void 0===t?document:t.dom)?vt.none():vt.from(o.querySelector(e)).map(At.fromDom)
var e,o}function Eu(t,n,e){return Su(zt,_u,t,n,e)}function Du(){var t=Mr("aria-owns")
return{id:t,link:function(n){on(n,"aria-owns",t)},unlink:function(t){cn(t,"aria-owns")}}}var Bu,Mu,Au=function(t,n){return Ou(n,(function(n){return Lt(n,t.element)}),S)||(e=t,ku(n,(function(t){if(!Gn(t))return!1
var n=rn(t,"id")
return void 0!==n&&-1<n.indexOf("aria-owns")})).bind((function(t){var n=rn(t,"id")
return Tu(me(t),'[aria-owns="'+n+'"]')})).exists((function(t){return Au(e,t)})))
var e}
function Fu(t,n,e){var o,r,i,u
switch(it(Iu.get(),t).orThunk((function(){return Z(kt(Iu.get()),(function(n){return-1<t.indexOf(n)?vt.some(Iu.get()[n]):vt.none()}))})).getOr(Bu.NORMAL)){case Bu.NORMAL:return e(Vu())
case Bu.LOGGING:var a=(o=t,r=n,i=[],u=(new Date).getTime(),{logEventCut:function(t,n,e){i.push({outcome:"cut",target:n,purpose:e})},logEventStopped:function(t,n,e){i.push({outcome:"stopped",target:n,purpose:e})},logNoParent:function(t,n,e){i.push({outcome:"no-parent",target:n,purpose:e})},logEventNoHandlers:function(t,n){i.push({outcome:"no-handlers-left",target:n})},logEventResponse:function(t,n,e){i.push({outcome:"response",purpose:e,target:n})},write:function(){var t=(new Date).getTime()
wt(["mousemove","mouseover","mouseout",Fi()],o)||console.log(o,{event:o,time:t-u,target:r.dom,sequence:R(i,(function(t){return wt(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+Br(t.target)+")":t.outcome}))})}}),c=e(a)
return a.write(),c
case Bu.STOP:return!0}}(Mu=Bu=Bu||{})[Mu.STOP=0]="STOP",Mu[Mu.NORMAL=1]="NORMAL",Mu[Mu.LOGGING=2]="LOGGING"
var Iu=Io({}),Ru=["alloy/data/Fields","alloy/debugging/Debugging"],Vu=a({logEventCut:i,logEventStopped:i,logNoParent:i,logEventNoHandlers:i,logEventResponse:i,write:i}),Pu=a([so("menu"),so("selectedMenu")]),Hu=a([so("item"),so("selectedItem")])
function zu(){return po("markers",[so("backgroundMenu")].concat(Pu()).concat(Hu()))}function Nu(t){return po("markers",R(t,so))}function Lu(t,n,e){return void 0!==(o=new Error).stack&&N(o.stack.split("\n"),(function(t){return 0<t.indexOf("alloy")&&!A(Ru,(function(n){return-1<t.indexOf(n)}))})).getOr("unknown"),rr(n,n,e,eo((function(t){return Re.value((function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e]
return t.apply(void 0,n)}))})))
var o}function Wu(t){return Lu(0,t,Ue(i))}function Uu(t){return Lu(0,t,Ue(vt.none))}function ju(t){return Lu(0,t,{tag:"required",process:{}})}function Gu(t){return Lu(0,t,{tag:"required",process:{}})}function Xu(t,n){return ir(t,a(n))}function qu(t){return ir(t,c)}function Yu(t,n,e,o,r,i,u,a){return{x:t,y:n,bubble:e,direction:o,placement:r,restriction:i,label:u+"-"+r,alwaysFit:a=void 0!==a&&a}}function Ku(t,n,e,o){var r=t+n
return o<r?e:r<e?o:r}function Ju(t,n){return q(["left","right","top","bottom"],(function(e){return it(n,e).map((function(n){return function(t){switch(n){case 1:return t.x
case 0:return t.x+t.width
case 2:return t.y
case 3:return t.y+t.height}}(t)}))}))}function $u(t,n){return t.x+t.width/2-n.width/2}function Qu(t,n){return t.x+t.width-n.width}function Zu(t,n){return t.y-n.height}function ta(t){return t.y+t.height}function na(t,n){return t.y+t.height/2-n.height/2}function ea(t,n,e){return Yu(t.x+t.width,na(t,n),e.east(),Ia(),"east",Ju(t,{left:0}),Pa)}function oa(t,n,e){return Yu(t.x-n.width,na(t,n),e.west(),Ra(),"west",Ju(t,{right:1}),Pa)}function ra(){return[Ha,za,Na,La,Ua,Wa,ea,oa]}function ia(){return[za,Ha,La,Na,Ua,Wa,ea,oa]}function ua(){return[Na,La,Ha,za,Wa,Ua]}function aa(){return[La,Na,za,Ha,Wa,Ua]}function ca(){return[Ha,za,Na,La,Ua,Wa]}function sa(){return[za,Ha,La,Na,Ua,Wa]}function la(t,n,e){return Qi((function(o,r){e(o,t,n)}))}function fa(t){return{key:t,value:void 0}}function da(t){var n,e,o,r,i,u,a,c,s=uo("Creating behaviour: "+t.name,Ya,t)
return n=s.fields,e=s.name,o=s.active,r=s.apis,i=s.extra,u=s.state,a=$e(n),c=ko(e,[yo("config",$e(n))]),Xa(a,c,e,o,r,i,u)}function ma(t){var n,e=uo("Creating behaviour: "+t.name,Ka,t),o=ao(e.branchKey,e.branches),r=e.name,i=e.active,u=e.apis,a=e.extra,c=e.state,s=ko(r,[yo("config",n=o)])
return Xa(n,s,r,i,u,a,c)}function ga(){return At.fromDom(document)}function pa(t){return t.dom.focus()}function ha(t){var n=me(t).dom
return t.dom===n.activeElement}function va(t){return void 0===t&&(t=ga()),vt.from(t.dom.activeElement).map(At.fromDom)}function ba(t){return va(me(t)).filter((function(n){return t.dom.contains(n.dom)}))}function ya(t,n){var e=me(n),o=va(e).bind((function(t){function e(n){return Lt(t,n)}var o,r
return e(n)?vt.some(n):(o=e,(r=function(t){for(var n=0;n<t.childNodes.length;n++){var e=At.fromDom(t.childNodes[n])
if(o(e))return vt.some(e)
var i=r(t.childNodes[n])
if(i.isSome())return i}return vt.none()})(n.dom))})),r=t(n)
return o.each((function(t){va(e).filter((function(n){return Lt(n,t)})).fold((function(){pa(t)}),i)})),r}function xa(t,n,e,o,r){function i(t){return t+"px"}return{position:t,left:n.map(i),top:e.map(i),right:o.map(i),bottom:r.map(i)}}function wa(t,n){var e
mn(t,O(O({},e=n),{position:vt.some(e.position)}))}function Sa(t,n,e,o,r,i){var u=n.rect,a=u.x-e,c=u.y-o,s=r-(a+u.width),l=i-(c+u.height),f=vt.some(a),d=vt.some(c),m=vt.some(s),g=vt.some(l),p=vt.none()
return n.direction.fold((function(){return xa(t,f,d,p,p)}),(function(){return xa(t,p,d,m,p)}),(function(){return xa(t,f,p,p,g)}),(function(){return xa(t,p,p,m,g)}),(function(){return xa(t,f,d,p,p)}),(function(){return xa(t,f,p,p,g)}),(function(){return xa(t,f,d,p,p)}),(function(){return xa(t,p,d,m,p)}))}function Ca(t,n){return t.fold((function(){var t=n.rect
return xa("absolute",vt.some(t.x),vt.some(t.y),vt.none(),vt.none())}),(function(t,e,o,r){return Sa("absolute",n,t,e,o,r)}),(function(t,e,o,r){return Sa("fixed",n,t,e,o,r)}))}function ka(t,n){var e=y(Hn,n),o=t.fold(e,e,(function(){var t=In()
return Hn(n).translate(-t.left,-t.top)})),r=On(n),i=wn(n)
return Be(o.left,o.top,r,i)}a(Yo(Hu().concat(Pu())))
var Oa=a(Yo(Hu())),_a=a(po("initSize",[so("numColumns"),so("numRows")])),Ta=Ro([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ea=Ta.southeast,Da=Ta.southwest,Ba=Ta.northeast,Ma=Ta.northwest,Aa=Ta.south,Fa=Ta.north,Ia=Ta.east,Ra=Ta.west,Va=function(t,n,e){return Math.min(Math.max(t,n),e)},Pa="layout",Ha=function(t,n,e){return Yu(t.x,ta(t),e.southeast(),Ea(),"southeast",Ju(t,{left:1,top:3}),Pa)},za=function(t,n,e){return Yu(Qu(t,n),ta(t),e.southwest(),Da(),"southwest",Ju(t,{right:0,top:3}),Pa)},Na=function(t,n,e){return Yu(t.x,Zu(t,n),e.northeast(),Ba(),"northeast",Ju(t,{left:1,bottom:2}),Pa)},La=function(t,n,e){return Yu(Qu(t,n),Zu(t,n),e.northwest(),Ma(),"northwest",Ju(t,{right:0,bottom:2}),Pa)},Wa=function(t,n,e){return Yu($u(t,n),Zu(t,n),e.north(),Fa(),"north",Ju(t,{bottom:2}),Pa)},Ua=function(t,n,e){return Yu($u(t,n),ta(t),e.south(),Aa(),"south",Ju(t,{top:3}),Pa)},ja=Object.freeze({__proto__:null,events:function(t){return Ki([wr(_i(),(function(n,e){var o,r=t.channels,i=kt(r),u=e,a=(o=u).universal?i:P(i,(function(t){return wt(o.channels,t)}))
St(a,(function(t){var e=r[t],o=e.schema,i=uo("channel["+t+"] data\nReceiver: "+Br(n.element),o,u.data)
e.onReceive(n,i)}))}))])}}),Ga=[lo("channels",oo(Re.value,$e([ju("onReceive"),Oo("schema",Jo())])))],Xa=function(t,n,e,o,r,i,u){function c(t){return ut(t,e)?t[e]():vt.none()}var s=nt(r,(function(t,n){return o=e,u=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e]
var u=[t].concat(n)
return t.config({name:a(o)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+o+". Using API: "+i)}),(function(n){var e=Array.prototype.slice.call(u,1)
return r.apply(void 0,[t,n.config,n.state].concat(e))}))},c=i=n,l=(s=(r=t).toString()).indexOf(")")+1,f=s.indexOf("("),d=s.substring(f+1,l-1).split(/,\s*/),u.toFunctionAnnotation=function(){return{name:c,parameters:fu(d.slice(0,1).concat(d.slice(3)))}},u
var o,r,i,u,c,s,l,f,d})),l=nt(i,Ir),f=O(O(O({},l),s),{revoke:y(fa,e),config:function(n){var o=uo(e+"-config",t,n)
return{key:e,value:{config:o,me:f,configAsRaw:Rt((function(){return uo(e+"-config",t,n)})),initialConfig:n,state:u}}},schema:a(n),exhibit:function(t,n){return Et(c(t),it(o,"exhibit"),(function(t,e){return e(n,t.config,t.state)})).getOrThunk((function(){return Hr({})}))},name:a(e),handlers:function(t){return c(t).map((function(t){return it(o,"events").getOr((function(){return{}}))(t.config,t.state)})).getOr({})}})
return f},qa=ar,Ya=$e([so("fields"),so("name"),Oo("active",{}),Oo("apis",{}),Oo("state",mu),Oo("extra",{})]),Ka=$e([so("branchKey"),so("branches"),so("name"),Oo("active",{}),Oo("apis",{}),Oo("state",mu),Oo("extra",{})]),Ja=a(void 0),$a=da({fields:Ga,name:"receiving",active:ja}),Qa=Object.freeze({__proto__:null,exhibit:function(t,n){return Hr({classes:[],styles:n.useFixed()?{}:{position:"relative"}})}}),Za=Ro([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),tc=function(t,n,e){var o=Se(n,e)
return t.fold(a(o),a(o),(function(){var t=In()
return o.translate(-t.left,-t.top)}))}
function nc(t){return un(t,vc)}function ec(t){function n(){return e.get().each(t)}var e=Io(vt.none())
return{clear:function(){n(),e.set(vt.none())},isSet:function(){return e.get().isSome()},get:function(){return e.get()},set:function(t){n(),e.set(vt.some(t))}}}function oc(){return ec((function(t){return t.unbind()}))}function rc(){var t=ec(i)
return O(O({},t),{on:function(n){return t.get().each(n)}})}function ic(t,n,e){return Tn(t,n,yc,e,!1)}function uc(t,n,e){return Tn(t,n,yc,e,!0)}function ac(t,n){function e(n){var e,o=null!==(e=n.raw.pseudoElement)&&void 0!==e?e:""
return Lt(n.target,t)&&!dt(o)&&wt(wc,n.raw.propertyName)}function r(r){var i;(o(r)||e(r))&&(c.clear(),s.clear(),!o(i=null==r?void 0:r.raw.type)&&i!==yi()||(clearTimeout(u),cn(t,Sc),qr(t,n.classes)))}function i(){c.set(ic(t,yi(),r)),s.set(ic(t,bi(),r))}var u,a,c=oc(),s=oc()
"ontransitionstart"in t.dom?a=ic(t,xi(),(function(t){e(t)&&(a.unbind(),i())})):i()
var f,d,m=(f=t,d=g("transition-delay"),z(g("transition-duration"),(function(t,n,e){var o=p(d[e])+p(n)
return Math.max(t,o)}),0))
function g(t){var n=gn(f,t)
return P(l(n)?n.split(/\s*,\s*/):[],dt)}function p(t){if(l(t)&&/^[\d.]+/.test(t)){var n=parseFloat(t)
return Bt(t,"ms")?n:1e3*n}return 0}requestAnimationFrame((function(){u=setTimeout(r,m+17),on(t,Sc,u)}))}function cc(t,n,e,o){vn(n,"max-height"),vn(n,"max-width")
var r,i,u,s,l,f,d,m,g,p={width:On(r=n),height:wn(r)}
return i=n,u=o.preference,s=t,l=p,f=e,d=o.bounds,m=l.width,g=l.height,z(u,(function(t,n){var e=y(h,n)
return t.fold(a(t),e)}),bc.nofit({rect:s,maxHeight:l.height,maxWidth:l.width,direction:Ea(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:s.y},-1,-1,!1)).fold(c,c)
function h(t,n,e,o,r){var u=function(t,n,e,o){var r,i,u,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,C,k,O,_,T,E,D,B,M,A,F,I,R,V,P,H,z,N,L,W,U,j=t.bubble,G=j.offset,X=(P=o,H=t.restriction,z=G,N=rt("left",P.x),L=rt("top",P.y),W=rt("right",P.right),U=rt("bottom",P.bottom),Be(N,L,W-N,U-L)),q=t.x+G.left,Y=t.y+G.top,K=Be(q,Y,n,e),J=(r=X.x,i=X.y,u=X.right,c=X.bottom,s=K.x,l=K.y,f=K.right,d=K.bottom,m=K.width,g=K.height,{originInBounds:r<=s&&s<=u&&i<=l&&l<=c,sizeInBounds:f<=u&&r<=f&&d<=c&&i<=d,visibleW:Math.min(m,r<=s?u-s:f-r),visibleH:Math.min(g,i<=l?c-l:d-i)}),$=J.visibleW,Q=J.visibleH,Z=J.originInBounds&&J.sizeInBounds,tt=Z?K:(p=X.x,h=X.y,v=X.right,b=X.bottom,y=K.x,x=K.y,w=K.width,S=K.height,C=Math.max(p,v-w),k=Math.max(h,b-S),O=Va(y,p,C),_=Va(x,h,k),T=Math.min(O+w,v)-O,E=Math.min(_+S,b)-_,Be(O,_,T,E)),nt=0<tt.width&&0<tt.height,et=(D=t.direction,A=a((B=tt).bottom-(M=o).y),F=a(M.bottom-B.y),I=D.fold(F,F,A,A,F,A,F,F),R=a(B.right-M.x),V=a(M.right-B.x),{maxWidth:D.fold(V,R,V,R,V,V,V,R),maxHeight:I}),ot={rect:tt,maxHeight:et.maxHeight,maxWidth:et.maxWidth,direction:t.direction,placement:t.placement,classes:{on:j.classesOn,off:j.classesOff},layout:t.label,testY:Y}
function rt(t,n){return H[t].map((function(e){var o="top"===t||"bottom"===t,r=o?z.top:z.left,i=("left"===t||"top"===t?Math.max:Math.min)(e,n)+r
return o?Va(i,P.y,P.bottom):Va(i,P.x,P.right)})).getOr(n)}return Z||t.alwaysFit?bc.fit(ot):bc.nofit(ot,$,Q,nt)}(t(s,l,f,i,d),m,g,d)
return u.fold(a(u),(function(t,i,a,c){return(r===c?o<a||e<i:!r&&c)?u:bc.nofit(n,e,o,r)}))}}function sc(t,n){var e=t,o=Math.floor(n)
fn(e,"max-height",xe.max(e,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function lc(t,n,e){return void 0===t[n]?e:t[n]}function fc(t,n,e,o){function r(t){return it(e,t).getOr([])}function i(t,n,e){var o=X(_c,e)
return{offset:Se(t,n),classesOn:U(e,r),classesOff:U(o,r)}}var u=t*(o=void 0===o?1:o),a=n*o
return{southeast:function(){return i(-t,n,["top","alignLeft"])},southwest:function(){return i(t,n,["top","alignRight"])},south:function(){return i(-t/2,n,["top","alignCentre"])},northeast:function(){return i(-t,-n,["bottom","alignLeft"])},northwest:function(){return i(t,-n,["bottom","alignRight"])},north:function(){return i(-t/2,-n,["bottom","alignCentre"])},east:function(){return i(t,-n/2,["valignCentre","left"])},west:function(){return i(-t,-n/2,["valignCentre","right"])},insetNortheast:function(){return i(u,a,["top","alignLeft","inset"])},insetNorthwest:function(){return i(-u,a,["top","alignRight","inset"])},insetNorth:function(){return i(-u/2,a,["top","alignCentre","inset"])},insetSoutheast:function(){return i(u,-a,["bottom","alignLeft","inset"])},insetSouthwest:function(){return i(-u,-a,["bottom","alignRight","inset"])},insetSouth:function(){return i(-u/2,-a,["bottom","alignCentre","inset"])},insetEast:function(){return i(-u,-a/2,["valignCentre","right","inset"])},insetWest:function(){return i(u,-a/2,["valignCentre","left","inset"])}}}function dc(){return fc(0,0,{})}function mc(t,n){return function(e){return"rtl"===Ec(e)?n:t}}Za.none
var gc,pc=Za.relative,hc=Za.fixed,vc="data-alloy-placement",bc=Ro([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),yc=C,xc=_n,wc=["top","bottom","right","left"],Sc="data-alloy-transition-timer",Cc=a((function(t,n){sc(t,n),dn(t,{"overflow-x":"hidden","overflow-y":"auto"})})),kc=a((function(t,n){sc(t,n)})),Oc=function(t,n,e,o){var r,i,u,a,c=cc(t,n,e,o),l=n,f=c,d=Ca((r=o).origin,f)
return r.transition.each((function(t){(function(t,n,e,o,r,i){var u,a,c,l,f,d,m,g,p,h=(u=o,a=r,i.exists((function(t){var n=u.mode
return"all"===n||t[n]!==a[n]})))
function v(t){return parseFloat(t).toFixed(3)}h||(p=t,j(o.classes,(function(t){return Gr(p,t)})))?(fn(t,"position",e.position),c=ka(n,t),l=Ca(n,O(O({},r),{rect:c})),f=q(wc,(function(t){return l[t]})),g=e,ot(f,(function(t,n){var e,o,r,i=g[n].map(v),u=t.map(v)
return!Et(e=i,o=u,r=void 0===r?s:r).getOr(e.isNone()&&o.isNone())})).isSome()&&(mn(t,f),h&&(Xr(d=t,(m=o).classes),un(d,Sc).each((function(t){clearTimeout(parseInt(t,10)),cn(d,Sc)})),ac(d,m)),bn(t))):qr(t,o.classes)})(l,r.origin,d,t,f,r.lastPlacement)})),wa(l,d),a=c.placement,on(n,vc,a),qr(i=n,(u=c.classes).off),Xr(i,u.on),(0,o.maxHeightFunction)(n,c.maxHeight),(0,o.maxWidthFunction)(n,c.maxWidth),{layout:c.layout,placement:c.placement}},_c=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Tc=c,Ec=function(t){return"rtl"===gn(t,"direction")?"rtl":"ltr"}
function Dc(t){return Ou(t,(function(t){return Gn(t)&&rn(t,"data-alloy-vertical-dir")===gc.BottomToTop}))}function Bc(){return ko("layouts",[so("onLtr"),so("onRtl"),bo("onBottomLtr"),bo("onBottomRtl")])}function Mc(t,n,e,o,r,i,u){var a=u.map(Dc).getOr(!1),c=n.layouts.map((function(n){return n.onLtr(t)})),s=n.layouts.map((function(n){return n.onRtl(t)}))
return mc(a?n.layouts.bind((function(n){return n.onBottomLtr.map((function(n){return n(t)}))})).or(c).getOr(r):c.getOr(e),a?n.layouts.bind((function(n){return n.onBottomRtl.map((function(n){return n(t)}))})).or(s).getOr(i):s.getOr(o))(t)}function Ac(t){return t.fold(c,(function(t,n,e){return t.translate(-n,-e)}))}function Fc(t){return t.fold(c,c)}function Ic(t){return z(t,(function(t,n){return t.translate(n.left,n.top)}),Se(0,0))}function Rc(t){return Ic(R(t,Fc))}function Vc(t,n,e){var o,r,i=In(Ut(t.element)),u=(o=t,r=Xt(e.root).dom,vt.from(r.frameElement).map(At.fromDom).filter((function(t){return Lt(Ut(t),Ut(o.element))})).map(Cn).getOr(i))
return Kc(u,i.left,i.top)}function Pc(t,n,e,o){var r=Yc(Se(t,n))
return vt.some({point:r,width:e,height:o})}function Hc(t,n,e,o,r){return t.map((function(t){var i=[n,t.point],u=o.fold((function(){return Rc(i)}),(function(){return Rc(i)}),(function(){return Ic(R(i,Ac))})),a={x:u.left,y:u.top,width:t.width,height:t.height},c=(e.showAbove?ua:ca)(),s=(e.showAbove?aa:sa)(),l=Mc(r,e,c,s,c,s,vt.none())
return Tc({anchorBox:a,bubble:e.bubble.getOr(dc()),overrides:e.overrides,layouts:l,placer:vt.none()})}))}function zc(t,n,e){var o,r=t.document.createRange(),i=r
return n.fold((function(t){i.setStartBefore(t.dom)}),(function(t,n){i.setStart(t.dom,n)}),(function(t){i.setStartAfter(t.dom)})),o=r,e.fold((function(t){o.setEndBefore(t.dom)}),(function(t,n){o.setEnd(t.dom,n)}),(function(t){o.setEndAfter(t.dom)})),r}function Nc(t,n,e,o,r){var i=t.document.createRange()
return i.setStart(n.dom,e),i.setEnd(o.dom,r),i}function Lc(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}}function Wc(t,n,e){return n(At.fromDom(e.startContainer),e.startOffset,At.fromDom(e.endContainer),e.endOffset)}function Uc(t,n){return e=t,i=n.match({domRange:function(t){return{ltr:a(t),rtl:vt.none}},relative:function(t,n){return{ltr:Rt((function(){return zc(e,t,n)})),rtl:Rt((function(){return vt.some(zc(e,n,t))}))}},exact:function(t,n,o,r){return{ltr:Rt((function(){return Nc(e,t,n,o,r)})),rtl:Rt((function(){return vt.some(Nc(e,o,r,t,n))}))}}}),((r=(o=i).ltr()).collapsed?o.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return es.rtl(At.fromDom(t.endContainer),t.endOffset,At.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return Wc(0,es.ltr,r)})):Wc(0,es.ltr,r)).match({ltr:function(n,e,o,r){var i=t.document.createRange()
return i.setStart(n.dom,e),i.setEnd(o.dom,r),i},rtl:function(n,e,o,r){var i=t.document.createRange()
return i.setStart(o.dom,r),i.setEnd(n.dom,e),i}})
var e,o,r,i}(gc=gc||{}).TopToBottom="toptobottom",gc.BottomToTop="bottomtotop"
var jc="data-alloy-vertical-dir",Gc=[so("hotspot"),bo("bubble"),Oo("overrides",{}),Bc(),Xu("placement",(function(t,n,e){var o=ka(e,n.hotspot.element),r=Mc(t.element,n,ca(),sa(),ua(),aa(),vt.some(n.hotspot.element))
return vt.some(Tc({anchorBox:o,bubble:n.bubble.getOr(dc()),overrides:n.overrides,layouts:r,placer:vt.none()}))}))],Xc=[so("x"),so("y"),Oo("height",0),Oo("width",0),Oo("bubble",dc()),Oo("overrides",{}),Bc(),Xu("placement",(function(t,n,e){var o=tc(e,n.x,n.y),r=Be(o.left,o.top,n.width,n.height),i=Mc(t.element,n,ra(),ia(),ra(),ia(),vt.none())
return vt.some(Tc({anchorBox:r,bubble:n.bubble,overrides:n.overrides,layouts:i,placer:vt.none()}))}))],qc=Ro([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Yc=qc.screen,Kc=qc.absolute,Jc=[so("node"),so("root"),bo("bubble"),Bc(),Oo("overrides",{}),Oo("showAbove",!1),Xu("placement",(function(t,n,e){var o=Vc(t,0,n)
return n.node.filter(he).bind((function(r){var i=r.dom.getBoundingClientRect(),u=Pc(i.left,i.top,i.width,i.height),a=n.node.getOr(t.element)
return Hc(u,o,n,e,a)}))}))],$c=function(t,n,e,o){return{start:t,soffset:n,finish:e,foffset:o}},Qc=Ro([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Zc=(Qc.before,Qc.on,Qc.after,function(t){return t.fold(c,c,c)}),ts=Ro([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ns={domRange:ts.domRange,relative:ts.relative,exact:ts.exact,exactFromRange:function(t){return ts.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){return Xt(t.match({domRange:function(t){return At.fromDom(t.startContainer)},relative:function(t,n){return Zc(t)},exact:function(t,n,e,o){return t}}))},range:$c},es=Ro([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}])
function os(t){return Ul.getOption(t)}function rs(t){return os(t).filter((function(t){return 0!==t.trim().length||-1<t.indexOf("")})).isSome()||wt(jl,Ft(t))}function is(t,n){return Nt(e=void 0===t?document:t.dom)?[]:R(e.querySelectorAll(n),At.fromDom)
var e}function us(t){if(0<t.rangeCount){var n=t.getRangeAt(0),e=t.getRangeAt(t.rangeCount-1)
return vt.some($c(At.fromDom(n.startContainer),n.startOffset,At.fromDom(e.endContainer),e.endOffset))}return vt.none()}function as(t){if(null===t.anchorNode||null===t.focusNode)return us(t)
var n,e,o,r,i,u,a,c,s,l,f,d=At.fromDom(t.anchorNode),m=At.fromDom(t.focusNode)
return n=d,u=e=t.anchorOffset,a=o=m,c=r=t.focusOffset,(s=Ut(i=n).dom.createRange()).setStart(i.dom,u),s.setEnd(a.dom,c),l=s,f=Lt(n,o)&&e===r,l.collapsed&&!f?vt.some($c(d,t.anchorOffset,m,t.focusOffset)):us(t)}function cs(t,n){var e,o,r=(e=Uc(t,n)).getClientRects()
return 0<(o=0<r.length?r[0]:e.getBoundingClientRect()).width||0<o.height?vt.some(o).map(Lc):vt.none()}function ss(t,n){return{element:t,offset:n}}function ls(t,n){return(Xn(t)?ss:function(t,n){var e=Kt(t)
if(0===e.length)return ss(t,n)
if(n<e.length)return ss(e[n],0)
var o=e[e.length-1]
return ss(o,(Xn(o)?Ul.get(o):Kt(o)).length)})(t,n)}function fs(t,n){return n.getSelection.getOrThunk((function(){return function(){return vt.from(t.getSelection()).filter((function(t){return 0<t.rangeCount})).bind(as)}}))().map((function(t){var n=ls(t.start,t.soffset),e=ls(t.finish,t.foffset)
return ns.range(n.element,n.offset,e.element,e.offset)}))}function ds(t){return t.x+t.width}function ms(t,n){return t.x-n.width}function gs(t,n){return t.y-n.height+t.height}function ps(t,n,e){return Yu(ds(t),t.y,e.southeast(),Ea(),"southeast",Ju(t,{left:0,top:2}),Xl)}function hs(t,n,e){return Yu(ms(t,n),t.y,e.southwest(),Da(),"southwest",Ju(t,{right:1,top:2}),Xl)}function vs(t,n,e){return Yu(ds(t),gs(t,n),e.northeast(),Ba(),"northeast",Ju(t,{left:0,bottom:3}),Xl)}function bs(t,n,e){return Yu(ms(t,n),gs(t,n),e.northwest(),Ma(),"northwest",Ju(t,{right:1,bottom:3}),Xl)}function ys(){return[ps,hs,vs,bs]}function xs(){return[hs,ps,bs,vs]}function ws(t,n,e,o,r,u,a){var c,s,l,f,d,m,g,p,h,v,b,y,x,w
return c={anchorBox:e.anchorBox,origin:n},s=r.element,l=e.bubble,f=e.layouts,d=u,m=o,p=a,v=lc(g=e.overrides,"maxHeightFunction",Cc()),b=lc(g,"maxWidthFunction",i),y=c.anchorBox,w={bounds:(h=x=c.origin,m.fold((function(){return h.fold(Ae,Ae,Be)}),(function(t){return h.fold(t,t,(function(){var n=t(),e=tc(h,n.x,n.y)
return Be(e.left,e.top,n.width,n.height)}))}))),origin:x,preference:f,maxHeightFunction:v,maxWidthFunction:b,lastPlacement:d,transition:p},Oc(y,s,l,w)}function Ss(t,n){_e(t.element,n.element)}function Cs(t,n){var e,o=t.components()
St((e=t).components(),(function(t){return Te(t.element)})),An(e.element),e.syncComponents()
var r=X(o,n)
St(r,(function(n){Zl(n),t.getSystem().removeFromWorld(n)})),St(n,(function(n){n.getSystem().isConnected()?Ss(t,n):(t.getSystem().addToWorld(n),Ss(t,n),he(t.element)&&tf(n)),t.syncComponents()}))}function ks(t,n){nf(t,n,_e)}function Os(t){Zl(t),Te(t.element),t.getSystem().removeFromWorld(t)}function _s(t){var n=qt(t.element).bind((function(n){return t.getSystem().getByDom(n).toOptional()}))
Os(t),n.each((function(t){t.syncComponents()}))}function Ts(t){var n=t.components()
St(n,Os),An(t.element),t.syncComponents()}function Es(t,n){ef(t,n,_e)}function Ds(t){var n=Kt(t.element)
St(n,(function(n){t.getByDom(n).each(Zl)})),Te(t.element)}function Bs(t,n,e,o){e.get().each((function(n){Ts(t)})),ks(n.getAttachPoint(t),t)
var r=t.getSystem().build(o)
return ks(t,r),e.set(r),r}function Ms(t,n,e,o){var r=Bs(t,n,e,o)
return n.onOpen(t,r),r}function As(t,n,e){e.get().each((function(o){Ts(t),_s(t),n.onClose(t,o),e.clear()}))}function Fs(t,n,e){return e.isOpen()}function Is(t){var n=uo("Dismissal",lf,t),e={}
return e[af()]={schema:$e([so("target")]),onReceive:function(t,e){uf.isOpen(t)&&(uf.isPartOf(t,e.target)||n.isExtraPart(t,e.target)||n.fireEventInstead.fold((function(){return uf.close(t)}),(function(n){return gr(t,n.event)})))}},e}function Rs(t){var n=uo("Reposition",ff,t),e={}
return e[cf()]={onReceive:function(t){uf.isOpen(t)&&n.fireEventInstead.fold((function(){return n.doReposition(t)}),(function(n){return gr(t,n.event)}))}},e}function Vs(t,n,e){n.store.manager.onLoad(t,n,e)}function Ps(t,n,e){n.store.manager.onUnload(t,n,e)}function Hs(){var t=Io(null)
return gu({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})}function zs(){var t=Io({}),n=Io({})
return gu({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:n.get()}},lookup:function(e){return it(t.get(),e).orThunk((function(){return it(n.get(),e)}))},update:function(e){var o=t.get(),r=n.get(),i={},u={}
St(e,(function(t){it(i[t.value]=t,"meta").each((function(n){it(n,"text").each((function(n){u[n]=t}))}))})),t.set(O(O({},o),i)),n.set(O(O({},r),u))},clear:function(){t.set({}),n.set({})}})}function Ns(t,n,e,o){var r=n.store
e.update([o]),r.setValue(t,o),n.onSetValue(t,o)}function Ls(t,n){return Fo(t,{},R(n,(function(n){return e=n.name(),o="Cannot configure "+n.name()+" for "+t,rr(e,e,{tag:"option",process:{}},qe((function(t){return Ho("The field: "+e+" is forbidden. "+o)})))
var e,o})).concat([ir("dump",c)]))}function Ws(t){return t.dump}function Us(t,n){return O(O({},qa(n)),t.dump)}function js(t){return Tt(t,"uiType")}function Gs(t){return t.fold(vt.some,vt.none,vt.some,vt.some)}function Xs(t){function n(t){return t.name}return t.fold(n,n,n,n)}function qs(t,n){return function(e){var o=uo("Converting part type",n,e)
return t(o)}}function Ys(t,n,e,o){return jo(n.defaults(t,e,o),e,{uid:t.partUids[n.name]},n.overrides(t,e,o))}function Ks(t,n){var e={}
return St(n,(function(n){Gs(n).each((function(n){var o=jf(t,n.pname)
e[n.name]=function(e){var r=uo("Part: "+n.name+" in "+t,Yo(n.schema),e)
return O(O({},o),{config:e,validated:r})}}))})),e}function Js(t,n,e){return{uiType:Of(),owner:t,name:n,config:e,validated:{}}}function $s(t){return U(t,(function(t){return t.fold(vt.none,vt.some,vt.none,vt.none).map((function(t){return po(t.name,t.schema.concat([qu(Wf())]))})).toArray()}))}function Qs(t){return R(t,Xs)}function Zs(t,n,e){return o=n,r={},i={},St(e,(function(t){t.fold((function(t){r[t.pname]=Cf(!0,(function(n,e,o){return t.factory.sketch(Ys(n,t,e,o))}))}),(function(t){var n=o.parts[t.name]
i[t.name]=a(t.factory.sketch(Ys(o,t,n[Wf()]),n))}),(function(t){r[t.pname]=Cf(!1,(function(n,e,o){return t.factory.sketch(Ys(n,t,e,o))}))}),(function(t){r[t.pname]=kf(!0,(function(n,e,o){return R(n[t.name],(function(e){return t.factory.sketch(jo(t.defaults(n,e,o),e,t.overrides(n,e)))}))}))}))})),{internals:a(r),externals:a(i)}
var o,r,i}function tl(t,n,e){return o=vt.some(t),i=(r=n).components,l=nt(e,(function(t,n){return o=t,r=!1,{name:a(e=n),required:function(){return o.fold((function(t,n){return t}),(function(t,n){return t}))},used:function(){return r},replace:function(){if(r)throw new Error("Trying to use the same placeholder more than once: "+e)
return r=!0,o}}
var e,o,r})),u=o,c=r,s=l,f=U(i,(function(t){return Sf(u,c,t,s)})),tt(l,(function(t){if(!1===t.used()&&t.required())throw new Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+o.getOr("none")+"\nComponents: "+JSON.stringify(r.components,null,2))})),f
var o,r,i,u,c,s,l,f}function nl(t,n,e){var o=n.partUids[e]
return t.getSystem().getByUid(o).toOptional()}function el(t,n,e){return nl(t,n,e).getOrDie("Could not find part: "+e)}function ol(t,n,e){var o={},r=n.partUids,i=t.getSystem()
return St(e,(function(t){o[t]=a(i.getByUid(r[t]))})),o}function rl(t,n){var e=t.getSystem()
return nt(n.partUids,(function(t,n){return a(e.getByUid(t))}))}function il(t){return kt(t.partUids)}function ul(t,n,e){var o={},r=n.partUids,i=t.getSystem()
return St(e,(function(t){o[t]=a(i.getByUid(r[t]).getOrDie())})),o}function al(t,n){return ar(R(Qs(n),(function(n){return{key:n,value:t+"-"+n}})))}function cl(t){return rr("partUids","partUids",je((function(n){return al(n.uid,t)})),Jo())}function sl(t,n,e,o,r){var i
return uo(t+" [SpecSchema]",$e((i=r,(0<o.length?[po("parts",o)]:[]).concat([so("uid"),Oo("dom",{}),Oo("components",[]),qu("originalSpec"),Oo("debug.sketcher",{})]).concat(i)).concat(n)),e)}function ll(t,n,e,o,r){var i=Xf(r),u=sl(t,n,i,$s(e),[cl(e)]),a=Zs(0,u,e)
return o(u,tl(t,u,a.internals()),i,a.externals())}function fl(t){var n=uo("Sketcher for "+t.name,qf,t),e=nt(n.apis,Vr),o=nt(n.extraApis,Ir)
return O(O({name:n.name,configFields:n.configFields,sketch:function(t){return e=n.name,o=n.configFields,(0,n.factory)(sl(e,o,r=Xf(t),[],[]),r)
var e,o,r}},e),o)}function dl(t){var n=uo("Sketcher for "+t.name,Yf,t),e=Ks(n.name,n.partFields),o=nt(n.apis,Vr),r=nt(n.extraApis,Ir)
return O(O({name:n.name,partFields:n.partFields,configFields:n.configFields,sketch:function(t){return ll(n.name,n.configFields,n.partFields,n.factory,t)},parts:e},o),r)}function ml(t){return"input"===Ft(t)&&"radio"!==rn(t,"type")||"textarea"===Ft(t)}function gl(t,n,e){(n.disabled()?Qf:Zf)(t,n)}function pl(t,n){return!0===n.useNative&&wt($f,Ft(t.element))}function hl(t,n){return pl(t,n)?an(t.element,"disabled"):"true"===rn(t.element,"aria-disabled")}function vl(t,n,e,o){var r=is(t.element,"."+n.highlightClass)
St(r,(function(e){A(o,(function(t){return t.element===e}))||(jr(e,n.highlightClass),t.getSystem().getByDom(e).each((function(e){n.onDehighlight(t,e),gr(e,qi())})))}))}function bl(t,n,e,o){vl(t,n,0,[o]),Rl(0,n,0,o)||(Ur(o.element,n.highlightClass),n.onHighlight(t,o),gr(o,Xi()))}function yl(t,n,e,o){var r=is(t.element,"."+n.itemClass)
return L(r,(function(t){return Gr(t,n.highlightClass)})).bind((function(n){var e=Ku(n,o,0,r.length-1)
return t.getSystem().getByDom(r[e]).toOptional()}))}function xl(t,n,e){var o=G(t.slice(0,n)),r=G(t.slice(n+1))
return N(o.concat(r),e)}function wl(t,n,e){return N(G(t.slice(0,n)),e)}function Sl(t,n,e){var o=t.slice(0,n)
return N(t.slice(n+1).concat(o),e)}function Cl(t,n,e){return N(t.slice(n+1),e)}function kl(t){return function(n){var e=n.raw
return wt(t,e.which)}}function Ol(t){return function(n){return j(t,(function(t){return t(n)}))}}function _l(t){return!0===t.raw.shiftKey}function Tl(t){return!0===t.raw.ctrlKey}function El(t,n){return{matches:t,classification:n}}function Dl(t,n,e){n.exists((function(t){return e.exists((function(n){return Lt(n,t)}))}))||pr(t,Wi(),{prevFocus:n,newFocus:e})}function Bl(){function t(t){return ba(t.element)}return{get:t,set:function(n,e){var o=t(n)
n.getSystem().triggerFocus(e,n.element),Dl(n,o,t(n))}}}function Ml(){function t(t){return rd.getHighlighted(t).map((function(t){return t.element}))}return{get:t,set:function(n,e){var o=t(n)
n.getSystem().getByDom(e).fold(i,(function(t){rd.highlight(n,t)}))
var r=t(n)
Dl(n,o,r)}}}function Al(t,n,e,o,r,i){var u=i.map(Me)
return $l(t,n,e,o,r,u)}function Fl(t,n,e){var o,r,i=n.getAttachPoint(t)
fn(t.element,"position",Ql.getMode(i)),r=n.cloakVisibilityAttr,pn((o=t).element,"visibility").fold((function(){cn(o.element,r)}),(function(t){on(o.element,r,t)})),fn(o.element,"visibility","hidden")}function Il(t,n,e){var o,r,i,u=t.element
A(["top","left","right","bottom"],(function(t){return pn(u,t).isSome()}))||vn(t.element,"position"),r="visibility",i=n.cloakVisibilityAttr,un((o=t).element,i).fold((function(){return vn(o.element,r)}),(function(t){return fn(o.element,r,t)}))}function Rl(t,n,e,o){return Gr(o.element,n.highlightClass)}function Vl(t,n,e){return Tu(t.element,"."+n.itemClass).bind((function(n){return t.getSystem().getByDom(n).toOptional()}))}function Pl(t,n,e){var o=is(t.element,"."+n.itemClass)
return(0<o.length?vt.some(o[o.length-1]):vt.none()).bind((function(n){return t.getSystem().getByDom(n).toOptional()}))}function Hl(t,n,e){return ct(R(is(t.element,"."+n.itemClass),(function(n){return t.getSystem().getByDom(n).toOptional()})))}es.ltr,es.rtl
var zl,Nl,Ll,Wl,Ul=(zl=Xn,{get:function(t){if(!zl(t))throw new Error("Can only get text value of a text node")
return Nl(t).getOr("")},getOption:Nl=function(t){return zl(t)?vt.from(t.dom.nodeValue):vt.none()},set:function(t,n){if(!zl(t))throw new Error("Can only set raw text value of a text node")
t.dom.nodeValue=n}}),jl=["img","br"],Gl=[bo("getSelection"),so("root"),bo("bubble"),Bc(),Oo("overrides",{}),Oo("showAbove",!1),Xu("placement",(function(t,n,e){var o=Xt(n.root).dom,r=Vc(t,0,n)
return Hc(fs(o,n).bind((function(t){return(0<(n=Uc(o,ns.exactFromRange(t)).getBoundingClientRect()).width||0<n.height?vt.some(n).map(Lc):vt.none()).orThunk((function(){var n=At.fromText("\ufeff")
En(t.start,n)
var e=cs(o,ns.exact(n,0,n,1))
return Te(n),e})).bind((function(t){return Pc(t.left,t.top,t.width,t.height)}))
var n})),r,n,e,fs(o,n).bind((function(t){return Gn(t.start)?vt.some(t.start):le(t.start)})).getOr(t.element))}))],Xl="link-layout",ql=ao("type",{selection:Gl,node:Jc,hotspot:Gc,submenu:[so("item"),Bc(),Oo("overrides",{}),Xu("placement",(function(t,n,e){var o=ka(e,n.item.element),r=Mc(t.element,n,ys(),xs(),ys(),xs(),vt.none())
return vt.some(Tc({anchorBox:o,bubble:dc(),overrides:n.overrides,layouts:r,placer:vt.none()}))}))],makeshift:Xc}),Yl=[vo("classes",Qo),Do("mode","all",["all","layout","placement"])],Kl=[Oo("useFixed",S),bo("getBounds")],Jl=[lo("anchor",ql),ko("transition",Yl)],$l=function(t,n,e,o,r,i){var u=uo("placement.info",Yo(Jl),r),c=u.anchor,s=o.element,l=e.get(o.uid)
ya((function(){fn(s,"position","fixed")
var r=pn(s,"visibility")
fn(s,"visibility","hidden")
var f,d,m,g,p=n.useFixed()?(g=document.documentElement,hc(0,0,g.clientWidth,g.clientHeight)):(d=Cn((f=t).element),m=f.element.dom.getBoundingClientRect(),pc(d.left,d.top,m.width,m.height)),h=c.placement,v=i.map(a).or(n.getBounds)
h(t,c,p).each((function(n){var r=n.placer.getOr(ws)(t,p,n,v,o,l,u.transition)
e.set(o.uid,r)})),r.fold((function(){vn(s,"visibility")}),(function(t){fn(s,"visibility",t)})),pn(s,"left").isNone()&&pn(s,"top").isNone()&&pn(s,"right").isNone()&&pn(s,"bottom").isNone()&&at(pn(s,"position"),"fixed")&&vn(s,"position")}),s)},Ql=da({fields:Kl,name:"positioning",active:Qa,apis:Object.freeze({__proto__:null,position:function(t,n,e,o,r){Al(t,n,e,o,r,vt.none())},positionWithin:Al,positionWithinBounds:$l,getMode:function(t,n,e){return n.useFixed()?"fixed":"absolute"},reset:function(t,n,e,o){var r=o.element
St(["position","left","right","top","bottom"],(function(t){return vn(r,t)})),cn(r,vc),e.clear(o.uid)}}),state:Object.freeze({__proto__:null,init:function(){var t={}
return gu({readState:function(){return t},clear:function(n){h(n)?delete t[n]:t={}},set:function(n,e){t[n]=e},get:function(n){return it(t,n)}})}})}),Zl=function(t){gr(t,zi())
var n=t.components()
St(n,Zl)},tf=function(t){var n=t.components()
St(n,tf),gr(t,Hi())},nf=function(t,n,e){t.getSystem().addToWorld(n),e(t.element,n.element),he(t.element)&&tf(n),t.syncComponents()},ef=function(t,n,e){e(t,n.element)
var o=Kt(n.element)
St(o,(function(t){n.getByDom(t).each(tf)}))},of=Object.freeze({__proto__:null,cloak:Fl,decloak:Il,open:Ms,openWhileCloaked:function(t,n,e,o,r){Fl(t,n),Ms(t,n,e,o),r(),Il(t,n)},close:As,isOpen:Fs,isPartOf:function(t,n,e,o){return Fs(0,0,e)&&e.get().exists((function(e){return n.isPartOf(t,e,o)}))},getState:function(t,n,e){return e.get()},setContent:function(t,n,e,o){return e.get().map((function(){return Bs(t,n,e,o)}))}}),rf=Object.freeze({__proto__:null,events:function(t,n){return Ki([wr(Mi(),(function(e,o){As(e,t,n)}))])}}),uf=da({fields:[Wu("onOpen"),Wu("onClose"),so("isPartOf"),so("getAttachPoint"),Oo("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:rf,apis:of,state:Object.freeze({__proto__:null,init:function(){var t=rc(),n=a("not-implemented")
return gu({readState:n,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}})}),af=a("dismiss.popups"),cf=a("reposition.popups"),sf=a("mouse.released"),lf=$e([Oo("isExtraPart",S),ko("fireEventInstead",[Oo("event",Ni())])]),ff=$e([ko("fireEventInstead",[Oo("event",Li())]),go("doReposition")]),df=Object.freeze({__proto__:null,onLoad:Vs,onUnload:Ps,setValue:function(t,n,e,o){n.store.manager.setValue(t,n,e,o)},getValue:function(t,n,e){return n.store.manager.getValue(t,n,e)},getState:function(t,n,e){return e}}),mf=Object.freeze({__proto__:null,events:function(t,n){var e=t.resetOnDom?[Ji((function(e,o){Vs(e,t,n)})),$i((function(e,o){Ps(e,t,n)}))]:[la(t,n,Vs)]
return Ki(e)}}),gf=Object.freeze({__proto__:null,memory:Hs,dataset:zs,manual:function(){return gu({readState:i})},init:function(t){return t.store.manager.state(t)}}),pf=[bo("initialValue"),so("getFallbackEntry"),so("getDataKey"),so("setValue"),Xu("manager",{setValue:Ns,getValue:function(t,n,e){var o=n.store,r=o.getDataKey(t)
return e.lookup(r).getOrThunk((function(){return o.getFallbackEntry(r)}))},onLoad:function(t,n,e){n.store.initialValue.each((function(o){Ns(t,n,e,o)}))},onUnload:function(t,n,e){e.clear()},state:zs})],hf=[so("getValue"),Oo("setValue",i),bo("initialValue"),Xu("manager",{setValue:function(t,n,e,o){n.store.setValue(t,o),n.onSetValue(t,o)},getValue:function(t,n,e){return n.store.getValue(t)},onLoad:function(t,n,e){n.store.initialValue.each((function(e){n.store.setValue(t,e)}))},onUnload:i,state:mu.init})],vf=da({fields:[_o("store",{mode:"memory"},ao("mode",{memory:[bo("initialValue"),Xu("manager",{setValue:function(t,n,e,o){e.set(o),n.onSetValue(t,o)},getValue:function(t,n,e){return e.get()},onLoad:function(t,n,e){n.store.initialValue.each((function(t){e.isNotSet()&&e.set(t)}))},onUnload:function(t,n,e){e.clear()},state:Hs})],manual:hf,dataset:pf})),Wu("onSetValue"),Oo("resetOnDom",!1)],name:"representing",active:mf,apis:df,extra:{setValueFrom:function(t,n){var e=vf.getValue(n)
vf.setValue(t,e)}},state:gf}),bf=Ls,yf=Us,xf="placeholder",wf=Ro([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Sf=function(t,n,e,o){return r=t,u=o,(js(i=e)&&i.uiType===xf?(l=i,f=u,(s=r).exists((function(t){return t!==l.owner}))?wf.single(!0,a(l)):it(f,l.name).fold((function(){throw new Error("Unknown placeholder component: "+l.name+"\nKnown: ["+kt(f)+"]\nNamespace: "+s.getOr("none")+"\nSpec: "+JSON.stringify(l,null,2))}),(function(t){return t.replace()}))):wf.single(!1,a(i))).fold((function(r,i){var u=js(e)?i(n,e.config,e.validated):i(n),a=U(it(u,"components").getOr([]),(function(e){return Sf(t,n,e,o)}))
return[O(O({},u),{components:a})]}),(function(t,o){if(js(e)){var r=o(n,e.config,e.validated)
return e.validated.preprocess.getOr(c)(r)}return o(n)}))
var r,i,u,s,l,f},Cf=wf.single,kf=wf.multiple,Of=a(xf),_f=Ro([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Tf=Oo("factory",{sketch:c}),Ef=Oo("schema",[]),Df=so("name"),Bf=rr("pname","pname",We((function(t){return"<alloy."+Mr(t.name)+">"})),Jo()),Mf=ir("schema",(function(){return[bo("preprocess")]})),Af=Oo("defaults",a({})),Ff=Oo("overrides",a({})),If=Yo([Tf,Ef,Df,Bf,Af,Ff]),Rf=Yo([Tf,Ef,Df,Af,Ff]),Vf=Yo([Tf,Ef,Df,Bf,Af,Ff]),Pf=Yo([Tf,Mf,Df,so("unit"),Bf,Af,Ff]),Hf=qs(_f.required,If),zf=qs(_f.external,Rf),Nf=qs(_f.optional,Vf),Lf=qs(_f.group,Pf),Wf=a("entirety"),Uf=Object.freeze({__proto__:null,required:Hf,external:zf,optional:Nf,group:Lf,asNamedPart:Gs,name:Xs,asCommon:function(t){return t.fold(c,c,c,c)},original:Wf}),jf=function(t,n){return{uiType:Of(),owner:t,name:n}},Gf=Object.freeze({__proto__:null,generate:Ks,generateOne:Js,schemas:$s,names:Qs,substitutes:Zs,components:tl,defaultUids:al,defaultUidsSchema:cl,getAllParts:rl,getAllPartNames:il,getPart:nl,getPartOrDie:el,getParts:ol,getPartsOrDie:ul}),Xf=function(t){return Tt(t,"uid")?t:O(O({},t),{uid:cu("uid")})},qf=$e([so("name"),so("factory"),so("configFields"),Oo("apis",{}),Oo("extraApis",{})]),Yf=$e([so("name"),so("factory"),so("configFields"),so("partFields"),Oo("apis",{}),Oo("extraApis",{})]),Kf=Object.freeze({__proto__:null,getCurrent:function(t,n,e){return n.find(t)}}),Jf=da({fields:[so("find")],name:"composing",apis:Kf}),$f=["input","button","textarea","select"],Qf=function(t,n,e){n.disableClass.each((function(n){Ur(t.element,n)})),(pl(t,n)?function(t){on(t.element,"disabled","disabled")}:function(t){on(t.element,"aria-disabled","true")})(t),n.onDisabled(t)},Zf=function(t,n,e){n.disableClass.each((function(n){jr(t.element,n)})),(pl(t,n)?function(t){cn(t.element,"disabled")}:function(t){on(t.element,"aria-disabled","false")})(t),n.onEnabled(t)},td=Object.freeze({__proto__:null,enable:Zf,disable:Qf,isDisabled:hl,onLoad:gl,set:function(t,n,e,o){(o?Qf:Zf)(t,n)}}),nd=Object.freeze({__proto__:null,exhibit:function(t,n){return Hr({classes:n.disabled()?n.disableClass.toArray():[]})},events:function(t,n){return Ki([yr(Ti(),(function(n,e){return hl(n,t)})),la(t,n,gl)])}}),ed=da({fields:[Mo("disabled",S),Oo("useNative",!0),bo("disableClass"),Wu("onDisabled"),Wu("onEnabled")],name:"disabling",active:nd,apis:td}),od=Object.freeze({__proto__:null,dehighlightAll:function(t,n,e){return vl(t,n,0,[])},dehighlight:function(t,n,e,o){Rl(0,n,0,o)&&(jr(o.element,n.highlightClass),n.onDehighlight(t,o),gr(o,qi()))},highlight:bl,highlightFirst:function(t,n,e){Vl(t,n).each((function(e){bl(t,n,0,e)}))},highlightLast:function(t,n,e){Pl(t,n).each((function(e){bl(t,n,0,e)}))},highlightAt:function(t,n,e,o){var r,i,u
i=o,u=is((r=t).element,"."+n.itemClass),vt.from(u[i]).fold((function(){return Re.error(new Error("No element found with index "+i))}),r.getSystem().getByDom).fold((function(t){throw t}),(function(e){bl(t,n,0,e)}))},highlightBy:function(t,n,e,o){N(Hl(t,n),o).each((function(e){bl(t,n,0,e)}))},isHighlighted:Rl,getHighlighted:function(t,n,e){return Tu(t.element,"."+n.highlightClass).bind((function(n){return t.getSystem().getByDom(n).toOptional()}))},getFirst:Vl,getLast:Pl,getPrevious:function(t,n,e){return yl(t,n,0,-1)},getNext:function(t,n,e){return yl(t,n,0,1)},getCandidates:Hl}),rd=da({fields:[so("highlightClass"),so("itemClass"),Wu("onHighlight"),Wu("onDehighlight")],name:"highlighting",apis:od}),id=[8],ud=[9],ad=[13],cd=[27],sd=[32],ld=[37],fd=[38],dd=[39],md=[40],gd=x(_l)
function pd(t,n,e,o,r){function i(t,n,e,o,r){var i=e(t,n,o,r),u=n.event
return N(i,(function(t){return t.matches(u)})).map((function(t){return t.classification})).bind((function(e){return e(t,n,o,r)}))}var u={schema:function(){return t.concat([Oo("focusManager",Bl()),_o("focusInside","onFocus",eo((function(t){return wt(["onFocus","onEnterOrSpace","onApi"],t)?Re.value(t):Re.error("Invalid value for focusInside")}))),Xu("handler",u),Xu("state",n),Xu("sendFocusIn",r)])},processKey:i,toEvents:function(t,n){var u=t.focusInside!==Ll.OnFocusMode?vt.none():r(t).map((function(e){return wr(Ci(),(function(o,r){e(o,t,n),r.stop()}))})),a=[wr(mi(),(function(o,u){i(o,u,e,t,n).fold((function(){var e=o,i=u,a=kl(sd.concat(ad))(i.event)
t.focusInside===Ll.OnEnterOrSpaceMode&&a&&fr(e,i)&&r(t).each((function(o){o(e,t,n),i.stop()}))}),(function(t){u.stop()}))})),wr(gi(),(function(e,r){i(e,r,o,t,n).each((function(t){r.stop()}))}))]
return Ki(u.toArray().concat(a))}}
return u}function hd(t){function n(t,n){return 0<xn(t.visibilitySelector.bind((function(t){return Eu(n,t)})).getOr(n))}function e(t,e,o){var r=e,i=P(is(t.element,r.selector),(function(t){return n(r,t)}))
vt.from(i[r.firstTabstop]).each((function(n){e.focusManager.set(t,n)}))}function o(t,e,o,r){var i,u=is(t.element,o.selector)
return(i=o).focusManager.get(t).bind((function(t){return Eu(t,i.selector)})).bind((function(e){return L(u,y(Lt,e)).bind((function(e){return i=t,a=o,r(u,e,(function(t){return n(e=a,o=t)&&e.useTabstopAt(o)
var e,o})).fold((function(){return a.cyclic?vt.some(!0):vt.none()}),(function(t){return a.focusManager.set(i,t),vt.some(!0)}))
var i,a}))}))}var r=[bo("onEscape"),bo("onEnter"),Oo("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Oo("firstTabstop",0),Oo("useTabstopAt",C),bo("visibilitySelector")].concat([t]),i=a([El(Ol([_l,kl(ud)]),(function(t,n,e){return o(t,0,e,e.cyclic?xl:wl)})),El(kl(ud),(function(t,n,e){return o(t,0,e,e.cyclic?Sl:Cl)})),El(kl(cd),(function(t,n,e){return e.onEscape.bind((function(e){return e(t,n)}))})),El(Ol([gd,kl(ad)]),(function(t,n,e){return e.onEnter.bind((function(e){return e(t,n)}))}))]),u=a([])
return pd(r,mu.init,i,u,(function(){return vt.some(e)}))}function vd(t,n,e){return ml(e)&&kl(sd)(n.event)?vt.none():(vr(t,e,Ti()),vt.some(!0))}function bd(t,n){return vt.some(!0)}function yd(t,n,e){return e.execute(t,n,t.element)}function xd(){var t=rc()
return gu({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(n,e){t.set({numRows:n,numColumns:e})},getNumRows:function(){return t.get().map((function(t){return t.numRows}))},getNumColumns:function(){return t.get().map((function(t){return t.numColumns}))}})}function wd(t){return function(n,e,o,r){var i=t(n.element)
return Wm(i,n,e,o,r)}}function Sd(t,n){return wd(mc(t,n))}function Cd(t,n){return wd(mc(n,t))}function kd(t){return function(n,e,o,r){return Wm(t,n,e,o,r)}}function Od(t){return!((n=t.dom).offsetWidth<=0&&n.offsetHeight<=0)
var n}function _d(t,n,e){var o,r=P(is(t,e),Od)
return L(o=r,(function(t){return Lt(t,n)})).map((function(t){return{index:t,candidates:o}}))}function Td(t,n){return L(t,(function(t){return Lt(n,t)}))}function Ed(t,n,e,o){return o(Math.floor(n/e),n%e).bind((function(n){var o=n.row*e+n.column
return 0<=o&&o<t.length?vt.some(t[o]):vt.none()}))}function Dd(t,n,e,o,r){return Ed(t,n,o,(function(n,i){var u=n===e-1?t.length-n*o:o,a=Ku(i,r,0,u-1)
return vt.some({row:n,column:a})}))}function Bd(t,n,e,o,r){return Ed(t,n,o,(function(n,i){var u=Ku(n,r,0,e-1),a=u===e-1?t.length-u*o:o,c=Va(i,0,a-1)
return vt.some({row:u,column:c})}))}function Md(t,n,e){Tu(t.element,n.selector).each((function(e){n.focusManager.set(t,e)}))}function Ad(t){return function(n,e,o,r){return _d(n,e,o.selector).bind((function(n){return t(n.candidates,n.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))}))}}function Fd(t,n,e){return e.captureTab?vt.some(!0):vt.none()}function Id(t,n,e,o){var r=function(t,n,e){var i,u=Ku(n,o,0,e.length-1)
return u===t?vt.none():"button"===Ft(i=e[u])&&"disabled"===rn(i,"disabled")?r(t,u,e):vt.from(e[u])}
return _d(t,e,n).bind((function(t){var n=t.index,e=t.candidates
return r(n,n,e)}))}function Rd(t,n,e){return(o=e).focusManager.get(t).bind((function(t){return Eu(t,o.selector)})).bind((function(o){return e.execute(t,n,o)}))
var o}function Vd(t,n,e){n.getInitial(t).orThunk((function(){return Tu(t.element,n.selector)})).each((function(e){n.focusManager.set(t,e)}))}function Pd(t,n,e){return Id(t,e.selector,n,-1)}function Hd(t,n,e){return Id(t,e.selector,n,1)}function zd(t){return function(n,e,o,r){return t(n,e,o,r).bind((function(){return o.executeOnMove?Rd(n,e,o):vt.some(!0)}))}}function Nd(t,n,e){return e.onEscape(t,n)}function Ld(t,n,e){return vt.from(t[n]).bind((function(t){return vt.from(t[e]).map((function(t){return{rowIndex:n,columnIndex:e,cell:t}}))}))}function Wd(t,n,e,o){return Ld(t,n,Ku(e,o,0,t[n].length-1))}function Ud(t,n,e,o){var r=Ku(e,o,0,t.length-1),i=t[r].length
return Ld(t,r,Va(n,0,i-1))}function jd(t,n,e,o){var r=t[n].length
return Ld(t,n,Va(e+o,0,r-1))}function Gd(t,n,e,o){var r=Va(e+o,0,t.length-1),i=t[r].length
return Ld(t,r,Va(n,0,i-1))}function Xd(t,n,e){n.previousSelector(t).orThunk((function(){var e=n.selectors
return Tu(t.element,e.cell)})).each((function(e){n.focusManager.set(t,e)}))}function qd(t,n){return function(e,o,r){var i=r.cycles?t:n
return Eu(o,r.selectors.row).bind((function(t){return Td(is(t,r.selectors.cell),o).bind((function(n){var o=is(e,r.selectors.row)
return Td(o,t).bind((function(t){var e,u=(e=r,R(o,(function(t){return is(t,e.selectors.cell)})))
return i(u,t,n).map((function(t){return t.cell}))}))}))}))}}function Yd(t,n,e){return e.focusManager.get(t).bind((function(o){return e.execute(t,n,o)}))}function Kd(t,n,e){Tu(t.element,n.selector).each((function(e){n.focusManager.set(t,e)}))}function Jd(t,n,e){return Id(t,e.selector,n,-1)}function $d(t,n,e){return Id(t,e.selector,n,1)}function Qd(t,n,e,o){var r=t.getSystem().build(o)
nf(t,r,e)}function Zd(t,n,e,o){N(Sg(t),(function(t){return Lt(o.element,t.element)})).each(_s)}function tm(t,n,e,o,r){var i=Sg(t)
return vt.from(i[o]).map((function(n){return Zd(t,0,0,n),r.each((function(n){Qd(t,0,(function(t,n){var e,r=n
Jt(e=t,o).fold((function(){_e(e,r)}),(function(t){En(t,r)}))}),n)})),n}))}function nm(t,n){var e,o
return{key:t,value:{config:{},me:(e=t,o=Ki(n),da({fields:[so("enabled")],name:e,active:{events:a(o)}})),configAsRaw:a({}),initialConfig:{},state:mu}}}function em(t,n){n.ignore||(pa(t.element),n.onFocus(t))}function om(t,n,e){var o=n.aria
o.update(t,o,e.get())}function rm(t,n,e){n.toggleClass.each((function(n){(e.get()?Ur:jr)(t.element,n)}))}function im(t,n,e){Rm(t,n,e,!e.get())}function um(t,n,e){e.set(!0),rm(t,n,e),om(t,n,e)}function am(t,n,e){e.set(!1),rm(t,n,e),om(t,n,e)}function cm(t,n,e){Rm(t,n,e,n.selected)}function sm(){function t(t,n){n.stop(),hr(t)}return[wr(vi(),t),wr(Di(),t),_r(ei()),_r(ui())]}function lm(t){return Ki(W([t.map((function(t){return Zi((function(n,e){t(n),e.stop()}))})).toArray(),sm()]))}function fm(t){(ba(t.element).isNone()||_g.isFocused(t))&&(_g.isFocused(t)||_g.focus(t),pr(t,Bg,{item:t}))}function dm(t){pr(t,Mg,{item:t})}function mm(t,n){return t.x+t.width/2-n.width/2}function gm(t,n){return t.x+t.width-n.width}function pm(t,n){return t.y+t.height-n.height}function hm(t,n){return t.y+t.height/2-n.height/2}function vm(t,n,e){return Yu(gm(t,n),pm(t,n),e.insetSouthwest(),Ma(),"southwest",Ju(t,{right:0,bottom:3}),Yg)}function bm(t,n,e){return Yu(t.x,pm(t,n),e.insetSoutheast(),Ba(),"southeast",Ju(t,{left:1,bottom:3}),Yg)}function ym(t,n,e){return Yu(gm(t,n),t.y,e.insetNorthwest(),Da(),"northwest",Ju(t,{right:0,top:2}),Yg)}function xm(t,n,e){return Yu(t.x,t.y,e.insetNortheast(),Ea(),"northeast",Ju(t,{left:1,top:2}),Yg)}function wm(t,n,e){return Yu(gm(t,n),hm(t,n),e.insetEast(),Ra(),"east",Ju(t,{right:0}),Yg)}function Sm(t,n,e){return Yu(t.x,hm(t,n),e.insetWest(),Ia(),"west",Ju(t,{left:1}),Yg)}function Cm(t){switch(t){case"north":return Kg
case"northeast":return xm
case"northwest":return ym
case"south":return Jg
case"southeast":return bm
case"southwest":return vm
case"east":return wm
case"west":return Sm}}function km(t,n,e,o,r){return nc(o).map(Cm).getOr(Kg)(t,n,e,o,r)}function Om(t){switch(t){case"north":return Jg
case"northeast":return bm
case"northwest":return vm
case"south":return Kg
case"southeast":return xm
case"southwest":return ym
case"east":return Sm
case"west":return wm}}function _m(t,n,e,o,r){return nc(o).map(Om).getOr(Kg)(t,n,e,o,r)}function Tm(t){var n=void 0!==t.uid&&ut(t,"uid")?t.uid:cu("memento")
return{get:function(t){return t.getSystem().getByUid(n).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(n).toOptional()},asSpec:function(){return O(O({},t),{uid:n})}}}function Em(t){return function(){return it(t,np).getOr("!not found!")}}function Dm(t,n){var e,o=t.toLowerCase()
if(Zg.isRtl()){var r=Bt(e=o,"-rtl")?e:e+"-rtl"
return Tt(n,r)?r:o}return o}function Bm(t,n){return it(n,Dm(t,n))}function Mm(t,n){var e=n()
return Bm(t,e).getOrThunk(Em(e))}function Am(){return nm("add-focusable",[Ji((function(t){var n,e
n=t.element,e=function(t){return zt(t,"svg")},N(n.dom.childNodes,(function(t){return e(At.fromDom(t))})).map(At.fromDom).each((function(t){return on(t,"focusable","false")}))}))])}function Fm(t,n,e,o){var r,i,u,a=(u=n,Zg.isRtl()&&Tt(tp,u)?["tox-icon--flip"]:[]),c=it(e,Dm(n,e)).or(o).getOrThunk(Em(e))
return{dom:{tag:t.tag,attributes:null!==(r=t.attributes)&&void 0!==r?r:{},classes:t.classes.concat(a),innerHtml:c},behaviours:qa(T(T([],null!==(i=t.behaviours)&&void 0!==i?i:[],!0),[Am()],!1))}}function Im(t,n,e,o){return void 0===o&&(o=vt.none()),Fm(n,t,e(),o)}function Rm(t,n,e,o){(o?um:am)(t,n,e)}function Vm(t,n,e){on(t.element,"aria-expanded",e)}function Pm(t){return"prepared"===t.type?vt.some(t.menu):vt.none()}(Wl=Ll=Ll||{}).OnFocusMode="onFocus",Wl.OnEnterOrSpaceMode="onEnterOrSpace",Wl.OnApiMode="onApi"
var Hm=hd(ir("cyclic",S)),zm=hd(ir("cyclic",C)),Nm=pd([Oo("execute",vd),Oo("useSpace",!1),Oo("useEnter",!0),Oo("useControlEnter",!1),Oo("useDown",!1)],mu.init,(function(t,n,e,o){var r=e.useSpace&&!ml(t.element)?sd:[],i=e.useEnter?ad:[],u=e.useDown?md:[]
return[El(kl(r.concat(i).concat(u)),yd)].concat(e.useControlEnter?[El(Ol([Tl,kl(ad)]),yd)]:[])}),(function(t,n,e,o){return e.useSpace&&!ml(t.element)?[El(kl(sd),bd)]:[]}),(function(){return vt.none()})),Lm=Object.freeze({__proto__:null,flatgrid:xd,init:function(t){return t.state(t)}}),Wm=function(t,n,e,o,r){return o.focusManager.get(n).bind((function(e){return t(n.element,e,o,r)})).map((function(t){return o.focusManager.set(n,t),!0}))},Um=kd,jm=kd,Gm=kd,Xm=Ad((function(t,n,e,o){return Dd(t,n,e,o,-1)})),qm=Ad((function(t,n,e,o){return Dd(t,n,e,o,1)})),Ym=Ad((function(t,n,e,o){return Bd(t,n,e,o,-1)})),Km=Ad((function(t,n,e,o){return Bd(t,n,e,o,1)})),Jm=pd([so("selector"),Oo("execute",vd),Uu("onEscape"),Oo("captureTab",!1),_a()],xd,a([El(kl(ld),Sd(Xm,qm)),El(kl(dd),Cd(Xm,qm)),El(kl(fd),Um(Ym)),El(kl(md),jm(Km)),El(Ol([_l,kl(ud)]),Fd),El(Ol([gd,kl(ud)]),Fd),El(kl(cd),(function(t,n,e){return e.onEscape(t,n)})),El(kl(sd.concat(ad)),(function(t,n,e,o){return(r=e).focusManager.get(t).bind((function(t){return Eu(t,r.selector)})).bind((function(o){return e.execute(t,n,o)}))
var r}))]),a([El(kl(sd),bd)]),(function(){return vt.some(Md)})),$m=[so("selector"),Oo("getInitial",vt.none),Oo("execute",vd),Uu("onEscape"),Oo("executeOnMove",!1),Oo("allowVertical",!0)],Qm=a([El(kl(sd),bd)]),Zm=pd($m,mu.init,(function(t,n,e,o){var r=ld.concat(e.allowVertical?fd:[]),i=dd.concat(e.allowVertical?md:[])
return[El(kl(r),zd(Sd(Pd,Hd))),El(kl(i),zd(Cd(Pd,Hd))),El(kl(ad),Rd),El(kl(sd),Rd),El(kl(cd),Nd)]}),Qm,(function(){return vt.some(Vd)})),tg=[po("selectors",[so("row"),so("cell")]),Oo("cycles",!0),Oo("previousSelector",vt.none),Oo("execute",vd)],ng=qd((function(t,n,e){return Wd(t,n,e,-1)}),(function(t,n,e){return jd(t,n,e,-1)})),eg=qd((function(t,n,e){return Wd(t,n,e,1)}),(function(t,n,e){return jd(t,n,e,1)})),og=qd((function(t,n,e){return Ud(t,e,n,-1)}),(function(t,n,e){return Gd(t,e,n,-1)})),rg=qd((function(t,n,e){return Ud(t,e,n,1)}),(function(t,n,e){return Gd(t,e,n,1)})),ig=a([El(kl(ld),Sd(ng,eg)),El(kl(dd),Cd(ng,eg)),El(kl(fd),Um(og)),El(kl(md),jm(rg)),El(kl(sd.concat(ad)),(function(t,n,e){return ba(t.element).bind((function(o){return e.execute(t,n,o)}))}))]),ug=a([El(kl(sd),bd)]),ag=pd(tg,mu.init,ig,ug,(function(){return vt.some(Xd)})),cg=[so("selector"),Oo("execute",vd),Oo("moveOnTab",!1)],sg=a([El(kl(fd),Gm(Jd)),El(kl(md),Gm($d)),El(Ol([_l,kl(ud)]),(function(t,n,e,o){return e.moveOnTab?Gm(Jd)(t,n,e,o):vt.none()})),El(Ol([gd,kl(ud)]),(function(t,n,e,o){return e.moveOnTab?Gm($d)(t,n,e,o):vt.none()})),El(kl(ad),Yd),El(kl(sd),Yd)]),lg=a([El(kl(sd),bd)]),fg=pd(cg,mu.init,sg,lg,(function(){return vt.some(Kd)})),dg=pd([Uu("onSpace"),Uu("onEnter"),Uu("onShiftEnter"),Uu("onLeft"),Uu("onRight"),Uu("onTab"),Uu("onShiftTab"),Uu("onUp"),Uu("onDown"),Uu("onEscape"),Oo("stopSpaceKeyup",!1),bo("focusIn")],mu.init,(function(t,n,e){return[El(kl(sd),e.onSpace),El(Ol([gd,kl(ad)]),e.onEnter),El(Ol([_l,kl(ad)]),e.onShiftEnter),El(Ol([_l,kl(ud)]),e.onShiftTab),El(Ol([gd,kl(ud)]),e.onTab),El(kl(fd),e.onUp),El(kl(md),e.onDown),El(kl(ld),e.onLeft),El(kl(dd),e.onRight),El(kl(sd),e.onSpace),El(kl(cd),e.onEscape)]}),(function(t,n,e){return e.stopSpaceKeyup?[El(kl(sd),bd)]:[]}),(function(t){return t.focusIn})),mg=Hm.schema(),gg=zm.schema(),pg=Zm.schema(),hg=Jm.schema(),vg=ag.schema(),bg=Nm.schema(),yg=fg.schema(),xg=dg.schema(),wg=ma({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:mg,cyclic:gg,flow:pg,flatgrid:hg,matrix:vg,execution:bg,menu:yg,special:xg}),name:"keying",active:{events:function(t,n){return t.handler.toEvents(t,n)}},apis:{focusIn:function(t,n,e){n.sendFocusIn(n).fold((function(){t.getSystem().triggerFocus(t.element,t.element)}),(function(o){o(t,n,e)}))},setGridSize:function(t,n,e,o,r){ut(e,"setGridSize")?e.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Lm}),Sg=function(t,n){return t.components()},Cg=da({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,n,e,o){Qd(t,0,_e,o)},prepend:function(t,n,e,o){Qd(t,0,Bn,o)},remove:Zd,replaceAt:tm,replaceBy:function(t,n,e,o,r){return L(Sg(t),o).bind((function(n){return tm(t,0,0,n,r)}))},set:function(t,n,e,o){ya((function(){var n=R(o,t.getSystem().build)
Cs(t,n)}),t.element)},contents:Sg})}),kg=Object.freeze({__proto__:null,focus:em,blur:function(t,n){n.ignore||t.element.dom.blur()},isFocused:function(t){return ha(t.element)}}),Og=Object.freeze({__proto__:null,exhibit:function(t,n){return Hr(n.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(t){return Ki([wr(Ci(),(function(n,e){em(n,t),e.stop()}))].concat(t.stopMousedown?[wr(ui(),(function(t,n){n.event.prevent()}))]:[]))}}),_g=da({fields:[Wu("onFocus"),Oo("stopMousedown",!1),Oo("ignore",!1)],name:"focusing",active:Og,apis:kg}),Tg=Object.freeze({__proto__:null,onLoad:cm,toggle:im,isOn:function(t,n,e){return e.get()},on:um,off:am,set:Rm}),Eg=Object.freeze({__proto__:null,exhibit:function(){return Hr({})},events:function(t,n){var e,o,r,i=(e=t,o=n,r=im,Zi((function(t){r(t,e,o)}))),u=la(t,n,cm)
return Ki(W([t.toggleOnExecute?[i]:[],[u]]))}}),Dg=da({fields:[Oo("selected",!1),bo("toggleClass"),Oo("toggleOnExecute",!0),_o("aria",{mode:"none"},ao("mode",{pressed:[Oo("syncWithExpanded",!1),Xu("update",(function(t,n,e){on(t.element,"aria-pressed",e),n.syncWithExpanded&&Vm(t,0,e)}))],checked:[Xu("update",(function(t,n,e){on(t.element,"aria-checked",e)}))],expanded:[Xu("update",Vm)],selected:[Xu("update",(function(t,n,e){on(t.element,"aria-selected",e)}))],none:[Xu("update",i)]}))],name:"toggling",active:Eg,apis:Tg,state:{init:function(){var t=Io(!1)
return{get:function(){return t.get()},set:function(n){return t.set(n)},clear:function(){return t.set(!1)},readState:function(){return t.get()}}}}}),Bg="alloy.item-hover",Mg="alloy.item-focus",Ag=a(Bg),Fg=a(Mg),Ig=[so("data"),so("components"),so("dom"),Oo("hasSubmenu",!1),bo("toggling"),bf("itemBehaviours",[Dg,_g,wg,vf]),Oo("ignoreFocus",!1),Oo("domModification",{}),Xu("builder",(function(t){return{dom:t.dom,domModification:O(O({},t.domModification),{attributes:O(O(O({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:yf(t.itemBehaviours,[t.toggling.fold(Dg.revoke,(function(t){return Dg.config(O({aria:{mode:"checked"}},t))})),_g.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){dm(t)}}),wg.config({mode:"execution"}),vf.config({store:{mode:"memory",initialValue:t.data}}),nm("item-type-events",T(T([],sm(),!0),[wr(li(),fm),wr(Ei(),_g.focus)],!1))]),components:t.components,eventOrder:t.eventOrder}})),Oo("eventOrder",{})],Rg=[so("dom"),so("components"),Xu("builder",(function(t){return{dom:t.dom,components:t.components,events:Ki([wr(Ei(),(function(t,n){n.stop()}))])}}))],Vg=a("item-widget"),Pg=a([Hf({name:"widget",overrides:function(t){return{behaviours:qa([vf.config({store:{mode:"manual",getValue:function(n){return t.data},setValue:i}})])}}})]),Hg=ao("type",{widget:[so("uid"),so("data"),so("components"),so("dom"),Oo("autofocus",!1),Oo("ignoreFocus",!1),bf("widgetBehaviours",[vf,_g,wg]),Oo("domModification",{}),cl(Pg()),Xu("builder",(function(t){function n(n){return nl(n,t,"widget").map((function(t){return wg.focusIn(t),t}))}function e(n,e){return ml(e.event.target)||t.autofocus&&e.setSource(n.element),vt.none()}var o=Zs(Vg(),t,Pg()),r=tl(Vg(),t,o.internals())
return{dom:t.dom,components:r,domModification:t.domModification,events:Ki([Zi((function(t,e){n(t).each((function(t){e.stop()}))})),wr(li(),fm),wr(Ei(),(function(e,o){t.autofocus?n(e):_g.focus(e)}))]),behaviours:yf(t.widgetBehaviours,[vf.config({store:{mode:"memory",initialValue:t.data}}),_g.config({ignore:t.ignoreFocus,onFocus:function(t){dm(t)}}),wg.config({mode:"special",focusIn:t.autofocus?function(t){n(t)}:Ja(),onLeft:e,onRight:e,onEscape:function(n,e){return _g.isFocused(n)||t.autofocus?(t.autofocus&&e.setSource(n.element),vt.none()):(_g.focus(n),vt.some(!0))}})])}}))],item:Ig,separator:Rg}),zg=a([Lf({factory:{sketch:function(t){var n=uo("menu.spec item",Hg,t)
return n.builder(n)}},name:"items",unit:"item",defaults:function(t,n){return Tt(n,"uid")?n:O(O({},n),{uid:cu("item")})},overrides:function(t,n){return{type:n.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Ng=a([so("value"),so("items"),so("dom"),so("components"),Oo("eventOrder",{}),Ls("menuBehaviours",[rd,vf,Jf,wg]),_o("movement",{mode:"menu",moveOnTab:!0},ao("mode",{grid:[_a(),Xu("config",(function(t,n){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:n.initSize.numColumns,numRows:n.initSize.numRows},focusManager:t.focusManager}}))],matrix:[Xu("config",(function(t,n){return{mode:"matrix",selectors:{row:n.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}})),so("rowSelector")],menu:[Oo("moveOnTab",!0),Xu("config",(function(t,n){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:n.moveOnTab,focusManager:t.focusManager}}))]})),lo("markers",Oa()),Oo("fakeFocus",!1),Oo("focusManager",Bl()),Wu("onHighlight")]),Lg=a("alloy.menu-focus"),Wg=dl({name:"Menu",configFields:Ng(),partFields:zg(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Us(t.menuBehaviours,[rd.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),vf.config({store:{mode:"memory",initialValue:t.value}}),Jf.config({find:vt.some}),wg.config(t.movement.config(t,t.movement))]),events:Ki([wr(Fg(),(function(t,n){var e=n.event
t.getSystem().getByDom(e.target).each((function(e){rd.highlight(t,e),n.stop(),pr(t,Lg(),{menu:t,item:e})}))})),wr(Ag(),(function(t,n){var e=n.event.item
rd.highlight(t,e)}))]),components:n,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Ug=function(t,n,e,o){return it(e,o).bind((function(o){return it(t,o).bind((function(o){var r=Ug(t,n,e,o)
return vt.some([o].concat(r))}))})).getOr([])},jg=Pm,Gg=a("collapse-item"),Xg=fl({name:"TieredMenu",configFields:[Gu("onExecute"),Gu("onEscape"),ju("onOpenMenu"),ju("onOpenSubmenu"),Wu("onRepositionMenu"),Wu("onCollapseMenu"),Oo("highlightImmediately",!0),po("data",[so("primary"),so("menus"),so("expansions")]),Oo("fakeFocus",!1),Wu("onHighlight"),Wu("onHover"),zu(),so("dom"),Oo("navigateOnHover",!0),Oo("stayInDom",!1),Ls("tmenuBehaviours",[wg,rd,Jf,Cg]),Oo("eventOrder",{})],apis:{collapseMenu:function(t,n){t.collapseMenu(n)},highlightPrimary:function(t,n){t.highlightPrimary(n)},repositionMenus:function(t,n){t.repositionMenus(n)}},factory:function(t,n){function e(t){return vf.getValue(t).value}function o(t,n){rd.highlight(t,n),rd.getHighlighted(n).orThunk((function(){return rd.getFirst(n)})).each((function(n){vr(t,n.element,Ei())}))}function r(t,n){return ct(R(n,(function(n){return t.lookupMenu(n).bind((function(t){return"prepared"===t.type?vt.some(t.menu):vt.none()}))})))}function u(n,e,o){var i=r(e,e.otherMenus(o))
St(i,(function(e){qr(e.element,[t.markers.backgroundMenu]),t.stayInDom||Cg.remove(n,e)}))}function a(n,o){var r
tt((r=n,f.get().getOrThunk((function(){var n={},o=P(is(r.element,"."+t.markers.item),(function(t){return"true"===rn(t,"aria-haspopup")}))
return St(o,(function(t){r.getSystem().getByDom(t).each((function(t){var o=e(t)
n[o]=t}))})),f.set(n),n}))),(function(t,n){var e=wt(o,n)
on(t.element,"aria-expanded",e)}))}function c(n,e,i){return vt.from(i[0]).bind((function(a){return e.lookupMenu(a).bind((function(a){if("notbuilt"===a.type)return vt.none()
var c=a.menu,s=r(e,i.slice(1))
return St(s,(function(n){Ur(n.element,t.markers.backgroundMenu)})),he(c.element)||Cg.append(n,wu(c)),qr(c.element,[t.markers.backgroundMenu]),o(n,c),u(n,e,i),vt.some(c)}))}))}var s,l,f=rc(),d=function(){function t(t){return a(t).bind(Pm)}function n(t){return it(e.get(),t)}var e=Io({}),o=Io({}),r=Io({}),i=rc(),u=Io({}),a=function(t){return it(o.get(),t)}
return{setMenuBuilt:function(t,n){var e
o.set(O(O({},o.get()),((e={})[t]={type:"prepared",menu:n},e)))},setContents:function(t,n,a,c){i.set(t),e.set(a),o.set(n),u.set(c)
var s=function(t,n){var e={}
tt(t,(function(t,n){St(t,(function(t){e[t]=n}))}))
var o=n,r=_t(n,(function(t,n){return{k:t,v:n}})),i=nt(r,(function(t,n){return[n].concat(Ug(e,o,r,n))}))
return nt(e,(function(t){return it(i,t).getOr([t])}))}(c,a)
r.set(s)},expand:function(t){return it(e.get(),t).map((function(n){var e=it(r.get(),t).getOr([])
return[n].concat(e)}))},refresh:function(t){return it(r.get(),t)},collapse:function(t){return it(r.get(),t).bind((function(t){return 1<t.length?vt.some(t.slice(1)):vt.none()}))},lookupMenu:a,lookupItem:n,otherMenus:function(t){var n=u.get()
return X(kt(n),t)},getPrimary:function(){return i.get().bind(t)},getMenus:function(){return o.get()},clear:function(){e.set({}),o.set({}),r.set({}),i.clear()},isClear:function(){return i.get().isNone()},getTriggeringPath:function(o,u){var a=P(n(o).toArray(),(function(n){return t(n).isSome()}))
return it(r.get(),o).bind((function(n){var o=G(a.concat(n))
return function(t){for(var n=[],e=0;e<t.length;e++){var o=t[e]
if(!o.isSome())return vt.none()
n.push(o.getOrDie())}return vt.some(n)}(U(o,(function(n,r){return a=n,c=u,s=o.slice(0,r+1),t(a).bind((function(t){return n=a,ot(e.get(),(function(t,e){return t===n})).bind((function(n){return c(n).map((function(n){return{triggeredMenu:t,triggeringItem:n,triggeringPath:s}}))}))
var n})).fold((function(){return at(i.get(),n)?[]:[vt.none()]}),(function(t){return[vt.some(t)]}))
var a,c,s})))}))}}}()
function m(n,o,r){if(void 0===r&&(r=s.HighlightSubmenu),o.hasConfigured(ed)&&ed.isDisabled(o))return vt.some(o)
var i=e(o)
return d.expand(i).bind((function(e){return a(n,e),vt.from(e[0]).bind((function(i){return d.lookupMenu(i).bind((function(u){var a=function(t,n,e){if("notbuilt"!==e.type)return e.menu
var o=t.getSystem().build(e.nbMenu())
return d.setMenuBuilt(n,o),o}(n,i,u)
return he(a.element)||Cg.append(n,wu(a)),t.onOpenSubmenu(n,o,a,G(e)),r===s.HighlightSubmenu?(rd.highlightFirst(a),c(n,d,e)):(rd.dehighlightAll(a),vt.some(o))}))}))}))}function g(n,o){var r=e(o)
return d.collapse(r).bind((function(e){return a(n,e),c(n,d,e).map((function(e){return t.onCollapseMenu(n,o,e),e}))}))}function p(n){return function(e,o){return Eu(o.getSource(),"."+t.markers.item).bind((function(t){return e.getSystem().getByDom(t).toOptional().bind((function(t){return n(e,t).map(C)}))}))}}function h(t){return rd.getHighlighted(t).bind(rd.getHighlighted)}(l=s={})[l.HighlightSubmenu=0]="HighlightSubmenu",l[l.HighlightParent=1]="HighlightParent"
var v=Ki([wr(Lg(),(function(t,n){var o=n.event.item
d.lookupItem(e(o)).each((function(){var o=n.event.menu
rd.highlight(t,o)
var r=e(n.event.item)
d.refresh(r).each((function(n){return u(t,d,n)}))}))})),Zi((function(n,o){var r=o.event.target
n.getSystem().getByDom(r).each((function(o){0===e(o).indexOf("collapse-item")&&g(n,o),m(n,o,s.HighlightSubmenu).fold((function(){t.onExecute(n,o)}),i)}))})),Ji((function(n,e){(function(n){var e,o,r=(e=n,o=t.data.primary,nt(t.data.menus,(function(n,r){function i(){return Wg.sketch(O(O({},n),{value:r,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:(t.fakeFocus?Ml:Bl)()}))}return r===o?{type:"prepared",menu:e.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))),i=nt(t.data.menus,(function(t,n){return U(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}))
return d.setContents(t.data.primary,r,t.data.expansions,i),d.getPrimary()})(n).each((function(e){Cg.append(n,wu(e)),t.onOpenMenu(n,e),t.highlightImmediately&&o(n,e)}))}))].concat(t.navigateOnHover?[wr(Ag(),(function(n,o){var r=o.event.item,i=n,u=e(r)
d.refresh(u).bind((function(t){return a(i,t),c(i,d,t)})),m(n,r,s.HighlightParent),t.onHover(n,r)}))]:[])),b={collapseMenu:function(t){h(t).each((function(n){g(t,n)}))},highlightPrimary:function(t){d.getPrimary().each((function(n){o(t,n)}))},repositionMenus:function(n){d.getPrimary().bind((function(t){return h(n).bind((function(t){var n=e(t),o=ct(R(rt(d.getMenus()),jg))
return d.getTriggeringPath(n,(function(t){return n=t,Z(o,(function(t){return t.getSystem().isConnected()?N(rd.getCandidates(t),(function(t){return e(t)===n})):vt.none()}))
var n}))})).map((function(n){return{primary:t,triggeringPath:n}}))})).fold((function(){vt.from(n.components()[0]).filter((function(t){return"menu"===rn(t.element,"role")})).each((function(e){t.onRepositionMenu(n,e,[])}))}),(function(e){var o=e.primary,r=e.triggeringPath
t.onRepositionMenu(n,o,r)}))}}
return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Us(t.tmenuBehaviours,[wg.config({mode:"special",onRight:p((function(t,n){return ml(n.element)?vt.none():m(t,n,s.HighlightSubmenu)})),onLeft:p((function(t,n){return ml(n.element)?vt.none():g(t,n)})),onEscape:p((function(n,e){return g(n,e).orThunk((function(){return t.onEscape(n,e).map((function(){return n}))}))})),focusIn:function(t,n){d.getPrimary().each((function(n){vr(t,n.element,Ei())}))}}),rd.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Jf.config({find:function(t){return rd.getHighlighted(t)}}),Cg.config({})]),eventOrder:t.eventOrder,apis:b,events:v}},extraApis:{tieredData:function(t,n,e){return{primary:t,menus:n,expansions:e}},singleData:function(t,n){return{primary:t,menus:ur(t,n),expansions:{}}},collapseItem:function(t){return{value:Mr(Gg()),meta:{text:t}}}}}),qg=fl({name:"InlineView",configFields:[so("lazySink"),Wu("onShow"),Wu("onHide"),So("onEscape"),Ls("inlineBehaviours",[uf,vf,$a]),ko("fireDismissalEventInstead",[Oo("event",Ni())]),ko("fireRepositionEventInstead",[Oo("event",Li())]),Oo("getRelated",vt.none),Oo("isExtraPart",S),Oo("eventOrder",vt.none)],factory:function(t,n){function e(n){uf.isOpen(n)&&vf.getValue(n).each((function(e){switch(e.mode){case"menu":uf.getState(n).each(Xg.repositionMenus)
break
case"position":var o=t.lazySink(n).getOrDie()
Ql.positionWithinBounds(o,n,e.config,e.getBounds())}}))}function o(t,n,e,o){i(t,n,e,(function(){return o.map((function(t){return Me(t)}))}))}function r(n,e,o,r){var i,u,a,c,s,l=(i=t,u=n,a=e,c=r,s="horizontal"===o.type?{layouts:{onLtr:ca,onRtl:sa}}:{},Xg.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightImmediately:o.menu.highlightImmediately,onEscape:function(){return uf.close(u),i.onEscape.map((function(t){return t(u)})),vt.some(!0)},onExecute:function(){return vt.some(!0)},onOpenMenu:function(t,n){Ql.positionWithinBounds(f().getOrDie(),n,a,c())},onOpenSubmenu:function(t,n,e,o){var r=f().getOrDie()
Ql.position(r,e,{anchor:O({type:"submenu",item:n},d(o))})},onRepositionMenu:function(t,n,e){var o=f().getOrDie()
Ql.positionWithinBounds(o,n,a,c()),St(e,(function(t){var n=d(t.triggeringPath)
Ql.position(o,t.triggeredMenu,{anchor:O({type:"submenu",item:t.triggeringItem},n)})}))}}))
function f(){return i.lazySink(u)}function d(t){return 2===t.length?s:{}}uf.open(n,l),vf.setValue(n,vt.some({mode:"menu",menu:l}))}var i=function(n,e,o,r){var i=t.lazySink(n).getOrDie()
uf.openWhileCloaked(n,e,(function(){return Ql.positionWithinBounds(i,n,o,r())})),vf.setValue(n,vt.some({mode:"position",config:o,getBounds:r}))},u={setContent:function(t,n){uf.setContent(t,n)},showAt:function(t,n,e){o(t,n,e,vt.none())},showWithin:o,showWithinBounds:i,showMenuAt:function(t,n,e){r(t,n,e,vt.none)},showMenuWithinBounds:r,hide:function(t){uf.isOpen(t)&&(vf.setValue(t,vt.none()),uf.close(t))},getContent:function(t){return uf.getState(t)},reposition:e,isOpen:uf.isOpen}
return{uid:t.uid,dom:t.dom,behaviours:Us(t.inlineBehaviours,[uf.config({isPartOf:function(n,e,o){return Au(e,o)||(r=o,t.getRelated(n).exists((function(t){return Au(t,r)})))
var r},getAttachPoint:function(n){return t.lazySink(n).getOrDie()},onOpen:function(n){t.onShow(n)},onClose:function(n){t.onHide(n)}}),vf.config({store:{mode:"memory",initialValue:vt.none()}}),$a.config({channels:O(O({},Is(O({isExtraPart:n.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),Rs(O(O({},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:e})))})]),eventOrder:t.eventOrder,apis:u}},apis:{showAt:function(t,n,e,o){t.showAt(n,e,o)},showWithin:function(t,n,e,o,r){t.showWithin(n,e,o,r)},showWithinBounds:function(t,n,e,o,r){t.showWithinBounds(n,e,o,r)},showMenuAt:function(t,n,e,o){t.showMenuAt(n,e,o)},showMenuWithinBounds:function(t,n,e,o,r){t.showMenuWithinBounds(n,e,o,r)},hide:function(t,n){t.hide(n)},isOpen:function(t,n){return t.isOpen(n)},getContent:function(t,n){return t.getContent(n)},setContent:function(t,n,e){t.setContent(n,e)},reposition:function(t,n){t.reposition(n)}}}),Yg="layout-inset",Kg=function(t,n,e){return Yu(mm(t,n),t.y,e.insetNorth(),Aa(),"north",Ju(t,{top:2}),Yg)},Jg=function(t,n,e){return Yu(mm(t,n),pm(t,n),e.insetSouth(),Fa(),"south",Ju(t,{bottom:3}),Yg)},$g=tinymce.util.Tools.resolve("tinymce.util.Delay"),Qg=fl({name:"Button",factory:function(t){function n(n){return it(t.dom,"attributes").bind((function(t){return it(t,n)}))}var e=lm(t.action),o=t.dom.tag
return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:yf(t.buttonBehaviours,[_g.config({}),wg.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==o)return{role:n("role").getOr("button")}
var t=n("type").getOr("button"),e=n("role").map((function(t){return{role:t}})).getOr({})
return O({type:t},e)}()},eventOrder:t.eventOrder}},configFields:[Oo("uid",void 0),so("dom"),Oo("components",[]),bf("buttonBehaviours",[_g,wg]),bo("action"),bo("role"),Oo("eventOrder",{})]}),Zg=tinymce.util.Tools.resolve("tinymce.util.I18n"),tp={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},np="temporary-placeholder",ep={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},op=fl({name:"Notification",factory:function(t){function n(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}}function e(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}}var o,r,i,u,a=Tm({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:qa([Cg.config({})])}),c=Tm({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},e(0)],behaviours:qa([Cg.config({})])}),s={updateProgress:function(t,o){t.getSystem().isConnected()&&c.getOpt(t).each((function(t){Cg.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(o)]},e(o)])}))},updateText:function(t,n){var e
t.getSystem().isConnected()&&(e=a.get(t),Cg.set(e,[$r(n)]))}},l=W([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return vt.from(ep[t])})).toArray()]),f=Tm(Qg.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Im("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(n){t.onAction(n)}})),d=[(o=l,r={tag:"div",classes:["tox-notification__icon"]},i=t.iconProvider,u=i(),Fm(r,N(o,(function(t){return Tt(u,Dm(t,u))})).getOr(np),u,vt.none())),{dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:qa([Cg.config({})])}]
return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},behaviours:qa([_g.config({}),nm("notification-events",[wr(fi(),(function(t){f.getOpt(t).each(_g.focus)}))])]),components:d.concat(t.progress?[c.asSpec()]:[]).concat(t.closeButton?[f.asSpec()]:[]),apis:s}},configFields:[bo("level"),so("progress"),so("icon"),so("onAction"),so("text"),so("iconProvider"),so("translationProvider"),Bo("closeButton",!0)],apis:{updateProgress:function(t,n,e){t.updateProgress(n,e)},updateText:function(t,n,e){t.updateText(n,e)}}})
function rp(t,n){function e(){m(o)||(clearTimeout(o),o=null)}var o=null
return{cancel:e,throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i]
e(),o=setTimeout((function(){o=null,t.apply(null,r)}),n)}}}function ip(t,n,e,o,r){var i=hp(t,(function(n){return(e=t).isBlock(o=n)||wt(["BR","IMG","HR","INPUT"],o.nodeName)||"false"===e.getContentEditable(o)
var e,o}))
return vt.from(i.backwards(n,e,o,r))}function up(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function ap(t){return""!==t&&-1!==" \f\n\r\t\v".indexOf(t)}function cp(t,n){return t.substring(n.length)}function sp(t,n,e,o){return void 0===o&&(o=0),vp(At.fromDom(n.startContainer)).fold((function(){return function(t,n,e,o){if(void 0===o&&(o=0),!n.collapsed||3!==n.startContainer.nodeType)return vt.none()
var r=t.getParent(n.startContainer,t.isBlock)||t.getRoot()
return ip(t,n.startContainer,n.startOffset,(function(t,n,o){return function(t,e){for(var o=n-1;0<=o;o--){var r=t.charAt(o)
if(ap(r))return vt.none()
if(r===e)break}return vt.some(o)}(o,e).getOr(n)}),r).bind((function(t){var r=n.cloneRange()
if(r.setStart(t.container,t.offset),r.setEnd(n.endContainer,n.endOffset),r.collapsed)return vt.none()
var i=up(r)
return 0!==i.lastIndexOf(e)||cp(i,e).length<o?vt.none():vt.some({text:cp(i,e),range:r,triggerChar:e})}))}(t,n,e,o)}),(function(n){var o=t.createRng()
o.selectNode(n.dom)
var r=up(o)
return vt.some({range:o,text:cp(r,e),triggerChar:e})}))}function lp(t,n){return{container:t,offset:n}}function fp(t){return ro("toolbarbutton",Op,t)}function dp(t){return ro("ToggleButton",Tp,t)}function mp(t,n,e,o){void 0===o&&(o={})
var r=n(),i=t.selection.getRng().startContainer.nodeValue,u=P(r.lookupByChar(e.triggerChar),(function(n){return e.text.length>=n.minChars&&n.matches.getOrThunk((function(){return n=t.dom,function(t){var e=xp(t.startContainer,t.startOffset)
return!ip(n,e.container,e.offset,(function(t,n){return 0===n?-1:n}),n.getRoot()).filter((function(t){return!ap(t.container.data.charAt(t.offset-1))})).isSome()}
var n}))(e.range,i,e.text)}))
if(0===u.length)return vt.none()
var a=bp.all(R(u,(function(t){return t.fetch(e.text,t.maxResults,o).then((function(n){return{matchText:e.text,items:n,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}}))})))
return vt.some({lookupData:a,context:e})}var gp,pp,hp=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),vp=function(t){return Eu(t,"[data-mce-autocompleter]")},bp=tinymce.util.Tools.resolve("tinymce.util.Promise"),yp=function(t){if(3===t.nodeType)return lp(t,t.data.length)
var n=t.childNodes
return 0<n.length?yp(n[n.length-1]):lp(t,n.length)},xp=function(t,n){var e=t.childNodes
return 0<e.length&&n<e.length?xp(e[n],0):0<e.length&&1===t.nodeType&&e.length===n?yp(e[e.length-1]):lp(t,n)},wp=Yo([fo("type"),wo("text")]),Sp=Yo([Oo("type","autocompleteitem"),Oo("active",!1),Oo("disabled",!1),Oo("meta",{}),fo("value"),wo("text"),wo("icon")]),Cp=Yo([fo("type"),fo("ch"),To("minChars",1),Oo("columns",1),To("maxResults",10),So("matches"),go("fetch"),go("onAction"),Ao("highlightOn",[],Qo)]),kp=[Bo("disabled",!1),wo("tooltip"),wo("icon"),wo("text"),Mo("onSetup",(function(){return i}))],Op=Yo([fo("type"),go("onAction")].concat(kp)),_p=[Bo("active",!1)].concat(kp),Tp=Yo(_p.concat([fo("type"),go("onAction")])),Ep=[Mo("predicate",S),Do("scope","node",["node","editor"]),Do("position","selection",["node","selection","line"])],Dp=kp.concat([Oo("type","contextformbutton"),Oo("primary",!1),go("onAction"),ir("original",c)]),Bp=_p.concat([Oo("type","contextformbutton"),Oo("primary",!1),go("onAction"),ir("original",c)]),Mp=kp.concat([Oo("type","contextformbutton")]),Ap=_p.concat([Oo("type","contextformtogglebutton")]),Fp=ao("type",{contextformbutton:Dp,contextformtogglebutton:Bp}),Ip=Yo([Oo("type","contextform"),Mo("initValue",a("")),wo("label"),vo("commands",Fp),yo("launch",ao("type",{contextformbutton:Mp,contextformtogglebutton:Ap}))].concat(Ep)),Rp=Yo([Oo("type","contexttoolbar"),fo("items")].concat(Ep))
function Vp(t){return it(fh,t).getOr(sh)}function Pp(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function Hp(t){var n=Pp(t)
return{backgroundMenu:n.backgroundMenu,selectedMenu:n.selectedMenu,menu:n.menu,selectedItem:n.selectedItem,item:Vp(t)}}function zp(t,n,e){return{dom:{tag:"div",classes:W([[Pp(e).tieredMenu]])},markers:Hp(e)}}function Np(t,n){return function(e){return R(I(e,n),(function(n){return{dom:t,components:n}}))}}function Lp(t,n){var e=[],o=[]
return St(t,(function(t,r){n(t,r)?(0<o.length&&e.push(o),o=[],Tt(t.dom,"innerHtml")&&o.push(t)):o.push(t)})),0<o.length&&e.push(o),R(e,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))}function Wp(t,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Wg.parts.items({preprocess:function(e){return"auto"!==t&&1<t?Np({tag:"div",classes:["tox-collection__group"]},t)(e):Lp(e,(function(t,e){return"separator"===n[e].type}))}})]}}function Up(t){return A(t,(function(t){return"icon"in t&&void 0!==t.icon}))}function jp(t){return console.error(or(t)),console.log(t),vt.none()}function Gp(t,n,e,o,r){var i,u=(i=e,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Wg.parts.items({preprocess:function(t){return Lp(t,(function(t,n){return"separator"===i[n].type}))}})]})
return{value:t,dom:u.dom,components:u.components,items:e}}function Xp(t,n,e,o,r){var i,u
return"color"===r?{value:t,dom:(i={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Wg.parts.items({preprocess:"auto"!==o?Np({tag:"div",classes:["tox-swatches__row"]},o):c})]}]}).dom,components:i.components,items:e}:"normal"===r&&"auto"===o?{value:t,dom:(i=Wp(o,e)).dom,components:i.components,items:e}:"normal"===r&&1===o?{value:t,dom:(i=Wp(1,e)).dom,components:i.components,items:e}:"normal"===r?{value:t,dom:(i=Wp(o,e)).dom,components:i.components,items:e}:"listpreview"!==r||"auto"===o?{value:t,dom:{tag:"div",classes:W([[(u=Pp(r)).menu,"tox-menu-"+o+"-column"],n?[u.hasIcons]:[]])},components:yh,items:e}:{value:t,dom:(i={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Wg.parts.items({preprocess:Np({tag:"div",classes:["tox-collection__group"]},o)})]}).dom,components:i.components,items:e}}function qp(t,n,e){var o=is(t.element,"."+e)
if(0<o.length){var r=L(o,(function(t){var e=t.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top
return Math.abs(e-r)>n})).getOr(o.length)
return vt.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return vt.none()}function Yp(t,n,e){t.getSystem().broadcastOn([Rh],{})}function Kp(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))}function Jp(t){return t.getParam("width",Lh.DOM.getStyle(t.getElement(),"width"))}function $p(t){return vt.from(t.getParam("min_width")).filter(b)}function Qp(t){return vt.from(t.getParam("min_height")).filter(b)}function Zp(t){return vt.from(t.getParam("max_width")).filter(b)}function th(t){return vt.from(t.getParam("max_height")).filter(b)}function nh(t){return!1!==t.getParam("menubar",!0,"boolean")}function eh(t){var n=t.getParam("toolbar",!0),e=!0===n,o=l(n),r=d(n)&&0<n.length
return!Uh(t)&&(r||o||e)}function oh(t){var n=P(F(9,(function(n){return t.getParam("toolbar"+(n+1),!1,"string")})),(function(t){return"string"==typeof t}))
return 0<n.length?vt.some(n):vt.none()}(pp=gp={})[pp.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",pp[pp.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"
var rh,ih,uh,ah,ch=gp,sh="tox-menu-nav__js",lh="tox-collection__item",fh={normal:sh,color:"tox-swatch"},dh="tox-collection__item--enabled",mh="tox-collection__item-icon",gh="tox-collection__item-label",ph="tox-collection__item-caret",hh="tox-collection__item--active",vh="tox-collection__item-container",bh="tox-collection__item-container--row",yh=[Wg.parts.items({})],xh=[fo("type"),fo("src"),wo("alt"),Ao("classes",[],Qo)],wh=Yo(xh),Sh=[fo("type"),fo("text"),wo("name"),Ao("classes",["tox-collection__item-label"],Qo)],Ch=Yo(Sh),kh=Je((function(){return no("type",{cardimage:wh,cardtext:Ch,cardcontainer:Oh})})),Oh=Yo([fo("type"),Eo("direction","horizontal"),Eo("align","left"),Eo("valign","middle"),vo("items",kh)]),_h=[Bo("disabled",!1),wo("text"),wo("shortcut"),rr("value","value",We((function(){return Mr("menuitem-value")})),Jo()),Oo("meta",{})],Th=Yo([fo("type"),wo("label"),vo("items",kh),Mo("onSetup",(function(){return i})),Mo("onAction",i)].concat(_h)),Eh=Yo([fo("type"),Bo("active",!1),wo("icon")].concat(_h)),Dh=[fo("type"),fo("fancytype"),Mo("onAction",i)],Bh=ao("fancytype",{inserttable:[Oo("initData",{})].concat(Dh),colorswatch:[Fo("initData",{},[Bo("allowCustomColors",!0),Co("colors",Jo())])].concat(Dh)}),Mh=Yo([fo("type"),Mo("onSetup",(function(){return i})),Mo("onAction",i),wo("icon")].concat(_h)),Ah=Yo([fo("type"),go("getSubmenuItems"),Mo("onSetup",(function(){return i})),wo("icon")].concat(_h)),Fh=Yo([fo("type"),wo("icon"),Bo("active",!1),Mo("onSetup",(function(){return i})),go("onAction")].concat(_h)),Ih=function(t){return n=Mr("unnamed-events"),qa([nm(n,t)])
var n},Rh=Mr("tooltip.exclusive"),Vh=Mr("tooltip.show"),Ph=Mr("tooltip.hide"),Hh=Object.freeze({__proto__:null,hideAllExclusive:Yp,setComponents:function(t,n,e,o){e.getTooltip().each((function(t){t.getSystem().isConnected()&&Cg.set(t,o)}))}}),zh=Object.freeze({__proto__:null,events:function(t,n){function e(e){n.getTooltip().each((function(o){_s(o),t.onHide(e,o),n.clearTooltip()})),n.clearTimer()}return Ki(W([[wr(Vh,(function(e){n.resetTimer((function(){var o,r,i=e
n.isShowing()||(Yp(i),o=t.lazySink(i).getOrDie(),r=i.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Ki("normal"===t.mode?[wr(li(),(function(t){gr(i,Vh)})),wr(ci(),(function(t){gr(i,Ph)}))]:[]),behaviours:qa([Cg.config({})])}),n.setTooltip(r),ks(o,r),t.onShow(i,r),Ql.position(o,r,{anchor:t.anchor(i)}))}),t.delay)})),wr(Ph,(function(o){n.resetTimer((function(){e(o)}),t.delay)})),wr(_i(),(function(t,n){n.universal||wt(n.channels,Rh)&&e(t)})),$i((function(t){e(t)}))],"normal"===t.mode?[wr(fi(),(function(t){gr(t,Vh)})),wr(ki(),(function(t){gr(t,Ph)})),wr(li(),(function(t){gr(t,Vh)})),wr(ci(),(function(t){gr(t,Ph)}))]:[wr(Xi(),(function(t,n){gr(t,Vh)})),wr(qi(),(function(t){gr(t,Ph)}))]]))}}),Nh=da({fields:[so("lazySink"),so("tooltipDom"),Oo("exclusive",!0),Oo("tooltipComponents",[]),Oo("delay",300),Do("mode","normal",["normal","follow-highlight"]),Oo("anchor",(function(t){return{type:"hotspot",hotspot:t,layouts:{onLtr:a([Ua,Wa,Ha,Na,za,La]),onRtl:a([Ua,Wa,Ha,Na,za,La])}}})),Wu("onHide"),Wu("onShow")],name:"tooltipping",active:zh,state:Object.freeze({__proto__:null,init:function(){function t(){n.on(clearTimeout)}var n=rc(),e=rc(),o=a("not-implemented")
return gu({getTooltip:e.get,isShowing:e.isSet,setTooltip:e.set,clearTooltip:e.clear,clearTimer:t,resetTimer:function(e,o){t(),n.set(setTimeout(e,o))},readState:o})}}),apis:Hh}),Lh=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Wh=tinymce.util.Tools.resolve("tinymce.EditorManager"),Uh=function(t){return oh(t).fold((function(){return 0<t.getParam("toolbar",[],"string[]").length}),C)}
function jh(t){return t.getParam("toolbar_mode","","string")}function Gh(t){return t.getParam("toolbar_location",uh.auto,"string")}function Xh(t){return Gh(t)===uh.bottom}function qh(t){if(!t.inline)return vt.none()
var n=t.getParam("fixed_toolbar_container","","string")
if(0<n.length)return Tu(ve(),n)
var e=t.getParam("fixed_toolbar_container_target")
return h(e)?vt.some(At.fromDom(e)):vt.none()}function Yh(t){return t.inline&&qh(t).isSome()}function Kh(t){return qh(t).getOrThunk((function(){return tn(me(At.fromDom(t.getElement())))}))}function Jh(t){return t.inline&&!nh(t)&&!eh(t)&&!Uh(t)}function $h(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Yh(t)&&!Jh(t)}function Qh(t,n){var e=t.outerContainer.element
n&&(t.mothership.broadcastOn([af()],{target:e}),t.uiMothership.broadcastOn([af()],{target:e})),t.mothership.broadcastOn([Iv],{readonly:n}),t.uiMothership.broadcastOn([Iv],{readonly:n})}function Zh(t,n){t.on("init",(function(){t.mode.isReadOnly()&&Qh(n,!0)})),t.on("SwitchMode",(function(){return Qh(n,t.mode.isReadOnly())})),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")}function tv(){var t
return $a.config({channels:((t={})[Iv]={schema:Rv,onReceive:function(t,n){ed.set(t,n.readonly)}},t)})}function nv(t,n){var e=t.getApi(n)
return function(t){t(e)}}function ev(t,n){return Ji((function(e){nv(t,e)((function(e){var o=t.onSetup(e)
v(o)&&n.set(o)}))}))}function ov(t,n){return $i((function(e){return nv(t,e)(n.get())}))}function rv(t,n,e,o){var r,u,a=Io(i)
return{type:"item",dom:n.dom,components:zv(n.optComponents),data:t.data,eventOrder:Hv,hasSubmenu:t.triggersSubmenu,itemBehaviours:qa([nm("item-events",[(r=t,u=e,Zi((function(t,n){nv(r,t)(r.onAction),r.triggersSubmenu||u!==ch.CLOSE_ON_EXECUTE||(gr(t,Mi()),n.stop())}))),ev(t,a),ov(t,a)]),ed.config({disabled:function(){return t.disabled||o.isDisabled()},disableClass:"tox-collection__item--state-disabled"}),tv(),Cg.config({})].concat(t.itemBehaviours))}}function iv(t){return{value:t.value,meta:O({text:t.text.getOr("")},t.meta)}}function uv(t,n,e){return Im(t,{tag:"div",classes:e=void 0===e?[mh]:e},n)}function av(t){return{dom:{tag:"div",classes:[gh]},components:[$r(Zg.translate(t))]}}function cv(t,n){return{dom:{tag:"div",classes:n,innerHtml:t}}}function sv(t,n){return{dom:{tag:"div",classes:[gh]},components:[{dom:{tag:t.tag,styles:t.styles},components:[$r(Zg.translate(n))]}]}}function lv(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(n=Nv.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},e=R(t.split("+"),(function(t){var e=t.toLowerCase().trim()
return Tt(n,e)?n[e]:t})),Nv.mac?e.join(""):e.join("+"))}}
var n,e}function fv(t){return uv("checkmark",t,["tox-collection__item-checkmark"])}function dv(t){var n=t.map((function(t){return{attributes:{title:Zg.translate(t)}}})).getOr({})
return O({tag:"div",classes:[sh,lh]},n)}function mv(t,n,e,o){return void 0===o&&(o=vt.none()),"color"===t.presets?(r=n,i=o,c=t.ariaLabel,s=t.value,{dom:(u=t.iconContent.map((function(t){return n=r.icons,e=i,Bm(t,o=n()).or(e).getOrThunk(Em(o))
var n,e,o})).getOr(""),a={tag:"div",attributes:c.map((function(t){return{title:r.translate(t)}})).getOr({}),classes:["tox-swatch"]},O(O({},a),"custom"===s?{tag:"button",classes:T(T([],a.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:u}:"remove"===s?{classes:T(T([],a.classes,!0),["tox-swatch--remove"],!1),innerHtml:u}:{attributes:O(O({},a.attributes),{"data-mce-color":s}),styles:{"background-color":s}})),optComponents:[]}):(l=t,f=n,d=o,m={tag:"div",classes:[mh]},g=e?l.iconContent.map((function(t){return Im(t,m,f.icons,d)})).orThunk((function(){return vt.some({dom:m})})):vt.none(),p=l.checkMark,h=vt.from(l.meta).fold((function(){return av}),(function(t){return Tt(t,"style")?y(sv,t.style):av})),v=l.htmlContent.fold((function(){return l.textContent.map(h)}),(function(t){return vt.some(cv(t,[gh]))})),{dom:dv(l.ariaLabel),optComponents:[g,v,l.shortcutContent.map(lv),p,l.caret]})
var r,i,u,a,c,s,l,f,d,m,g,p,h,v}function gv(t,n){return it(t,"tooltipWorker").map((function(t){return[Nh.config({lazySink:n.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{type:"submenu",item:t,overrides:{maxHeightFunction:kc}}},mode:"follow-highlight",onShow:function(n,e){t((function(t){Nh.setComponents(n,[bu({element:At.fromDom(t)})])}))}})]})).getOr([])}function pv(t,n){var e=Zg.translate(t),o=Lh.DOM.encode(e)
if(0<n.length){var r=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")
return o.replace(r,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return o}function hv(t){return{value:t}}function vv(t){return Uv.test(t)||jv.test(t)}function bv(t){var n=t.toString(16)
return(1===n.length?"0"+n:n).toUpperCase()}function yv(t){return hv(bv(t.red)+bv(t.green)+bv(t.blue))}function xv(t,n,e,o){return{red:t,green:n,blue:e,alpha:o}}function wv(t){var n=parseInt(t,10)
return n.toString()===t&&0<=n&&n<=255}function Sv(t){var n,e,o,r=(t.hue||0)%360,i=t.saturation/100,u=t.value/100
i=Xv(0,Gv(i,1)),u=Xv(0,Gv(u,1))
if(0===i)return xv(n=e=o=qv(255*u),e,o,1)
var a=r/60,c=u*i,s=c*(1-Math.abs(a%2-1)),l=u-c
switch(Math.floor(a)){case 0:n=c,e=s,o=0
break
case 1:n=s,e=c,o=0
break
case 2:n=0,e=c,o=s
break
case 3:n=0,e=s,o=c
break
case 4:n=s,e=0,o=c
break
case 5:n=c,e=0,o=s
break
default:n=e=o=0}return xv(n=qv(255*(n+l)),e=qv(255*(e+l)),o=qv(255*(o+l)),1)}function Cv(t){var n,e,o=(n={value:t.value.replace(Uv,(function(t,n,e,o){return n+n+e+e+o+o}))},null===(e=jv.exec(n.value))?["FFFFFF","FF","FF","FF"]:e)
return xv(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),1)}function kv(t,n,e,o){return xv(parseInt(t,10),parseInt(n,10),parseInt(e,10),parseFloat(o))}function Ov(t){if("transparent"===t)return vt.some(xv(0,0,0,0))
var n=Yv.exec(t)
if(null!==n)return vt.some(kv(n[1],n[2],n[3],"1"))
var e=Kv.exec(t)
return null!==e?vt.some(kv(e[1],e[2],e[3],e[4])):vt.none()}function _v(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"}function Tv(t,n){return t.fire("ResizeContent",n)}function Ev(t,n,e){return{hue:t,saturation:n,value:e}}function Dv(t){var n,e,o=0,r=t.red/255,i=t.green/255,u=t.blue/255,a=Math.min(r,Math.min(i,u)),c=Math.max(r,Math.max(i,u))
return a===c?Ev(0,0,100*(o=a)):(e=60*((r===a?3:u===a?1:5)-(r===a?i-u:u===a?r-i:u-r)/(c-a)),n=(c-a)/c,o=c,Ev(Math.round(e),Math.round(100*n),Math.round(100*o)))}function Bv(t){return yv(Sv(t))}function Mv(t){return(vv(e=t)?vt.some({value:(Dt(n=e,"#")?n.substring("#".length):n).toUpperCase()}):vt.none()).orThunk((function(){return Ov(t).map(yv)})).getOrThunk((function(){var n=document.createElement("canvas")
n.height=1,n.width=1
var e=n.getContext("2d")
e.clearRect(0,0,n.width,n.height),e.fillStyle="#FFFFFF",e.fillStyle=t,e.fillRect(0,0,1,1)
var o=e.getImageData(0,0,1,1).data
return yv(xv(o[0],o[1],o[2],o[3]))}))
var n,e}function Av(t){return ed.config({disabled:t,disableClass:"tox-tbtn--disabled"})}(ih=rh=rh||{}).default="wrap",ih.floating="floating",ih.sliding="sliding",ih.scrolling="scrolling",(ah=uh=uh||{}).auto="auto",ah.top="top",ah.bottom="bottom"
var Fv,Iv="silver.readonly",Rv=Yo([lo("readonly",Zo)]),Vv=function(t){return ed.config({disabled:t})},Pv=function(t){return ed.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Hv=((Fv={})[Ti()]=["disabling","alloy.base.behaviour","toggling","item-events"],Fv),zv=ct,Nv=tinymce.util.Tools.resolve("tinymce.Env"),Lv=function(t,n){return R(t,(function(t){switch(t.type){case"cardcontainer":return i=Lv((r=t).items,n),u="vertical"===r.direction?"tox-collection__item-container--column":bh,a="left"===r.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[vh,u,a,function(){switch(r.valign){case"top":return"tox-collection__item-container--valign-top"
case"middle":return"tox-collection__item-container--valign-middle"
case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:i}
case"cardimage":return o=t.src,{dom:{tag:"img",classes:t.classes,attributes:{src:o,alt:t.alt.getOr("")}}}
case"cardtext":var e=t.name.exists((function(t){return wt(n.cardText.highlightOn,t)}))?vt.from(n.cardText.matchText).getOr(""):""
return cv(pv(t.text,e),t.classes)}var o,r,i,u,a}))},Wv=Ks(Vg(),Pg()),Uv=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,jv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Gv=Math.min,Xv=Math.max,qv=Math.round,Yv=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Kv=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Jv=xv(255,0,0,1),$v=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Qv="tinymce-custom-colors"
function Zv(t){return!1!==t.getParam("custom_colors")}function tb(t){var n=t.getParam("color_map")
return void 0!==n?function(t){for(var n=[],e=0;e<t.length;e+=2)n.push({text:t[e+1],value:"#"+Mv(t[e]).value,type:"choiceitem"})
return n}(n):pb}function nb(t){hb.add(t)}function eb(t){var n,e=(n=tb(t).length,Math.max(5,Math.ceil(Math.sqrt(n))))
return t.getParam("color_cols",e,"number")}function ob(t){var n="choiceitem",e={type:n,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"}
return t?[e,{type:n,text:"Custom color",icon:"color-picker",value:"custom"}]:[e]}function rb(t,n,e,o){"custom"===e?vb(t)((function(e){e.each((function(e){nb(e),t.execCommand("mceApplyTextcolor",n,e),o(e)}))}),"#000000"):"remove"===e?(o(""),t.execCommand("mceRemoveTextcolor",n)):(o(e),t.execCommand("mceApplyTextcolor",n,e))}function ib(t,n){return t.concat(R(hb.state(),(function(t){return{type:gb,text:t,value:t}})).concat(ob(n)))}function ub(t,n){return function(e){e(ib(t,n))}}function ab(t,n,e){t.setIconFill("forecolor"===n?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",e)}function cb(t,n,e,o,r){t.ui.registry.addSplitButton(n,{tooltip:o,presets:"color",icon:"forecolor"===n?"text-color":"highlight-bg-color",select:function(n){var o,r
return vt.from((o=e,t.dom.getParents(t.selection.getStart(),(function(t){var n;(n=t.style["forecolor"===o?"color":"background-color"])&&(r=r||n)})),r)).bind((function(t){return Ov(t).map((function(t){var e=yv(t).value
return ft(n.toLowerCase(),e)}))})).getOr(!1)},columns:eb(t),fetch:ub(tb(t),Zv(t)),onAction:function(n){null!==r.get()&&rb(t,e,r.get(),i)},onItemAction:function(o,i){rb(t,e,i,(function(e){r.set(e),t.fire("TextColorChange",{name:n,color:e})}))},onSetup:function(e){function o(t){t.name===n&&ab(e,t.name,t.color)}return null!==r.get()&&ab(e,n,r.get()),t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})}function sb(t,n,e,o){t.ui.registry.addNestedMenuItem(n,{text:o,icon:"forecolor"===n?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(n){rb(t,e,n.value,i)}}]}})}function lb(t,n,e,o,r,i,u,a){return Xp(t,Up(n),bb(n,e,o,"color"!==r?"normal":"color",i,u,a),o,r)}function fb(t,n){var e=Hp(n)
return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+e.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===n?"tox-swatches__row":"tox-collection__group")}}var db,mb,gb="choiceitem",pb=[{type:gb,text:"Light Green",value:"#BFEDD2"},{type:gb,text:"Light Yellow",value:"#FBEEB8"},{type:gb,text:"Light Red",value:"#F8CAC6"},{type:gb,text:"Light Purple",value:"#ECCAFA"},{type:gb,text:"Light Blue",value:"#C2E0F4"},{type:gb,text:"Green",value:"#2DC26B"},{type:gb,text:"Yellow",value:"#F1C40F"},{type:gb,text:"Red",value:"#E03E2D"},{type:gb,text:"Purple",value:"#B96AD9"},{type:gb,text:"Blue",value:"#3598DB"},{type:gb,text:"Dark Turquoise",value:"#169179"},{type:gb,text:"Orange",value:"#E67E23"},{type:gb,text:"Dark Red",value:"#BA372A"},{type:gb,text:"Dark Purple",value:"#843FA1"},{type:gb,text:"Dark Blue",value:"#236FA1"},{type:gb,text:"Light Gray",value:"#ECF0F1"},{type:gb,text:"Medium Gray",value:"#CED4D9"},{type:gb,text:"Gray",value:"#95A5A6"},{type:gb,text:"Dark Gray",value:"#7E8C8D"},{type:gb,text:"Navy Blue",value:"#34495E"},{type:gb,text:"Black",value:"#000000"},{type:gb,text:"White",value:"#ffffff"}],hb=function(t){function n(t){i.splice(t,1)}void 0===t&&(t=10)
var e,o=$v.getItem(Qv),r=l(o)?JSON.parse(o):[],i=t-(e=r).length<0?e.slice(0,t):e
return{add:function(e){var o;(-1===(o=M(i,e))?vt.none():vt.some(o)).each(n),i.unshift(e),i.length>t&&i.pop(),$v.setItem(Qv,JSON.stringify(i))},state:function(){return i.slice(0)}}}(10),vb=function(t){return function(n,e){var o=!1
t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:e},onAction:function(t,n){"hex-valid"===n.name&&(o=n.value)},onSubmit:function(e){var r=e.getData().colorpicker
o?(n(vt.from(r)),e.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",r]))},onClose:i,onCancel:function(){n(vt.none())}})}},bb=function(t,n,e,o,r,u,a){return ct(R(t,(function(c){return"choiceitem"===c.type?ro("choicemenuitem",Eh,c).fold(jp,(function(s){return vt.some(function(t,n,e,o,r,u,a,c){void 0===c&&(c=!0)
var s=mv({presets:e,textContent:n?t.text:vt.none(),htmlContent:vt.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:n?t.shortcut:vt.none(),checkMark:n?vt.some(fv(a.icons)):vt.none(),caret:vt.none(),value:t.value},a,c)
return jo(rv({data:iv(t),disabled:t.disabled,getApi:function(t){return{setActive:function(n){Dg.set(t,n)},isActive:function(){return Dg.isOn(t)},isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){return ed.set(t,n)}}},onAction:function(n){return o(t.value)},onSetup:function(t){return t.setActive(r),i},triggersSubmenu:!1,itemBehaviours:[]},s,u,a),{toggling:{toggleClass:dh,toggleOnExecute:!1,selected:t.active}})}(s,1===e,o,n,u(c.value),r,a,Up(t)))})):vt.none()})))},yb=Mr("cell-over"),xb=Mr("cell-execute"),wb={inserttable:function(t){var n=Mr("size-label"),e=function(t){for(var n=[],e=0;e<10;e++){for(var o=[],r=0;r<10;r++)o.push(function(t,n,e){function o(e){return pr(e,xb,{row:t,col:n})}function r(t,n){n.stop(),o(t)}var i
return xu({dom:{tag:"div",attributes:((i={role:"button"})["aria-labelledby"]=e,i)},behaviours:qa([nm("insert-table-picker-cell",[wr(li(),_g.focus),wr(Ti(),o),wr(vi(),r),wr(Di(),r)]),Dg.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),_g.config({onFocus:function(e){return pr(e,yb,{row:t,col:n})}})])})}(e,r,t))
n.push(o)}return n}(n),o=Tm({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:n}},components:[$r("0x0")],behaviours:qa([Cg.config({})])})
return{type:"widget",data:{value:Mr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Wv.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:U(e,(function(t){return R(t,wu)})).concat(o.asSpec()),behaviours:qa([nm("insert-table-picker",[Or(yb,(function(t,n,r){var i=r.event.row,u=r.event.col
!function(t,n,e){for(var o=0;o<10;o++)for(var r=0;r<10;r++)Dg.set(t[o][r],o<=n&&r<=e)}(e,i,u),Cg.set(o.get(t),[$r(u+1+"x"+(i+1))])})),Or(xb,(function(n,e,o){t.onAction({numRows:o.event.row+1,numColumns:o.event.col+1}),gr(n,Mi())}))]),wg.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,n){var e,o,r,i=(o=n,r=(e=t).initData.allowCustomColors&&o.colorinput.hasCustomColors(),e.initData.colors.fold((function(){return ib(o.colorinput.getColors(),r)}),(function(t){return t.concat(ob(r))}))),u=n.colorinput.getColorCols(),a=lb(Mr("menu-value"),i,(function(n){t.onAction({value:n})}),u,"color",ch.CLOSE_ON_EXECUTE,S,n.shared.providers),c=O(O({},a),{markers:Hp("color"),movement:fb(u,"color")})
return{type:"widget",data:{value:Mr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Wv.widget(Wg.sketch(c))]}}},Sb=function(t){var n=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}))
return{type:"separator",dom:O({tag:"div",classes:[lh,"tox-collection__group-heading"]},n),components:[]}}
function Cb(t,n,e,o,r){var u=Up(n),a=ct(R(n,(function(t){function n(t){return function(t,n,e,o,r){function u(t){return r?O(O({},t),{shortcut:vt.none(),icon:t.text.isSome()?vt.none():t.icon}):t}var a=e.shared.providers
switch(t.type){case"menuitem":return ro("menuitem",Mh,t).fold(jp,(function(t){return vt.some(function(t,n,e,o){void 0===o&&(o=!0)
var r=mv({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:vt.none(),ariaLabel:t.text,caret:vt.none(),checkMark:vt.none(),shortcutContent:t.shortcut},e,o)
return rv({data:iv(t),getApi:function(t){return{isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){return ed.set(t,n)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,n,e)}(u(t),n,a,o))}))
case"nestedmenuitem":return ro("nestedmenuitem",Ah,t).fold(jp,(function(t){return vt.some(function(t,n,e,o,r){void 0===o&&(o=!0)
var u=(r=void 0!==r&&r)?uv("chevron-down",e.icons,[ph]):uv("chevron-right",e.icons,[ph]),a=mv({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:vt.none(),ariaLabel:t.text,caret:vt.some(u),checkMark:vt.none(),shortcutContent:t.shortcut},e,o)
return rv({data:iv(t),getApi:function(t){return{isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){return ed.set(t,n)}}},disabled:t.disabled,onAction:i,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,n,e)}(u(t),n,a,o,r))}))
case"togglemenuitem":return ro("togglemenuitem",Fh,t).fold(jp,(function(t){return vt.some(function(t,n,e,o){void 0===o&&(o=!0)
var r=mv({iconContent:t.icon,textContent:t.text,htmlContent:vt.none(),ariaLabel:t.text,checkMark:vt.some(fv(e.icons)),caret:vt.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},e,o)
return jo(rv({data:iv(t),disabled:t.disabled,getApi:function(t){return{setActive:function(n){Dg.set(t,n)},isActive:function(){return Dg.isOn(t)},isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){return ed.set(t,n)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,n,e),{toggling:{toggleClass:dh,toggleOnExecute:!1,selected:t.active}})}(u(t),n,a,o))}))
case"separator":return ro("separatormenuitem",wp,t).fold(jp,(function(t){return vt.some(Sb(t))}))
case"fancymenuitem":return ro("fancymenuitem",Bh,t).fold(jp,(function(t){return function(t,n){return it(wb,t.fancytype).map((function(e){return e(t,n)}))}(u(t),e)}))
default:return console.error("Unknown item in general menu",t),vt.none()}}(t,e,o,r?!Tt(t,"text"):u,r)}return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?n(O(O({},t),{disabled:!0})):n(t)})))
return(r?Gp:Xp)(t,u,a,1,"normal")}function kb(t){return Xg.singleData(t.value,t)}function Ob(t,n,e){return Eu(t,n,e).isSome()}function _b(t,n){var e=null
return{cancel:function(){null!==e&&(clearTimeout(e),e=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r]
e=setTimeout((function(){t.apply(null,o),e=null}),n)}}}function Tb(t){var n=t.raw
return void 0===n.touches||1!==n.touches.length?vt.none():vt.some(n.touches[0])}function Eb(){return se().browser.isFirefox()}function Db(t,n){return Io(it(t,"target").getOr(n))}function Bb(t,n,e,o,r,i){var u,a,c=t(n,o),s=(u=Io(!1),a=Io(!1),{stop:function(){u.set(!0)},cut:function(){a.set(!0)},isStopped:u.get,isCut:a.get,event:e,setSource:r.set,getSource:r.get})
return c.fold((function(){return i.logEventNoHandlers(n,o),Pb.complete()}),(function(t){var e=t.descHandler
return zr(e)(s),s.isStopped()?(i.logEventStopped(n,t.element,e.purpose),Pb.stopped()):s.isCut()?(i.logEventCut(n,t.element,e.purpose),Pb.complete()):qt(t.element).fold((function(){return i.logNoParent(n,t.element,e.purpose),Pb.complete()}),(function(o){return i.logEventResponse(n,t.element,e.purpose),Pb.resume(o)}))}))}function Mb(t){function n(n){return qt(t.element).fold(C,(function(t){return Lt(n,t)}))}function e(t,e){return r.find(n,t,e)}function o(t){var n=r.filter(_i())
St(n,(function(n){zr(n.descHandler)(t)}))}var r=function(){function t(t){Ar(t.element).each((function(t){delete o[t],e.unregisterId(t)}))}var n,e=(n={},{registerId:function(t,e,o){tt(o,(function(o,r){var i,u=void 0!==n[r]?n[r]:{}
u[e]={cHandler:y.apply(void 0,[(i=o).handler].concat(t)),purpose:i.purpose},n[r]=u}))},unregisterId:function(t){tt(n,(function(n,e){Tt(n,t)&&delete n[t]}))},filterByType:function(t){return it(n,t).map((function(t){return et(t,(function(t,n){return{id:n,descHandler:t}}))})).getOr([])},find:function(t,e,o){return it(n,e).bind((function(n){return lr(o,(function(t){return e=n,Ar(o=t).bind((function(t){return it(e,t)})).map((function(t){return{element:o,descHandler:t}}))
var e,o}),t)}))}}),o={}
return{find:function(t,n,o){return e.find(t,n,o)},filter:function(t){return e.filterByType(t)},register:function(n){var r,i=Ar((r=n).element).getOrThunk((function(){return t=r.element,n=Mr(iu+"uid-"),au(t,n),n
var t,n}))
ut(o,i)&&function(n){var e=o[i]
if(e!==n)throw new Error('The tagId "'+i+'" is already used by: '+Br(e.element)+"\nCannot use it for: "+Br(n.element)+"\nThe conflicting element is"+(he(e.element)?" ":" not ")+"already in the DOM")
t(n)}(n),e.registerId([n],i,n.events),o[i]=n},unregister:t,getById:function(t){return it(o,t)}}}(),u=function(t,n){var e,o,r,i,u,a,c,s,l,f=O({stopBackspace:!0},n),d=(u=f,a=rc(),c=Io(!1),s=_b((function(t){u.triggerEvent(Bi(),t),c.set(!0)}),400),l=ar([{key:ei(),value:function(t){return Tb(t).each((function(n){s.cancel()
var e={x:n.clientX,y:n.clientY,target:t.target}
s.schedule(t),c.set(!1),a.set(e)})),vt.none()}},{key:oi(),value:function(t){return s.cancel(),Tb(t).each((function(t){a.on((function(n){var e=t,o=n,r=Math.abs(e.clientX-o.x),i=Math.abs(e.clientY-o.y);(5<r||5<i)&&a.clear()}))})),vt.none()}},{key:ri(),value:function(t){return s.cancel(),a.get().filter((function(n){return Lt(n.target,t.target)})).map((function(n){return c.get()?(t.prevent(),!1):u.triggerEvent(Di(),t)}))}}]),{fireIfReady:function(t,n){return it(l,n).bind((function(n){return n(t)}))}}),m=R(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(n){return ic(t,n,(function(t){d.fireIfReady(t,n).each((function(n){n&&t.kill()})),f.triggerEvent(n,t)&&t.kill()}))})),g=rc(),p=ic(t,"paste",(function(t){d.fireIfReady(t,"paste").each((function(n){n&&t.kill()})),f.triggerEvent("paste",t)&&t.kill(),g.set(setTimeout((function(){f.triggerEvent(Oi(),t)}),0))})),h=ic(t,"keydown",(function(t){var n
f.triggerEvent("keydown",t)?t.kill():!f.stopBackspace||(n=t).raw.which!==id[0]||wt(["input","textarea"],Ft(n.target))||Ob(n.target,'[contenteditable="true"]')||t.prevent()})),v=(e=t,o=function(t){f.triggerEvent("focusin",t)&&t.kill()},Eb()?uc(e,"focus",o):ic(e,"focusin",o)),b=rc(),y=(r=t,i=function(t){f.triggerEvent("focusout",t)&&t.kill(),b.set(setTimeout((function(){f.triggerEvent(ki(),t)}),0))},Eb()?uc(r,"blur",i):ic(r,"focusout",i))
return{unbind:function(){St(m,(function(t){t.unbind()})),h.unbind(),v.unbind(),y.unbind(),p.unbind(),g.on(clearTimeout),b.on(clearTimeout)}}}(t.element,{triggerEvent:function(t,n){return Fu(t,n.target,(function(o){return zb(e,t,n,n.target,o)}))}}),c={debugInfo:a("real"),triggerEvent:function(t,n,o){Fu(t,n,(function(r){return zb(e,t,o,n,r)}))},triggerFocus:function(t,n){Ar(t).fold((function(){pa(t)}),(function(o){Fu(Ci(),t,(function(o){var r,u,a=e,c=Ci(),s=o,l=Db(r={originator:n,kill:i,prevent:i,target:t},u=t)
return Bb(a,c,r,u,l,s),!1}))}))},triggerEscape:function(t,n){c.triggerEvent("keydown",t.element,n.event)},getByUid:function(t){return h(t)},getByDom:function(t){return v(t)},build:xu,addToGui:function(t){f(t)},removeFromGui:function(t){d(t)},addToWorld:function(t){s(t)},removeFromWorld:function(t){l(t)},broadcast:function(t){m(t)},broadcastOn:function(t,n){g(t,n)},broadcastEvent:function(t,n){p(t,n)},isConnected:C},s=function(t){t.connect(c),Xn(t.element)||(r.register(t),St(t.components(),s),c.triggerEvent(Fi(),t.element,{target:t.element}))},l=function(t){Xn(t.element)||(St(t.components(),l),r.unregister(t)),t.disconnect()},f=function(n){ks(t,n)},d=function(t){_s(t)},m=function(t){o({universal:!0,data:t})},g=function(t,n){o({universal:!1,channels:t,data:n})},p=function(t,n){var e,o,u=r.filter(t)
return o={stop:function(){e.set(!0)},cut:i,isStopped:(e=Io(!1)).get,isCut:S,event:n,setSource:w("Cannot set source of a broadcasted event"),getSource:w("Cannot get source of a broadcasted event")},St(u,(function(t){zr(t.descHandler)(o)})),o.isStopped()},h=function(t){return r.getById(t).fold((function(){return Re.error(new Error('Could not find component with uid: "'+t+'" in system.'))}),Re.value)},v=function(t){var n=Ar(t).getOr("not found")
return h(n)}
return s(t),{root:t,element:t.element,destroy:function(){u.unbind(),Te(t.element)},add:f,remove:d,getByUid:h,getByDom:v,addToWorld:s,removeFromWorld:l,broadcast:m,broadcastOn:g,broadcastEvent:p}}function Ab(t,n,e,o){var r=qb(t,n,e,o)
return Ub.sketch(r)}function Fb(t,n){return Ub.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}})}function Ib(t){return qa([_g.config({onFocus:t.selectOnFocus?function(t){var n=t.element,e=Yr(n)
n.dom.setSelectionRange(0,e.length)}:i})])}function Rb(t){return{tag:t.tag,attributes:O({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}}function Vb(t,n){function e(){return s.get().isSome()}function o(){e()&&qg.hide(f)}var r,u,s=rc(),l=Io(!1),f=xu(qg.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:qa([nm("dismissAutocompleter",[wr(Ni(),(function(){return d()}))])]),lazySink:n.getSink})),d=function(){var n
e()&&(n=s.get().map((function(t){return t.element})),vp(n.getOr(At.fromDom(t.selection.getNode()))).each(Fn),o(),s.clear(),l.set(!1))},m=Rt((function(){return n=et(o=nt(t.ui.registry.getAll().popups,(function(t){return ro("Autocompleter",Cp,t).fold((function(t){throw new Error(or(t))}),c)})),(function(t){return t.ch})),e={},St(n,(function(t){e[t]={}})),r=kt(e),i=rt(o),{dataset:o,triggerChars:r,lookupByChar:function(t){return P(i,(function(n){return n.ch===t}))}}
var n,e,o,r,i})),g=function(r){var u=r
s.get().map((function(n){return sp(t.dom,t.selection.getRng(),n.triggerChar).bind((function(n){return mp(t,m,n,u)}))})).getOrThunk((function(){return n=t,o=(e=m)(),r=n.selection.getRng(),i=n.dom,u=r,Z(o.triggerChars,(function(t){return sp(i,u,t)})).bind((function(t){return mp(n,e,t)}))
var n,e,o,r,i,u})).fold(d,(function(r){var u,c=r.context
e()||(u=function(t,n){return vp(At.fromDom(t.selection.getNode())).getOrThunk((function(){var e,o,r=At.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc())
return _e(r,At.fromDom(n.extractContents())),n.insertNode(r.dom),qt(r).each((function(t){return t.dom.normalize()})),e=rs,(o=function(t){for(var n=Kt(t),r=n.length-1;0<=r;r--){var i=n[r]
if(e(i))return vt.some(i)
var u=o(i)
if(u.isSome())return u}return vt.none()})(r).map((function(n){var e
t.selection.setCursorLocation(n.dom,"img"===Ft(e=n)?1:os(e).fold((function(){return Kt(e).length}),(function(t){return t.length})))})),r}))}(t,c.range),s.set({triggerChar:c.triggerChar,element:u,matchLength:c.text.length}),l.set(!1)),r.lookupData.then((function(e){s.get().map((function(u){var c,s,m,p,h=r.context
u.triggerChar===h.triggerChar&&(s=h.triggerChar,p=Z(m=e,(function(t){return vt.from(t.columns)})).getOr(1),0<(c=U(m,(function(e){return function(t,n,e,o,r,u,c){var s=1===o,l=!s||Up(t)
return ct(R(t,(function(t){switch(t.type){case"separator":return ro("Autocompleter.Separator",wp,t).fold(jp,(function(t){return vt.some(Sb(t))}))
case"cardmenuitem":return ro("cardmenuitem",Th,t).fold(jp,(function(t){return vt.some((o=O(O({},t),{onAction:function(n){t.onAction(n),e(t.value,t.meta)}}),i=r,a=u,s={itemBehaviours:gv(t.meta,u),cardText:{matchText:n,highlightOn:c}},l={dom:dv(o.label),optComponents:[vt.some({dom:{tag:"div",classes:[vh,bh]},components:Lv(o.items,s)})]},rv({data:iv(O({text:vt.none()},o)),disabled:o.disabled,getApi:function(t){return{isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){ed.set(t,n),St(is(t.element,"*"),(function(e){t.getSystem().getByDom(e).each((function(t){t.hasConfigured(ed)&&ed.set(t,n)}))}))}}},onAction:o.onAction,onSetup:o.onSetup,triggersSubmenu:!1,itemBehaviours:vt.from(s.itemBehaviours).getOr([])},l,i,a.providers)))
var o,i,a,s,l}))
default:return ro("Autocompleter.Item",Sp,t).fold(jp,(function(t){return vt.some(function(t,n,e,o,r,u,c,s){void 0===s&&(s=!0)
var l=mv({presets:"normal",textContent:vt.none(),htmlContent:e?t.text.map((function(t){return pv(t,n)})):vt.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:vt.none(),checkMark:vt.none(),caret:vt.none(),value:t.value},c.providers,s,t.icon)
return rv({data:iv(t),disabled:t.disabled,getApi:a({}),onAction:function(n){return r(t.value,t.meta)},onSetup:a(i),triggersSubmenu:!1,itemBehaviours:gv(t.meta,c)},l,u,c.providers)}(t,n,s,0,e,r,u,l))}))}})))}(e.items,e.matchText,(function(n,r){var i=t.selection.getRng()
sp(t.dom,i,s).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(t){var i=t.range,u={hide:function(){d()},reload:function(t){o(),g(t)}}
l.set(!0),e.onAction(u,i,n,r),l.set(!1)}))}),p,ch.BUBBLE_TO_SANDBOX,n,e.highlightOn)}))).length?function(n,e,o,r){n.matchLength=e.text.length
var i,u,a,c,s,l,d=Z(o,(function(t){return vt.from(t.columns)})).getOr(1)
qg.showAt(f,Wg.sketch((i=Xp("autocompleter-value",!0,r,d,"normal"),u=d,c=((a=db.ContentFocus)===db.ContentFocus?Ml:Bl)(),s=fb(u,"normal"),l=Hp("normal"),{dom:i.dom,components:i.components,items:i.items,value:i.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:s,fakeFocus:a===db.ContentFocus,focusManager:c,menuBehaviours:Ih("auto"!==u?[]:[Ji((function(t,n){qp(t,4,l.item).each((function(n){var e=n.numColumns,o=n.numRows
wg.setGridSize(t,o,e)}))}))])})),{anchor:{type:"node",root:At.fromDom(t.getBody()),node:vt.from(n.element)}}),qg.getContent(f).each(rd.highlightFirst)}(u,h,e,c):(10<=h.text.length-u.matchLength?d:o)())}))}))}))},p={onKeypress:rp((function(t){27!==t.which&&g()}),50),cancelIfNecessary:d,isMenuOpen:function(){return qg.isOpen(f)},isActive:e,isProcessingAction:l.get,getView:function(){return qg.getContent(f)}}
function h(t,n){pr(t,mi(),{raw:n})}!1===t.hasPlugin("rtc")&&(r=p,(u=t).on("keypress compositionend",r.onKeypress.throttle),u.on("remove",r.onKeypress.cancel),u.on("keydown",(function(t){function n(){return r.getView().bind(rd.getHighlighted)}8===t.which&&r.onKeypress.throttle(t),r.isActive()&&(27===t.which&&r.cancelIfNecessary(),r.isMenuOpen()?13===t.which?(n().each(hr),t.preventDefault()):40===t.which?(n().fold((function(){r.getView().each(rd.highlightFirst)}),(function(n){h(n,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==t.which&&38!==t.which&&39!==t.which||n().each((function(n){h(n,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==t.which&&38!==t.which&&40!==t.which||r.cancelIfNecessary())})),u.on("NodeChange",(function(t){r.isActive()&&!r.isProcessingAction()&&vp(At.fromDom(t.element)).isNone()&&r.cancelIfNecessary()})))}(mb=db={})[mb.ContentFocus=0]="ContentFocus",mb[mb.UiFocus=1]="UiFocus"
var Pb=Ro([{stopped:[]},{resume:["element"]},{complete:[]}]),Hb=function(t,n,e,o,r,i){return Bb(t,n,e,o,r,i).fold(C,(function(o){return Hb(t,n,e,o,r,i)}),S)},zb=function(t,n,e,o,r){var i=Db(e,o)
return Hb(t,n,e,o,i,r)},Nb=fl({name:"Container",factory:function(t){var n=t.dom,e=n.attributes,o=_(n,["attributes"])
return{uid:t.uid,dom:O({tag:"div",attributes:O({role:"presentation"},e)},o),components:t.components,behaviours:Ws(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Oo("components",[]),Ls("containerBehaviours",[]),Oo("events",{}),Oo("domModification",{}),Oo("eventOrder",{})]}),Lb=a([Oo("prefix","form-field"),Ls("fieldBehaviours",[Jf,vf])]),Wb=a([Nf({schema:[so("dom")],name:"label"}),Nf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[so("text")],name:"aria-descriptor"}),Hf({factory:{sketch:function(t){var n,e,o=(n=["factory"],e={},tt(t,(function(t,o){wt(n,o)||(e[o]=t)})),e)
return t.factory.sketch(o)}},schema:[so("factory")],name:"field"})]),Ub=dl({name:"FormField",configFields:Lb(),partFields:Wb(),factory:function(t,n,e,o){var r=Us(t.fieldBehaviours,[Jf.config({find:function(n){return nl(n,t,"field")}}),vf.config({store:{mode:"manual",getValue:function(t){return Jf.getCurrent(t).bind(vf.getValue)},setValue:function(t,n){Jf.getCurrent(t).each((function(t){vf.setValue(t,n)}))}}})]),i=Ki([Ji((function(n,e){var o=ol(n,t,["label","field","aria-descriptor"])
o.field().each((function(n){var e=Mr(t.prefix)
o.label().each((function(t){on(t.element,"for",e),on(n.element,"id",e)})),o["aria-descriptor"]().each((function(e){var o=Mr(t.prefix)
on(e.element,"id",o),on(n.element,"aria-describedby",o)}))}))}))])
return{uid:t.uid,dom:t.dom,components:n,behaviours:r,events:i,apis:{getField:function(n){return nl(n,t,"field")},getLabel:function(n){return nl(n,t,"label")}}}},apis:{getField:function(t,n){return t.getField(n)},getLabel:function(t,n){return t.getLabel(n)}}}),jb=Object.freeze({__proto__:null,exhibit:function(t,n){return Hr({attributes:ar([{key:n.tabAttr,value:"true"}])})}}),Gb=da({fields:[Oo("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:jb}),Xb=tinymce.util.Tools.resolve("tinymce.html.Entities"),qb=function(t,n,e,o){return{dom:Yb(e),components:t.toArray().concat([n]),fieldBehaviours:qa(o)}},Yb=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},Kb=Mr("form-component-change"),Jb=Mr("form-close"),$b=Mr("form-cancel"),Qb=Mr("form-action"),Zb=Mr("form-submit"),ty=Mr("form-block"),ny=Mr("form-unblock"),ey=Mr("form-tabchange"),oy=Mr("form-resize"),ry=a([bo("data"),Oo("inputAttributes",{}),Oo("inputStyles",{}),Oo("tag","input"),Oo("inputClasses",[]),Wu("onSetValue"),Oo("styles",{}),Oo("eventOrder",{}),Ls("inputBehaviours",[vf,_g]),Oo("selectOnFocus",!0)]),iy=fl({name:"Input",configFields:ry(),factory:function(t,n){return{uid:t.uid,dom:Rb(t),components:[],behaviours:O(O({},Ib(e=t)),Us(e.inputBehaviours,[vf.config({store:O(O({mode:"manual"},e.data.map((function(t){return{initialValue:t}})).getOr({})),{getValue:function(t){return Yr(t.element)},setValue:function(t,n){Yr(t.element)!==n&&Kr(t.element,n)}}),onSetValue:e.onSetValue})])),eventOrder:t.eventOrder}
var e}}),uy={},ay={exports:uy}
function cy(t){setTimeout((function(){throw t}),0)}function sy(t){var n=Ft(t)
return wt(Sy,n)}function ly(t,n){jr(n.getRoot(t).getOr(t.element),n.invalidClass),n.notify.each((function(n){sy(t.element)&&on(t.element,"aria-invalid",!1),n.getContainer(t).each((function(t){Dr(t,n.validHtml)})),n.onValid(t)}))}function fy(t,n,e,o){Ur(n.getRoot(t).getOr(t.element),n.invalidClass),n.notify.each((function(n){sy(t.element)&&on(t.element,"aria-invalid",!0),n.getContainer(t).each((function(t){Dr(t,o)})),n.onInvalid(t,o)}))}function dy(t,n,e){return n.validator.fold((function(){return wy(Re.value(!0))}),(function(n){return n.validate(t)}))}function my(t,n,e){return n.notify.each((function(n){n.onValidate(t)})),dy(t,n).map((function(e){return t.getSystem().isConnected()?e.fold((function(e){return fy(t,n,0,e),Re.error(e)}),(function(e){return ly(t,n),Re.value(e)})):Re.error("No longer in system")}))}!function(){var t=this,n=function(){var t,n,e,o={exports:{}}
function r(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new")
if("function"!=typeof t)throw new TypeError("not a function")
this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function u(t,n){for(;3===t._state;)t=t._value
0!==t._state?(t._handled=!0,i._immediateFn((function(){var e,o=1===t._state?n.onFulfilled:n.onRejected
if(null!==o){try{e=o(t._value)}catch(e){return void c(n.promise,e)}a(n.promise,e)}else(1===t._state?a:c)(n.promise,t._value)}))):t._deferreds.push(n)}function a(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.")
if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then
if(n instanceof i)return t._state=3,t._value=n,void s(t)
if("function"==typeof e)return void f((o=e,r=n,function(){o.apply(r,arguments)}),t)}t._state=1,t._value=n,s(t)}catch(n){c(t,n)}var o,r}function c(t,n){t._state=2,t._value=n,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}))
for(var n=0,e=t._deferreds.length;n<e;n++)u(t,t._deferreds[n])
t._deferreds=null}function l(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function f(t,n){var e=!1
try{t((function(t){e||(e=!0,a(n,t))}),(function(t){e||(e=!0,c(n,t))}))}catch(t){if(e)return
e=!0,c(n,t)}}t=o,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=setTimeout,i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var e=new this.constructor(r)
return u(this,new l(t,n,e)),e},i.all=function(t){var n=Array.prototype.slice.call(t)
return new i((function(t,e){if(0===n.length)return t([])
for(var o=n.length,r=0;r<n.length;r++)!function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then
if("function"==typeof a)return a.call(u,(function(t){r(i,t)}),e),0}n[i]=u,0==--o&&t(n)}catch(u){e(u)}}(r,n[r])}))},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i((function(n){n(t)}))},i.reject=function(t){return new i((function(n,e){e(t)}))},i.race=function(t){return new i((function(n,e){for(var o=0,r=t.length;o<r;o++)t[o].then(n,e)}))},i._immediateFn="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){e(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},t.exports?t.exports=i:n.Promise||(n.Promise=i)
var d=o.exports
return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||d}}
"object"==typeof uy&&void 0!==ay?ay.exports=n():(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=n()}()
var gy,py,hy=ay.exports.boltExport,vy=function(t){function n(t){r()?i(t):o.push(t)}var e=vt.none(),o=[],r=function(){return e.isSome()},i=function(t){e.each((function(n){setTimeout((function(){t(n)}),0)}))}
return t((function(t){r()||(e=vt.some(t),St(o,i),o=[])})),{get:n,map:function(t){return vy((function(e){n((function(n){e(t(n))}))}))},isReady:r}},by={nu:vy,pure:function(t){return vy((function(n){n(t)}))}},yy=function(t){function n(n){t().then(n,cy)}return{map:function(n){return yy((function(){return t().then(n)}))},bind:function(n){return yy((function(){return t().then((function(t){return n(t).toPromise()}))}))},anonBind:function(n){return yy((function(){return t().then((function(){return n.toPromise()}))}))},toLazy:function(){return by.nu(n)},toCached:function(){var n=null
return yy((function(){return n=null===n?t():n}))},toPromise:t,get:n}},xy=function(t){return yy((function(){return new hy(t)}))},wy=function(t){return yy((function(){return hy.resolve(t)}))},Sy=["input","textarea"],Cy=Object.freeze({__proto__:null,markValid:ly,markInvalid:fy,query:dy,run:my,isInvalid:function(t,n){return Gr(n.getRoot(t).getOr(t.element),n.invalidClass)}}),ky=Object.freeze({__proto__:null,events:function(t,n){return t.validator.map((function(n){return Ki([wr(n.onEvent,(function(n){my(n,t).get(c)}))].concat(n.validateOnLoad?[Ji((function(n){my(n,t).get(i)}))]:[]))})).getOr({})}}),Oy=da({fields:[so("invalidClass"),Oo("getRoot",vt.none),ko("notify",[Oo("aria","alert"),Oo("getContainer",vt.none),Oo("validHtml",""),Wu("onValid"),Wu("onInvalid"),Wu("onValidate")]),ko("validator",[so("validate"),Oo("onEvent","input"),Oo("validateOnLoad",!0)])],name:"invalidating",active:ky,apis:Cy,extra:{validation:function(t){return function(n){var e=vf.getValue(n)
return wy(t(e))}}}}),_y=Object.freeze({__proto__:null,getCoupled:function(t,n,e,o){return e.getOrCreate(t,n,o)}}),Ty=da({fields:[lo("others",oo(Re.value,Jo()))],name:"coupling",apis:_y,state:Object.freeze({__proto__:null,init:function(){var t={},n=a({})
return gu({readState:n,getOrCreate:function(n,e,o){var r=kt(e.others)
if(r)return it(t,o).getOrThunk((function(){var r=it(e.others,o).getOrDie("No information found for coupled component: "+o)(n),i=n.getSystem().build(r)
return t[o]=i}))
throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}})}),Ey=a("sink"),Dy=a(Nf({name:Ey(),overrides:a({dom:{tag:"div"},behaviours:qa([Ql.config({useFixed:C})]),events:Ki([_r(mi()),_r(ui()),_r(vi())])})}))
function By(t,n){var e=t.getHotspot(n).getOr(n),o=t.getAnchorOverrides()
return t.layouts.fold((function(){return{type:"hotspot",hotspot:e,overrides:o}}),(function(t){return{type:"hotspot",hotspot:e,overrides:o,layouts:t}}))}function My(t,n,e,o,r,i,u){var a,c=By(t,e),s=e,l=o,f=r,d=u,m=n,g=(0,(a=t).fetch)(s).map(m),p=Hw(s,a)
return g.map((function(t){return t.bind((function(t){return vt.from(Xg.sketch(O(O({},f.menu()),{uid:cu(""),data:t,highlightImmediately:d===gy.HighlightFirst,onOpenMenu:function(t,n){var e=p().getOrDie()
Ql.position(e,n,{anchor:c}),uf.decloak(l)},onOpenSubmenu:function(t,n,e){var o=p().getOrDie()
Ql.position(o,e,{anchor:{type:"submenu",item:n}}),uf.decloak(l)},onRepositionMenu:function(t,n,e){var o=p().getOrDie()
Ql.position(o,n,{anchor:c}),St(e,(function(t){Ql.position(o,t.triggeredMenu,{anchor:{type:"submenu",item:t.triggeringItem}})}))},onEscape:function(){return _g.focus(s),uf.close(l),vt.some(!0)}})))}))})).map((function(t){return t.fold((function(){uf.isOpen(o)&&uf.close(o)}),(function(t){uf.cloak(o),uf.open(o,t),i(o)})),o}))}function Ay(t,n,e,o,r,i){var u=Ty.getCoupled(e,"sandbox")
return(uf.isOpen(u)?function(t,n,e,o,r,i,u){return uf.close(o),wy(o)}:My)(t,n,e,u,o,r,i)}function Fy(t){uf.getState(t).each((function(t){Xg.repositionMenus(t)}))}function Iy(t,n,e){var o=Du(),r=Hw(n,t)
return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:yf(t.sandboxBehaviours,[vf.config({store:{mode:"memory",initialValue:n}}),uf.config({onOpen:function(r,i){var u,a,c,s,l,f,d=By(t,n)
o.link(n.element),t.matchWidth&&(u=d.hotspot,a=i,c=t.useMinWidth,l=Jf.getCurrent(a).getOr(a),f=kn(u.element),c?fn(l.element,"min-width",f+"px"):(s=l.element,ke.set(s,f))),t.onOpen(d,r,i),void 0!==e&&void 0!==e.onOpen&&e.onOpen(r,i)},onClose:function(t,r){o.unlink(n.element),void 0!==e&&void 0!==e.onClose&&e.onClose(t,r)},isPartOf:function(t,e,o){return Au(e,o)||Au(n,o)},getAttachPoint:function(){return r().getOrDie()}}),Jf.config({find:function(t){return uf.getState(t).bind((function(t){return Jf.getCurrent(t)}))}}),$a.config({channels:O(O({},Is({isExtraPart:S})),Rs({doReposition:Fy}))})])}}function Ry(t){Fy(Ty.getCoupled(t,"sandbox"))}function Vy(){return[Oo("sandboxClasses",[]),bf("sandboxBehaviours",[Jf,$a,uf,vf])]}function Py(t){return Nf({name:t+"-edge",overrides:function(n){return n.model.manager.edgeActions[t].fold((function(){return{}}),(function(t){return{events:Ki([Sr(ei(),(function(n,e,o){return t(n,o)}),[n]),Sr(ui(),(function(n,e,o){return t(n,o)}),[n]),Sr(ai(),(function(n,e,o){o.mouseIsDown.get()&&t(n,o)}),[n])])}}))}})}function Hy(t){var n=t.event.raw
return-1===n.type.indexOf("touch")?void 0!==n.clientX?vt.some(n).map((function(t){return Se(t.clientX,t.clientY)})):vt.none():void 0!==n.touches&&1===n.touches.length?vt.some(n.touches[0]).map((function(t){return Se(t.clientX,t.clientY)})):vt.none()}function zy(t){return t.model.minX}function Ny(t){return t.model.minY}function Ly(t){return t.model.minX-1}function Wy(t){return t.model.minY-1}function Uy(t){return t.model.maxX}function jy(t){return t.model.maxY}function Gy(t){return t.model.maxX+1}function Xy(t){return t.model.maxY+1}function qy(t,n,e){return n(t)-e(t)}function Yy(t){return qy(t,Uy,zy)}function Ky(t){return qy(t,jy,Ny)}function Jy(t){return Yy(t)/2}function $y(t){return Ky(t)/2}function Qy(t){return t.stepSize}function Zy(t){return t.snapToGrid}function tx(t){return t.snapStart}function nx(t){return t.rounded}function ex(t,n){return void 0!==t[n+"-edge"]}function ox(t){return ex(t,"left")}function rx(t){return ex(t,"right")}function ix(t){return ex(t,"top")}function ux(t){return ex(t,"bottom")}function ax(t){return t.model.value.get()}function cx(t,n){return{x:t,y:n}}function sx(t,n){pr(t,nS(),{value:n})}function lx(t,n,e,o){return t<n?t:e<t?e:t===n?n-1:Math.max(n,t-o)}function fx(t,n,e,o){return e<t?t:t<n?n:t===e?e+1:Math.min(e,t+o)}function dx(t,n,e){return Math.max(n,Math.min(e,t))}function mx(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.step,u=t.snap,a=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,g=s?n-1:n,p=l?e+1:e
if(r<f)return g
if(d<r)return p
var h,v,b,y,x,w=dx((x=f,(Math.min(d,Math.max(r,x))-x)/m*o+n),g,p)
return u&&n<=w&&w<=e?(h=w,v=n,b=e,y=i,a.fold((function(){var t=Math.round((h-v)/y)*y
return dx(v+t,v-1,b+1)}),(function(t){var n=Math.round((h-t)%y/y),e=Math.floor((h-t)/y),o=Math.floor((b-t)/y),r=Math.min(o,e+n)
return Math.max(t,t+r*y)}))):c?Math.round(w):w}function gx(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge
return r<n?i?0:s:e<r?u?a:l:(r-n)/o*c}function px(t){return t.element.dom.getBoundingClientRect()}function hx(t){return px(t)[eS]}function vx(t){return px(t).right}function bx(t){return px(t).top}function yx(t){return px(t).bottom}function xx(t){return px(t).width}function wx(t){return px(t).height}function Sx(t,n){var e=px(t),o=px(n)
return(e[eS]+e.right)/2-o[eS]}function Cx(t,n){var e=px(t),o=px(n)
return(e.top+e.bottom)/2-o.top}function kx(t,n){pr(t,nS(),{value:n})}function Ox(t,n,e){return mx({min:zy(n),max:Uy(n),range:Yy(n),value:e,step:Qy(n),snap:Zy(n),snapStart:tx(n),rounded:nx(n),hasMinEdge:ox(n),hasMaxEdge:rx(n),minBound:hx(t),maxBound:vx(t),screenRange:xx(t)})}function _x(t){return function(n,e){return kx(n,{x:r=(0<t?fx:lx)(ax(o=e).x,zy(o),Uy(o),Qy(o))}),vt.some(r).map(C)
var o,r}}function Tx(t,n,e,o,r,i){var u,a,c,s,l,f,d,m,g=(a=i,c=e,s=o,l=r,f=xx(u=n),d=s.bind((function(t){return vt.some(Sx(t,u))})).getOr(0),m=l.bind((function(t){return vt.some(Sx(t,u))})).getOr(f),gx({min:zy(a),max:Uy(a),range:Yy(a),value:c,hasMinEdge:ox(a),hasMaxEdge:rx(a),minBound:hx(u),minOffset:0,maxBound:vx(u),maxOffset:f,centerMinEdge:d,centerMaxEdge:m}))
return hx(n)-hx(t)+g}function Ex(t,n){pr(t,nS(),{value:n})}function Dx(t,n,e){return mx({min:Ny(n),max:jy(n),range:Ky(n),value:e,step:Qy(n),snap:Zy(n),snapStart:tx(n),rounded:nx(n),hasMinEdge:ix(n),hasMaxEdge:ux(n),minBound:bx(t),maxBound:yx(t),screenRange:wx(t)})}function Bx(t){return function(n,e){return Ex(n,{y:r=(0<t?fx:lx)(ax(o=e).y,Ny(o),jy(o),Qy(o))}),vt.some(r).map(C)
var o,r}}function Mx(t,n,e,o,r,i){var u,a,c,s,l,f,d,m,g=(a=i,c=e,s=o,l=r,f=wx(u=n),d=s.bind((function(t){return vt.some(Cx(t,u))})).getOr(0),m=l.bind((function(t){return vt.some(Cx(t,u))})).getOr(f),gx({min:Ny(a),max:jy(a),range:Ky(a),value:c,hasMinEdge:ix(a),hasMaxEdge:ux(a),minBound:bx(u),minOffset:0,maxBound:yx(u),maxOffset:f,centerMinEdge:d,centerMaxEdge:m}))
return bx(n)-bx(t)+g}function Ax(t,n){pr(t,nS(),{value:n})}function Fx(t,n){return{x:t,y:n}}function Ix(t,n){return function(e,o){return i=o,u=0<t?fx:lx,Ax(e,Fx(a=(r=n)?ax(i).x:u(ax(i).x,zy(i),Uy(i),Qy(i)),r?u(ax(i).y,Ny(i),jy(i),Qy(i)):ax(i).y)),vt.some(a).map(C)
var r,i,u,a}}function Rx(t){return"<alloy.field."+t+">"}function Vx(t,n){return fl({name:"ColourPicker",configFields:[so("dom"),Oo("onValidHex",i),Oo("onInvalidHex",i)],factory:function(e){function o(t,n,e){w.getOpt(t).each((function(t){b.setHue(t,e)}))}function r(t,n){S.getOpt(t).each((function(t){v.updateHex(t,n)}))}function u(t,n,e,o){var r=e,i=Cv(n)
y.paletteRgba.set(i),y.paletteHue.set(r),St(o,(function(o){o(t,n,e)}))}var c,s,l,f,d,m,g,p,h,v=function(t,n,e,o){function r(e,o,r,u,a){var c,s,l=t(MS+"range"),f=[Ub.parts.label({dom:{tag:"label",innerHtml:r,attributes:{"aria-label":u}}}),Ub.parts.field({data:a,factory:iy,inputAttributes:O({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[n("textfield")],inputBehaviours:qa([(c=o,s=e,Oy.config({invalidClass:n("invalid"),notify:{onValidate:function(t){pr(t,BS,{type:c})},onValid:function(t){pr(t,ES,{type:c,value:vf.getValue(t)})},onInvalid:function(t){pr(t,DS,{type:c,value:vf.getValue(t)})}},validator:{validate:function(n){var e=vf.getValue(n),o=s(e)?Re.value(!0):Re.error(t("aria.input.invalid"))
return wy(o)},validateOnLoad:!1}})),Gb.config({})]),onSetValue:function(t){Oy.isInvalid(t)&&Oy.run(t).get(i)}})],d="hex"!==o?[Ub.parts["aria-descriptor"]({text:l})]:[]
return{dom:{tag:"div",attributes:{role:"presentation"}},components:f.concat(d)}}function u(t,n){var e=n.red,o=n.green,r=n.blue
vf.setValue(t,{red:e,green:o,blue:r})}function a(t,n){c.getOpt(t).each((function(t){fn(t.element,"background-color","#"+n.value)}))}var c=Tm({dom:{tag:"div",classes:[n("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}})
return fl({factory:function(){function i(t){return g[t].get()}function s(t,n){g[t].set(n)}function l(t,n){var e=n.event
"hex"!==e.type?s(e.type,vt.none()):o(t)}function f(t,n){var o,r,c,l,f=n.event
"hex"===f.type?function(t,n){e(t)
var o=hv(n)
s("hex",vt.some(n))
var r=Cv(o)
u(t,r),m(r),pr(t,CS,{hex:o}),a(t,o)}(t,f.value):(o=t,r=f.type,c=f.value,l=parseInt(c,10),s(r,vt.some(l)),i("red").bind((function(t){return i("green").bind((function(n){return i("blue").map((function(e){return xv(t,n,e,1)}))}))})).each((function(t){var n,e,r=(n=o,e=yv(t),TS.getField(n,"hex").each((function(t){_g.isFocused(t)||vf.setValue(n,{hex:e.value})})),e)
pr(o,CS,{hex:r}),a(o,r)})))}function d(n){return{label:t(MS+n+".label"),description:t(MS+n+".description")}}function m(t){var n=t.red,e=t.green,o=t.blue
s("red",vt.some(n)),s("green",vt.some(e)),s("blue",vt.some(o))}var g={red:Io(vt.some(255)),green:Io(vt.some(255)),blue:Io(vt.some(255)),hex:Io(vt.some("ffffff"))},p=d("red"),h=d("green"),v=d("blue"),b=d("hex")
return jo(TS.sketch((function(e){return{dom:{tag:"form",classes:[n("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[e.field("red",Ub.sketch(r(wv,"red",p.label,p.description,255))),e.field("green",Ub.sketch(r(wv,"green",h.label,h.description,255))),e.field("blue",Ub.sketch(r(wv,"blue",v.label,v.description,255))),e.field("hex",Ub.sketch(r(vv,"hex",b.label,b.description,"ffffff"))),c.asSpec()],formBehaviours:qa([Oy.config({invalidClass:n("form-invalid")}),nm("rgb-form-events",[wr(ES,f),wr(DS,l),wr(BS,l)])])}})),{apis:{updateHex:function(t,n){var e
vf.setValue(t,{hex:n.value}),u(t,e=Cv(n)),m(e),a(t,n)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,n,e){t.updateHex(n,e)}},extraApis:{}})}(t,n,e.onValidHex,e.onInvalidHex),b=(g=n,p=SS.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[g("sv-palette-spectrum")]}}),h=SS.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[g("sv-palette-thumb")],innerHtml:"<div class="+g("sv-palette-inner-thumb")+' role="presentation"></div>'}}),fl({factory:function(t){var n=a({x:0,y:0}),e=qa([Jf.config({find:vt.some}),_g.config({})])
return SS.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[g("sv-palette")]},model:{mode:"xy",getInitialValue:n},rounded:!1,components:[p,h],onChange:function(t,n,e){pr(t,OS,{value:e})},onInit:function(t,n,e,o){C(e.element.dom,_v(Jv))},sliderBehaviours:e})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(t,n,e){var o=e
C(n.components()[0].element.dom,_v(Sv(Ev(o,100,100))))},setThumb:function(t,n,e){var o=n,r=Dv(Cv(e))
SS.setValue(o,{x:r.saturation,y:100-r.value})}},extraApis:{}})),y={paletteRgba:Io(Jv),paletteHue:Io(0)},x=Tm((s=SS.parts.spectrum({dom:{tag:"div",classes:[(c=n)("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=SS.parts.thumb({dom:{tag:"div",classes:[c("hue-slider-thumb")],attributes:{role:"presentation"}}}),SS.sketch({dom:{tag:"div",classes:[c("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:a({y:0})},components:[s,l],sliderBehaviours:qa([_g.config({})]),onChange:function(t,n,e){pr(t,kS,{value:e})}}))),w=Tm(b.sketch({})),S=Tm(v.sketch({}))
function C(t,n){var e,o,r=t.width,i=t.height,u=t.getContext("2d")
null!==u&&(u.fillStyle=n,u.fillRect(0,0,r,i),(e=u.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),e.addColorStop(1,"rgba(255,255,255,0)"),u.fillStyle=e,u.fillRect(0,0,r,i),(o=u.createLinearGradient(0,0,0,i)).addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),u.fillStyle=o,u.fillRect(0,0,r,i))}return{uid:e.uid,dom:e.dom,components:[w.asSpec(),x.asSpec(),S.asSpec()],behaviours:qa([nm("colour-picker-events",[wr(CS,(m=[o,function(t,n,e){x.getOpt(t).each((function(t){SS.setValue(t,{y:100-e/360*100})}))},function(t,n){w.getOpt(t).each((function(t){b.setThumb(t,n)}))}],function(t,n){var e=n.event.hex
u(t,e,Dv(Cv(e)).hue,m)})),wr(OS,(d=[r],function(t,n){var e=n.event.value,o=y.paletteHue.get()
u(t,Bv(Ev(o,e.x,100-e.y)),o,d)})),wr(kS,(f=[o,r],function(t,n){var e=(100-n.event.value.y)/100*360,o=Dv(y.paletteRgba.get())
u(t,Bv(Ev(e,o.saturation,o.value)),e,f)}))]),Jf.config({find:function(t){return S.getOpt(t)}}),wg.config({mode:"acyclic"})])}}})}function Px(t){return IS[t]}function Hx(t,n,e){return vf.config(jo({store:{mode:"manual",getValue:n,setValue:e}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))}function zx(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:qa([_g.config({ignore:!0}),Gb.config({})])}}function Nx(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[zx([LS]),t,zx([WS])],behaviours:qa([FS(1)])}}function Lx(t,n){pr(t,mi(),{raw:{which:9,shiftKey:n}})}function Wx(t,n){var e=n.element
Gr(e,LS)?Lx(t,!0):Gr(e,WS)&&Lx(t,!1)}function Ux(t){return Ob(t,["."+LS,"."+WS].join(","),S)}function jx(t,n){return GS(document.createElement("canvas"),t,n)}function Gx(t){var n=jx(t.width,t.height)
return jS(n).drawImage(t,0,0),n}function Xx(t){return t.naturalWidth||t.width}function qx(t){return t.naturalHeight||t.height}function Yx(t,n,e){return n=n||"image/png",v(HTMLCanvasElement.prototype.toBlob)?new hy((function(o,r){t.toBlob((function(t){t?o(t):r()}),n,e)})):(o=t.toDataURL(n,e),new hy((function(t,n){(function(){var t=o.split(","),n=/data:([^;]+)/.exec(t[0])
if(!n)return vt.none()
for(var e=n[1],r=t[1],i=atob(r),u=i.length,a=Math.ceil(u/1024),c=new Array(a),s=0;s<a;++s){for(var l=1024*s,f=Math.min(1024+l,u),d=new Array(f-l),m=l,g=0;m<f;++g,++m)d[g]=i[m].charCodeAt(0)
c[s]=new Uint8Array(d)}return vt.some(new Blob(c,{type:e}))})().fold((function(){n("uri is not base64: "+o)}),t)})))
var o}function Kx(t,n,e){function o(n,e){return t.then((function(t){return t.toDataURL(n||"image/png",e)}))}return{getType:a(n.type),toBlob:function(){return hy.resolve(n)},toDataURL:a(e),toBase64:function(){return e.split(",")[1]},toAdjustedBlob:function(n,e){return t.then((function(t){return Yx(t,n,e)}))},toAdjustedDataURL:o,toAdjustedBase64:function(t,n){return o(t,n).then((function(t){return t.split(",")[1]}))},toCanvas:function(){return t.then(Gx)}}}function Jx(t,n){return Yx(t,n).then((function(n){return Kx(hy.resolve(t),n,t.toDataURL())}))}function $x(t,n,e){var o="string"==typeof t?parseFloat(t):t
return e<o?o=e:o<n&&(o=n),o}function Qx(t,n){for(var e=[],o=new Array(25),r=0;r<5;r++){for(var i=0;i<5;i++)e[i]=n[i+5*r]
for(i=0;i<5;i++){for(var u=0,a=0;a<5;a++)u+=t[i+5*a]*e[a]
o[i+5*r]=u}}return o}function Zx(t,n){return t.toCanvas().then((function(e){return YS(e,t.getType(),n)}))}function tw(t){return function(n,e){return Zx(n,t([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e))}}function nw(t,n){void 0===n&&(n=2)
var e=Math.pow(10,n),o=Math.round(t*e)
return Math.ceil(o/e)}function ew(t){return KS(t)}function ow(t){return QS(t)}function rw(t,n){return ZS(t,n)}function iw(t,n){return JS(t,n)}function uw(t,n){return $S(t,n)}function aw(t,n){return o=n,(e=t).toCanvas().then((function(t){return oC(t,e.getType(),o)}))
var e,o}function cw(t,n){return o=n,(e=t).toCanvas().then((function(t){return eC(t,e.getType(),o)}))
var e,o}function sw(t,n,e){return Im(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:e},n)}function lw(t,n){return sw(t,n,[])}function fw(t,n){return sw(t,n,[Cg.config({})])}function dw(t,n,e){return{dom:{tag:"span",innerHtml:e.translate(t),classes:[n+"__select-label"]},behaviours:qa([Cg.config({})])}}function mw(t,n,e){function o(t,n){var e=vf.getValue(t)
return _g.focus(e),pr(e,"keydown",{raw:n.event.raw}),Lw.close(e),vt.some(!0)}var r=Io(i),u=t.text.map((function(t){return Tm(dw(t,n,e.providers))})),a=t.icon.map((function(t){return Tm(fw(t,e.providers.icons))})),c=t.role.fold((function(){return{}}),(function(t){return{role:t}})),s=t.tooltip.fold((function(){return{}}),(function(t){var n=e.providers.translate(t)
return{title:n,"aria-label":n}})),l=Im("chevron-down",{tag:"div",classes:[n+"__select-chevron"]},e.providers.icons)
return Tm(Lw.sketch(O(O(O({},t.uid?{uid:t.uid}:{}),c),{dom:{tag:"button",classes:[n,n+"--select"].concat(R(t.classes,(function(t){return n+"--"+t}))),attributes:O({},s)},components:zv([a.map((function(t){return t.asSpec()})),u.map((function(t){return t.asSpec()})),vt.some(l)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:qa(T(T([],t.dropdownBehaviours,!0),[Vv((function(){return t.disabled||e.providers.isDisabled()})),tv(),Ww.config({}),Cg.config({}),nm("dropdown-events",[ev(t,r),ov(t,r)]),nm("menubutton-update-display-text",[wr(aC,(function(t,n){u.bind((function(n){return n.getOpt(t)})).each((function(t){Cg.set(t,[$r(e.providers.translate(n.event.text))])}))})),wr(cC,(function(t,n){a.bind((function(n){return n.getOpt(t)})).each((function(t){Cg.set(t,[fw(n.event.icon,e.providers.icons)])}))}))])],!1)),eventOrder:jo(uC,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:qa([wg.config({mode:"special",onLeft:o,onRight:o})]),lazySink:e.getSink,toggleClass:n+"--active",parts:{menu:zp(0,t.columns,t.presets)},fetch:function(n){return xy(y(t.fetch,n))}}))).asSpec()}function gw(t){return"separator"===t.type}function pw(t,n,e,o){var r=Mr("primary-menu"),i=lC(t,e.shared.providers.menuItems())
if(0===i.items.length)return vt.none()
var u=Cb(r,i.items,n,e,o),a=nt(i.menus,(function(t,o){return Cb(o,t,n,e,!1)})),c=jo(a,ur(r,u))
return vt.from(Xg.tieredData(r,c,i.expansions))}function hw(t){return{isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){return ed.set(t,n)},setActive:function(n){var e=t.element
n?(Ur(e,"tox-tbtn--enabled"),on(e,"aria-pressed",!0)):(jr(e,"tox-tbtn--enabled"),cn(e,"aria-pressed"))},isActive:function(){return Gr(t.element,"tox-tbtn--enabled")}}}function vw(t,n,e,o){return mw({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(n,o){t.fetch((function(t){o(pw(t,ch.CLOSE_ON_EXECUTE,e,!1))}))},onSetup:t.onSetup,getApi:hw,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Gb.config({})]},n,e.shared)}function bw(t,n,e,o,r,i){void 0===e&&(e=[])
var u=n.fold((function(){return{}}),(function(t){return{action:t}})),a=O({buttonBehaviours:qa([Vv((function(){return t.disabled||i.isDisabled()})),tv(),Gb.config({}),nm("button press",[xr("click"),xr("mousedown")])].concat(e)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},u),c=jo(a,{dom:o})
return jo(c,{components:r})}function yw(t,n,e,o){void 0===o&&(o=[])
var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map((function(t){return{"aria-label":e.translate(t),title:e.translate(t)}})).getOr({})},i=t.icon.map((function(t){return lw(t,e.icons)}))
return bw(t,n,o,r,zv([i]),e)}function xw(t,n,e,o){void 0===o&&(o=[])
var r=yw(t,vt.some(n),e,o)
return Qg.sketch(r)}function ww(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[])
var i=e.translate(t.text),u=t.icon?t.icon.map((function(t){return lw(t,e.icons)})):vt.none(),a=u.isSome()?zv([u]):[],c=u.isSome()?{}:{innerHtml:i},s=T(T(T(T([],t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),u.isSome()?["tox-button--icon"]:[],!0),t.borderless?["tox-button--naked"]:[],!0),r,!0)
return bw(t,n,o,O(O({tag:"button",classes:s},c),{attributes:{title:i}}),a,e)}function Sw(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[])
var i=ww(t,vt.some(n),e,o,r)
return Qg.sketch(i)}function Cw(t,n){return function(e){"custom"===n?pr(e,Qb,{name:t,value:{}}):"submit"===n?gr(e,Zb):"cancel"===n?gr(e,$b):console.error("Unknown button type: ",n)}}function kw(t,n,e){if("menu"===n){var o=t,r=Tm(vw(O(O({},t),{onSetup:function(n){return n.setDisabled(t.disabled),i},fetch:(u=o.items,a=function(){return r},c=e,function(t){t(R(u,(function(t){var n,e,o=t.text.fold((function(){return{}}),(function(t){return{text:t}}))
return O(O({type:t.type,active:!1},o),{onAction:function(t){var n=!t.isActive()
t.setActive(n),e.storage.set(n),c.shared.getSink().each((function(t){a().getOpt(t).each((function(t){pa(t.element),pr(t,Qb,{name:e.name,value:e.storage.get()})}))}))},onSetup:(n=e=t,function(t){t.setActive(n.storage.get())})})})))})}),"tox-tbtn",e,vt.none()))
return r.asSpec()}var u,a,c
if("custom"===n||"cancel"===n||"submit"===n){var s=Cw(t.name,n)
return Sw(O(O({},t),{borderless:!1}),s,e.shared.providers,[])}console.error("Unknown footer button type: ",n)}function Ow(t,n){return Hf({factory:Ub,name:t,overrides:function(t){return{fieldBehaviours:qa([nm("coupled-input-behaviour",[wr(pi(),(function(e){nl(e,t,n).bind(Jf.getCurrent).each((function(n){nl(e,t,"lock").each((function(o){Dg.isOn(o)&&t.onLockedChange(e,n,o)}))}))}))])])}}})}function _w(t){var n=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t)
if(null===n)return Re.error(t)
var e=parseFloat(n[1]),o=n[2]
return Re.value({value:e,unit:o})}function Tw(t,n){function e(t){return Tt(o,t)}var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1}
return t.unit===n?vt.some(t.value):e(t.unit)&&e(n)?o[t.unit]===o[n]?vt.some(t.value):vt.some(t.value/o[t.unit]*o[n]):vt.none()}function Ew(t){return vt.none()}function Dw(t,n){function e(t){return Im(t,{tag:"span",classes:["tox-icon","tox-lock-icon__"+t]},n.icons)}function o(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}}function r(e){return Ub.parts.field({factory:iy,inputClasses:["tox-textfield"],inputBehaviours:qa([ed.config({disabled:function(){return t.disabled||n.isDisabled()}}),tv(),Gb.config({}),nm("size-input-events",[wr(fi(),(function(t,n){pr(t,a,{isField1:e})})),wr(hi(),(function(n,e){pr(n,Kb,{name:t.name})}))])]),selectOnFocus:!1})}function i(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}}}var u=Ew,a=Mr("ratio-event"),c=mC.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:n.translate(t.label.getOr("Constrain proportions"))}},components:[e("lock"),e("unlock")],buttonBehaviours:qa([ed.config({disabled:function(){return t.disabled||n.isDisabled()}}),tv(),Gb.config({})])}),s=mC.parts.field1(o([Ub.parts.label(i("Width")),r(!0)])),l=mC.parts.field2(o([Ub.parts.label(i("Height")),r(!1)]))
return mC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,l,o([i("&nbsp;"),c])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,n,e){_w(vf.getValue(t)).each((function(t){u(t).each((function(t){var e,o,r,i
vf.setValue(n,(i=-1!==(i=(e=t).value.toFixed((o=e.unit)in(r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4})?r[o]:1)).indexOf(".")?i.replace(/\.?0*$/,""):i)+e.unit)}))}))},coupledFieldBehaviours:qa([ed.config({disabled:function(){return t.disabled||n.isDisabled()},onDisabled:function(t){mC.getField1(t).bind(Ub.getField).each(ed.disable),mC.getField2(t).bind(Ub.getField).each(ed.disable),mC.getLock(t).each(ed.disable)},onEnabled:function(t){mC.getField1(t).bind(Ub.getField).each(ed.enable),mC.getField2(t).bind(Ub.getField).each(ed.enable),mC.getLock(t).each(ed.enable)}}),tv(),nm("size-input-events2",[wr(a,(function(t,n){var e,o,r,i=n.event.isField1,a=i?mC.getField1(t):mC.getField2(t),c=i?mC.getField2(t):mC.getField1(t),s=a.map(vf.getValue).getOr("")
e=c.map(vf.getValue).getOr(""),o=_w(s).toOptional(),r=_w(e).toOptional(),u=Et(o,r,(function(t,n){return Tw(t,n.unit).map((function(t){return n.value/t})).map((function(t){return e=t,o=n.unit,function(t){return Tw(t,o).map((function(t){return{value:t*e,unit:o}}))}
var e,o})).getOr(Ew)})).getOr(Ew)}))])])})}function Bw(t){var n,e
if(t.changedTouches)for(n="screenX screenY pageX pageY clientX clientY".split(" "),e=0;e<n.length;e++)t[n[e]]=t.changedTouches[0][n[e]]}function Mw(t,n){return{uid:t.uid,dom:t.dom,components:n,behaviours:Us(t.formBehaviours,[vf.config({store:{mode:"manual",getValue:function(n){return nt(rl(n,t),(function(t,n){return t().bind((function(t){var e=Jf.getCurrent(t),o=new Error("Cannot find a current component to extract the value from for form part '"+n+"': "+Br(t.element))
return e.fold((function(){return Re.error(o)}),Re.value)})).map(vf.getValue)}))},setValue:function(n,e){tt(e,(function(e,o){nl(n,t,o).each((function(t){Jf.getCurrent(t).each((function(t){vf.setValue(t,e)}))}))}))}}})]),apis:{getField:function(n,e){return nl(n,t,e).bind(Jf.getCurrent)}}}}function Aw(){return Jf.config({find:vt.some})}function Fw(t){return n=Er,e=Dr,Hx(t,(function(t){return n(t.element)}),(function(t,n){return e(t.element,n)}))
var n,e}(py=gy=gy||{})[py.HighlightFirst=0]="HighlightFirst",py[py.HighlightNone=1]="HighlightNone"
var Iw,Rw,Vw,Pw,Hw=function(t,n){return t.getSystem().getByUid(n.uid+"-"+Ey()).map((function(t){return function(){return Re.value(t)}})).getOrThunk((function(){return n.lazySink.fold((function(){return function(){return Re.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(n){return function(){return n(t)}}))}))},zw=a([so("dom"),so("fetch"),Wu("onOpen"),Uu("onExecute"),Oo("getHotspot",vt.some),Oo("getAnchorOverrides",a({})),Bc(),Ls("dropdownBehaviours",[Dg,Ty,wg,_g]),so("toggleClass"),Oo("eventOrder",{}),bo("lazySink"),Oo("matchWidth",!1),Oo("useMinWidth",!1),bo("role")].concat(Vy())),Nw=a([zf({schema:[zu()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Dy()]),Lw=dl({name:"Dropdown",configFields:zw(),partFields:Nw(),factory:function(t,n,e,o){function r(t){uf.getState(t).each((function(t){Xg.highlightPrimary(t)}))}function u(t,n){return hr(t),vt.some(!0)}var a,s={expand:function(n){Dg.isOn(n)||Ay(t,c,n,o,i,gy.HighlightNone).get(i)},open:function(n){Dg.isOn(n)||Ay(t,c,n,o,i,gy.HighlightFirst).get(i)},isOpen:Dg.isOn,close:function(n){Dg.isOn(n)&&Ay(t,c,n,o,i,gy.HighlightFirst).get(i)},repositionMenus:function(t){Dg.isOn(t)&&Ry(t)}}
return{uid:t.uid,dom:t.dom,components:n,behaviours:Us(t.dropdownBehaviours,[Dg.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Ty.config({others:{sandbox:function(n){return Iy(t,n,{onOpen:function(){return Dg.on(n)},onClose:function(){return Dg.off(n)}})}}}),wg.config({mode:"special",onSpace:u,onEnter:u,onDown:function(t,n){return Lw.isOpen(t)?r(Ty.getCoupled(t,"sandbox")):Lw.open(t),vt.some(!0)},onEscape:function(t,n){return Lw.isOpen(t)?(Lw.close(t),vt.some(!0)):vt.none()}}),_g.config({})]),events:lm(vt.some((function(n){Ay(t,c,n,o,r,gy.HighlightFirst).get(i)}))),eventOrder:O(O({},t.eventOrder),((a={})[Ti()]=["disabling","toggling","alloy.base.behaviour"],a)),apis:s,domModification:{attributes:O(O({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:it(t.dom,"attributes").bind((function(t){return it(t,"type")})).getOr("button")}:{})}}},apis:{open:function(t,n){return t.open(n)},expand:function(t,n){return t.expand(n)},close:function(t,n){return t.close(n)},isOpen:function(t,n){return t.isOpen(n)},repositionMenus:function(t,n){return t.repositionMenus(n)}}}),Ww=da({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return Ki([yr(wi(),C)])},exhibit:function(){return Hr({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Uw=Mr("color-input-change"),jw=Mr("color-swatch-change"),Gw=Mr("color-picker-cancel"),Xw=Nf({schema:[so("dom")],name:"label"}),qw=Py("top-left"),Yw=Py("top"),Kw=Py("top-right"),Jw=Py("right"),$w=Py("bottom-right"),Qw=Py("bottom"),Zw=Py("bottom-left"),tS=[Xw,Py("left"),Jw,Yw,Qw,qw,Kw,Zw,$w,Hf({name:"thumb",defaults:a({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:Ki([kr(ei(),t,"spectrum"),kr(oi(),t,"spectrum"),kr(ri(),t,"spectrum"),kr(ui(),t,"spectrum"),kr(ai(),t,"spectrum"),kr(si(),t,"spectrum")])}}}),Hf({schema:[ir("mouseIsDown",(function(){return Io(!1)}))],name:"spectrum",overrides:function(t){function n(n,o){return e.getValueFromEvent(o).map((function(o){return e.setValueFrom(n,t,o)}))}var e=t.model.manager
return{behaviours:qa([wg.config({mode:"special",onLeft:function(n){return e.onLeft(n,t)},onRight:function(n){return e.onRight(n,t)},onUp:function(n){return e.onUp(n,t)},onDown:function(n){return e.onDown(n,t)}}),_g.config({})]),events:Ki([wr(ei(),n),wr(oi(),n),wr(ui(),n),wr(ai(),(function(e,o){t.mouseIsDown.get()&&n(e,o)}))])}}})],nS=a("slider.change.value"),eS="left",oS=_x(-1),rS=_x(1),iS=vt.none,uS=vt.none,aS={"top-left":vt.none(),top:vt.none(),"top-right":vt.none(),right:vt.some((function(t,n){sx(t,{x:Gy(n)})})),"bottom-right":vt.none(),bottom:vt.none(),"bottom-left":vt.none(),left:vt.some((function(t,n){sx(t,{x:Ly(n)})}))},cS=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Ox(t,n,e)
return kx(t,{x:o}),o},setToMin:function(t,n){kx(t,{x:zy(n)})},setToMax:function(t,n){kx(t,{x:Uy(n)})},findValueOfOffset:Ox,getValueFromEvent:function(t){return Hy(t).map((function(t){return t.left}))},findPositionOfValue:Tx,setPositionFromValue:function(t,n,e,o){var r=ax(e),i=Tx(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),e),u=kn(n.element)/2
fn(n.element,"left",i-u+"px")},onLeft:oS,onRight:rS,onUp:iS,onDown:uS,edgeActions:aS}),sS=vt.none,lS=vt.none,fS=Bx(-1),dS=Bx(1),mS={"top-left":vt.none(),top:vt.some((function(t,n){sx(t,{y:Wy(n)})})),"top-right":vt.none(),right:vt.none(),"bottom-right":vt.none(),bottom:vt.some((function(t,n){sx(t,{y:Xy(n)})})),"bottom-left":vt.none(),left:vt.none()},gS=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Dx(t,n,e)
return Ex(t,{y:o}),o},setToMin:function(t,n){Ex(t,{y:Ny(n)})},setToMax:function(t,n){Ex(t,{y:jy(n)})},findValueOfOffset:Dx,getValueFromEvent:function(t){return Hy(t).map((function(t){return t.top}))},findPositionOfValue:Mx,setPositionFromValue:function(t,n,e,o){var r=ax(e),i=Mx(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),e),u=xn(n.element)/2
fn(n.element,"top",i-u+"px")},onLeft:sS,onRight:lS,onUp:fS,onDown:dS,edgeActions:mS}),pS=Hy,hS=Ix(-1,!1),vS=Ix(1,!1),bS=Ix(-1,!0),yS=Ix(1,!0),xS={"top-left":vt.some((function(t,n){sx(t,cx(Ly(n),Wy(n)))})),top:vt.some((function(t,n){sx(t,cx(Jy(n),Wy(n)))})),"top-right":vt.some((function(t,n){sx(t,cx(Gy(n),Wy(n)))})),right:vt.some((function(t,n){sx(t,cx(Gy(n),$y(n)))})),"bottom-right":vt.some((function(t,n){sx(t,cx(Gy(n),Xy(n)))})),bottom:vt.some((function(t,n){sx(t,cx(Jy(n),Xy(n)))})),"bottom-left":vt.some((function(t,n){sx(t,cx(Ly(n),Xy(n)))})),left:vt.some((function(t,n){sx(t,cx(Ly(n),$y(n)))}))},wS=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Fx(Ox(t,n,e.left),Dx(t,n,e.top))
return Ax(t,o),o},setToMin:function(t,n){Ax(t,Fx(zy(n),Ny(n)))},setToMax:function(t,n){Ax(t,Fx(Uy(n),jy(n)))},getValueFromEvent:pS,setPositionFromValue:function(t,n,e,o){var r=ax(e),i=Tx(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),e),u=Mx(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),e),a=kn(n.element)/2,c=xn(n.element)/2
fn(n.element,"left",i-a+"px"),fn(n.element,"top",u-c+"px")},onLeft:hS,onRight:vS,onUp:bS,onDown:yS,edgeActions:xS}),SS=dl({name:"Slider",configFields:[Oo("stepSize",1),Oo("onChange",i),Oo("onChoose",i),Oo("onInit",i),Oo("onDragStart",i),Oo("onDragEnd",i),Oo("snapToGrid",!1),Oo("rounded",!0),bo("snapStart"),lo("model",ao("mode",{x:[Oo("minX",0),Oo("maxX",100),ir("value",(function(t){return Io(t.mode.minX)})),so("getInitialValue"),Xu("manager",cS)],y:[Oo("minY",0),Oo("maxY",100),ir("value",(function(t){return Io(t.mode.minY)})),so("getInitialValue"),Xu("manager",gS)],xy:[Oo("minX",0),Oo("maxX",100),Oo("minY",0),Oo("maxY",100),ir("value",(function(t){return Io({x:t.mode.minX,y:t.mode.minY})})),so("getInitialValue"),Xu("manager",wS)]})),Ls("sliderBehaviours",[wg,vf]),ir("mouseIsDown",(function(){return Io(!1)}))],partFields:tS,factory:function(t,n,e,o){function r(n){return el(n,t,"thumb")}function i(n){return el(n,t,"spectrum")}function u(n){return nl(n,t,"left-edge")}function a(n){return nl(n,t,"right-edge")}function c(n){return nl(n,t,"top-edge")}function s(n){return nl(n,t,"bottom-edge")}function l(n,e){v.setPositionFromValue(n,e,t,{getLeftEdge:u,getRightEdge:a,getTopEdge:c,getBottomEdge:s,getSpectrum:i})}function f(t,n){h.value.set(n),l(t,r(t))}function d(n){var e=t.mouseIsDown.get()
t.mouseIsDown.set(!1),e&&nl(n,t,"thumb").each((function(e){var o=h.value.get()
t.onChoose(n,e,o)}))}function m(n,e){e.stop(),t.mouseIsDown.set(!0),t.onDragStart(n,r(n))}function g(n,e){e.stop(),t.onDragEnd(n,r(n)),d(n)}var p,h=t.model,v=h.manager
return{uid:t.uid,dom:t.dom,components:n,behaviours:Us(t.sliderBehaviours,[wg.config({mode:"special",focusIn:function(n){return nl(n,t,"spectrum").map(wg.focusIn).map(C)}}),vf.config({store:{mode:"manual",getValue:function(t){return h.value.get()}}}),$a.config({channels:((p={})[sf()]={onReceive:d},p)})]),events:Ki([wr(nS(),(function(n,e){!function(n,e){f(n,e)
var o=r(n)
t.onChange(n,o,e),vt.some(!0)}(n,e.event.value)})),Ji((function(n,e){var o=h.getInitialValue()
h.value.set(o)
var u=r(n)
l(n,u)
var a=i(n)
t.onInit(n,u,a,h.value.get())})),wr(ei(),m),wr(ri(),g),wr(ui(),m),wr(si(),g)]),apis:{resetToMin:function(n){v.setToMin(n,t)},resetToMax:function(n){v.setToMax(n,t)},setValue:f,refresh:l},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(t,n,e){t.setValue(n,e)},resetToMin:function(t,n){t.resetToMin(n)},resetToMax:function(t,n){t.resetToMax(n)},refresh:function(t,n){t.refresh(n)}}}),CS=Mr("rgb-hex-update"),kS=Mr("slider-update"),OS=Mr("palette-update"),_S=[Ls("formBehaviours",[vf])],TS={getField:Vr((function(t,n,e){return t.getField(n,e)})),sketch:function(t){var n,e={field:function(t,e){return n.push(t),Js("form",Rx(t),e)},record:a(n=[])},o=t(e),r=R(e.record(),(function(t){return Hf({name:t,pname:Rx(t)})}))
return ll("form",_S,r,Mw,o)}},ES=Mr("valid-input"),DS=Mr("invalid-input"),BS=Mr("validating-input"),MS="colorcustom.rgb.",AS=function(t){return Jf.config({find:t.getOpt})},FS=function(t){return Jf.config({find:function(n){return Jt(n.element,t).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))}})},IS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},RS=tinymce.util.Tools.resolve("tinymce.Resource"),VS=tinymce.util.Tools.resolve("tinymce.util.Tools"),PS=Yo([Oo("preprocess",c),Oo("postprocess",c)]),HS=function(t,n){var e=uo("RepresentingConfigs.memento processors",PS,n)
return vf.config({store:{mode:"manual",getValue:function(n){var o=t.get(n),r=vf.getValue(o)
return e.postprocess(r)},setValue:function(n,o){var r=e.preprocess(o),i=t.get(n)
vf.setValue(i,r)}}})},zS=Hx,NS=function(t){return vf.config({store:{mode:"memory",initialValue:t}})},LS=Mr("alloy-fake-before-tabstop"),WS=Mr("alloy-fake-after-tabstop"),US=!(se().browser.isIE()||se().browser.isEdge()),jS=function(t){return t.getContext("2d")},GS=function(t,n,e){return t.width=n,t.height=e,t},XS=function(t){URL.revokeObjectURL(t.src)},qS=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],YS=function(t,n,e){var o=jS(t),r=function(t){for(var n,o,r,i,u=t.data,a=e[0],c=e[1],s=e[2],l=e[3],f=e[4],d=e[5],m=e[6],g=e[7],p=e[8],h=e[9],v=e[10],b=e[11],y=e[12],x=e[13],w=e[14],S=e[15],C=e[16],k=e[17],O=e[18],_=e[19],T=0;T<u.length;T+=4)n=u[T],o=u[T+1],r=u[T+2],i=u[T+3],u[T]=n*a+o*c+r*s+i*l+f,u[T+1]=n*d+o*m+r*g+i*p+h,u[T+2]=n*v+o*b+r*y+i*x+w,u[T+3]=n*S+o*C+r*k+i*O+_
return t}(o.getImageData(0,0,t.width,t.height))
return o.putImageData(r,0,0),Jx(t,n)},KS=(Iw=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return Zx(t,Iw)}),JS=tw((function(t,n){return Qx(t,[1,0,0,0,n=$x(255*n,-255,255),0,1,0,0,n,0,0,1,0,n,0,0,0,1,0,0,0,0,0,1])})),$S=tw((function(t,n){var e
return n=$x(n,-1,1),Qx(t,[(e=(n*=100)<0?127+n/100*127:127*(0==(e=n%1)?qS[n]:qS[Math.floor(n)]*(1-e)+qS[Math.floor(n)+1]*e)+127)/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1])})),QS=(Rw=[0,-1,0,-1,5,-1,0,-1,0],function(t){return e=Rw,(n=t).toCanvas().then((function(t){return o=t,r=n.getType(),i=e,a=function(t,n,e){for(var o=function(t,n,e){return e<t?t=e:t<n&&(t=n),t},r=Math.round(Math.sqrt(e.length)),i=Math.floor(r/2),u=t.data,a=n.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),b=4*(o(l+p-i,0,s-1)*c+v),y=e[p*r+h]
d+=u[b]*y,m+=u[1+b]*y,g+=u[2+b]*y}var x=4*(l*c+f)
a[x]=o(d,0,255),a[1+x]=o(m,0,255),a[2+x]=o(g,0,255)}return n}((u=jS(o)).getImageData(0,0,o.width,o.height),u.getImageData(0,0,o.width,o.height),i),u.putImageData(a,0,0),Jx(o,r)
var o,r,i,u,a}))
var n,e}),ZS=(Vw=function(t,n){return 255*Math.pow(t/255,1-n)},function(t,n){return t.toCanvas().then((function(e){return function(t,n,e){for(var o=jS(t),r=new Array(256),i=0;i<r.length;i++)r[i]=Vw(i,e)
var u=function(t,n){for(var e=t.data,o=0;o<e.length;o+=4)e[o]=n[e[o]],e[o+1]=n[e[o+1]],e[o+2]=n[e[o+2]]
return t}(o.getImageData(0,0,t.width,t.height),r)
return o.putImageData(u,0,0),Jx(t,n)}(e,t.getType(),n)}))}),tC=function(t,n,e){var o=Xx(t),r=qx(t),i=n/o,u=e/r,a=!1;(i<.5||2<i)&&(i=i<.5?.5:2,a=!0),(u<.5||2<u)&&(u=u<.5?.5:2,a=!0)
var c=nC(t,i,u)
return a?c.then((function(t){return tC(t,n,e)})):c},nC=function(t,n,e){return new hy((function(o){var r=Xx(t),i=qx(t),u=Math.floor(r*n),a=Math.floor(i*e),c=jx(u,a)
jS(c).drawImage(t,0,0,r,i,0,0,u,a),o(c)}))},eC=function(t,n,e){var o=(e<0?360+e:e)*Math.PI/180,r=t.width,i=t.height,u=Math.sin(o),a=Math.cos(o),c=nw(Math.abs(r*a)+Math.abs(i*u)),s=nw(Math.abs(r*u)+Math.abs(i*a)),l=jx(c,s),f=jS(l)
return f.translate(c/2,s/2),f.rotate(o),f.drawImage(t,-r/2,-i/2),Jx(l,n)},oC=function(t,n,e){var o=jx(t.width,t.height),r=jS(o)
return"v"===e?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),Jx(o,n)},rC=function(t,n,e,o,r,i){var u=jx(r,i)
return jS(u).drawImage(t,-e,-o),Jx(u,n)},iC=Mr("toolbar.button.execute"),uC=((Pw={})[Ti()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],Pw),aC=Mr("update-menu-text"),cC=Mr("update-menu-icon"),sC={type:"separator"},lC=function(t,n){var e,o,r
return H((e=l(t)?t.split(" "):t,o=n,0<(r=z(e,(function(t,n){return l(n)?""===n?t:"|"===n?0<t.length&&!gw(t[t.length-1])?t.concat([sC]):t:Tt(o,n.toLowerCase())?t.concat([o[n.toLowerCase()]]):t:t.concat([n])}),[])).length&&gw(r[r.length-1])&&r.pop(),r),(function(t,e){var o,r,i,u,a,c,s=function(t){if(gw(t))return t
var n=it(t,"value").getOrThunk((function(){return Mr("generated-menu-item")}))
return jo({value:n},t)}(e),l=(r=n,Tt(o=s,"getSubmenuItems")?(u=r,a=(i=o).getSubmenuItems(),c=lC(a,u),{item:i,menus:jo(c.menus,ur(i.value,c.items)),expansions:jo(c.expansions,ur(i.value,i.value))}):{item:o,menus:{},expansions:{}})
return{menus:jo(t.menus,l.menus),items:[l.item].concat(t.items),expansions:jo(t.expansions,l.expansions)}}),{menus:{},expansions:{},items:[]})},fC=a([Oo("field1Name","field1"),Oo("field2Name","field2"),ju("onLockedChange"),Nu(["lockClass"]),Oo("locked",!1),bf("coupledFieldBehaviours",[Jf,vf])]),dC=a([Ow("field1","field2"),Ow("field2","field1"),Hf({factory:Qg,schema:[so("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:qa([Dg.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),mC=dl({name:"FormCoupledInputs",configFields:fC(),partFields:dC(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,behaviours:yf(t.coupledFieldBehaviours,[Jf.config({find:vt.some}),vf.config({store:{mode:"manual",getValue:function(n){var e=ul(n,t,["field1","field2"]),o={}
return o[t.field1Name]=vf.getValue(e.field1()),o[t.field2Name]=vf.getValue(e.field2()),o},setValue:function(n,e){var o=ul(n,t,["field1","field2"])
ut(e,t.field1Name)&&vf.setValue(o.field1(),e[t.field1Name]),ut(e,t.field2Name)&&vf.setValue(o.field2(),e[t.field2Name])}}})]),apis:{getField1:function(n){return nl(n,t,"field1")},getField2:function(n){return nl(n,t,"field2")},getLock:function(n){return nl(n,t,"lock")}}}},apis:{getField1:function(t,n){return t.getField1(n)},getField2:function(t,n){return t.getField2(n)},getLock:function(t,n){return t.getLock(n)}}}),gC={undo:a(Mr("undo")),redo:a(Mr("redo")),zoom:a(Mr("zoom")),back:a(Mr("back")),apply:a(Mr("apply")),swap:a(Mr("swap")),transform:a(Mr("transform")),tempTransform:a(Mr("temp-transform")),transformApply:a(Mr("transform-apply"))},pC=a("save-state"),hC=a("disable"),vC=a("enable"),bC={formActionEvent:Qb,saveState:pC,disable:hC,enable:vC},yC=tinymce.util.Tools.resolve("tinymce.geom.Rect"),xC=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),wC=tinymce.util.Tools.resolve("tinymce.util.Observable"),SC=tinymce.util.Tools.resolve("tinymce.util.VK")
function CC(t,n,e,o,r){return xw({name:t,icon:vt.some(n),disabled:e,tooltip:vt.some(t),primary:!1,borderless:!1},o,r)}function kC(t,n){n?ed.enable(t):ed.disable(t)}var OC=0,_C=function(t,n,e,o,r){function i(t,n){return{x:n.x-t.x,y:n.y-t.y,w:n.w,h:n.h}}function u(n,o,r,u){var a,c=o.x,s=o.y,l=o.w,f=o.h
c+=r*n.deltaX,s+=u*n.deltaY,l+=r*n.deltaW,f+=u*n.deltaH,t=yC.clamp({x:c,y:s,w:l=l<20?20:l,h:f=f<20?20:f},e,"move"===n.name),a=i(e,t),p.fire("updateRect",{rect:a}),g(a)}function a(n){c(t=n)}function c(t){function e(t,n){n.h<0&&(n.h=0),n.w<0&&(n.w=0),xC("#"+f+"-"+t,o).css({left:n.x,top:n.y,width:n.w,height:n.h})}VS.each(d,(function(n){xC("#"+f+"-"+n.name,o).css({left:t.w*n.xMul+t.x,top:t.h*n.yMul+t.y})})),e("top",{x:n.x,y:n.y,w:n.w,h:t.y-n.y}),e("right",{x:t.x+t.w,y:t.y,w:n.w-t.x-t.w+n.x,h:t.h}),e("bottom",{x:n.x,y:t.y+t.h,w:n.w,h:n.h-t.y-t.h+n.y}),e("left",{x:n.x,y:t.y,w:t.x-n.x,h:t.h}),e("move",t)}var s,l="tox-",f="tox-crid-"+OC++,d=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],m=["top","right","bottom","left"],g=function(t){var n
a((n=e,{x:t.x+n.x,y:t.y+n.y,w:t.w,h:t.h}))}
xC('<div id="'+f+'" class="'+l+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),VS.each(m,(function(t){xC("#"+f,o).append('<div id="'+f+"-"+t+'"class="'+l+'croprect-block" style="display: none" data-mce-bogus="all">')})),VS.each(d,(function(t){xC("#"+f,o).append('<div id="'+f+"-"+t.name+'" class="'+l+"croprect-handle "+l+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')})),s=VS.map(d,(function(n){var e
return function(t,n){function e(t){if(Bw(t),t.button!==r)return s(t)
t.deltaX=t.screenX-i,t.deltaY=t.screenY-u,t.preventDefault(),n.drag(t)}var o,r,i,u,a=n.document||document,c=a.getElementById(n.handle||t),s=function(t){Bw(t),xC(a).off("mousemove touchmove",e).off("mouseup touchend",s),o.remove(),n.stop&&n.stop(t)}
return xC(c).on("mousedown touchstart",(function(t){var l,f,d,m,g,p,h,v,b,y=(l=Math.max,f=a.documentElement,d=a.body,m=l(f.scrollWidth,d.scrollWidth),g=l(f.clientWidth,d.clientWidth),p=l(f.offsetWidth,d.offsetWidth),h=l(f.scrollHeight,d.scrollHeight),v=l(f.clientHeight,d.clientHeight),{width:m<p?g:m,height:h<l(f.offsetHeight,d.offsetHeight)?v:h})
Bw(t),t.preventDefault(),r=t.button
var x=c
i=t.screenX,u=t.screenY,b=window.getComputedStyle?window.getComputedStyle(x,null).getPropertyValue("cursor"):x.runtimeStyle.cursor,o=xC("<div></div>").css({position:"absolute",top:0,left:0,width:y.width,height:y.height,zIndex:2147483647,opacity:1e-4,cursor:b}).appendTo(a.body),xC(a).on("mousemove touchmove",e).on("mouseup touchend",s),n.start(t)})),{destroy:function(){xC(c).off()}}}(f,{document:o.ownerDocument,handle:f+"-"+n.name,start:function(){e=t},drag:function(t){u(n,e,t.deltaX,t.deltaY)}})})),c(t),xC(o).on("focusin focusout",(function(t){xC(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")})),xC(o).on("keydown",(function(n){var e
function o(t,n,o,r,i){t.stopPropagation(),t.preventDefault(),u(e,o,r,i)}switch(VS.each(d,(function(t){if(n.target.id===f+"-"+t.name)return e=t,!1})),n.keyCode){case SC.LEFT:o(n,0,t,-10,0)
break
case SC.RIGHT:o(n,0,t,10,0)
break
case SC.UP:o(n,0,t,0,-10)
break
case SC.DOWN:o(n,0,t,0,10)
break
case SC.ENTER:case SC.SPACEBAR:n.preventDefault(),r()}}))
var p=VS.extend({toggleVisibility:function(t){var n=VS.map(d,(function(t){return"#"+f+"-"+t.name})).concat(VS.map(m,(function(t){return"#"+f+"-"+t}))).join(",")
t?xC(n,o).show():xC(n,o).hide()},setClampRect:function(n){e=n,c(t)},setRect:a,getInnerRect:function(){return i(e,t)},setInnerRect:g,setViewPortRect:function(e){n=e,c(t)},destroy:function(){VS.each(s,(function(t){t.destroy()})),s=[]}},wC)
return p}
function TC(t,n){function e(t){var n=x.getHistoryStates()
k.updateButtonUndoStates(t,n.undoEnabled,n.redoEnabled),pr(t,bC.formActionEvent,{name:bC.saveState(),value:n.undoEnabled})}function o(t){return t.toBlob()}function r(t){pr(t,bC.formActionEvent,{name:bC.disable(),value:{}})}function u(t,n,i,u,a){r(t),function(t){return n=t,new hy((function(t){var e=new FileReader
e.onloadend=function(){t(e.result)},e.readAsDataURL(n)})).then((function(n){return Kx((e=t,new hy((function(t,n){function o(){i.removeEventListener("load",u),i.removeEventListener("error",a)}var r=URL.createObjectURL(e),i=new Image,u=function(){o(),t(i)},a=function(){o(),n("Unable to load data of type "+e.type+": "+r)}
i.addEventListener("load",u),i.addEventListener("error",a),i.src=r,i.complete&&setTimeout(u,0)})).then((function(t){XS(t)
var n=jx(Xx(t),qx(t))
return jS(n).drawImage(t,0,0),n}))),t,n)
var e}))
var n}(n).then(i).then(o).then(u).then((function(n){return S(t,n)})).then((function(){e(t),a(),w(t)})).catch((function(n){console.log(n),t.getSystem().isConnected()&&w(t)}))}function c(t,n,e){u(t,x.getBlobState().blob,n,(function(t){return x.updateTempState(t)}),e)}function s(t){var n=x.getBlobState().url
return x.destroyTempState(),e(t),n}var l,f,d,m,g,p,h,v,b,y,x=function(t){var n,e,o,r,u=Io(t),a=rc(),c=(e=-1,{data:n=[],add:function(t){var o=n.splice(++e)
return n.push(t),{state:t,removed:o}},undo:function(){if(o())return n[--e]},redo:function(){if(r())return n[++e]},canUndo:o=function(){return 0<e},canRedo:r=function(){return-1!==e&&e<n.length-1}})
function s(t){u.set(t)}function l(t){URL.revokeObjectURL(t.url)}function f(t){var n=d(t)
s(n)
var e=c.add(n).removed
return VS.each(e,l),n.url}function d(t){return{blob:t,url:URL.createObjectURL(t)}}function m(){a.on(l),a.clear()}return c.add(t),{getBlobState:function(){return u.get()},setBlobState:s,addBlobState:f,getTempState:function(){return a.get().getOrThunk(u.get)},updateTempState:function(t){var n=d(t)
return m(),a.set(n),n.url},addTempState:function(t){var n=d(t)
return a.set(n),n.url},applyTempState:function(t){return a.get().fold(i,(function(n){f(n.blob),t()}))},destroyTempState:m,undo:function(){var t=c.undo()
return s(t),t.url},redo:function(){var t=c.redo()
return s(t),t.url},getHistoryStates:function(){return{undoEnabled:c.canUndo(),redoEnabled:c.canRedo()}}}}(t.currentState),w=function(t){O.getApplyButton(t).each((function(t){ed.enable(t)})),pr(t,bC.formActionEvent,{name:bC.enable(),value:{}})},S=function(t,n){return r(t),C.updateSrc(t,n)},C=(m=t.currentState.url,g=Tm({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),p=Io(1),h=rc(),v=Io({x:0,y:0,w:1,h:1}),b=Io({x:0,y:0,w:1,h:1}),{memContainer:y=Tm(Nb.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[g.asSpec(),{dom:{tag:"img",attributes:{src:m}}},{dom:{tag:"div"},behaviours:qa([nm("image-panel-crop-events",[Ji((function(t){y.getOpt(t).each((function(t){var n=t.element.dom,e=_C({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},n,i)
e.toggleVisibility(!1),e.on("updateRect",(function(t){var n=t.rect,e=p.get(),o={x:Math.round(n.x/e),y:Math.round(n.y/e),w:Math.round(n.w/e),h:Math.round(n.h/e)}
v.set(o)})),h.set(e)}))}))])])}],containerBehaviours:qa([Cg.config({}),nm("image-panel-events",[Ji((function(t){T(t,m)}))])])})),updateSrc:T,zoom:function(t,n){var e=p.get(),o=0<n?Math.min(2,e+.1):Math.max(.1,e-.1)
p.set(o),y.getOpt(t).each((function(t){var n=t.components()[1].element
_(t,n)}))},showCrop:function(){h.on((function(t){t.toggleVisibility(!0)}))},hideCrop:function(){h.on((function(t){t.toggleVisibility(!1)}))},getRect:function(){return v.get()},getMeasurements:function(){var t=b.get()
return{width:t.w,height:t.h}}}),k=(f=Tm(CC("Undo","undo",!0,(function(t){pr(t,gC.undo(),{direction:1})}),l=n)),d=Tm(CC("Redo","redo",!0,(function(t){pr(t,gC.redo(),{direction:1})}),l)),{container:Nb.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[f.asSpec(),d.asSpec(),CC("Zoom in","zoom-in",!1,(function(t){pr(t,gC.zoom(),{direction:1})}),l),CC("Zoom out","zoom-out",!1,(function(t){pr(t,gC.zoom(),{direction:-1})}),l)]}),updateButtonUndoStates:function(t,n,e){f.getOpt(t).each((function(t){kC(t,n)})),d.getOpt(t).each((function(t){kC(t,e)}))}}),O=function(t,n){function e(t,e,o,r){return Tm(Sw({name:t,text:t,disabled:o,primary:r,icon:vt.none(),borderless:!1},e,n))}function o(t,e,o,r){return Tm(xw({name:t,icon:vt.some(t),tooltip:vt.some(e),disabled:r,primary:!1,borderless:!1},o,n))}function r(t,n){t.map((function(t){var e=t.get(n)
e.hasConfigured(ed)&&ed.disable(e)}))}function u(t,n){t.map((function(t){var e=t.get(n)
e.hasConfigured(ed)&&ed.enable(e)}))}function c(t,n,e){pr(t,n,e)}function s(t){return gr(t,bC.disable()),0}function l(t){return gr(t,bC.enable()),0}function f(t,n){s(t),c(t,gC.transform(),{transform:n}),l(t)}function d(t){return function(){J.getOpt(t).each((function(t){Cg.set(t,[K])}))}}function m(t,n){s(t),c(t,gC.transformApply(),{transform:n,swap:d(t)}),l(t)}function g(){return e("Back",(function(t){return c(t,gC.back(),{swap:d(t)})}),!1,!1)}function p(){return Tm({dom:{tag:"div",classes:["tox-spacer"]},behaviours:qa([ed.config({})])})}function h(){return e("Apply",(function(t){return c(t,gC.apply(),{swap:d(t)})}),!0,!0)}function v(t,n){return function(e){return t(e,n)}}function b(t,n){var e,o=n
s(e=t),c(e,gC.tempTransform(),{transform:o}),l(e)}function y(t,e,o,r,i){var u=SS.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}}),c=SS.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=SS.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}})
return Tm(SS.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:i,getInitialValue:a({x:r})},components:[u,c,s],sliderBehaviours:qa([_g.config({})]),onChoose:e}))}function x(t,n,e,o,i){var a,c,s,l,d,m,p=(a=t,c=n,s=e,l=o,d=i,[g(),(m=c,y(a,(function(t,n,e){f(t,v(m,e.x/100))}),s,l,d)),h()])
return Nb.sketch({dom:C,components:p.map((function(t){return t.asSpec()})),containerBehaviours:qa([nm("image-tools-filter-panel-buttons-events",[wr(bC.disable(),(function(t,n){r(p,t)})),wr(bC.enable(),(function(t,n){u(p,t)}))])])})}function w(t){return y(t,(function(t,n,e){var o=L.getOpt(t),r=U.getOpt(t),i=W.getOpt(t)
o.each((function(n){r.each((function(e){i.each((function(o){var r,i,u,a=vf.getValue(n).x/100,c=vf.getValue(o).x/100,s=vf.getValue(e).x/100,l=(r=a,i=c,u=s,function(t){return Zx(t,(n=i,e=u,Qx([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],[$x(r,0,2),0,0,0,0,0,$x(n,0,2),0,0,0,0,0,$x(e,0,2),0,0,0,0,0,1,0,0,0,0,0,1])))
var n,e})
f(t,l)}))}))}))}),0,100,200)}function S(t,n,e){return function(o){c(o,gC.swap(),{transform:n,swap:function(){J.getOpt(o).each((function(n){Cg.set(n,[t]),e(n)}))}})}}var C={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},k=i,O=[g(),p(),e("Apply",(function(n){m(n,(function(n){var e,o,r,i,u,a,c,s,l,f=t.getRect()
return e=f.x,o=f.y,r=f.w,i=f.h,a=e,c=o,s=r,l=i,(u=n).toCanvas().then((function(t){return rC(t,u.getType(),a,c,s,l)}))})),t.hideCrop()}),!1,!0)],_=Nb.sketch({dom:C,components:O.map((function(t){return t.asSpec()})),containerBehaviours:qa([nm("image-tools-crop-buttons-events",[wr(bC.disable(),(function(t,n){r(O,t)})),wr(bC.enable(),(function(t,n){u(O,t)}))])])}),T=Tm(Dw({name:"size",label:vt.none(),constrain:!0,disabled:!1},n)),E=[g(),p(),T,p(),e("Apply",(function(t){T.getOpt(t).each((function(n){var e,o,r=vf.getValue(n),i=parseInt(r.width,10),u=parseInt(r.height,10),a=(e=i,o=u,function(t){return r=e,i=o,(n=t).toCanvas().then((function(t){return tC(t,r,i).then((function(t){return Jx(t,n.getType())}))}))
var n,r,i})
m(t,a)}))}),!1,!0)],D=Nb.sketch({dom:C,components:E.map((function(t){return t.asSpec()})),containerBehaviours:qa([nm("image-tools-resize-buttons-events",[wr(bC.disable(),(function(t,n){r(E,t)})),wr(bC.enable(),(function(t,n){u(E,t)}))])])}),B=v(aw,"h"),M=v(aw,"v"),A=v(cw,-90),F=v(cw,90),I=[g(),p(),o("flip-horizontally","Flip horizontally",(function(t){b(t,B)}),!1),o("flip-vertically","Flip vertically",(function(t){b(t,M)}),!1),o("rotate-left","Rotate counterclockwise",(function(t){b(t,A)}),!1),o("rotate-right","Rotate clockwise",(function(t){b(t,F)}),!1),p(),h()],R=Nb.sketch({dom:C,components:I.map((function(t){return t.asSpec()})),containerBehaviours:qa([nm("image-tools-fliprotate-buttons-events",[wr(bC.disable(),(function(t,n){r(I,t)})),wr(bC.enable(),(function(t,n){u(I,t)}))])])}),V=[g(),p(),h()],P=Nb.sketch({dom:C,components:V.map((function(t){return t.asSpec()}))}),H=x("Brightness",iw,-100,0,100),z=x("Contrast",uw,-100,0,100),N=x("Gamma",rw,-100,0,100),L=w("R"),W=w("G"),U=w("B"),j=[g(),L,W,U,h()],G=Nb.sketch({dom:C,components:j.map((function(t){return t.asSpec()}))}),X=vt.some(ow),q=vt.some(ew),Y=[o("crop","Crop",S(_,vt.none(),(function(n){t.showCrop()})),!1),o("resize","Resize",S(D,vt.none(),(function(n){T.getOpt(n).each((function(n){var e=t.getMeasurements(),o=e.width,r=e.height
vf.setValue(n,{width:o,height:r})}))})),!1),o("orientation","Orientation",S(R,vt.none(),k),!1),o("brightness","Brightness",S(H,vt.none(),k),!1),o("sharpen","Sharpen",S(P,X,k),!1),o("contrast","Contrast",S(z,vt.none(),k),!1),o("color-levels","Color levels",S(G,vt.none(),k),!1),o("gamma","Gamma",S(N,vt.none(),k),!1),o("invert","Invert",S(P,q,k),!1)],K=Nb.sketch({dom:C,components:Y.map((function(t){return t.asSpec()}))}),J=Tm(Nb.sketch({dom:{tag:"div"},components:[K],containerBehaviours:qa([Cg.config({})])}))
return{memContainer:J,getApplyButton:function(t){return J.getOpt(t).map((function(t){var n=t.components()[0]
return n.components()[n.components().length-1]}))}}}(C,n)
function _(t,n){y.getOpt(t).each((function(t){var e=p.get(),o=kn(t.element),r=xn(t.element),i=n.dom.naturalWidth*e,u=n.dom.naturalHeight*e,a=Math.max(0,o/2-i/2),c=Math.max(0,r/2-u/2),s={left:a.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:u.toString()+"px",position:"absolute"}
dn(n,s),g.getOpt(t).each((function(t){dn(t.element,s)})),h.on((function(t){var n=v.get()
t.setRect({x:n.x*e+a,y:n.y*e+c,w:n.w*e,h:n.h*e}),t.setClampRect({x:a,y:c,w:i,h:u}),t.setViewPortRect({x:0,y:0,w:o,h:r})}))}))}function T(t,n){var e,o=At.fromTag("img")
return on(o,"src",n),e=o.dom,new bp((function(t){var n=function(){e.removeEventListener("load",n),t(e)}
e.complete?t(e):e.addEventListener("load",n)})).then((function(){t.getSystem().isConnected()&&y.getOpt(t).map((function(t){var n=bu({element:o})
Cg.replaceAt(t,1,vt.some(n))
var e=b.get(),r={x:0,y:0,w:o.dom.naturalWidth,h:o.dom.naturalHeight}
b.set(r)
var i,u=yC.inflate(r,-20,-20)
v.set(u),e.w===r.w&&e.h===r.h||(i=o,y.getOpt(t).each((function(t){var n=kn(t.element),e=xn(t.element),o=i.dom.naturalWidth,r=i.dom.naturalHeight,u=Math.min(n/o,e/r)
1<=u?p.set(1):p.set(u)}))),_(t,o)}))}))}return{dom:{tag:"div",attributes:{role:"presentation"}},components:[O.memContainer.asSpec(),C.memContainer.asSpec(),k.container],behaviours:qa([vf.config({store:{mode:"manual",getValue:function(){return x.getBlobState()}}}),nm("image-tools-events",[wr(gC.undo(),(function(t,n){var o=x.undo()
S(t,o).then((function(n){w(t),e(t)}))})),wr(gC.redo(),(function(t,n){var o=x.redo()
S(t,o).then((function(n){w(t),e(t)}))})),wr(gC.zoom(),(function(t,n){var e=n.event.direction
C.zoom(t,e)})),wr(gC.back(),(function(t,n){var e,o=s(e=t)
S(e,o).then((function(t){w(e)})),(0,n.event.swap)(),C.hideCrop()})),wr(gC.apply(),(function(t,n){x.applyTempState((function(){s(t),(0,n.event.swap)()}))})),wr(gC.transform(),(function(t,n){return c(t,n.event.transform,i)})),wr(gC.tempTransform(),(function(t,n){var e=n.event.transform
u(t,x.getTempState().blob,e,(function(t){return x.addTempState(t)}),i)})),wr(gC.transformApply(),(function(t,n){var e=t,o=n.event.transform,r=n.event.swap,i=x.getBlobState().blob
u(e,i,o,(function(t){var n=x.addBlobState(t)
return s(e),n}),r)})),wr(gC.swap(),(function(t,n){k.updateButtonUndoStates(t,!1,!1)
var e=n.event.transform,o=n.event.swap
e.fold((function(){o()}),(function(n){c(t,n,o)}))}))]),Aw()])}}function EC(t){return!Tt(t,"items")}function DC(t,n){var e=t.label.map((function(t){return Fb(t,n)})),o=[ed.config({disabled:function(){return t.disabled||n.isDisabled()}}),tv(),wg.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return gr(t,Zb),vt.some(!0)}}),nm("textfield-change",[wr(pi(),(function(n,e){pr(n,Kb,{name:t.name})})),wr(Oi(),(function(n,e){pr(n,Kb,{name:t.name})}))]),Gb.config({})],r=t.validation.map((function(t){return Oy.config({getRoot:function(t){return qt(t.element)},invalidClass:"tox-invalid",validator:{validate:function(n){var e=vf.getValue(n),o=t.validator(e)
return wy(!0===o?Re.value(e):Re.error(o))},validateOnLoad:t.validateOnLoad}})})).toArray(),i=t.placeholder.fold(a({}),(function(t){return{placeholder:n.translate(t)}})),u=t.inputMode.fold(a({}),(function(t){return{inputmode:t}})),c=O(O({},i),u)
return Ab(e,Ub.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:c,inputClasses:[t.classname],inputBehaviours:qa(W([o,r])),selectOnFocus:!1,factory:iy}),(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),[ed.config({disabled:function(){return t.disabled||n.isDisabled()},onDisabled:function(t){Ub.getField(t).each(ed.disable)},onEnabled:function(t){Ub.getField(t).each(ed.enable)}}),tv()])}function BC(t){var n=Io(null)
return gu({readState:function(){return{timer:null!==n.get()?"set":"unset"}},setTimer:function(t){n.set(t)},cancel:function(){var t=n.get()
null!==t&&t.cancel()}})}function MC(t,n,e){var o=vf.getValue(e)
vf.setValue(n,o),DO(n)}function AC(t,n){var e=t.element,o=Yr(e),r=e.dom
"number"!==rn(e,"type")&&n(r,o)}function FC(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:i}}function IC(t,n){return{type:"menuitem",value:n,text:t,meta:{attach:void 0},onAction:i}}function RC(t,n){return e=t,R(P(n,(function(t){return t.type===e})),FC)
var e}function VC(t,n){var e=t.toLowerCase()
return P(n,(function(t){return ft((void 0!==t.meta&&void 0!==t.meta.text?t.meta:t).text.toLowerCase(),e)||ft(t.value.toLowerCase(),e)}))}function PC(t){return function(n,e,o){return it(e,"name").fold((function(){return t(e,o)}),(function(r){return n.field(r,t(e,o))}))}}function HC(t,n,e){var o=jo(e,{shared:{interpreter:function(n){return NO(t,n,o)}}})
return NO(t,n,o)}function zC(t,n,e){function o(){return At.fromDom(t.getContentAreaContainer())}function r(){return p||!e()}var i,u,a,c,s,l,f,d,m,g,p=Yh(t)
return{inlineDialog:(f=o,d=n,m=r,g={maxHeightFunction:kc()},function(){return m()?{type:"node",root:tn(f()),node:vt.from(f()),bubble:fc(12,12,LO),layouts:{onRtl:function(){return[xm]},onLtr:function(){return[ym]}},overrides:g}:{type:"hotspot",hotspot:d(),bubble:fc(-12,12,LO),layouts:{onRtl:function(){return[Ha]},onLtr:function(){return[za]}},overrides:g}}),banner:(c=o,s=n,l=r,function(){return l()?{type:"node",root:tn(c()),node:vt.from(c()),layouts:{onRtl:function(){return[Kg]},onLtr:function(){return[Kg]}}}:{type:"hotspot",hotspot:s(),layouts:{onRtl:function(){return[Ua]},onLtr:function(){return[Ua]}}}}),cursor:(u=t,function(){return{type:"selection",root:a(),getSelection:function(){var t=u.selection.getRng()
return vt.some(ns.range(At.fromDom(t.startContainer),t.startOffset,At.fromDom(t.endContainer),t.endOffset))}}}),node:(i=a=function(){return At.fromDom(t.getBody())},function(t){return{type:"node",root:i(),node:t}})}}function NC(t){return vt.from(t.getParam("style_formats")).filter(d).map((function(n){var e,o,r=(e=t,o=UO(n),e.formatter?i(o.customFormats):e.on("init",(function(){i(o.customFormats)})),o.formats)
function i(t){St(t,(function(t){e.formatter.has(t.name)||e.formatter.register(t.name,t.format)}))}return t.getParam("style_formats_merge",!1,"boolean")?WO.concat(r):r})).getOr(WO)}function LC(t,n,e){var o={type:"formatter",isSelected:n(t.format),getStylePreview:e(t.format)}
return jo(t,o)}function WC(t,n,e,o){var r=function(n){return R(n,(function(n){var i,u,c,s,f,d=kt(n)
if(ut(n,"items")){var m=r(n.items)
return jo(jo(n,{type:"submenu"}),{getStyleItems:a(m)})}return ut(n,"format")?LC(n,e,o):1===d.length&&wt(d,"title")?jo(n,{type:"separator"}):(s={type:"formatter",format:c="custom-"+(u=l((i=n).name)?i.name:Mr(i.title)),isSelected:e(c),getStylePreview:o(c)},f=jo(i,s),t.formatter.register(u,f),f)}))}
return r(n)}function UC(t){return function(n){if(h(e=n)&&1===e.nodeType){if(n.contentEditable===t)return!0
if(n.getAttribute("data-mce-contenteditable")===t)return!0}var e
return!1}}function jC(t,n,e,o,r){return{type:t,title:n,url:e,level:o,attach:r}}function GC(t){return t.innerText||t.textContent}function XC(t){return t&&"A"===t.nodeName&&void 0!==(t.id||t.name)&&hO(t)}function qC(t){return t&&/^(H[1-6])$/.test(t.nodeName)}function YC(t){return qC(t)&&hO(t)}function KC(t){var n,e=t.id||Mr("h")
return jC("header",GC(t),"#"+e,qC(n=t)?parseInt(n.nodeName.substr(1),10):0,(function(){t.id=e}))}function JC(t){var n=t.id||t.name
return jC("anchor",GC(t)||"#"+n,"#"+n,0,i)}function $C(t){return 0<jO(t.title).length}function QC(t){return l(t)&&/^https?/.test(t)}function ZC(t){return f(t)&&ot(t,(function(t){return!(d(n=t)&&n.length<=5&&j(n,QC))
var n})).isNone()}function tk(){var t,n=$v.getItem(YO)
if(null===n)return{}
try{t=JSON.parse(n)}catch(t){if(t instanceof SyntaxError)return console.log("Local storage "+YO+" was not valid JSON",t),{}
throw t}return ZC(t)?t:(console.log("Local storage "+YO+" was not valid format",t),{})}function nk(t){return it(tk(),t).getOr([])}function ek(t,n){var e,o
QC(t)&&(o=P(it(e=tk(),n).getOr([]),(function(n){return n!==t})),e[n]=[t].concat(o).slice(0,5),function(t){if(!ZC(t))throw new Error("Bad format for history:\n"+JSON.stringify(t))
$v.setItem(YO,JSON.stringify(t))}(e))}function ok(t){return!!t}function rk(t){return nt(VS.makeMap(t,/[, ]/),ok)}function ik(t){return vt.from(t.getParam("file_picker_callback")).filter(v)}function uk(t){return vt.from(t).filter(l).getOrUndefined()}function ak(t){return{getHistory:nk,addToHistory:ek,getLinkInformation:function(){return!1===(n=t).getParam("typeahead_urls")?vt.none():vt.some({targets:qO(n.getBody()),anchorTop:uk(n.getParam("anchor_top","#top")),anchorBottom:uk(n.getParam("anchor_bottom","#bottom"))})
var n},getValidationHandler:function(){return vt.from(void 0===(e=(n=t).getParam("file_picker_validator_handler",void 0,"function"))?n.getParam("filepicker_validator_handler",void 0,"function"):e)
var n,e},getUrlPicker:function(n){return e=s=t,o=d=n,i=vt.some((r=e).getParam("file_picker_types")).filter(ok),u=vt.some(r.getParam("file_browser_callback_types")).filter(ok),a=i.or(u).map(rk),c=ik(r).fold(S,(function(t){return a.fold(C,(function(t){return 0<kt(t).length&&t}))})),(g(c)?c?ik(e):vt.none():c[o]?ik(e):vt.none()).map((function(t){return function(n){return xy((function(e){var o=O({filetype:d,fieldname:n.fieldname},vt.from(n.meta).getOr({}))
t.call(s,(function(t,n){if(!l(t))throw new Error("Expected value to be string")
if(void 0!==n&&!f(n))throw new Error("Expected meta to be a object")
e({value:t,meta:n})}),n.value,o)}))}}))
var e,o,r,i,u,a,c,s,d}}}function ck(t,n,e){var o,r,i,u,a,c,s,l,f,d,m,g,p,h=Io(!1),v={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=Io(Xh(n)?"bottom":"top")).get,setDockingMode:o.set},b={shared:{providers:{icons:function(){return n.ui.registry.getAll().icons},menuItems:function(){return n.ui.registry.getAll().menuItems},translate:Zg.translate,isDisabled:function(){return n.mode.isReadOnly()||n.ui.isDisabled()},getSetting:n.getParam.bind(n)},interpreter:function(t){return NO(zO,t,b)},anchors:zC(n,e,v.isPositionedAtTop),header:v,getSink:function(){return Re.value(t)}},urlinput:ak(n),styleselect:(f=Io([]),d=Io([]),m=Io([]),g=Io([]),p=Io(!(l=function(t){var n=t.items
return void 0!==n&&0<n.length?U(n,l):[t.format]})),(s=n).on("PreInit",(function(t){var n=NC(s),e=WC(s,n,y,x)
f.set(e),d.set(U(e,l))})),s.on("addStyleModifications",(function(t){var n=WC(s,t.items,y,x)
m.set(n),p.set(t.replace),g.set(U(n,l))})),{getData:function(){var t=p.get()?[]:f.get(),n=m.get()
return t.concat(n)},getFlattenedKeys:function(){var t=p.get()?[]:d.get(),n=g.get()
return t.concat(n)}}),colorinput:{colorPicker:function(t,n){vb(c)(t,n)},hasCustomColors:function(){return Zv(a)},getColors:function(){return tb(u)},getColorCols:(i=u=a=c=n,function(){return eb(i)})},dialog:{isDraggableModal:(r=n,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return h.get()},setContextMenuState:function(t){return h.set(t)}}
function y(t){return function(){return s.formatter.match(t)}}function x(t){return function(){var n=s.formatter.get(t)
return void 0!==n?vt.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:s.dom.parseStyle(s.formatter.getCssText(t))}):vt.none()}}return b}function sk(t){return(at(pn(t,"position"),"fixed")?vt.none():Yt(t)).orThunk((function(){var n=At.fromTag("span")
return qt(t).bind((function(t){_e(t,n)
var e=Yt(n)
return Te(n),e}))}))}function lk(t){return sk(t).map(Cn).getOrThunk((function(){return Se(0,0)}))}function fk(t,n){var e=t.element
Ur(e,n.transitionClass),jr(e,n.fadeOutClass),Ur(e,n.fadeInClass),n.onShow(t)}function dk(t,n){var e=t.element
Ur(e,n.transitionClass),jr(e,n.fadeInClass),Ur(e,n.fadeOutClass),n.onHide(t)}function mk(t,n,e){return j(t,(function(t){switch(t){case"bottom":return n.bottom<=e.bottom
case"top":return n.y>=e.y}}))}function gk(t,n){return n.getInitialPos().map((function(n){return Be(n.bounds.x,n.bounds.y,kn(t),xn(t))}))}function pk(t,n,e){return e.getInitialPos().bind((function(o){switch(e.clearInitialPos(),o.position){case"static":return vt.some(i_.static())
case"absolute":var r=sk(t).map(Me).getOrThunk((function(){return Me(ve())}))
return vt.some(i_.absolute(xa("absolute",it(o.style,"left").map((function(t){return n.x-r.x})),it(o.style,"top").map((function(t){return n.y-r.y})),it(o.style,"right").map((function(t){return r.right-n.right})),it(o.style,"bottom").map((function(t){return r.bottom-n.bottom})))))
default:return vt.none()}}))}function hk(t,n,e){e.setDocked(!1),St(["left","right","top","bottom","position"],(function(n){return vn(t.element,n)})),n.onUndocked(t)}function vk(t,n,e,o){var r="fixed"===o.position
e.setDocked(r),wa(t.element,o),(r?n.onDocked:n.onUndocked)(t)}function bk(t,n,e,o,r){void 0===r&&(r=!1),n.contextual.each((function(n){n.lazyContext(t).each((function(i){var u=i.y<o.bottom&&i.bottom>o.y
u!==e.isVisible()&&(e.setVisible(u),r&&!u?(Xr(t.element,[n.fadeOutClass]),n.onHide(t)):(u?fk:dk)(t,n))}))}))}function yk(t,n,e){var o,r,u,a,c,s
e.isDocked()&&(r=n,u=e,s=(o=t).element,u.setDocked(!1),gk(c=o.element,a=u).bind((function(t){return pk(c,t,a)})).each((function(t){t.fold((function(){return hk(o,r,u)}),(function(t){return vk(o,r,u,t)}),i)})),u.setVisible(!0),r.contextual.each((function(t){qr(s,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(o)})),u_(o,r,u))}function xk(t,n){return wt(s_.getModes(t),n)}function wk(t){var n=t.element
qt(n).each((function(e){var o,r,i="padding-"+s_.getModes(t)[0]
s_.isDocked(t)?(o=kn(e),fn(n,"width",o+"px"),fn(e,i,wn(r=n)+(parseInt(gn(r,"margin-top"),10)||0)+(parseInt(gn(r,"margin-bottom"),10)||0)+"px")):(vn(n,"width"),vn(e,i))}))}function Sk(t,n){n?(jr(t,f_.fadeOutClass),Xr(t,[f_.transitionClass,f_.fadeInClass])):(jr(t,f_.fadeInClass),Xr(t,[f_.fadeOutClass,f_.transitionClass]))}function Ck(t,n){var e=At.fromDom(t.getContainer())
n?(Ur(e,d_),jr(e,m_)):(Ur(e,m_),jr(e,d_))}function kk(t,n){function e(t){u().each((function(n){return t(n.element)}))}function o(n){t.inline||wk(n),Ck(t,s_.isDocked(n)),n.getSystem().broadcastOn([cf()],{}),u().each((function(t){return t.getSystem().broadcastOn([cf()],{})}))}var r,i=rc(),u=n.getSink,a=t.inline?[]:[$a.config({channels:((r={})[l_()]={onReceive:wk},r)})]
return T([_g.config({}),s_.config({contextual:O({lazyContext:function(n){var e=wn(n.element),o=t.inline?t.getContentAreaContainer():t.getContainer(),r=Me(At.fromDom(o)),i=r.height-e,u=r.y+(xk(n,"top")?0:e)
return vt.some(Be(r.x,u,r.width,i))},onShow:function(){e((function(t){return Sk(t,!0)}))},onShown:function(t){e((function(t){return qr(t,[f_.transitionClass,f_.fadeInClass])})),i.get().each((function(n){var e,o=t.element,r=Ut(e=n)
va(r).filter((function(t){return!Lt(e,t)})).filter((function(t){return Lt(t,At.fromDom(r.dom.body))||Wt(o,t)})).each((function(){return pa(e)})),i.clear()}))},onHide:function(t){var n=t.element,o=u
ba(n).orThunk((function(){return o().toOptional().bind((function(t){return ba(t.element)}))})).fold(i.clear,i.set),e((function(t){return Sk(t,!1)}))},onHidden:function(){e((function(t){return qr(t,[f_.transitionClass])}))}},f_),lazyViewport:function(n){var e=Ae(),o=t.getParam("toolbar_sticky_offset",0,"number"),r=e.y+(xk(n,"top")?o:0),i=e.height-(xk(n,"bottom")?o:0)
return Be(e.x,r,e.width,i)},modes:[n.header.getDockingMode()],onDocked:o,onUndocked:o})],a,!0)}function Ok(t){return ro("menubutton",v_,t)}function _k(t,n){return n.getAnimationRoot.fold((function(){return t.element}),(function(n){return n(t)}))}function Tk(t){return t.dimension.property}function Ek(t,n){return t.dimension.getDimension(n)}function Dk(t,n){qr(_k(t,n),[n.shrinkingClass,n.growingClass])}function Bk(t,n){jr(t.element,n.openClass),Ur(t.element,n.closedClass),fn(t.element,Tk(n),"0px"),bn(t.element)}function Mk(t,n){jr(t.element,n.closedClass),Ur(t.element,n.openClass),vn(t.element,Tk(n))}function Ak(t,n,e,o){e.setCollapsed(),fn(t.element,Tk(n),Ek(n,t.element)),bn(t.element),Dk(t,n),Bk(t,n),n.onStartShrink(t),n.onShrunk(t)}function Fk(t,n,e){var o=Ek(n,t.element);("0px"===o?Ak:function(t,n,e,o){var r=o.getOrThunk((function(){return Ek(n,t.element)}))
e.setCollapsed(),fn(t.element,Tk(n),r),bn(t.element)
var i=_k(t,n)
jr(i,n.growingClass),Ur(i,n.shrinkingClass),Bk(t,n),n.onStartShrink(t)})(t,n,e,vt.some(o))}function Ik(t,n,e){var o=_k(t,n),r=Gr(o,n.shrinkingClass),i=Ek(n,t.element)
Mk(t,n)
var u=Ek(n,t.element);(r?function(){fn(t.element,Tk(n),i),bn(t.element)}:function(){Bk(t,n)})(),jr(o,n.shrinkingClass),Ur(o,n.growingClass),Mk(t,n),fn(t.element,Tk(n),u),e.setExpanded(),n.onStartGrow(t)}function Rk(t,n,e){return!0===Gr(_k(t,n),n.growingClass)}function Vk(t,n,e){return!0===Gr(_k(t,n),n.shrinkingClass)}function Pk(t){return"<alloy.field."+t+">"}function Hk(t){return{element:function(){return t.element.dom}}}function zk(t){return Jf.getCurrent(t).bind((function(t){return S_.isGrowing(t)||S_.hasGrown(t)?Jf.getCurrent(t).bind((function(t){return N(__.getSlotNames(t),(function(n){return __.isShowing(t,n)}))})):vt.none()}))}function Nk(t){var n=At.fromHtml(t),e=Kt(n),o=z(void 0!==n.dom.attributes?n.dom.attributes:[],(function(t,n){var e
return"class"===n.name?t:O(O({},t),((e={})[n.name]=n.value,e))}),{}),r=Array.prototype.slice.call(n.dom.classList,0),i=0===e.length?{}:{innerHtml:Er(n)}
return O({tag:Ft(n),classes:r,attributes:o},i)}function Lk(t){return Jf.getCurrent(t).each((function(t){return pa(t.element)}))}function Wk(t,n,e){function o(e){var o
!r.get()||"focusin"===(o=e).type&&(o.composed?$(o.composedPath()):vt.from(o.target)).map(At.fromDom).filter(Gn).exists((function(t){return Gr(t,"mce-pastebin")}))||(e.preventDefault(),Lk(n()),t.editorManager.setActive(t))}var r=Io(!1),i=rc()
function u(o){var i,u,a,c,s,l,f,d,m,g
o!==r.get()&&(r.set(o),i=t,u=n(),a=o,c=e.providers,d=u.element,m=a,g="data-mce-"+(s="tabindex"),vt.from(i.iframeElement).map(At.fromDom).each((function(t){m?(un(t,s).each((function(n){return on(t,g,n)})),on(t,s,-1)):(cn(t,s),un(t,g).each((function(n){on(t,s,n),cn(t,g)})))})),a?(M_.block(u,(f=c,function(t,n){return{dom:{tag:"div",attributes:{"aria-label":f.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Nk('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})),vn(d,"display"),cn(d,"aria-hidden"),i.hasFocus()&&Lk(u)):(l=Jf.getCurrent(u).exists((function(t){return ha(t.element)})),M_.unblock(u),fn(d,"display","none"),on(d,"aria-hidden","true"),l&&i.focus()),t.fire("AfterProgressState",{state:o}))}t.inline||t.on("PreInit",(function(){t.dom.bind(t.getWin(),"focusin",o),t.on("BeforeExecCommand",(function(t){"mcefocus"===t.command.toLowerCase()&&!0!==t.value&&o(t)}))})),t.on("ProgressState",(function(n){var e
i.on($g.clearTimeout),b(n.time)?(e=$g.setEditorTimeout(t,(function(){return u(n.state)}),n.time),i.set(e)):(u(n.state),i.clear())}))}function Uk(t,n,e){return{within:t,extra:n,withinWidth:e}}function jk(t,n,e){var o,r=(o=function(t,n){var o=e(t)
return vt.some({element:t,start:n,finish:n+o,width:o})},z(t,(function(t,n){return o(n,t.len).fold(a(t),(function(n){return{len:n.finish,list:t.list.concat([n])}}))}),{len:0,list:[]}).list),i=P(r,(function(t){return t.finish<=n})),u=H(i,(function(t,n){return t+n.width}),0)
return{within:i,extra:r.slice(i.length),withinWidth:u}}function Gk(t){return R(t,(function(t){return t.element}))}function Xk(t,n){var e=R(n,(function(t){return wu(t)}))
e_.setGroups(t,e)}function qk(t,n,e){var o,r,i,u,a,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,C=n.builtGroups.get()
0!==C.length&&(o=el(t,n,"primary"),r=Ty.getCoupled(t,"overflowGroup"),fn(o.element,"visibility","hidden"),u=Z(i=C.concat([r]),(function(t){return ba(t.element).bind((function(n){return t.getSystem().getByDom(n).toOptional()}))})),e([]),Xk(o,i),a=kn(o.element),0===(s=a,l=n.builtGroups.get(),d=r,x=(y=(0===(m=jk(l,s,f=function(t){return kn(t.element)})).extra.length?vt.some(m):vt.none()).getOrThunk((function(){return jk(l,s-f(d),f)}))).within,w=y.extra,S=y.withinWidth,(c=1===w.length&&w[0].width<=f(d)?(b=S,Uk(Gk(x.concat(w)),[],b)):1<=w.length?(p=w,h=d,v=S,Uk(Gk(x).concat([h]),Gk(p),v)):(g=S,Uk(Gk(x),[],g))).extra.length)?(Cg.remove(o,r),e([])):(Xk(o,c.within),e(c.extra)),vn(o.element,"visibility"),bn(o.element),u.each(_g.focus))}function Yk(t,n){var e=Ty.getCoupled(t,"toolbarSandbox")
uf.isOpen(e)?uf.close(e):uf.open(e,n.toolbar())}function Kk(t,n,e,o){var r=e.getBounds.map((function(t){return t()})),i=e.lazySink(t).getOrDie()
Ql.positionWithinBounds(i,n,{anchor:{type:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:R_()}}},r)}function Jk(t,n,e,o,r){e_.setGroups(n,r),Kk(t,n,e,o),Dg.on(t)}function $k(t){return R(t,(function(t){return wu(t)}))}function Qk(t,n,e){qk(t,e,(function(o){e.overflowGroups.set(o),n.getOpt(t).each((function(t){H_.setGroups(t,$k(o))}))}))}function Zk(t,n){nl(t,n,"overflow-button").bind((function(){return nl(t,n,"overflow")})).each((function(e){bO(t,n),S_.toggleGrow(e)}))}function tO(t){var n=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}))
return{dom:O({tag:"div",classes:["tox-toolbar__group"]},n),components:[L_.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:qa([Gb.config({}),_g.config({})])}}function nO(t){return L_.sketch(tO(t))}function eO(t,n){var e=Ji((function(n){var e=R(t.initGroups,nO)
e_.setGroups(n,e)}))
return qa([Pv(t.providers.isDisabled),tv(),wg.config({mode:n,onEscape:t.onEscape,selector:".tox-toolbar__group"}),nm("toolbar-events",[e])])}function oO(t){var n=t.cyclicKeying?"cyclic":"acyclic"
return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":tO({title:vt.none(),items:[]}),"overflow-button":yw({name:"more",icon:vt.some("more-drawer"),disabled:!1,tooltip:vt.some("More..."),primary:!1,borderless:!1},vt.none(),t.providers)},splitToolbarBehaviours:eO(t,n)}}function rO(t){var n=t.cyclicKeying?"cyclic":"acyclic"
return e_.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===rh.scrolling?["tox-toolbar--scrolling"]:[])},components:[e_.parts.groups({})],toolbarBehaviours:eO(t,n)})}function iO(t){return"string"==typeof t?t.split(" "):t}function uO(t,n){var e=O(O({},tT),n.menus),o=0<kt(n.menus).length,r=P(void 0===n.menubar||!0===n.menubar?iO("file edit view insert format tools table help"):iO(!1===n.menubar?"":n.menubar),(function(t){var e=Tt(tT,t)
return o?e||it(n.menus,t).exists((function(t){return Tt(t,"items")})):e}))
return P(R(r,(function(o){var r=e[o],i={title:r.title,items:iO(r.items)},u=n,a=t.getParam("removed_menuitems","").split(/[ ,]/)
return{text:i.title,getItems:function(){return U(i.items,(function(t){var n=t.toLowerCase()
return 0===n.trim().length||A(a,(function(t){return t===n}))?[]:"separator"===n||"|"===n?[{type:"separator"}]:u.menuItems[n]?[u.menuItems[n]]:[]}))}}})),(function(t){return 0<t.getItems().length&&A(t.getItems(),(function(t){return"separator"!==t.type}))}))}function aO(t){function n(){t._skinLoaded=!0,t.fire("SkinLoaded")}return function(){t.initialized?n():t.on("init",n)}}function cO(t,n,e){return new bp((function(o,r){e.load(n,o,r),t.on("remove",(function(){return e.unload(n)}))}))}function sO(t,n){var e,o,r,i,u,a,c,s,f=(r=(e=n).getParam("skin"),i=e.getParam("skin_url"),!1!==r&&(o=r||"oxide",i=i?e.documentBaseURI.toAbsolute(i):Wh.baseURL+"/skins/ui/"+o),i)
f&&n.contentCSS.push(f+(t?"/content.inline":"/content")+".min.css"),!1===n.getParam("skin")==0&&l(f)?bp.all([cO(n,f+"/skin.min.css",n.ui.styleSheetLoader),(a=n,c=f,s=At.fromDom(a.getElement()),ge(s).isSome()?cO(a,c+"/skin.shadowdom.min.css",Lh.DOM.styleSheetLoader):bp.resolve())]).then(aO(n),(u=n,"Skin could not be loaded",function(){return u.fire("SkinLoadError",{message:"Skin could not be loaded"})})):aO(n)()}function lO(t,n){return function(e){function o(){e.setActive(t.formatter.match(n))
var o=t.formatter.formatChanged(n,e.setActive)
r.set(o)}var r=oc()
return t.initialized?o():t.once("init",o),function(){t.off("init",o),r.clear()}}}function fO(t,n,e){return function(o){function r(){return e(o)}function i(){e(o),t.on(n,r)}return t.initialized?i():t.once("init",i),function(){t.off("init",i),t.off(n,r)}}}function dO(t){return function(n){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,n.format)}))}}}function mO(t,n){return function(){return t.execCommand(n)}}function gO(t,n,e){var o,r,i,u=e.dataset,a="basic"===u.type?function(){return R(u.data,(function(t){return LC(t,e.isSelectedFor,e.getPreviewFor)}))}:u.getData
return{items:(o=n,r=e,i=function(t,n,e){var o="formatter"===t.type&&r.isInvalid(t)
return 0===n?o?[]:c(t,n,!1,e).toArray():c(t,n,o,e).toArray()},{validateItems:s,getFetch:function(t,n){return function(e,o){o(pw(s(n()),ch.CLOSE_ON_EXECUTE,t,!1))}}}),getStyleItems:a}
function c(t,n,e,u){var a=o.shared.providers.translate(t.title)
if("separator"===t.type)return vt.some({type:"separator",text:a})
if("submenu"!==t.type)return vt.some(O({type:"togglemenuitem",text:a,icon:t.icon,active:t.isSelected(u),disabled:e,onAction:r.onAction(t)},t.getStylePreview().fold((function(){return{}}),(function(t){return{meta:{style:t}}}))))
var c=U(t.getStyleItems(),(function(t){return i(t,n,u)}))
return 0===n&&c.length<=0?vt.none():vt.some({type:"nestedmenuitem",text:a,disabled:c.length<=0,getSubmenuItems:function(){return U(t.getStyleItems(),(function(t){return i(t,n,u)}))}})}function s(t){var n=r.getCurrentValue(),e=r.shouldHide?0:1
return U(t,(function(t){return i(t,e,n)}))}}function pO(t,n,e){var o=gO(0,n,e),r=o.items,i=o.getStyleItems,u=fO(t,"NodeChange",(function(t){var n=t.getComponent()
e.updateText(n)}))
return mw({text:e.icon.isSome()?vt.none():e.text,icon:e.icon,tooltip:vt.from(e.tooltip),role:vt.none(),fetch:r.getFetch(n,i),onSetup:u,getApi:function(t){return{getComponent:a(t)}},columns:1,presets:"normal",classes:e.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",n.shared)}function hO(t){return function(t){for(;t=t.parentNode;){var n=t.contentEditable
if(n&&"inherit"!==n)return GO(t)}return!1}(t)&&!XO(t)}function vO(t,n){function e(n){return il(t)}function o(n,e){return function(o,r){return nl(o,t,r).map((function(t){return n(t,r)})).getOr(e)}}function r(t,n){return"true"!==rn(t.element,"aria-hidden")}var i,u=o(r,!1),a=o((function(t,n){var e
r(t)&&(fn(e=t.element,"display","none"),on(e,"aria-hidden","true"),pr(t,Ui(),{name:n,visible:!1}))})),c=(i=a,function(t,n){St(n,(function(n){return i(t,n)}))}),s=o((function(t,n){var e
r(t)||(vn(e=t.element,"display"),cn(e,"aria-hidden"),pr(t,Ui(),{name:n,visible:!0}))}))
return{uid:t.uid,dom:t.dom,components:n,behaviours:Ws(t.slotBehaviours),apis:{getSlotNames:e,getSlot:function(n,e){return nl(n,t,e)},isShowing:u,hideSlot:a,hideAllSlots:function(t){return c(t,e())},showSlot:s}}}function bO(t,n){nl(t,n,"overflow").each((function(e){qk(t,n,(function(t){var n=R(t,(function(t){return wu(t)}))
e_.setGroups(e,n)})),nl(t,n,"overflow-button").each((function(t){S_.hasGrown(e)&&Dg.on(t)})),S_.refresh(e)}))}var yO,xO,wO,SO="data-value",CO=function(t,n,e,o){return R(e,(function(e){return EC(e)?{type:"togglemenuitem",text:e.text,value:e.value,active:e.value===o,onAction:function(){vf.setValue(t,e.value),pr(t,Kb,{name:n}),_g.focus(t)}}:{type:"nestedmenuitem",text:e.text,getSubmenuItems:function(){return CO(t,n,e.items,o)}}}))},kO=function(t,n){return Z(t,(function(t){return EC(t)?st(t.value===n,t):kO(t.items,n)}))},OO=fl({name:"HtmlSelect",configFields:[so("options"),Ls("selectBehaviours",[_g,vf]),Oo("selectClasses",[]),Oo("selectAttributes",{}),bo("data")],factory:function(t,n){var e=R(t.options,(function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}})),o=t.data.map((function(t){return ur("initialValue",t)})).getOr({})
return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:e,behaviours:Us(t.selectBehaviours,[_g.config({}),vf.config({store:O({mode:"manual",getValue:function(t){return Yr(t.element)},setValue:function(n,e){N(t.options,(function(t){return t.value===e})).isSome()&&Kr(n.element,e)}},o)})])}}}),_O=Object.freeze({__proto__:null,events:function(t,n){var e=t.stream.streams.setup(t,n)
return Ki([wr(t.event,e),$i((function(){return n.cancel()}))].concat(t.cancelEvent.map((function(t){return[wr(t,(function(){return n.cancel()}))]})).getOr([])))}}),TO=Object.freeze({__proto__:null,throttle:BC,init:function(t){return t.stream.streams.state(t)}}),EO=da({fields:[lo("stream",ao("mode",{throttle:[so("delay"),Oo("stopEvent",!0),Xu("streams",{setup:function(t,n){var e=t.stream,o=rp(t.onStream,e.delay)
return n.setTimer(o),function(t,n){o.throttle(t,n),e.stopEvent&&n.stop()}},state:BC})]})),Oo("event","input"),bo("cancelEvent"),ju("onStream")],name:"streaming",active:_O,state:TO}),DO=function(t){AC(t,(function(t,n){return t.setSelectionRange(n.length,n.length)}))},BO=a("alloy.typeahead.itemexecute"),MO=a([bo("lazySink"),so("fetch"),Oo("minChars",5),Oo("responseTime",1e3),Wu("onOpen"),Oo("getHotspot",vt.some),Oo("getAnchorOverrides",a({})),Oo("layouts",vt.none()),Oo("eventOrder",{}),Fo("model",{},[Oo("getDisplayText",(function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value})),Oo("selectsOver",!0),Oo("populateFromBrowse",!0)]),Wu("onSetValue"),Uu("onExecute"),Wu("onItemExecute"),Oo("inputClasses",[]),Oo("inputAttributes",{}),Oo("inputStyles",{}),Oo("matchWidth",!0),Oo("useMinWidth",!1),Oo("dismissOnBlur",!0),Nu(["openClass"]),bo("initialData"),Ls("typeaheadBehaviours",[_g,vf,EO,wg,Dg,Ty]),ir("previewing",(function(){return Io(!0)}))].concat(ry()).concat(Vy())),AO=a([zf({schema:[zu()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(n,e){t.previewing.get()?n.getSystem().getByUid(t.uid).each((function(o){(function(t,n,e){if(t.selectsOver){var o=vf.getValue(n),r=t.getDisplayText(o),i=vf.getValue(e)
return 0===t.getDisplayText(i).indexOf(r)?vt.some((function(){var t
MC(0,n,e),t=r.length,AC(n,(function(n,e){return n.setSelectionRange(t,e.length)}))})):vt.none()}return vt.none()})(t.model,o,e).fold((function(){return rd.dehighlight(n,e)}),(function(t){return t()}))})):n.getSystem().getByUid(t.uid).each((function(n){t.model.populateFromBrowse&&MC(t.model,n,e)})),t.previewing.set(!1)},onExecute:function(n,e){return n.getSystem().getByUid(t.uid).toOptional().map((function(t){return pr(t,BO(),{item:e}),!0}))},onHover:function(n,e){t.previewing.set(!1),n.getSystem().getByUid(t.uid).each((function(n){t.model.populateFromBrowse&&MC(t.model,n,e)}))}}}})]),FO=dl({name:"Typeahead",configFields:MO(),partFields:AO(),factory:function(t,n,e,o){function r(n,e,r){t.previewing.set(!1)
var a=Ty.getCoupled(n,"sandbox")
uf.isOpen(a)?Jf.getCurrent(a).each((function(t){rd.getHighlighted(t).fold((function(){r(t)}),(function(){br(a,t.element,"keydown",e)}))})):My(t,u(n),n,a,o,(function(t){Jf.getCurrent(t).each(r)}),gy.HighlightFirst).get(i)}function u(t){return function(n){return n.map((function(n){var e=U(rt(n.menus),(function(t){return P(t.items,(function(t){return"item"===t.type}))}))
return vf.getState(t).update(R(e,(function(t){return t.data}))),n}))}}var a=Ib(t),c=[_g.config({}),vf.config({onSetValue:t.onSetValue,store:O({mode:"dataset",getDataKey:function(t){return Yr(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(n,e){Kr(n.element,t.model.getDisplayText(e))}},t.initialData.map((function(t){return ur("initialValue",t)})).getOr({}))}),EO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(n,e){var r,a=Ty.getCoupled(n,"sandbox")
_g.isFocused(n)&&Yr(n.element).length>=t.minChars&&(r=Jf.getCurrent(a).bind((function(t){return rd.getHighlighted(t).map(vf.getValue)})),t.previewing.set(!0),My(t,u(n),n,a,o,(function(n){Jf.getCurrent(a).each((function(n){r.fold((function(){t.model.selectsOver&&rd.highlightFirst(n)}),(function(t){rd.highlightBy(n,(function(n){return vf.getValue(n).value===t.value})),rd.getHighlighted(n).orThunk((function(){return rd.highlightFirst(n),vt.none()}))}))}))}),gy.HighlightFirst).get(i))},cancelEvent:Ai()}),wg.config({mode:"special",onDown:function(t,n){return r(t,n,rd.highlightFirst),vt.some(!0)},onEscape:function(t){var n=Ty.getCoupled(t,"sandbox")
return uf.isOpen(n)?(uf.close(n),vt.some(!0)):vt.none()},onUp:function(t,n){return r(t,n,rd.highlightLast),vt.some(!0)},onEnter:function(n){var e=Ty.getCoupled(n,"sandbox"),o=uf.isOpen(e)
if(o&&!t.previewing.get())return Jf.getCurrent(e).bind((function(t){return rd.getHighlighted(t)})).map((function(t){return pr(n,BO(),{item:t}),!0}))
var r=vf.getValue(n)
return gr(n,Ai()),t.onExecute(e,n,r),o&&uf.close(e),vt.some(!0)}}),Dg.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Ty.config({others:{sandbox:function(n){return Iy(t,n,{onOpen:function(){return Dg.on(n)},onClose:function(){return Dg.off(n)}})}}}),nm("typeaheadevents",[Zi((function(n){Ay(t,u(n),n,o,i,gy.HighlightFirst).get(i)})),wr(BO(),(function(n,e){var o=Ty.getCoupled(n,"sandbox")
MC(t.model,n,e.event.item),gr(n,Ai()),t.onItemExecute(n,o,e.event.item,vf.getValue(n)),uf.close(o),DO(n)}))].concat(t.dismissOnBlur?[wr(ki(),(function(t){var n=Ty.getCoupled(t,"sandbox")
ba(n.element).isNone()&&uf.close(n)}))]:[]))]
return{uid:t.uid,dom:Rb(jo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:O(O({},a),Us(t.typeaheadBehaviours,c)),eventOrder:t.eventOrder}}}),IO=function(t){return O(O({},t),{toCached:function(){return IO(t.toCached())},bindFuture:function(n){return IO(t.bind((function(t){return t.fold((function(t){return wy(Re.error(t))}),(function(t){return n(t)}))})))},bindResult:function(n){return IO(t.map((function(t){return t.bind(n)})))},mapResult:function(n){return IO(t.map((function(t){return t.map(n)})))},mapError:function(n){return IO(t.map((function(t){return t.mapError(n)})))},foldResult:function(n,e){return t.map((function(t){return t.fold(n,e)}))},withTimeout:function(n,e){return IO(xy((function(o){var r=!1,i=setTimeout((function(){r=!0,o(Re.error(e()))}),n)
t.get((function(t){r||(clearTimeout(i),o(t))}))})))}})},RO=function(t){return IO(xy(t))},VO={type:"separator"},PO=Mr("aria-invalid"),HO={bar:PC((function(t,n){return e=n.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:R(t.items,e.interpreter)}
var e})),collection:PC((function(t,n){return r=t,i=n.shared.providers,s=r.label.map((function(t){return Fb(t,i)})),l=e((function(t,n,e,o){n.stop(),i.isDisabled()||pr(t,Qb,{name:r.name,value:o})})),f=[wr(li(),e((function(t,n,e){pa(e)}))),wr(vi(),l),wr(Di(),l),wr(fi(),e((function(t,n,e){Tu(t.element,"."+hh).each((function(t){jr(t,hh)})),Ur(e,hh)}))),wr(di(),e((function(t){Tu(t.element,"."+hh).each((function(t){jr(t,hh)}))}))),Zi(e((function(t,n,e,o){pr(t,Qb,{name:r.name,value:o})})))],Ab(s,Ub.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==r.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:c},behaviours:qa([ed.config({disabled:i.isDisabled,onDisabled:function(t){o(t,(function(t){Ur(t,"tox-collection__item--state-disabled"),on(t,"aria-disabled",!0)}))},onEnabled:function(t){o(t,(function(t){jr(t,"tox-collection__item--state-disabled"),cn(t,"aria-disabled")}))}}),tv(),Cg.config({}),vf.config({store:{mode:"memory",initialValue:[]},onSetValue:function(t,n){var e=t,o=R(n,(function(t){var n=Zg.translate(t.text),e=1===r.columns?'<div class="tox-collection__item-label">'+n+"</div>":"",o='<div class="tox-collection__item-icon">'+t.icon+"</div>",u={_:" "," - ":" ","-":" "},a=n.replace(/\_| \- |\-/g,(function(t){return u[t]}))
return'<div class="tox-collection__item'+(i.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+Xb.encodeAllRaw(t.value)+'" title="'+a+'" aria-label="'+a+'">'+o+e+"</div>"})),u=R("auto"!==r.columns&&1<r.columns?I(o,r.columns):[o],(function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}))
Dr(e.element,u.join("")),"auto"===r.columns&&qp(t,5,"tox-collection__item").each((function(n){var e=n.numRows,o=n.numColumns
wg.setGridSize(t,e,o)})),gr(t,oy)}}),Gb.config({}),wg.config(1===(a=r.columns)?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===a?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:"."+lh}}),nm("collection-events",f)]),eventOrder:((u={})[Ti()]=["disabling","alloy.base.behaviour","collection-events"],u)}),["tox-form__group--collection"],[])
function e(t){return function(n,e){Eu(e.event.target,"[data-collection-item-value]").each((function(o){t(n,e,o,rn(o,"data-collection-item-value"))}))}}function o(t,n){return R(is(t.element,".tox-collection__item"),n)}var r,i,u,a,s,l,f})),alertbanner:PC((function(t,n){return o=n.shared.providers,Nb.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+(e=t).level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Qg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Mm(e.icon,o.icons),attributes:{title:o.translate(e.iconTooltip)}},action:function(t){pr(t,Qb,{name:"alert-banner",value:e.url})},buttonBehaviours:qa([Am()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(e.text)}}]})
var e,o})),input:PC((function(t,n){return o=n.shared.providers,DC({name:(e=t).name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:e.disabled,classname:"tox-textfield",validation:vt.none(),maximized:e.maximized},o)
var e,o})),textarea:PC((function(t,n){return o=n.shared.providers,DC({name:(e=t).name,multiline:!0,label:e.label,inputMode:vt.none(),placeholder:e.placeholder,flex:!0,disabled:e.disabled,classname:"tox-textarea",validation:vt.none(),maximized:e.maximized},o)
var e,o})),label:PC((function(t,n){return r={dom:{tag:"label",innerHtml:(o=n.shared).providers.translate((e=t).label),classes:["tox-label"]}},i=R(e.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:qa([Aw(),Cg.config({}),Fw(vt.none()),wg.config({mode:"acyclic"})])}
var e,o,r,i})),iframe:(yO=function(t,n){return e=t,o=n.shared.providers,u=US&&e.sandboxed,a=O(O({},e.label.map((function(t){return{title:t}})).getOr({})),u?{sandbox:"allow-scripts allow-same-origin"}:{}),r=u,i=Io(""),c={getValue:function(t){return i.get()},setValue:function(t,n){var e
r?on(t.element,"srcdoc",n):(on(t.element,"src","javascript:''"),(e=t.element.dom.contentWindow.document).open(),e.write(n),e.close()),i.set(n)}},Ab(e.label.map((function(t){return Fb(t,o)})),Ub.parts.field({factory:{sketch:function(t){return Nx({uid:t.uid,dom:{tag:"iframe",attributes:a},behaviours:qa([Gb.config({}),_g.config({}),zS(vt.none(),c.getValue,c.setValue)])})}}}),["tox-form__group--stretched"],[])
var e,o,r,i,u,a,c},function(t,n,e){var o=jo(n,{source:"dynamic"})
return PC(yO)(t,o,e)}),button:PC((function(t,n){return e=t,o=n.shared.providers,r=Cw(e.name,"custom"),Ab(vt.none(),Ub.parts.field(O({factory:Qg},ww(e,vt.some(r),o,[NS(""),Aw()]))),[],[])
var e,o,r})),checkbox:PC((function(t,n){return r=t,i=n.shared.providers,u=vf.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,n){t.element.dom.checked=n}}}),a=Ub.parts.field({factory:{sketch:c},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:qa([Aw(),ed.config({disabled:function(){return r.disabled||i.isDisabled()}}),Gb.config({}),_g.config({}),u,wg.config({mode:"special",onEnter:e,onSpace:e,stopSpaceKeyup:!0}),nm("checkbox-events",[wr(hi(),(function(t,n){pr(t,Kb,{name:r.name})}))])])}),s=Ub.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:i.translate(r.label)},behaviours:qa([Ww.config({})])}),l=Tm({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[o("checked"),o("unchecked")]}),Ub.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[a,l.asSpec(),s],fieldBehaviours:qa([ed.config({disabled:function(){return r.disabled||i.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Ub.getField(t).each(ed.disable)},onEnabled:function(t){Ub.getField(t).each(ed.enable)}}),tv()])})
function e(t){return t.element.dom.click(),vt.some(!0)}function o(t){return Im("checked"===t?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t]},i.icons)}var r,i,u,a,s,l})),colorinput:PC((function(t,n){return o=t,r=n.shared,u=n.colorinput,s=Ub.parts.field({factory:iy,inputClasses:["tox-textfield"],onSetValue:function(t){return Oy.run(t).get(i)},inputBehaviours:qa([ed.config({disabled:r.providers.isDisabled}),tv(),Gb.config({}),Oy.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return qt(t.element)},notify:{onValid:function(t){var n=vf.getValue(t)
pr(t,Uw,{color:n})}},validator:{validateOnLoad:!1,validate:function(t){var n=vf.getValue(t)
if(0===n.length)return wy(Re.value(!0))
var e=At.fromTag("span")
fn(e,"background-color",n)
var o=pn(e,"background-color").fold((function(){return Re.error("blah")}),(function(t){return Re.value(n)}))
return wy(o)}}})]),selectOnFocus:!1}),l=o.label.map((function(t){return Fb(t,r.providers)})),f=Tm((a={dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[za,Ha,Ua]},onLtr:function(){return[Ha,za,Ua]}},components:[],fetch:ub(u.getColors(),u.hasCustomColors()),columns:u.getColorCols(),presets:"color",onItemAction:function(t,n){f.getOpt(t).each((function(t){"custom"===n?u.colorPicker((function(n){n.fold((function(){return gr(t,Gw)}),(function(n){e(t,n),nb(n)}))}),"#ffffff"):e(t,"remove"===n?"":n)}))}},Lw.sketch({dom:a.dom,components:a.components,toggleClass:"mce-active",dropdownBehaviours:qa([Vv((c=r).providers.isDisabled),tv(),Ww.config({}),Gb.config({})]),layouts:a.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:c.getSink,fetch:function(t){return xy((function(t){return a.fetch(t)})).map((function(n){return vt.from(kb(jo(lb(Mr("menu-value"),n,(function(n){a.onItemAction(t,n)}),a.columns,a.presets,ch.CLOSE_ON_EXECUTE,S,c.providers),{movement:fb(a.columns,a.presets)})))}))},parts:{menu:zp(0,0,a.presets)}}))),Ub.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:l.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[s,f.asSpec()]}]),fieldBehaviours:qa([nm("form-field-events",[wr(Uw,(function(t,n){f.getOpt(t).each((function(t){fn(t.element,"background-color",n.event.color)})),pr(t,Kb,{name:o.name})})),wr(jw,(function(t,n){Ub.getField(t).each((function(e){vf.setValue(e,n.event.value),Jf.getCurrent(t).each(_g.focus)}))})),wr(Gw,(function(t,n){Ub.getField(t).each((function(n){Jf.getCurrent(t).each(_g.focus)}))}))])])})
function e(t,n){pr(t,jw,{value:n})}var o,r,u,a,c,s,l,f})),colorpicker:PC((function(t){var n=Tm(Vx(Px,(function(t){return"tox-"+t})).sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){pr(t,Qb,{name:"hex-valid",value:!0})},onInvalidHex:function(t){pr(t,Qb,{name:"hex-valid",value:!1})}}))
return{dom:{tag:"div"},components:[n.asSpec()],behaviours:qa([vf.config({store:{mode:"manual",getValue:function(t){var e=n.get(t)
return Jf.getCurrent(e).bind((function(t){return vf.getValue(t).hex})).map((function(t){return"#"+t})).getOr("")},setValue:function(t,e){var o=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),r=n.get(t)
Jf.getCurrent(r).fold((function(){console.log("Can not find form")}),(function(t){vf.setValue(t,{hex:vt.from(o[1]).getOr("")}),TS.getField(t,"hex").each((function(t){gr(t,pi())}))}))}}}),Aw()])}})),dropzone:PC((function(t,n){return function(t,n){function e(t,n){n.stop()}function o(t){return function(n,e){St(t,(function(t){t(n,e)}))}}function r(t,n){ed.isDisabled(t)||u(t,n.event.raw.dataTransfer.files)}function i(t,n){u(t,n.event.raw.target.files)}function u(e,o){var r,i
vf.setValue(e,(r=o,i=VS.explode(n.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),P(Ct(r),(function(t){return A(i,(function(n){return Bt(t.name.toLowerCase(),"."+n.toLowerCase())}))})))),pr(e,Kb,{name:t.name})}var a=Tm({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:qa([nm("input-file-events",[_r(vi()),_r(Di())])])})
return Ab(t.label.map((function(t){return Fb(t,n)})),Ub.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:qa([NS([]),Aw(),ed.config({}),Dg.config({toggleClass:"dragenter",toggleOnExecute:!1}),nm("dropzone-events",[wr("dragenter",o([e,Dg.toggle])),wr("dragleave",o([e,Dg.toggle])),wr("dragover",e),wr("drop",o([e,r])),wr(hi(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:n.translate("Drop an image here")}},Qg.sketch({dom:{tag:"button",innerHtml:n.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[a.asSpec()],action:function(t){a.get(t).element.dom.click()},buttonBehaviours:qa([Gb.config({}),Vv(n.isDisabled),tv()])})]}]}}}}),["tox-form__group--stretched"],[])}(t,n.shared.providers)})),grid:PC((function(t,n){return e=n.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:R(t.items,e.interpreter)}
var e})),listbox:PC((function(t,n){return e=t,r=(o=n).shared.providers,u=$(e.items).filter(EC),c=e.label.map((function(t){return Fb(t,r)})),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Ub.parts.field({dom:{},factory:{sketch:function(t){return mw({uid:t.uid,text:u.map((function(t){return t.text})),icon:vt.none(),tooltip:e.label,role:vt.none(),fetch:function(t,n){n(pw(CO(t,e.name,e.items,vf.getValue(t)),ch.CLOSE_ON_EXECUTE,o,!1))},onSetup:a(i),getApi:a({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Gb.config({}),vf.config({store:{mode:"manual",initialValue:u.map((function(t){return t.value})).getOr(""),getValue:function(t){return rn(t.element,SO)},setValue:function(t,n){kO(e.items,n).each((function(n){on(t.element,SO,n.value),pr(t,aC,{text:n.text})}))}}})]},"tox-listbox",o.shared)}}})]},Ub.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:W([c.toArray(),[s]]),fieldBehaviours:qa([ed.config({disabled:a(e.disabled),onDisabled:function(t){Ub.getField(t).each(ed.disable)},onEnabled:function(t){Ub.getField(t).each(ed.enable)}})])})
var e,o,r,u,c,s})),selectbox:PC((function(t,n){return e=t,o=n.shared.providers,r=R(e.items,(function(t){return{text:o.translate(t.text),value:t.value}})),i=e.label.map((function(t){return Fb(t,o)})),u={dom:{tag:"div",classes:["tox-selectfield"]},components:W([[Ub.parts.field({dom:{},selectAttributes:{size:e.size},options:r,factory:OO,selectBehaviours:qa([ed.config({disabled:function(){return e.disabled||o.isDisabled()}}),Gb.config({}),nm("selectbox-change",[wr(hi(),(function(t,n){pr(t,Kb,{name:e.name})}))])])})],(1<e.size?vt.none():vt.some(Im("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},o.icons))).toArray()])},Ub.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:W([i.toArray(),[u]]),fieldBehaviours:qa([ed.config({disabled:function(){return e.disabled||o.isDisabled()},onDisabled:function(t){Ub.getField(t).each(ed.disable)},onEnabled:function(t){Ub.getField(t).each(ed.enable)}}),tv()])})
var e,o,r,i,u})),sizeinput:PC((function(t,n){return Dw(t,n.shared.providers)})),urlinput:PC((function(t,n){return function(t,n,e){function o(n){var o=vf.getValue(n)
e.addToHistory(o.value,t.filetype)}var r,u,a,c,s=n.shared.providers,l=Ub.parts.field({factory:FO,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":PO,type:"url"},minChars:0,responseTime:0,fetch:function(o){var r,i,u,a,c=pw((r=t.filetype,i=e,u=vf.getValue(o),a=void 0!==u.meta.text?u.meta.text:u.value,i.getLinkInformation().fold((function(){return[]}),(function(t){var n=VC(a,R(i.getHistory(r),(function(t){return IC(t,t)})))
return"file"===r?z([n,VC(a,RC("header",t.targets)),VC(a,W([vt.from(t.anchorTop).map((function(t){return IC("<top>",t)})).toArray(),RC("anchor",t.targets),vt.from(t.anchorBottom).map((function(t){return IC("<bottom>",t)})).toArray()]))],(function(t,n){return 0===t.length||0===n.length?t.concat(n):t.concat(VO,n)}),[]):n}))),ch.BUBBLE_TO_SANDBOX,n,!1)
return wy(c)},getHotspot:function(t){return h.getOpt(t)},onSetValue:function(t,n){t.hasConfigured(Oy)&&Oy.run(t).get(i)},typeaheadBehaviours:qa(W([e.getValidationHandler().map((function(n){return Oy.config({getRoot:function(t){return qt(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,n){d.getOpt(t).each((function(t){on(t.element,"title",s.translate(n))}))}},validator:{validate:function(e){var o=vf.getValue(e)
return RO((function(e){n({type:t.filetype,url:o.value},(function(t){var n,o
"invalid"===t.status?(n=Re.error(t.message),e(n)):(o=Re.value(t.message),e(o))}))}))},validateOnLoad:!1}})})).toArray(),[ed.config({disabled:function(){return t.disabled||s.isDisabled()}}),Gb.config({}),nm("urlinput-events",W(["file"===t.filetype?[wr(pi(),(function(n){pr(n,Kb,{name:t.name})}))]:[],[wr(hi(),(function(n){pr(n,Kb,{name:t.name}),o(n)})),wr(Oi(),(function(n){pr(n,Kb,{name:t.name}),o(n)}))]]))]])),eventOrder:((r={})[pi()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:n.shared.getSink,parts:{menu:zp(0,0,"normal")},onExecute:function(t,n,e){pr(n,Zb,{})},onItemExecute:function(n,e,r,i){o(n),pr(n,Kb,{name:t.name})}}),f=t.label.map((function(t){return Fb(t,s)})),d=Tm((u="invalid",a=vt.some(PO),Im("warning",{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+u],attributes:O({title:s.translate(c=void 0===c?u:c),"aria-live":"polite"},a.fold((function(){return{}}),(function(t){return{id:t}})))},s.icons))),m=Tm({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[d.asSpec()]}),g=e.getUrlPicker(t.filetype),p=Mr("browser.url.event"),h=Tm({dom:{tag:"div",classes:["tox-control-wrap"]},components:[l,m.asSpec()],behaviours:qa([ed.config({disabled:function(){return t.disabled||s.isDisabled()}})])}),v=Tm(Sw({name:t.name,icon:vt.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return gr(t,p)}),s,[],["tox-browse-url"]))
return Ub.sketch({dom:Yb([]),components:f.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:W([[h.asSpec()],g.map((function(){return v.asSpec()})).toArray()])}]),fieldBehaviours:qa([ed.config({disabled:function(){return t.disabled||s.isDisabled()},onDisabled:function(t){Ub.getField(t).each(ed.disable),v.getOpt(t).each(ed.disable)},onEnabled:function(t){Ub.getField(t).each(ed.enable),v.getOpt(t).each(ed.enable)}}),tv(),nm("url-input-events",[wr(p,(function(n){Jf.getCurrent(n).each((function(e){var o=vf.getValue(e),r=O({fieldname:t.name},o)
g.each((function(o){o(r).get((function(o){vf.setValue(e,o),pr(n,Kb,{name:t.name})}))}))}))}))])])})}(t,n,n.urlinput)})),customeditor:PC((function(t){var n=rc(),e=Tm({dom:{tag:t.tag}}),o=rc()
return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:qa([nm("custom-editor-events",[Ji((function(r){e.getOpt(r).each((function(e){(Tt(t,"init")?t.init(e.element.dom):RS.load(t.scriptId,t.scriptUrl).then((function(n){return n(e.element.dom,t.settings)}))).then((function(t){o.on((function(n){t.setValue(n)})),o.clear(),n.set(t)}))}))}))]),vf.config({store:{mode:"manual",getValue:function(){return n.get().fold((function(){return o.get().getOr("")}),(function(t){return t.getValue()}))},setValue:function(t,e){n.get().fold((function(){o.set(e)}),(function(t){return t.setValue(e)}))}}}),Aw()]),components:[e.asSpec()]}})),htmlpanel:PC((function(t){return"presentation"===t.presets?Nb.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Nb.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:qa([Gb.config({}),_g.config({})])})})),imagetools:PC((function(t,n){return TC(t,n.shared.providers)})),table:PC((function(t,n){return function(t,n){function e(t){return{dom:{tag:"td",innerHtml:n.translate(t)}}}return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:R(t.header,(function(t){return{dom:{tag:"th",innerHtml:n.translate(t)}}}))}]},{dom:{tag:"tbody"},components:R(t.cells,(function(t){return{dom:{tag:"tr"},components:R(t,e)}}))}],behaviours:qa([Gb.config({}),_g.config({})])}}(t,n.shared.providers)})),panel:PC((function(t,n){return{dom:{tag:"div",classes:t.classes},components:R(t.items,n.shared.interpreter)}}))},zO={field:function(t,n){return n}},NO=function(t,n,e){return it(HO,n.type).fold((function(){return console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n}),(function(o){return o(t,n,e)}))},LO={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},WO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],UO=function(t){return z(t,(function(t,n){if(Tt(n,"items")){var e=UO(n.items)
return{customFormats:t.customFormats.concat(e.customFormats),formats:t.formats.concat([{title:n.title,items:e.formats}])}}if(Tt(n,"inline")||Tt(n,"block")||Tt(n,"selector")){var o="custom-"+(l(n.name)?n.name:n.title.toLowerCase())
return{customFormats:t.customFormats.concat([{name:o,format:n}]),formats:t.formats.concat([{title:n.title,format:o,icon:n.icon}])}}return O(O({},t),{formats:t.formats.concat(n)})}),{customFormats:[],formats:[]})},jO=VS.trim,GO=UC("true"),XO=UC("false"),qO=function(t){var n=R(is(At.fromDom(t),"h1,h2,h3,h4,h5,h6,a:not([href])"),(function(t){return t.dom}))
return P(R(P(n,YC),KC).concat(R(P(n,XC),JC)),$C)},YO="tinymce-url-history",KO=Gf,JO=Uf,$O=a([Oo("shell",!1),so("makeItem"),Oo("setupItem",i),bf("listBehaviours",[Cg])]),QO=a([Nf({name:"items",overrides:function(){return{behaviours:qa([Cg.config({})])}}})]),ZO=dl({name:a("CustomList")(),configFields:$O(),partFields:QO(),factory:function(t,n,e,o){var r=t.shell?{behaviours:[Cg.config({})],components:[]}:{behaviours:[],components:n}
return{uid:t.uid,dom:t.dom,components:r.components,behaviours:Us(t.listBehaviours,r.behaviours),apis:{setItems:function(n,e){var o
o=n,(t.shell?vt.some(o):nl(o,t,"items")).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var r=Cg.contents(o),i=e.length,u=i-r.length,a=0<u?F(u,(function(){return t.makeItem()})):[],c=r.slice(i)
St(c,(function(t){return Cg.remove(o,t)})),St(a,(function(t){return Cg.append(o,t)}))
var s=Cg.contents(o)
St(s,(function(o,r){t.setupItem(n,o,e[r],r)}))}))}}}},apis:{setItems:function(t,n,e){t.setItems(n,e)}}}),t_=a([so("dom"),Oo("shell",!0),Ls("toolbarBehaviours",[Cg])]),n_=a([Nf({name:"groups",overrides:function(){return{behaviours:qa([Cg.config({})])}}})]),e_=dl({name:"Toolbar",configFields:t_(),partFields:n_(),factory:function(t,n,e,o){var r=t.shell?{behaviours:[Cg.config({})],components:[]}:{behaviours:[],components:n}
return{uid:t.uid,dom:t.dom,components:r.components,behaviours:Us(t.toolbarBehaviours,r.behaviours),apis:{setGroups:function(n,e){var o
o=n,(t.shell?vt.some(o):nl(o,t,"groups")).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(t){Cg.set(t,e)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)}}}),o_=a([]),r_=Object.freeze({__proto__:null,setup:i,isDocked:S,getBehaviours:o_}),i_=Ro([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),u_=function(t,n,e){var o,r,i,u
t.getSystem().isConnected()&&(i=e,u=(r=n).lazyViewport(o=t),i.isDocked()&&bk(o,r,i,u),function(t,n,e){var o,r,i,u=t.element
return at(pn(u,"position"),"fixed")?(r=n,gk(o=u,i=e).filter((function(t){return mk(i.getModes(),t,r)})).bind((function(t){return pk(o,t,i)}))):function(t,n,e){var o,r,i=Me(t)
if(mk(e.getModes(),i,n))return vt.none()
o=t,r=i,e.setInitialPos({style:function(){var t={},n=o.dom
if(mt(n))for(var e=0;e<n.style.length;e++){var r=n.style.item(e)
t[r]=n.style[r]}return t}(),position:gn(o,"position")||"static",bounds:r})
var u=Ae(),a=i.x-u.x,c=n.y-u.y,s=u.bottom-n.bottom,l=i.y<=n.y
return vt.some(i_.fixed(xa("fixed",vt.some(a),l?vt.some(c):vt.none(),vt.none(),l?vt.none():vt.some(s))))}(u,n,e)}(o,u,i).each((function(t){t.fold((function(){return hk(o,r,i)}),(function(t){return vk(o,r,i,t)}),(function(t){bk(o,r,i,u,!0),vk(o,r,i,t)}))})))},a_=Object.freeze({__proto__:null,refresh:u_,reset:yk,isDocked:function(t,n,e){return e.isDocked()},getModes:function(t,n,e){return e.getModes()},setModes:function(t,n,e,o){return e.setModes(o)}}),c_=Object.freeze({__proto__:null,events:function(t,n){return Ki([Tr(yi(),(function(e,o){t.contextual.each((function(t){Gr(e.element,t.transitionClass)&&(qr(e.element,[t.transitionClass,t.fadeInClass]),(n.isVisible()?t.onShown:t.onHidden)(e)),o.stop()}))})),wr(Vi(),(function(e,o){u_(e,t,n)})),wr(Pi(),(function(e,o){yk(e,t,n)}))])}}),s_=da({fields:[ko("contextual",[fo("fadeInClass"),fo("fadeOutClass"),fo("transitionClass"),go("lazyContext"),Wu("onShow"),Wu("onShown"),Wu("onHide"),Wu("onHidden")]),Mo("lazyViewport",Ae),Ao("modes",["top","bottom"],Qo),Wu("onDocked"),Wu("onUndocked")],name:"docking",active:c_,apis:a_,state:Object.freeze({__proto__:null,init:function(t){var n=Io(!1),e=Io(!0),o=rc(),r=Io(t.modes)
return gu({isDocked:n.get,setDocked:n.set,getInitialPos:o.get,setInitialPos:o.set,clearInitialPos:o.clear,isVisible:e.get,setVisible:e.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+n.get()+", visible: "+e.get()+", modes: "+r.get().join(",")}})}})}),l_=a(Mr("toolbar-height-change")),f_={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},d_="tox-tinymce--toolbar-sticky-on",m_="tox-tinymce--toolbar-sticky-off",g_=Object.freeze({__proto__:null,setup:function(t,n,e){t.inline||(n.header.isPositionedAtTop()||t.on("ResizeEditor",(function(){e().each(s_.reset)})),t.on("ResizeWindow ResizeEditor",(function(){e().each(wk)})),t.on("SkinLoaded",(function(){e().each((function(t){s_.isDocked(t)?s_.reset(t):s_.refresh(t)}))})),t.on("FullscreenStateChanged",(function(){e().each(s_.reset)}))),t.on("AfterScrollIntoView",(function(t){e().each((function(n){s_.refresh(n)
var e,o,r,i,u,a,c,s,l,f,d,m,g,p,h,v,b=n.element
Od(b)&&(e=t,i=(r=Ut(o=b)).dom.defaultView.innerHeight,u=In(r),c=zn(a=At.fromDom(e.elm)),s=xn(a),f=(l=c.y)+s,d=Cn(o),m=xn(o),p=(g=d.top)+m,h=Math.abs(g-u.top)<2,v=Math.abs(p-(u.top+i))<2,h&&l<p?Rn(u.left,l-m,r):v&&g<f&&Rn(u.left,l-i+s+m,r))}))})),t.on("PostRender",(function(){Ck(t,!1)}))},isDocked:function(t){return t().map(s_.isDocked).getOr(!1)},getBehaviours:kk}),p_=Yo([fo("type"),lo("items",Ze([Ko([fo("name"),vo("items",Qo)]),Qo]))].concat(kp)),h_=[wo("text"),wo("tooltip"),wo("icon"),go("fetch"),Mo("onSetup",(function(){return i}))],v_=Yo(T([fo("type")],h_,!0)),b_=Yo([fo("type"),wo("tooltip"),wo("icon"),wo("text"),So("select"),go("fetch"),Mo("onSetup",(function(){return i})),Do("presets","normal",["normal","color","listpreview"]),Oo("columns",1),go("onAction"),go("onItemAction")]),y_=fl({factory:function(t,n){var e={focus:wg.focusIn,setMenus:function(t,e){var o=R(e,(function(t){return vw(Ok({type:"menubutton",text:t.text,fetch:function(n){n(t.getItems())}}).mapError((function(t){return or(t)})).getOrDie(),"tox-mbtn",n.backstage,vt.some("menuitem"))}))
Cg.set(t,o)}}
return{uid:t.uid,dom:t.dom,components:[],behaviours:qa([Cg.config({}),nm("menubar-events",[Ji((function(n){t.onSetup(n)})),wr(li(),(function(t,n){Tu(t.element,".tox-mbtn--active").each((function(e){Eu(n.event.target,".tox-mbtn").each((function(n){Lt(e,n)||t.getSystem().getByDom(e).each((function(e){t.getSystem().getByDom(n).each((function(t){Lw.expand(t),Lw.close(e),_g.focus(t)}))}))}))}))})),wr(Wi(),(function(t,n){n.event.prevFocus.bind((function(n){return t.getSystem().getByDom(n).toOptional()})).each((function(e){n.event.newFocus.bind((function(n){return t.getSystem().getByDom(n).toOptional()})).each((function(t){Lw.isOpen(e)&&(Lw.expand(t),Lw.close(e))}))}))}))]),wg.config({mode:"flow",selector:".tox-mbtn",onEscape:function(n){return t.onEscape(n),vt.some(!0)}}),Gb.config({})]),apis:e,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[so("dom"),so("uid"),so("onEscape"),so("backstage"),Oo("onSetup",i)],apis:{focus:function(t,n){t.focus(n)},setMenus:function(t,n,e){t.setMenus(n,e)}}}),x_=Object.freeze({__proto__:null,refresh:function(t,n,e){var o
e.isExpanded()&&(vn(t.element,Tk(n)),o=Ek(n,t.element),fn(t.element,Tk(n),o))},grow:function(t,n,e){e.isExpanded()||Ik(t,n,e)},shrink:function(t,n,e){e.isExpanded()&&Fk(t,n,e)},immediateShrink:function(t,n,e){e.isExpanded()&&Ak(t,n,e)},hasGrown:function(t,n,e){return e.isExpanded()},hasShrunk:function(t,n,e){return e.isCollapsed()},isGrowing:Rk,isShrinking:Vk,isTransitioning:function(t,n,e){return Rk(t,n)||Vk(t,n)},toggleGrow:function(t,n,e){(e.isExpanded()?Fk:Ik)(t,n,e)},disableTransitions:Dk}),w_=Object.freeze({__proto__:null,exhibit:function(t,n,e){return Hr(n.expanded?{classes:[n.openClass],styles:{}}:{classes:[n.closedClass],styles:ur(n.dimension.property,"0px")})},events:function(t,n){return Ki([Tr(yi(),(function(e,o){o.event.raw.propertyName===t.dimension.property&&(Dk(e,t),n.isExpanded()&&vn(e.element,t.dimension.property),(n.isExpanded()?t.onGrown:t.onShrunk)(e))}))])}}),S_=da({fields:[so("closedClass"),so("openClass"),so("shrinkingClass"),so("growingClass"),bo("getAnimationRoot"),Wu("onShrunk"),Wu("onStartShrink"),Wu("onGrown"),Wu("onStartGrow"),Oo("expanded",!1),lo("dimension",ao("property",{width:[Xu("property","width"),Xu("getDimension",(function(t){return kn(t)+"px"}))],height:[Xu("property","height"),Xu("getDimension",(function(t){return xn(t)+"px"}))]}))],name:"sliding",active:w_,apis:x_,state:Object.freeze({__proto__:null,init:function(t){var n=Io(t.expanded)
return gu({isExpanded:function(){return!0===n.get()},isCollapsed:function(){return!1===n.get()},setCollapsed:y(n.set,!1),setExpanded:y(n.set,!0),readState:function(){return"expanded: "+n.get()}})}})}),C_="container",k_=[Ls("slotBehaviours",[])],O_=nt({getSlotNames:function(t,n){return t.getSlotNames(n)},getSlot:function(t,n,e){return t.getSlot(n,e)},isShowing:function(t,n,e){return t.isShowing(n,e)},hideSlot:function(t,n,e){return t.hideSlot(n,e)},hideAllSlots:function(t,n){return t.hideAllSlots(n)},showSlot:function(t,n,e){return t.showSlot(n,e)}},Vr),__=O(O({},O_),{sketch:function(t){var n,e={slot:function(t,e){return n.push(t),Js(C_,Pk(t),e)},record:a(n=[])},o=t(e),r=R(e.record(),(function(t){return Hf({name:t,pname:Pk(t)})}))
return ll(C_,k_,r,vO,o)}}),T_=Yo([wo("icon"),wo("tooltip"),Mo("onShow",i),Mo("onHide",i),Mo("onSetup",(function(){return i}))]),E_=Mr("FixSizeEvent"),D_=Mr("AutoSizeEvent"),B_=Object.freeze({__proto__:null,block:function(t,n,e,o){on(t.element,"aria-busy",!0)
var r=n.getRoot(t).getOr(t),i=qa([wg.config({mode:"special",onTab:function(){return vt.some(!0)},onShiftTab:function(){return vt.some(!0)}}),_g.config({})]),u=o(r,i),a=r.getSystem().build(u)
Cg.append(r,wu(a)),a.hasConfigured(wg)&&n.focus&&wg.focusIn(a),e.isBlocked()||n.onBlock(t),e.blockWith((function(){return Cg.remove(r,a)}))},unblock:function(t,n,e){cn(t.element,"aria-busy"),e.isBlocked()&&n.onUnblock(t),e.clear()}}),M_=da({fields:[Mo("getRoot",vt.none),Bo("focus",!0),Wu("onBlock"),Wu("onUnblock")],name:"blocking",apis:B_,state:Object.freeze({__proto__:null,init:function(){var t=ec((function(t){return t.destroy()}))
return gu({readState:t.isSet,blockWith:function(n){t.set({destroy:n})},clear:t.clear,isBlocked:t.isSet})}})}),A_=a([Ls("splitToolbarBehaviours",[Ty]),ir("builtGroups",(function(){return Io([])}))]),F_=a([Nu(["overflowToggledClass"]),So("getOverflowBounds"),so("lazySink"),ir("overflowGroups",(function(){return Io([])}))].concat(A_())),I_=a([Hf({factory:e_,schema:t_(),name:"primary"}),zf({schema:t_(),name:"overflow"}),zf({name:"overflow-button"}),zf({name:"overflow-group"})]),R_=a((function(t,n){var e=t,o=Math.floor(n)
fn(e,"max-width",ke.max(e,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")})),V_=a([Nu(["toggledClass"]),so("lazySink"),go("fetch"),So("getBounds"),ko("fireDismissalEventInstead",[Oo("event",Ni())]),Bc()]),P_=a([zf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:qa([Dg.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),zf({factory:e_,schema:t_(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:qa([wg.config({mode:"cyclic",onEscape:function(n){return nl(n,t,"button").each(_g.focus),vt.none()}})])}}})]),H_=dl({name:"FloatingToolbarButton",factory:function(t,n,e,o){return O(O({},Qg.sketch(O(O({},o.button()),{action:function(t){Yk(t,o)},buttonBehaviours:yf({dump:o.button().buttonBehaviours},[Ty.config({others:{toolbarSandbox:function(n){return o=n,r=e,i=t,{dom:{tag:"div",attributes:{id:(u=Du()).id}},behaviours:qa([wg.config({mode:"special",onEscape:function(t){return uf.close(t),vt.some(!0)}}),uf.config({onOpen:function(t,n){i.fetch().get((function(t){Jk(o,n,i,r.layouts,t),u.link(o.element),wg.focusIn(n)}))},onClose:function(){Dg.off(o),_g.focus(o),u.unlink(o.element)},isPartOf:function(t,n,e){return Au(n,e)||Au(o,e)},getAttachPoint:function(){return i.lazySink(o).getOrDie()}}),$a.config({channels:O(O({},Is(O({isExtraPart:S},i.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),Rs({doReposition:function(){uf.getState(Ty.getCoupled(o,"toolbarSandbox")).each((function(t){Kk(o,t,i,r.layouts)}))}}))})])}
var o,r,i,u}}})])}))),{apis:{setGroups:function(n,o){uf.getState(Ty.getCoupled(n,"toolbarSandbox")).each((function(r){Jk(n,r,t,e.layouts,o)}))},reposition:function(n){uf.getState(Ty.getCoupled(n,"toolbarSandbox")).each((function(o){Kk(n,o,t,e.layouts)}))},toggle:function(t){Yk(t,o)},getToolbar:function(t){return uf.getState(Ty.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return uf.isOpen(Ty.getCoupled(t,"toolbarSandbox"))}}})},configFields:V_(),partFields:P_(),apis:{setGroups:function(t,n,e){t.setGroups(n,e)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},getToolbar:function(t,n){return t.getToolbar(n)},isOpen:function(t,n){return t.isOpen(n)}}}),z_=a([so("items"),Nu(["itemSelector"]),Ls("tgroupBehaviours",[wg])]),N_=a([Lf({name:"items",unit:"item"})]),L_=dl({name:"ToolbarGroup",configFields:z_(),partFields:N_(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,behaviours:Us(t.tgroupBehaviours,[wg.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),W_=dl({name:"SplitFloatingToolbar",configFields:F_(),partFields:I_(),factory:function(t,n,e,o){var r=Tm(H_.sketch({fetch:function(){return xy((function(n){n($k(t.overflowGroups.get()))}))},layouts:{onLtr:function(){return[za,Ha]},onRtl:function(){return[Ha,za]},onBottomLtr:function(){return[La,Na]},onBottomRtl:function(){return[Na,La]}},getBounds:e.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}))
return{uid:t.uid,dom:t.dom,components:n,behaviours:Us(t.splitToolbarBehaviours,[Ty.config({others:{overflowGroup:function(){return L_.sketch(O(O({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(n,e){t.builtGroups.set(R(e,n.getSystem().build)),Qk(n,r,t)},refresh:function(n){return Qk(n,r,t)},toggle:function(t){r.getOpt(t).each((function(t){H_.toggle(t)}))},isOpen:function(t){return r.getOpt(t).map(H_.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each((function(t){H_.reposition(t)}))},getOverflow:function(t){return r.getOpt(t).bind(H_.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},isOpen:function(t,n){return t.isOpen(n)},getOverflow:function(t,n){return t.getOverflow(n)}}}),U_=a([Nu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Wu("onOpened"),Wu("onClosed")].concat(A_())),j_=a([Hf({factory:e_,schema:t_(),name:"primary"}),Hf({factory:e_,schema:t_(),name:"overflow",overrides:function(t){return{toolbarBehaviours:qa([S_.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(n){nl(n,t,"overflow-button").each((function(t){Dg.off(t),_g.focus(t)})),t.onClosed(n)},onGrown:function(n){wg.focusIn(n),t.onOpened(n)},onStartGrow:function(n){nl(n,t,"overflow-button").each(Dg.on)}}),wg.config({mode:"acyclic",onEscape:function(n){return nl(n,t,"overflow-button").each(_g.focus),vt.some(!0)}})])}}}),zf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:qa([Dg.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),zf({name:"overflow-group"})]),G_=dl({name:"SplitSlidingToolbar",configFields:U_(),partFields:j_(),factory:function(t,n,e,o){var r="alloy.toolbar.toggle"
return{uid:t.uid,dom:t.dom,components:n,behaviours:Us(t.splitToolbarBehaviours,[Ty.config({others:{overflowGroup:function(t){return L_.sketch(O(O({},o["overflow-group"]()),{items:[Qg.sketch(O(O({},o["overflow-button"]()),{action:function(n){gr(t,r)}}))]}))}}}),nm("toolbar-toggle-events",[wr(r,(function(n){Zk(n,t)}))])]),apis:{setGroups:function(n,e){var o=R(e,n.getSystem().build)
t.builtGroups.set(o),bO(n,t)},refresh:function(n){return bO(n,t)},toggle:function(n){return Zk(n,t)},isOpen:function(n){return nl(n,t,"overflow").map(S_.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},toggle:function(t,n){t.toggle(n)},isOpen:function(t,n){return t.isOpen(n)}}}),X_=JO.optional({factory:y_,name:"menubar",schema:[so("backstage")]}),q_=JO.optional({factory:{sketch:function(t){return ZO.sketch({uid:t.uid,dom:t.dom,listBehaviours:qa([wg.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return rO({type:t.type,uid:Mr("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),vt.some(!0)}})},setupItem:function(t,n,e,o){e_.setGroups(n,e)},shell:!0})}},name:"multiple-toolbar",schema:[so("dom"),so("onEscape")]}),Y_=JO.optional({factory:{sketch:function(t){return(t.type===rh.sliding?function(t){var n=G_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),e=G_.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=oO(t)
return G_.sketch(O(O({},o),{components:[n,e],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([l_()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([l_()],{type:"closed"})}}))}:t.type===rh.floating?function(t){var n=oO(t),e=W_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}})
return W_.sketch(O(O({},n),{lazySink:t.getSink,getOverflowBounds:function(){var n=t.moreDrawerData.lazyHeader().element,e=zn(n),o=Gt(n),r=zn(o),i=Math.max(o.dom.scrollHeight,r.height)
return Be(e.x+4,r.y,e.width-8,i)},parts:O(O({},n.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[e],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}:rO)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),vt.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[so("dom"),so("onEscape"),so("getSink")]}),K_=JO.optional({factory:{sketch:function(t){var n=t.editor,e=t.sticky?kk:o_
return{uid:t.uid,dom:t.dom,components:t.components,behaviours:qa(e(n,t.sharedBackstage))}}},name:"header",schema:[so("dom")]}),J_=JO.optional({name:"socket",schema:[so("dom")]}),$_=JO.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:qa([Gb.config({}),_g.config({}),S_.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){Jf.getCurrent(t).each(__.hideAllSlots),gr(t,D_)},onGrown:function(t){gr(t,D_)},onStartGrow:function(t){pr(t,E_,{width:pn(t.element,"width").getOr("")})},onStartShrink:function(t){pr(t,E_,{width:kn(t.element)+"px"})}}),Cg.config({}),Jf.config({find:function(t){return $(Cg.contents(t))}})])}],behaviours:qa([FS(0),nm("sidebar-sliding-events",[wr(E_,(function(t,n){fn(t.element,"width",n.event.width)})),wr(D_,(function(t,n){vn(t.element,"width")}))])])}}},name:"sidebar",schema:[so("dom")]}),Q_=JO.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:qa([Cg.config({}),M_.config({focus:!1}),Jf.config({find:function(t){return $(t.components())}})]),components:[]}}},name:"throbber",schema:[so("dom")]}),Z_=dl({name:"OuterContainer",factory:function(t,n,e){return{uid:t.uid,dom:t.dom,components:n,apis:{getSocket:function(n){return KO.getPart(n,t,"socket")},setSidebar:function(n,e){KO.getPart(n,t,"sidebar").each((function(t){return function(t,n){Jf.getCurrent(t).each((function(t){return Cg.set(t,[(e=n,__.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(n=t,r=R(kt(o=e),(function(t){var n=o[t],e=io(ro("sidebar",T_,n))
return{name:t,getApi:Hk,onSetup:e.onSetup,onShow:e.onShow,onHide:e.onHide}})),R(r,(function(t){var e=Io(i)
return n.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Ih([ev(t,e),ov(t,e),wr(Ui(),(function(t,n){var e=n.event
N(r,(function(t){return t.name===e.name})).each((function(n){(e.visible?n.onShow:n.onHide)(n.getApi(t))}))}))])})}))),slotBehaviours:Ih([Ji((function(t){return __.hideAllSlots(t)}))])}
var n,o,r})))])
var e}))}(t,e)}))},toggleSidebar:function(n,e){KO.getPart(n,t,"sidebar").each((function(t){var n=e
Jf.getCurrent(t).each((function(t){Jf.getCurrent(t).each((function(e){S_.hasGrown(t)?__.isShowing(e,n)?S_.shrink(t):(__.hideAllSlots(e),__.showSlot(e,n)):(__.hideAllSlots(e),__.showSlot(e,n),S_.grow(t))}))}))}))},whichSidebar:function(n){return KO.getPart(n,t,"sidebar").bind(zk).getOrNull()},getHeader:function(n){return KO.getPart(n,t,"header")},getToolbar:function(n){return KO.getPart(n,t,"toolbar")},setToolbar:function(n,e){KO.getPart(n,t,"toolbar").each((function(t){t.getApis().setGroups(t,e)}))},setToolbars:function(n,e){KO.getPart(n,t,"multiple-toolbar").each((function(t){ZO.setItems(t,e)}))},refreshToolbar:function(n){KO.getPart(n,t,"toolbar").each((function(t){return t.getApis().refresh(t)}))},toggleToolbarDrawer:function(n){KO.getPart(n,t,"toolbar").each((function(t){var n=t.getApis().toggle
null!=n?vt.some(function(n){return n(t)}(n)):vt.none()}))},isToolbarDrawerToggled:function(n){return KO.getPart(n,t,"toolbar").bind((function(t){return vt.from(t.getApis().isOpen).map((function(n){return n(t)}))})).getOr(!1)},getThrobber:function(n){return KO.getPart(n,t,"throbber")},focusToolbar:function(n){KO.getPart(n,t,"toolbar").orThunk((function(){return KO.getPart(n,t,"multiple-toolbar")})).each((function(t){wg.focusIn(t)}))},setMenubar:function(n,e){KO.getPart(n,t,"menubar").each((function(t){y_.setMenus(t,e)}))},focusMenubar:function(n){KO.getPart(n,t,"menubar").each((function(t){y_.focus(t)}))}},behaviours:t.behaviours}},configFields:[so("dom"),so("behaviours")],partFields:[K_,X_,Y_,q_,J_,$_,Q_],apis:{getSocket:function(t,n){return t.getSocket(n)},setSidebar:function(t,n,e){t.setSidebar(n,e)},toggleSidebar:function(t,n,e){t.toggleSidebar(n,e)},whichSidebar:function(t,n){return t.whichSidebar(n)},getHeader:function(t,n){return t.getHeader(n)},getToolbar:function(t,n){return t.getToolbar(n)},setToolbar:function(t,n,e){var o=R(e,nO)
t.setToolbar(n,o)},setToolbars:function(t,n,e){var o=R(e,(function(t){return R(t,nO)}))
t.setToolbars(n,o)},refreshToolbar:function(t,n){return t.refreshToolbar(n)},toggleToolbarDrawer:function(t,n){t.toggleToolbarDrawer(n)},isToolbarDrawerToggled:function(t,n){return t.isToolbarDrawerToggled(n)},getThrobber:function(t,n){return t.getThrobber(n)},setMenubar:function(t,n,e){t.setMenubar(n,e)},focusMenubar:function(t,n){t.focusMenubar(n)},focusToolbar:function(t,n){t.focusToolbar(n)}}}),tT={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},nT=y(sO,!1),eT=y(sO,!0)
function oT(t,n,e,o){var r
return{type:"basic",data:(r=t.getParam(n,e,"string"),R(o===xO.SemiColon?r.replace(/;$/,"").split(";"):r.split(" "),(function(t){var n=t,e=t,o=t.split("=")
return 1<o.length&&(n=o[0],e=o[1]),{title:n,format:e}})))}}function rT(t){var n={type:"basic",data:FT}
return{tooltip:"Align",text:vt.none(),icon:vt.some("align-left"),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:vt.none,getPreviewFor:function(t){return vt.none},onAction:function(n){return function(){return N(FT,(function(t){return t.format===n.format})).each((function(n){return t.execCommand(n.command)}))}},updateText:function(n){var e=N(FT,(function(n){return t.formatter.match(n.format)})).fold(a("left"),(function(t){return t.title.toLowerCase()}))
pr(n,cC,{icon:"align-"+e})},dataset:n,shouldHide:!1,isInvalid:function(n){return!t.formatter.canApply(n.format)}}}function iT(t){return R(t.split(/\s*,\s*/),(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))}function uT(t){function n(){function n(t){return t?iT(t)[0]:""}var r=t.queryCommandValue("FontName"),i=o.data,u=r?r.toLowerCase():""
return{matchOpt:N(i,(function(t){var e=t.format
return e.toLowerCase()===u||n(e).toLowerCase()===n(u).toLowerCase()})).orThunk((function(){return st(0===(t=u).indexOf("-apple-system")&&(n=iT(t.toLowerCase()),j(IT,(function(t){return-1<n.indexOf(t.toLowerCase())}))),{title:e,format:u})
var t,n})),font:r}}var e="System Font",o=oT(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",xO.SemiColon)
return{tooltip:"Fonts",text:vt.some(e),icon:vt.none(),isSelectedFor:function(t){return function(n){return n.exists((function(n){return n.format===t}))}},getCurrentValue:function(){return n().matchOpt},getPreviewFor:function(t){return function(){return vt.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(n){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,n.format)}))}},updateText:function(t){var e=n(),o=e.matchOpt,r=e.font,i=o.fold(a(r),(function(t){return t.title}))
pr(t,aC,{text:i})},dataset:o,shouldHide:!1,isInvalid:S}}function aT(t){function n(){var n=vt.none(),e=o.data,r=t.queryCommandValue("FontSize")
if(r)for(var i=function(t){var o,i,u,a,c=(i=t,/[0-9.]+px$/.test(o=r)?(u=72*parseInt(o,10)/96,a=Math.pow(10,i||0),Math.round(u*a)/a+"pt"):it(VT,o).getOr(o)),s=it(RT,c).getOr("")
n=N(e,(function(t){return t.format===r||t.format===c||t.format===s}))},u=3;n.isNone()&&0<=u;u--)i(u)
return{matchOpt:n,size:r}}var e=a(vt.none),o=oT(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",xO.Space)
return{tooltip:"Font sizes",text:vt.some("12pt"),icon:vt.none(),isSelectedFor:function(t){return function(n){return n.exists((function(n){return n.format===t}))}},getPreviewFor:e,getCurrentValue:function(){return n().matchOpt},onAction:function(n){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontSize",!1,n.format)}))}},updateText:function(t){var e=n(),o=e.matchOpt,r=e.size,i=o.fold(a(r),(function(t){return t.title}))
pr(t,aC,{text:i})},dataset:o,shouldHide:!1,isInvalid:S}}function cT(t,n){var e=n(),o=R(e,(function(t){return t.format}))
return vt.from(t.formatter.closest(o)).bind((function(t){return N(e,(function(n){return n.format===t}))})).orThunk((function(){return st(t.formatter.match("p"),{title:"Paragraph",format:"p"})}))}function sT(t){var n=oT(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",xO.SemiColon)
return{tooltip:"Blocks",text:vt.some("Paragraph"),icon:vt.none(),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:vt.none,getPreviewFor:function(n){return function(){var e=t.formatter.get(n)
return vt.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(n))})}},onAction:dO(t),updateText:function(e){var o=cT(t,(function(){return n.data})).fold(a("Paragraph"),(function(t){return t.title}))
pr(e,aC,{text:o})},dataset:n,shouldHide:!1,isInvalid:function(n){return!t.formatter.canApply(n.format)}}}function lT(t,n){return{tooltip:"Formats",text:vt.some("Paragraph"),icon:vt.none(),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:vt.none,getPreviewFor:function(n){return function(){var e=t.formatter.get(n)
return void 0!==e?vt.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(n))}):vt.none()}},onAction:dO(t),updateText:function(n){var e=function(t){var n=t.items
return void 0!==n&&0<n.length?U(n,e):[{title:t.title,format:t.format}]},o=U(NC(t),e),r=cT(t,a(o)).fold(a("Paragraph"),(function(t){return t.title}))
pr(n,aC,{text:r})},shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(n){return!t.formatter.canApply(n.format)},dataset:n}}function fT(t){return{isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){return ed.set(t,n)}}}function dT(t){return{setActive:function(n){Dg.set(t,n)},isActive:function(){return Dg.isOn(t)},isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){return ed.set(t,n)}}}function mT(t,n){return t.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})}function gT(t,n,e,o,r,i){var u
return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]),attributes:mT(e,i)},components:zv([t.map((function(t){return lw(t,i.icons)})),n.map((function(t){return dw(t,"tox-tbtn",i)}))]),eventOrder:((u={})[ui()]=["focusing","alloy.base.behaviour","common-button-display-events"],u),buttonBehaviours:qa([Pv(i.isDisabled),tv(),nm("common-button-display-events",[wr(ui(),(function(t,n){n.event.prevent(),gr(t,UT)}))])].concat(o.map((function(e){return zT.config({channel:e,initialData:{icon:t,text:n},renderComponents:function(t,n){return zv([t.icon.map((function(t){return lw(t,i.icons)})),t.text.map((function(t){return dw(t,"tox-tbtn",i)}))])}})})).toArray()).concat(r.getOr([])))}}function pT(t,n,e){var o,r=Io(i),u=gT(t.icon,t.text,t.tooltip,vt.none(),vt.none(),e)
return Qg.sketch({dom:u.dom,components:u.components,eventOrder:uC,buttonBehaviours:qa([nm("toolbar-button-events",[(o={onAction:t.onAction,getApi:n.getApi},Zi((function(t,n){nv(o,t)((function(n){pr(t,iC,{buttonApi:n}),o.onAction(n)}))}))),ev(n,r),ov(n,r)]),Pv((function(){return t.disabled||e.isDisabled()})),tv()].concat(n.toolbarButtonBehaviours))})}function hT(t,n){return function(e,o,r){var i=t(e).mapError((function(t){return or(t)})).getOrDie()
return n(i,o,r)}}function vT(t,n,e,o){var i,u=n.outerContainer,a=e.toolbar,c=e.buttons
r(a,l)?(i=a.map((function(n){var r={toolbar:n,buttons:c,allowToolbarGroups:e.allowToolbarGroups}
return KT(t,r,{backstage:o},vt.none())})),Z_.setToolbars(u,i)):Z_.setToolbar(u,KT(t,e,{backstage:o},vt.none()))}function bT(t){return/^[0-9\.]+(|px)$/i.test(""+t)?vt.some(parseInt(""+t,10)):vt.none()}function yT(t){return b(t)?t+"px":t}function xT(t,n,e){var o=n.filter((function(n){return t<n})),r=e.filter((function(n){return n<t}))
return o.or(r).getOr(t)}function wT(t){var n=Jp(t),e=$p(t),o=Zp(t)
return bT(n).map((function(t){return xT(t,e,o)}))}function ST(t,n){var e=Me(t)
return{pos:n?e.y:e.bottom,bounds:e}}function CT(t,n){return wr(iC,(function(e,o){var r,i=t.get(e),u=(r=i,{hide:function(){return gr(r,Mi())},getValue:function(){return vf.getValue(r)}})
n.onAction(u,o.event.buttonApi)}))}function kT(t,n,e){return n.bottom-t.y>=(e=void 0===e?.01:e)&&t.bottom-n.y>=e}function OT(t){var n=function(t){var n=t.getBoundingClientRect()
if(n.height<=0&&n.width<=0){var e=Qt(At.fromDom(t.startContainer),t.startOffset).element
return(Xn(e)?qt(e):vt.some(e)).filter(Gn).map((function(t){return t.dom.getBoundingClientRect()})).getOr(n)}return n}(t.selection.getRng())
if(t.inline){var e=In()
return Be(e.left+n.left,e.top+n.top,n.width,n.height)}var o=zn(At.fromDom(t.getBody()))
return Be(o.x+n.left,o.y+n.top,n.width,n.height)}function _T(t,n,e,o){void 0===o&&(o=0)
var r,i,u,a,c=Pn(window),s=Me(At.fromDom(t.getContentAreaContainer())),l=nh(t)||eh(t)||Uh(t),f=(r=s,i=c,u=o,{x:a=Math.max(r.x+u,i.x),width:Math.min(r.right-u,i.right)-a}),d=f.x,m=f.width
if(t.inline&&!l)return Be(d,c.y,m,c.height)
var g=function(t,n,e,o,r,i){var u=At.fromDom(t.getContainer()),a=Tu(u,".tox-editor-header").getOr(u),c=Me(a),s=c.y>=n.bottom,l=o&&!s
if(t.inline&&l)return{y:Math.max(c.bottom+i,e.y),bottom:e.bottom}
if(t.inline&&!l)return{y:e.y,bottom:Math.min(c.y-i,e.bottom)}
var f="line"===r?Me(u):n
return l?{y:Math.max(c.bottom+i,e.y),bottom:Math.min(f.bottom-i,e.bottom)}:{y:Math.max(f.y+i,e.y),bottom:Math.min(c.y-i,e.bottom)}}(t,s,c,n.header.isPositionedAtTop(),e,o),p=g.y,h=g.bottom
return Be(d,p,m,h-p)}function TT(t){return"node"===t}function ET(t,n){var e=V(P(n,(function(n){return n.predicate(t.dom)})),(function(t){return"contexttoolbar"===t.type}))
return{contextToolbars:e.pass,contextForms:e.fail}}function DT(t,n,e,o){function r(){var n=x.get().getOr("node"),e=TT(n)?1:0
return _T(t,h,n,e)}function u(){return!(t.removed||v()&&p.isContextMenuOpen())}function a(){if(u()){var n=r(),e=at(x.get(),"node")?(o=t,b.get().filter(he).map(zn).getOrThunk((function(){return OT(o)}))):OT(t)
return n.height<=0||!kT(e,n)}return 1
var o}function c(){b.clear(),y.clear(),x.clear(),qg.hide(w)}function s(){var t
qg.isOpen(w)&&(vn(t=w.element,"display"),a()?fn(t,"display","none"):(y.set(0),qg.reposition(w)))}function l(n){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[n],behaviours:qa([wg.config({mode:"acyclic"}),nm("pop-dialog-wrap-events",[Ji((function(n){t.shortcuts.add("ctrl+F9","focus statusbar",(function(){return wg.focusIn(n)}))})),$i((function(n){t.shortcuts.remove("ctrl+F9")}))])])}}function f(n,o){var r,i,u,a,c,s,l,f="node"===n?h.anchors.node(o):h.anchors.cursor(),d=(r=t,i=n,u=v(),a={lastElement:b.get,isReposition:function(){return at(y.get(),0)},getMode:function(){return Ql.getMode(e)}},"line"===i?{bubble:fc(12,0,eE),layouts:{onLtr:function(){return[ea]},onRtl:function(){return[oa]}},overrides:oE}:{bubble:fc(0,12,eE,1/12),layouts:(c=r,s=a,l=i,u?{onLtr:function(t){return[Ua,Ha,za,Na,La,Wa].concat(m(t))},onRtl:function(t){return[Ua,za,Ha,La,Na,Wa].concat(m(t))}}:{onLtr:function(t){return[Wa,Ua,Na,Ha,La,za].concat(m(t))},onRtl:function(t){return[Wa,Ua,La,za,Na,Ha].concat(m(t))}}),overrides:oE})
function m(t){return TT(l)?[(n=t,function(t,e,o,r,i){var u=function(t,n,e,o,r){var i=OT(t),u=o.lastElement().exists((function(t){return Lt(e,t)})),a=e,c=t.selection.getRng(),s=Qt(At.fromDom(c.startContainer),c.startOffset)
return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&Lt(s.element,a)?u?km:Kg:u?function(t,e){var r=pn(t,"position")
fn(t,"position",e)
var u=kT(i,Me(n))&&!o.isReposition()?_m:km
return r.each((function(n){return fn(t,"position",n)})),u}(n,o.getMode()):("fixed"===o.getMode()?r.y+In().top:r.y)+(xn(n)+12)<=i.y?Kg:Jg}(c,r,n,s,i),a=O(O({},t),{y:i.y,height:i.height})
return O(O({},u(a,e,o,r,i)),{alwaysFit:!0})})]:[]
var n}return jo(f,d)}function d(t,n){var o,i,c,s
k.cancel(),u()&&(o=C(t),c=f(i=t[0].position,n),x.set(i),y.set(1),vn(s=w.element,"display"),at(Et(n,b.get(),Lt),!0)||(jr(s,cE),Ql.reset(e,w)),qg.showWithinBounds(w,l(o),{anchor:c,transition:{classes:[cE],mode:"placement"}},(function(){return vt.some(r())})),n.fold(b.clear,b.set),a()&&fn(s,"display","none"))}var m,g,p=o.backstage,h=p.shared,v=se().deviceType.isTouch,b=rc(),y=rc(),x=rc(),w=xu((m={sink:e,onEscape:function(){return t.focus(),vt.some(!0)}},g=Io([]),qg.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){g.set([]),qg.getContent(t).each((function(t){vn(t.element,"visibility")})),jr(t.element,aE),vn(t.element,"width")},inlineBehaviours:qa([nm("context-toolbar-events",[Tr(yi(),(function(t,n){"width"===n.event.raw.propertyName&&(jr(t.element,aE),vn(t.element,"width"))})),wr(uE,(function(t,n){var e=t.element
vn(e,"width")
var o=kn(e)
qg.setContent(t,n.event.contents),Ur(e,aE)
var r=kn(e)
fn(e,"width",o+"px"),qg.getContent(t).each((function(t){n.event.focus.bind((function(t){return pa(t),ba(e)})).orThunk((function(){return wg.focusIn(t),va(me(e))}))})),$g.setTimeout((function(){fn(t.element,"width",r+"px")}),0)})),wr(rE,(function(t,n){qg.getContent(t).each((function(n){g.set(g.get().concat([{bar:n,focus:va(me(t.element))}]))})),pr(t,uE,{contents:n.event.forwardContents,focus:vt.none()})})),wr(iE,(function(t,n){Q(g.get()).each((function(n){g.set(g.get().slice(0,g.get().length-1)),pr(t,uE,{contents:wu(n.bar),focus:n.focus})}))}))]),wg.config({mode:"special",onEscape:function(t){return Q(g.get()).fold((function(){return m.onEscape()}),(function(n){return gr(t,iE),vt.some(!0)}))}})]),lazySink:function(){return Re.value(m.sink)}}))),S=Rt((function(){return function(t,n){var e={},o=[],r=[],i={},u={},a=kt(t)
return St(a,(function(a){var c,s,l,f,d,m=t[a]
"contextform"===m.type?(l=a,d=io(ro("ContextForm",Ip,f=m)),(e[l]=d).launch.map((function(t){i["form:"+l]=O(O({},f.launch),{type:"contextformtogglebutton"===t.type?"togglebutton":"button",onAction:function(){n(d)}})})),("editor"===d.scope?r:o).push(d),u[l]=d):"contexttoolbar"===m.type&&(c=a,ro("ContextToolbar",Rp,s=m).each((function(t){("editor"===s.scope?r:o).push(t),u[c]=t})))})),{forms:e,inNodeScope:o,inEditorScope:r,lookupTable:u,formNavigators:i}}(n,(function(t){var n=C([t])
pr(w,rE,{forwardContents:l(n)})}))})),C=function(n){var e=t.ui.registry.getAll().buttons,r=S(),i=O(O({},e),r.formNavigators),u=jh(t)===rh.scrolling?rh.scrolling:rh.default,a=W(R(n,(function(n){return"contexttoolbar"===n.type?KT(t,{buttons:i,toolbar:n.items,allowToolbarGroups:!1},o,vt.some(["form:"])):(e=h.providers,nE(n,e))
var e})))
return rO({type:u,uid:Mr("context-toolbar"),initGroups:a,onEscape:vt.none,cyclicKeying:!0,providers:h.providers})},k=rp((function(){t.hasFocus()&&!t.removed&&(Gr(w.element,cE)?k.throttle():function(t,n){function e(t){return Lt(t,r)}var o,r=At.fromDom(n.getBody()),i=At.fromDom(n.selection.getNode())
return e(o=i)||Wt(r,o)?function(t,n,e){var o=ET(t,n)
if(0<o.contextForms.length)return vt.some({elem:t,toolbars:[o.contextForms[0]]})
var r=ET(t,e)
if(0<r.contextForms.length)return vt.some({elem:t,toolbars:[r.contextForms[0]]})
if(0<o.contextToolbars.length||0<r.contextToolbars.length){var i=function(t){if(t.length<=1)return t
function n(n){return A(t,(function(t){return t.position===n}))}function e(n){return P(t,(function(t){return t.position===n}))}var o=n("selection"),r=n("node")
if(o||r){if(r&&o){var i=e("node"),u=R(e("selection"),(function(t){return O(O({},t),{position:"node"})}))
return i.concat(u)}return e(o?"selection":"node")}return e("line")}(o.contextToolbars.concat(r.contextToolbars))
return vt.some({elem:t,toolbars:i})}return vt.none()}(i,t.inNodeScope,t.inEditorScope).orThunk((function(){return r=t,(n=e)(o=i)?vt.none():sr(o,(function(t){if(Gn(t)){var n=ET(t,r.inNodeScope),e=n.contextToolbars,o=n.contextForms,i=0<o.length?o:(a=e).length<=1?a:u("selection").orThunk((function(){return u("node")})).orThunk((function(){return u("line")})).map((function(t){return t.position})).fold((function(){return[]}),(function(t){return P(a,(function(n){return n.position===t}))}))
return 0<i.length?vt.some({elem:t,toolbars:i}):vt.none()}function u(t){return N(a,(function(n){return n.position===t}))}var a
return vt.none()}),n)
var n,o,r})):vt.none()}(S(),t).fold(c,(function(t){d(t.toolbars,vt.some(t.elem))})))}),17)
t.on("init",(function(){t.on("remove",c),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",s),t.on("click keyup focus SetContent",k.throttle),t.on(tE,c),t.on("contexttoolbar-show",(function(n){it(S().lookupTable,n.toolbarKey).each((function(e){d([e],st(n.target!==t,n.target)),qg.getContent(w).each(wg.focusIn)}))})),t.on("focusout",(function(n){$g.setEditorTimeout(t,(function(){ba(e.element).isNone()&&ba(w.element).isNone()&&c()}),0)})),t.on("SwitchMode",(function(){t.mode.isReadOnly()&&c()})),t.on("AfterProgressState",(function(n){n.state?c():t.hasFocus()&&k.throttle()})),t.on("NodeChange",(function(t){ba(w.element).fold(k.throttle,i)}))}))}(wO=xO=xO||{})[wO.SemiColon=0]="SemiColon",wO[wO.Space=1]="Space"
var BT,MT,AT,FT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],IT=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],RT={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},VT={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},PT=Object.freeze({__proto__:null,events:function(t,n){function e(e,o){t.updateState.each((function(t){var r=t(e,o)
n.set(r)})),t.renderComponents.each((function(t){var r=R(t(o,n.get()),e.getSystem().build)
Cs(e,r)}))}return Ki([wr(_i(),(function(n,o){var r,i=o
i.universal||(r=t.channel,wt(i.channels,r)&&e(n,i.data))})),Ji((function(n,o){t.initialData.each((function(t){e(n,t)}))}))])}}),HT=Object.freeze({__proto__:null,getState:function(t,n,e){return e}}),zT=da({fields:[so("channel"),bo("renderComponents"),bo("updateState"),bo("initialData")],name:"reflecting",active:PT,apis:HT,state:Object.freeze({__proto__:null,init:function(){var t=Io(vt.none())
return{readState:function(){return t.get().getOr("none")},get:t.get,set:t.set,clear:function(){return t.set(vt.none())}}}})}),NT=a([so("toggleClass"),so("fetch"),ju("onExecute"),Oo("getHotspot",vt.some),Oo("getAnchorOverrides",a({})),Bc(),ju("onItemExecute"),bo("lazySink"),so("dom"),Wu("onOpen"),Ls("splitDropdownBehaviours",[Ty,wg,_g]),Oo("matchWidth",!1),Oo("useMinWidth",!1),Oo("eventOrder",{}),bo("role")].concat(Vy())),LT=a([Hf({factory:Qg,schema:[so("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:qa([_g.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(n){n.getSystem().getByUid(t.uid).each(hr)},buttonBehaviours:qa([Dg.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),Hf({factory:Qg,schema:[so("dom")],name:"button",defaults:function(){return{buttonBehaviours:qa([_g.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(n){n.getSystem().getByUid(t.uid).each((function(e){t.onExecute(e,n)}))}}}}),Nf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[so("text")],name:"aria-descriptor"}),zf({schema:[zu()],name:"menu",defaults:function(t){return{onExecute:function(n,e){n.getSystem().getByUid(t.uid).each((function(o){t.onItemExecute(o,n,e)}))}}}}),Dy()]),WT=dl({name:"SplitDropdown",configFields:NT(),partFields:LT(),factory:function(t,n,e,o){function r(t){Jf.getCurrent(t).each((function(t){rd.highlightFirst(t),wg.focusIn(t)}))}function u(n){Ay(t,c,n,o,r,gy.HighlightFirst).get(i)}function a(n){return hr(el(n,t,"button")),vt.some(!0)}var s,l=O(O({},Ki([Ji((function(n,e){nl(n,t,"aria-descriptor").each((function(t){var e=Mr("aria")
on(t.element,"id",e),on(n.element,"aria-describedby",e)}))}))])),lm(vt.some(u))),f={repositionMenus:function(t){Dg.isOn(t)&&Ry(t)}}
return{uid:t.uid,dom:t.dom,components:n,apis:f,eventOrder:O(O({},t.eventOrder),((s={})[Ti()]=["disabling","toggling","alloy.base.behaviour"],s)),events:l,behaviours:Us(t.splitDropdownBehaviours,[Ty.config({others:{sandbox:function(n){var e=el(n,t,"arrow")
return Iy(t,n,{onOpen:function(){Dg.on(e),Dg.on(n)},onClose:function(){Dg.off(e),Dg.off(n)}})}}}),wg.config({mode:"special",onSpace:a,onEnter:a,onDown:function(t){return u(t),vt.some(!0)}}),_g.config({}),Dg.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,n){return t.repositionMenus(n)}}}),UT=Mr("focus-button"),jT=function(t,n,e){return pT(t,{toolbarButtonBehaviours:[].concat(0<e.length?[nm("toolbarButtonWith",e)]:[]),getApi:fT,onSetup:t.onSetup},n)},GT=function(t,n,e){return jo(pT(t,{toolbarButtonBehaviours:[Cg.config({}),Dg.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<e.length?[nm("toolbarToggleButtonWith",e)]:[]),getApi:dT,onSetup:t.onSetup},n))},XT=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],qT={button:hT(fp,(function(t,n){return e=n.backstage.shared.providers,jT(t,e,[])
var e})),togglebutton:hT(dp,(function(t,n){return e=n.backstage.shared.providers,GT(t,e,[])
var e})),menubutton:hT(Ok,(function(t,n){return vw(t,"tox-tbtn",n.backstage,vt.none())})),splitbutton:hT((function(t){return ro("SplitButton",b_,t)}),(function(t,n){return o=t,r=n.backstage.shared,l=Mr("channel-update-split-dropdown-display"),f=Io(i),d={getApi:e,onSetup:o.onSetup},WT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:O({"aria-pressed":!1},mT(o.tooltip,r.providers))},onExecute:function(t){o.onAction(e(t))},onItemExecute:function(t,n,e){},splitDropdownBehaviours:qa([Av(r.providers.isDisabled),tv(),nm("split-dropdown-events",[wr(UT,_g.focus),ev(d,f),ov(d,f)]),Ww.config({})]),eventOrder:((u={})[Hi()]=["alloy.base.behaviour","split-dropdown-events"],u),toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:(a=e,c=o,s=r.providers,function(t){return xy((function(t){return c.fetch(t)})).map((function(n){return vt.from(kb(jo(lb(Mr("menu-value"),n,(function(n){c.onItemAction(a(t),n)}),c.columns,c.presets,ch.CLOSE_ON_EXECUTE,c.select.getOr(S),s),{movement:fb(c.columns,c.presets),menuBehaviours:Ih("auto"!==c.columns?[]:[Ji((function(t,n){qp(t,4,Vp(c.presets)).each((function(n){var e=n.numRows,o=n.numColumns
wg.setGridSize(t,e,o)}))}))])})))}))}),parts:{menu:zp(0,o.columns,o.presets)},components:[WT.parts.button(gT(o.icon,o.text,vt.none(),vt.some(l),vt.some([Dg.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),WT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Mm("chevron-down",r.providers.icons)},buttonBehaviours:qa([Av(r.providers.isDisabled),tv(),Am()])}),WT.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})
function e(t){return{isDisabled:function(){return ed.isDisabled(t)},setDisabled:function(n){return ed.set(t,n)},setIconFill:function(n,e){Tu(t.element,'svg path[id="'+n+'"], rect[id="'+n+'"]').each((function(t){on(t,"fill",e)}))},setIconStroke:function(n,e){Tu(t.element,'svg path[id="'+n+'"], rect[id="'+n+'"]').each((function(t){on(t,"stroke",e)}))},setActive:function(n){on(t.element,"aria-pressed",n),Tu(t.element,"span").each((function(e){t.getSystem().getByDom(e).each((function(t){return Dg.set(t,n)}))}))},isActive:function(){return Tu(t.element,"span").exists((function(n){return t.getSystem().getByDom(n).exists(Dg.isOn)}))}}}var o,r,u,a,c,s,l,f,d})),grouptoolbarbutton:hT((function(t){return ro("GroupToolbarButton",p_,t)}),(function(t,n,e){var o,r,i,u,a,c,s=e.ui.registry.getAll().buttons,l=((o={})[jc]=n.backstage.shared.header.isPositionedAtTop()?gc.TopToBottom:gc.BottomToTop,o)
if(jh(e)!==rh.floating)throw new Error("Toolbar groups are only supported when using floating toolbar mode")
return i=n.backstage,u=function(t){return KT(e,{buttons:s,toolbar:t,allowToolbarGroups:!1},n,vt.none())},a=l,c=i.shared,H_.sketch({lazySink:c.getSink,fetch:function(){return xy((function(t){t(R(u(r.items),nO))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:gT((r=t).icon,r.text,r.tooltip,vt.none(),vt.none(),c.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:a}}}})})),styleSelectButton:function(t,n){return pO(t,e=n.backstage,lT(t,O({type:"advanced"},e.styleselect)))
var e},fontsizeSelectButton:function(t,n){return pO(t,n.backstage,aT(t))},fontSelectButton:function(t,n){return pO(t,n.backstage,uT(t))},formatButton:function(t,n){return pO(t,n.backstage,sT(t))},alignMenuButton:function(t,n){return pO(t,n.backstage,rT(t))}},YT={styleselect:qT.styleSelectButton,fontsizeselect:qT.fontsizeSelectButton,fontselect:qT.fontSelectButton,formatselect:qT.formatButton,align:qT.alignMenuButton},KT=function(t,n,e,o){var i,u,a,c,s=(a=n.toolbar,c=n.buttons,!1===a?[]:void 0===a||!0===a?(i=c,u=R(XT,(function(t){var n=P(t.items,(function(t){return Tt(i,t)||Tt(YT,t)}))
return{name:t.name,items:n}})),P(u,(function(t){return 0<t.items.length}))):l(a)?R(a.split("|"),(function(t){return{items:t.trim().split(" ")}})):r(a,(function(t){return Tt(t,"name")&&Tt(t,"items")}))?a:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]))
return P(R(s,(function(r){var i=U(r.items,(function(r){return 0===r.trim().length?[]:(i=t,u=n.buttons,a=r,c=n.allowToolbarGroups,s=e,l=o,it(u,a.toLowerCase()).orThunk((function(){return l.bind((function(t){return Z(t,(function(t){return it(u,t+a.toLowerCase())}))}))})).fold((function(){return it(YT,a.toLowerCase()).map((function(t){return t(i,s)})).orThunk((function(){return vt.none()}))}),(function(t){return"grouptoolbarbutton"!==t.type||c?(e=s,o=i,it(qT,(n=t).type).fold((function(){return console.error("skipping button defined by",n),vt.none()}),(function(t){return vt.some(t(n,e,o))}))):(console.warn("Ignoring the '"+a+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),vt.none())
var n,e,o})).toArray())
var i,u,a,c,s,l}))
return{title:vt.from(t.translate(r.name)),items:i}})),(function(t){return 0<t.items.length}))},JT=se(),$T=JT.os.isiOS()&&JT.os.version.major<=12,QT=Object.freeze({__proto__:null,render:function(t,n,e,o,r){var i=Io(0),u=n.outerContainer
nT(t)
var a=At.fromDom(r.targetNode),c=tn(me(a)),s=n.mothership
ef(a,s,Dn),Es(c,n.uiMothership),t.on("PostRender",(function(){vT(t,n,e,o),i.set(t.getWin().innerWidth),Z_.setMenubar(u,uO(t,e)),Z_.setSidebar(u,e.sidebar),function(t,n){function e(){var n=c.get()
n.left===u.innerWidth&&n.top===u.innerHeight||(c.set(Se(u.innerWidth,u.innerHeight)),Tv(t))}function o(){var n=t.getDoc().documentElement,e=s.get()
e.left===n.offsetWidth&&e.top===n.offsetHeight||(s.set(Se(n.offsetWidth,n.offsetHeight)),Tv(t))}function r(n){return t.fire("ScrollContent",n)}var i=t.dom,u=t.getWin(),a=t.getDoc().documentElement,c=Io(Se(u.innerWidth,u.innerHeight)),s=Io(Se(a.offsetWidth,a.offsetHeight))
i.bind(u,"resize",e),i.bind(u,"scroll",r)
var l=uc(At.fromDom(t.getBody()),"load",o),f=n.uiMothership.element
t.on("hide",(function(){fn(f,"display","none")})),t.on("show",(function(){vn(f,"display")})),t.on("NodeChange",o),t.on("remove",(function(){l.unbind(),i.unbind(u,"resize",e),i.unbind(u,"scroll",r),u=null}))}(t,n)}))
var l,f,d,g,p=Z_.getSocket(u).getOrDie("Could not find expected socket element")
$T&&(dn(p.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),f=function(){t.fire("ScrollContent")},d=null,g=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
m(d)&&(d=setTimeout((function(){d=null,f.apply(null,t)}),20))},l=ic(p.element,"scroll",g),t.on("remove",l.unbind)),Zh(t,n),t.addCommand("ToggleSidebar",(function(n,e){Z_.toggleSidebar(u,e),t.fire("ToggleSidebar")})),t.addQueryValueHandler("ToggleSidebar",(function(){return Z_.whichSidebar(u)}))
var h=jh(t)
h!==rh.sliding&&h!==rh.floating||t.on("ResizeWindow ResizeEditor ResizeContent",(function(){var e=t.getWin().innerWidth
e!==i.get()&&(Z_.refreshToolbar(n.outerContainer),i.set(e))}))
var v={enable:function(){Qh(n,!1)},disable:function(){Qh(n,!0)},isDisabled:function(){return ed.isDisabled(u)}}
return{iframeContainer:p.element.dom,editorContainer:u.element.dom,api:v}}}),ZT=Object.freeze({__proto__:null,render:function(t,n,e,o,r){var i=n.mothership,u=n.uiMothership,c=n.outerContainer,s=Io(null),l=At.fromDom(r.targetNode),f=function(t,n,e,o,r){function i(){return w.get()&&!t.removed}function u(t){return x?t.fold(a(0),(function(t){return 1<t.components().length?xn(t.components()[1].element):0})):0}function c(){f.broadcastOn([cf()],{})}function s(t){var e,o,a,s,l
void 0===t&&(t=!1),i()&&(g||(e=h.getOrThunk((function(){var t=bT(gn(ve(),"margin-left")).getOr(0)
return kn(ve())-Cn(n).left+t})),fn(r.get().element,"max-width",e+"px")),x&&Z_.refreshToolbar(d),g||(o=u(Z_.getToolbar(d)),a=Me(n),s=b()?Math.max(a.y-xn(r.get().element)+o,0):a.bottom,dn(d.element,{position:"absolute",top:Math.round(s)+"px",left:Math.round(a.x)+"px"})),p&&(l=r.get(),t?s_.reset(l):s_.refresh(l)),c())}function l(e){var o,a
void 0===e&&(e=!0),!g&&p&&i()&&(o=v.getDockingMode(),(a=function(e){switch(Gh(t)){case uh.auto:var o=u(Z_.getToolbar(d)),r=xn(e.element)-o,i=Me(n)
if(i.y>r)return"top"
var a=Gt(n),c=Math.max(a.dom.scrollHeight,xn(a))
return i.bottom<c-r||Ae().bottom<i.bottom-r?"bottom":"top"
case uh.bottom:return"bottom"
default:return uh.top,"top"}}(r.get()))!==o&&(function(t){var n=r.get()
s_.setModes(n,[t]),v.setDockingMode(t)
var e=b()?gc.TopToBottom:gc.BottomToTop
on(n.element,jc,e)}(a),e&&s(!0)))}var f=e.uiMothership,d=e.outerContainer,m=Lh.DOM,g=Yh(t),p=$h(t),h=Zp(t).or(wT(t)),v=o.shared.header,b=v.isPositionedAtTop,y=jh(t),x=y===rh.sliding||y===rh.floating,w=Io(!1)
return{isVisible:i,isPositionedAtTop:b,show:function(){w.set(!0),fn(d.element,"display","flex"),m.addClass(t.getBody(),"mce-edit-focus"),vn(f.element,"display"),l(!1),s()},hide:function(){w.set(!1),e.outerContainer&&(fn(d.element,"display","none"),m.removeClass(t.getBody(),"mce-edit-focus")),fn(f.element,"display","none")},update:s,updateMode:l,repositionPopups:c}}(t,l,n,o,s),d=t.getParam("toolbar_persist",!1,"boolean")
function m(){var r
s.get()?f.show():(s.set(Z_.getHeader(c).getOrDie()),Es(r=Kh(t),i),Es(r,u),vT(t,n,e,o),Z_.setMenubar(c,uO(t,e)),f.show(),function(t,n,e,o){function r(o){var r=ST(n,e.isPositionedAtTop()),u=r.pos,a=r.bounds,c=i.get(),s=c.pos,l=c.bounds,f=a.height!==l.height||a.width!==l.width
i.set({pos:u,bounds:a}),f&&Tv(t,o),e.isVisible()&&(s!==u?e.update(!0):f&&(e.updateMode(),e.repositionPopups()))}var i=Io(ST(n,e.isPositionedAtTop()))
o||(t.on("activate",e.show),t.on("deactivate",e.hide)),t.on("SkinLoaded ResizeWindow",(function(){return e.update(!0)})),t.on("NodeChange keydown",(function(t){$g.requestAnimationFrame((function(){return r(t)}))})),t.on("ScrollWindow",(function(){return e.updateMode()}))
var u=oc()
u.set(uc(At.fromDom(t.getBody()),"load",r)),t.on("remove",(function(){u.clear()}))}(t,l,f,d),t.nodeChanged())}function g(){return $g.setEditorTimeout(t,m,0)}eT(t),t.on("show",m),t.on("hide",f.hide),d||(t.on("focus",g),t.on("blur",f.hide)),t.on("init",(function(){(t.hasFocus()||d)&&g()})),Zh(t,n)
var p={show:function(){f.show()},hide:function(){f.hide()},enable:function(){Qh(n,!1)},disable:function(){Qh(n,!0)},isDisabled:function(){return ed.isDisabled(c)}}
return{editorContainer:c.element.dom,api:p}}}),tE="contexttoolbar-hide",nE=function(t,n){var e,o,r,u,a=t.label.fold((function(){return{}}),(function(t){return{"aria-label":t}})),c=Tm(iy.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:qa([wg.config({mode:"special",onEnter:function(t){return s.findPrimary(t).map((function(t){return hr(t),!0}))},onLeft:function(t,n){return n.cut(),vt.none()},onRight:function(t,n){return n.cut(),vt.none()}})])})),s=(e=c,o=t.commands,r=n,u=R(o,(function(t){return Tm(("contextformtogglebutton"===t.type?function(t,n,e){var o=n.original
o.primary
var r=_(o,["primary"]),u=io(dp(O(O({},r),{type:"togglebutton",onAction:i})))
return GT(u,e.backstage.shared.providers,[CT(t,n)])}:function(t,n,e){var o=n.original
o.primary
var r=_(o,["primary"]),u=io(fp(O(O({},r),{type:"button",onAction:i})))
return jT(u,e.backstage.shared.providers,[CT(t,n)])})(e,t,{backstage:{shared:{providers:r}}}))})),{asSpecs:function(){return R(u,(function(t){return t.asSpec()}))},findPrimary:function(t){return Z(o,(function(n,e){return n.primary?vt.from(u[e]).bind((function(n){return n.getOpt(t)})).filter(x(ed.isDisabled)):vt.none()}))}})
return[{title:vt.none(),items:[c.asSpec()]},{title:vt.none(),items:s.asSpecs()}]},eE={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},oE={maxHeightFunction:kc(),maxWidthFunction:R_()},rE=Mr("forward-slide"),iE=Mr("backward-slide"),uE=Mr("change-slide-event"),aE="tox-pop--resizing",cE="tox-pop--transition",sE={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},lE=(AT=["Infinity",(BT="[0-9]+")+"\\."+fE(BT)+fE(MT="[eE][+-]?[0-9]+"),"\\."+BT+fE(MT),BT+fE(MT)].join("|"),new RegExp("^([+-]?(?:"+AT+"))(.*)$"))
function fE(t){return"(?:"+t+")?"}function dE(t,n){function e(){var e=n.getOptions(t),o=n.getCurrent(t).map(n.hash),r=rc()
return R(e,(function(e){return{type:"togglemenuitem",text:n.display(e),onSetup:function(i){function u(t){t&&(r.on((function(t){return t.setActive(!1)})),r.set(i)),i.setActive(t)}u(at(o,n.hash(e)))
var a=n.watcher(t,e,u)
return function(){r.clear(),a()}},onAction:function(){return n.setCurrent(t,e)}}}))}t.ui.registry.addMenuButton(n.name,{tooltip:n.text,icon:n.icon,fetch:function(t){return t(e())},onSetup:n.onToolbarSetup}),t.ui.registry.addNestedMenuItem(n.name,{type:"nestedmenuitem",text:n.text,getSubmenuItems:e,onSetup:n.onMenuSetup})}function mE(t,n){return function(){t.execCommand("mceToggleFormat",!1,n)}}function gE(t,n){return fO(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(e){e.setDisabled(t.mode.isReadOnly()||!t.undoManager[n]())}))}function pE(t,n){var e,o,r,i,u,c,s,l,f,d,m,g,h,v,b,y,x,w,S,C,k,_,T,E,D,B=t
St([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(t){B.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:mO(B,t.cmd),onSetup:lO(B,t.name)})})),B.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:mO(B,"JustifyNone")}),function(t){var n,e
!function(t){VS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(n,e){t.ui.registry.addToggleButton(n.name,{tooltip:n.text,icon:n.icon,onSetup:lO(t,n.name),onAction:mE(t,n.name)})}))
for(var n=1;n<=6;n++){var e="h"+n
t.ui.registry.addToggleButton(e,{text:e.toUpperCase(),tooltip:"Heading "+n,onSetup:lO(t,e),onAction:mE(t,e)})}}(t),n=t,VS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(t){n.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:mO(n,t.action)})})),e=t,VS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:mO(e,t.action),onSetup:lO(e,t.name)})}))}(E=t),D=E,VS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(t){D.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:mO(D,t.action)})})),D.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:mE(D,"code")}),T=gO(0,m=f=n,rT(d=l=t)),d.ui.registry.addNestedMenuItem("align",{text:m.shared.providers.translate("Align"),getSubmenuItems:function(){return T.items.validateItems(T.getStyleItems())}}),v=gO(0,h=f,uT(g=l)),g.ui.registry.addNestedMenuItem("fontformats",{text:h.shared.providers.translate("Fonts"),getSubmenuItems:function(){return v.items.validateItems(v.getStyleItems())}}),b=l,x=O({type:"advanced"},(y=f).styleselect),w=gO(0,y,lT(b,x)),b.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return w.items.validateItems(w.getStyleItems())}}),C=gO(0,f,sT(S=l)),S.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return C.items.validateItems(C.getStyleItems())}}),_=gO(0,f,aT(k=l)),k.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return _.items.validateItems(_.getStyleItems())}}),(c=u=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:gE(c,"hasUndo"),onAction:mO(c,"undo")}),c.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:gE(c,"hasRedo"),onAction:mO(c,"redo")}),(s=u).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:gE(s,"hasUndo"),onAction:mO(s,"undo")}),s.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:gE(s,"hasRedo"),onAction:mO(s,"redo")}),function(t){var n;(n=t).addCommand("mceApplyTextcolor",(function(t,e){var o,r=t,i=e;(o=n).undoManager.transact((function(){o.focus(),o.formatter.apply(r,{value:i}),o.nodeChanged()}))})),n.addCommand("mceRemoveTextcolor",(function(t){var e,o=t;(e=n).undoManager.transact((function(){e.focus(),e.formatter.remove(o,{value:null},null,!0),e.nodeChanged()}))}))
var e=Io(null),o=Io(null)
cb(t,"forecolor","forecolor","Text color",e),cb(t,"backcolor","hilitecolor","Background color",o),sb(t,"forecolor","forecolor","Text color"),sb(t,"backcolor","hilitecolor","Background color")}(t),function(t){var n
t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:mO(t,"mceToggleVisualAid")}),t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:fO(n=t,"VisualAid",(function(t){t.setActive(n.hasVisual)})),onAction:mO(t,"mceToggleVisualAid")})}(t),(r=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:fO(i=r,"NodeChange",(function(t){t.setDisabled(!i.queryCommandState("outdent"))})),onAction:mO(r,"outdent")}),r.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:mO(r,"indent")}),dE(e=t,QE),o=e,vt.from(o.getParam("content_langs",void 0,"array")).map((function(t){return{name:"language",text:"Language",icon:"language",getOptions:a(t),hash:function(t){return p(t.customCode)?t.code:t.code+"/"+t.customCode},display:function(t){return t.title},watcher:function(t,n,e){return t.formatter.formatChanged("lang",e,!1,{value:n.code,customValue:n.customCode}).unbind},getCurrent:function(t){return lr(At.fromDom(t.selection.getNode()),(function(t){return vt.some(t).filter(Gn).bind((function(t){return un(t,"lang").map((function(n){return{code:n,customCode:un(t,"data-mce-lang").getOrUndefined(),title:""}}))}))}))},setCurrent:function(t,n){return t.execCommand("Lang",!1,n)},onToolbarSetup:function(t){var n=oc()
return t.setActive(o.formatter.match("lang",{},void 0,!0)),n.set(o.formatter.formatChanged("lang",t.setActive,!0)),n.clear}}})).each((function(t){return dE(e,t)}))}function hE(t,n){return{type:"makeshift",x:t,y:n}}function vE(t){return"longpress"===t.type||0===t.type.indexOf("touch")}function bE(t,n,e){switch(e){case"node":return{type:"node",node:vt.some(At.fromDom((o=t).selection.getNode())),root:At.fromDom(o.getBody())}
case"point":return function(t,n){return"contextmenu"===n.type||"longpress"===n.type?t.inline?function(t){if(vE(t)){var n=t.touches[0]
return hE(n.pageX,n.pageY)}return hE(t.pageX,t.pageY)}(n):(e=t.getContentAreaContainer(),o=function(t){if(vE(t)){var n=t.touches[0]
return hE(n.clientX,n.clientY)}return hE(t.clientX,t.clientY)}(n),i=(r=Lh.DOM.getPos(e)).x,u=r.y,hE(o.x+i,o.y+u)):ZE(t)
var e,o,r,i,u}(t,n)
case"selection":return ZE(t)}var o}function yE(t,n,e,o,r,i){function u(){var u,a,c,m,g,p,h,v,b,y
c=e(),m=o,g=r,h=!(f||s||l&&d),b=bE(u=t,a=n,v=p=i),y=O({bubble:fc(0,"point"===v?12:0,nD),layouts:tD,overrides:{maxWidthFunction:R_(),maxHeightFunction:kc()}},b),pw(c,ch.CLOSE_ON_EXECUTE,m,!0).map((function(t){a.preventDefault(),qg.showMenuWithinBounds(g,{anchor:y},{menu:{markers:Hp("normal"),highlightImmediately:h},data:t,type:"horizontal"},(function(){return vt.some(_T(u,m.shared,"node"===p?"node":"selection"))})),u.fire(tE)}))}var a,c=se(),s=c.os.isiOS(),l=c.os.isOSX(),f=c.os.isAndroid(),d=c.deviceType.isTouch();(l||s)&&"node"!==i?(a=function(){(function(t){function n(){$g.setEditorTimeout(t,(function(){t.selection.setRng(e)}),10),i()}var e=t.selection.getRng()
function o(t){t.preventDefault(),t.stopImmediatePropagation()}function r(){return i()}t.once("touchend",n),t.on("mousedown",o,!0),t.once("longpresscancel",r)
var i=function(){t.off("touchend",n),t.off("longpresscancel",r),t.off("mousedown",o)}})(t),u()},function(t,n){var e=t.selection
if(!(e.isCollapsed()||n.touches.length<1)){var o=n.touches[0],r=e.getRng()
return cs(t.getWin(),ns.domRange(r)).exists((function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY}))}}(t,n)?a():(t.once("selectionchange",a),t.once("touchend",(function(){return t.off("selectionchange",a)})))):u()}function xE(t){return"string"==typeof t?t.split(/[ ,]/):t}function wE(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")}function SE(t){return l(t)?"|"===t:"separator"===t.type}function CE(t,n){if(0===n.length)return t
var e=Q(t).filter((function(t){return!SE(t)})).fold((function(){return[]}),(function(t){return[eD]}))
return t.concat(e).concat(n).concat([eD])}function kE(t,n){return"longpress"!==n.type&&(2!==n.button||n.target===t.getBody()&&""===n.pointerType)}function OE(t,n){return kE(t,n)?t.selection.getStart(!0):n.target}function _E(t,n,e){function o(t){return qg.hide(u)}function r(n){var o
wE(t)&&n.preventDefault(),n.ctrlKey&&!wE(t)||!1===t.getParam("contextmenu")||(o=function(t,n){var e=t.getParam("contextmenu_avoid_overlap","","string"),o=kE(t,n)?"selection":"point"
if(dt(e)){var r=OE(t,n)
return Ob(At.fromDom(r),e)?"node":o}return o}(t,n),(i()?yE:function(t,n,e,o,r,i){var u=e(),a=bE(t,n,i)
pw(u,ch.CLOSE_ON_EXECUTE,o,!1).map((function(t){n.preventDefault(),qg.showMenuAt(r,{anchor:a},{menu:{markers:Hp("normal")},data:t})}))})(t,n,(function(){var e,o,r,i=OE(t,n),u=t.ui.registry.getAll(),a=(r=(o=t).ui.registry.getAll().contextMenus,vt.from(o.getParam("contextmenu")).map(xE).getOrThunk((function(){return P(xE("link linkchecker image imagetools table spellchecker configurepermanentpen"),(function(t){return Tt(r,t)}))}))),c=u.contextMenus,s=i
return 0<(e=z(a,(function(t,n){return it(c,n.toLowerCase()).map((function(n){var e=n.update(s)
if(l(e))return CE(t,e.split(" "))
if(0<e.length){var o=R(e,oD)
return CE(t,o)}return t})).getOrThunk((function(){return t.concat([n])}))}),[])).length&&SE(e[e.length-1])&&e.pop(),e}),e,u,o))}var i=se().deviceType.isTouch,u=xu(qg.sketch({dom:{tag:"div"},lazySink:n,onEscape:function(){return t.focus()},onShow:function(){return e.setContextMenuState(!0)},onHide:function(){return e.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:qa([nm("dismissContextMenu",[wr(Ni(),(function(n,e){uf.close(n),t.focus()}))])])}))
t.on("init",(function(){var n="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(i()?"":" ResizeWindow")
t.on(n,o),t.on("longpress contextmenu",r)}))}function TE(t){return function(n){return n.translate(-t.left,-t.top)}}function EE(t){return function(n){return n.translate(t.left,t.top)}}function DE(t){return function(n,e){return z(t,(function(t,n){return n(t)}),Se(n,e))}}function BE(t,n,e){return t.fold(DE([EE(e),TE(n)]),DE([TE(n)]),DE([]))}function ME(t,n,e){return t.fold(DE([EE(e)]),DE([]),DE([EE(n)]))}function AE(t,n,e){return t.fold(DE([]),DE([TE(e)]),DE([EE(n),TE(e)]))}function FE(t,n,e){var o=t.fold((function(t,n){return{position:vt.some("absolute"),left:vt.some(t+"px"),top:vt.some(n+"px")}}),(function(t,n){return{position:vt.some("absolute"),left:vt.some(t-e.left+"px"),top:vt.some(n-e.top+"px")}}),(function(t,n){return{position:vt.some("fixed"),left:vt.some(t+"px"),top:vt.some(n+"px")}}))
return O({right:vt.none(),bottom:vt.none()},o)}function IE(t,n,e,o){function r(t,r){return function(i,u){var a=t(n,e,o)
return r(i.getOr(a.left),u.getOr(a.top))}}return t.fold(r(AE,iD),r(ME,uD),r(BE,aD))}function RE(t,n){var e=rn(t,n)
return p(e)?NaN:parseInt(e,10)}function VE(t,n,e,o){return Z(t,(function(t){var r,i,u=t.sensor,a=t.range.left,c=t.range.top,s=ME(n,r=e,i=o),l=ME(u,r,i)
return Math.abs(s.left-l.left)<=a&&Math.abs(s.top-l.top)<=c?vt.some({output:IE(t.output,n,e,o),extra:t.extra}):vt.none()}))}function PE(t,n){var e
t.getSystem().addToGui(n),qt((e=n).element).filter(Gn).each((function(t){pn(t,"z-index").each((function(n){on(t,fD,n)})),fn(t,"z-index",gn(e.element,"z-index"))}))}function HE(t){qt(t.element).filter(Gn).each((function(t){un(t,fD).fold((function(){return vn(t,"z-index")}),(function(n){return fn(t,"z-index",n)})),cn(t,fD)})),t.getSystem().removeFromGui(t)}function zE(t,n,e){return t.getSystem().build(Nb.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[n]},events:e}))}function NE(t,n){return{bounds:t.getBounds(),height:wn(n.element),width:On(n.element)}}function LE(t,n,e,o,r){var i=e.update(o,r),u=e.getStartData().getOrThunk((function(){return NE(n,t)}))
i.each((function(e){var o,r,i,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,C,k,O,_,T,E,D,B=t,M=u,A=e,F=(o=n).getTarget(B.element)
o.repositionTarget&&(r=In(Ut(B.element)),i=lk(F),_=pn(O=F,"left"),T=pn(O,"top"),E=pn(O,"position"),D=function(t,n,e){return("fixed"===e?aD:iD)(parseInt(t,10),parseInt(n,10))},c=(_.isSome()&&T.isSome()&&E.isSome()?vt.some(D(_.getOrDie(),T.getOrDie(),E.getOrDie())):vt.none()).getOrThunk((function(){var t=Cn(O)
return uD(t.left,t.top)})),s=B,l=o.snaps,f=c,d=r,m=i,g=A,p=M,v=l.fold((function(){var t,n,e=BE((t=g.left,n=g.top,f.fold((function(e,o){return iD(e+t,o+n)}),(function(e,o){return uD(e+t,o+n)}),(function(e,o){return aD(e+t,o+n)}))),d,m)
return aD(e.left,e.top)}),(function(t){var n=function(t,n,e,o,r,i){var u,a,c,s,l,f,d=(u=e,a=o,l=RE(s=t.element,(c=n).leftAttr),f=RE(s,c.topAttr),(isNaN(l)||isNaN(f)?vt.none():vt.some(Se(l,f))).fold((function(){return u}),(function(t){return aD(t.left+a.left,t.top+a.top)}))),m=(n.mustSnap?cD:sD)(t,n,d,r,i),g=BE(d,r,i),p=n,h=g,v=t.element
return on(v,p.leftAttr,h.left+"px"),on(v,p.topAttr,h.top+"px"),m.fold((function(){return{coord:aD(g.left,g.top),extra:vt.none()}}),(function(t){return{coord:t.output,extra:t.extra}}))}(s,t,f,g,d,m)
return n.extra.each((function(n){t.onSensor(s,n)})),n.coord})),b=d,y=m,x=(h=p).bounds,w=ME(v,b,y),S=Va(w.left,x.x,x.x+x.width-h.width),C=Va(w.top,x.y,x.y+x.height-h.height),k=uD(S,C),mn(F,FE(v.fold((function(){var t=AE(k,b,y)
return iD(t.left,t.top)}),a(k),(function(){var t=BE(k,b,y)
return aD(t.left,t.top)})),0,i))),o.onDrag(B,F,A)}))}function WE(t,n,e,o){n.each(HE),e.snaps.each((function(n){var e,o
e=n,cn(o=t.element,e.leftAttr),cn(o,e.topAttr)}))
var r=e.getTarget(t.element)
o.reset(),e.onDrop(t,r)}function UE(t){return function(n,e){function o(t){e.setStartData(NE(n,t))}return Ki(T([wr(Vi(),(function(t){e.getStartData().each((function(){return o(t)}))}))],t(n,e,o),!0))}}function jE(t,n,e){return[wr(ui(),(function(o,r){var i,u,a,c,s
0===r.event.raw.button&&(r.stop(),a={drop:i=function(){return WE(o,vt.some(c),t,n)},delayDrop:(u=_b(i,200)).schedule,forceDrop:i,move:function(e){u.cancel(),LE(o,t,n,gD,e)}},c=zE(o,t.blockerClass,(s=a,Ki([wr(ui(),s.forceDrop),wr(si(),s.drop),wr(ai(),(function(t,n){s.move(n.event)})),wr(ci(),s.delayDrop)]))),e(o),PE(o,c))}))]}function GE(t,n,e){function o(e){WE(e,r.get(),t,n),r.clear()}var r=rc()
return[wr(ei(),(function(i,u){u.stop()
var a,c,s,l=zE(i,t.blockerClass,(c=a=function(){return o(i)},s=function(e){LE(i,t,n,hD,e)},Ki([wr(ei(),c),wr(ri(),a),wr(ii(),a),wr(oi(),(function(t,n){s(n.event)}))])))
r.set(l),e(i),PE(i,l)})),wr(oi(),(function(e,o){o.stop(),LE(e,t,n,hD,o.event)})),wr(ri(),(function(t,n){n.stop(),o(t)})),wr(ii(),o)]}function XE(t,n,e,o,r,i){return t.fold((function(){return yD.snap({sensor:uD(e-20,o-20),range:Se(r,i),output:uD(vt.some(e),vt.some(o)),extra:{td:n}})}),(function(t){var r=e-20,i=o-20,u=t.element.dom.getBoundingClientRect()
return yD.snap({sensor:uD(r,i),range:Se(40,40),output:uD(vt.some(e-u.width/2),vt.some(o-u.height/2)),extra:{td:n}})}))}function qE(t,n,e){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r=o.td,i=n.get(),u=r
i.exists((function(t){return Lt(t,u)}))||(n.set(r),e(r))},mustSnap:!0}}function YE(t){return Tm(Qg.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:qa([yD.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Ww.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}function KE(t,n){function e(t){var e=zn(t)
return XE(g.getOpt(n),t,e.x,e.y,e.width,e.height)}function o(t){var e=zn(t)
return XE(p.getOpt(n),t,e.right,e.bottom,e.width,e.height)}function r(n,e,o,r){var i=o(e)
yD.snapTo(n,i),function(n){var o=e.dom.getBoundingClientRect()
vn(n.element,"display")
var i=Xt(At.fromDom(t.getBody())).dom.innerHeight,u=o[r]<0,a=o[r]>i;(u||a)&&fn(n.element,"display","none")}(n)}function i(t){return r(h,t,e,"top")}function u(t){return r(v,t,o,"bottom")}var a=Io([]),c=Io([]),s=Io(!1),l=rc(),f=rc(),d=qE((function(){return R(a.get(),e)}),l,(function(n){f.get().each((function(e){t.fire("TableSelectorChange",{start:n,finish:e})}))})),m=qE((function(){return R(c.get(),o)}),f,(function(n){l.get().each((function(e){t.fire("TableSelectorChange",{start:e,finish:n})}))})),g=YE(d),p=YE(m),h=xu(g.asSpec()),v=xu(p.asSpec())
se().deviceType.isTouch()&&(t.on("TableSelectionChange",(function(t){s.get()||(ks(n,h),ks(n,v),s.set(!0)),l.set(t.start),f.set(t.finish),t.otherCells.each((function(n){a.set(n.upOrLeftCells),c.set(n.downOrRightCells),i(t.start),u(t.finish)}))})),t.on("ResizeEditor ResizeWindow ScrollContent",(function(){l.get().each(i),f.get().each(u)})),t.on("TableSelectionClear",(function(){s.get()&&(_s(h),_s(v),s.set(!1)),l.clear(),f.clear()})))}var JE,$E,QE={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(t){return n=["fixed","relative","empty"],vt.from(lE.exec(t)).bind((function(t){var e=Number(t[1]),o=t[2],r=o
return A(n,(function(t){return A(sE[t],(function(t){return r===t}))}))?vt.some({value:e,unit:o}):vt.none()})).map((function(t){return t.value+t.unit})).getOr(t)
var n},display:c,watcher:function(t,n,e){return t.formatter.formatChanged("lineheight",e,!1,{value:n}).unbind},getCurrent:function(t){return vt.from(t.queryCommandValue("LineHeight"))},setCurrent:function(t,n){return t.execCommand("LineHeight",!1,n)}},ZE=function(t){return{type:"selection",root:At.fromDom(t.selection.getNode())}},tD={onLtr:function(){return[Ua,Ha,za,Na,La,Wa,Kg,Jg,xm,bm,ym,vm]},onRtl:function(){return[Ua,za,Ha,La,Na,Wa,Kg,Jg,ym,vm,xm,bm]}},nD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},eD={type:"separator"},oD=function(t){function n(t){return{text:t.text,icon:t.icon,disabled:t.disabled,shortcut:t.shortcut}}var e
if(l(t))return t
switch(t.type){case"separator":return eD
case"submenu":return O(O({type:"nestedmenuitem"},n(t)),{getSubmenuItems:function(){var n=t.getSubmenuItems()
return l(n)?n:R(n,oD)}})
default:return O(O({type:"menuitem"},n(t)),{onAction:(e=t.onAction,function(){return e()})})}},rD=Ro([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),iD=rD.offset,uD=rD.absolute,aD=rD.fixed,cD=function(t,n,e,o,r){var i=n.getSnapPoints(t)
return VE(i,e,o,r).orThunk((function(){return z(i,(function(t,n){var i,u,a,c,s,l,f,d=(i=n.sensor,n.range.left,n.range.top,c=ME(e,u=o,a=r),s=ME(i,u,a),l=Math.abs(c.left-s.left),f=Math.abs(c.top-s.top),Se(l,f))
return t.deltas.fold((function(){return{deltas:vt.some(d),snap:vt.some(n)}}),(function(e){return(d.left+d.top)/2<=(e.left+e.top)/2?{deltas:vt.some(d),snap:vt.some(n)}:t}))}),{deltas:vt.none(),snap:vt.none()}).snap.map((function(t){return{output:IE(t.output,e,o,r),extra:t.extra}}))}))},sD=function(t,n,e,o,r){return VE(n.getSnapPoints(t),e,o,r)},lD=Object.freeze({__proto__:null,snapTo:function(t,n,e,o){var r,i,u,a=n.getTarget(t.element)
n.repositionTarget&&(r=In(Ut(t.element)),i=lk(a),mn(a,FE([IE((u=o).output,u.output,r,i),u.extra][0],0,i)))}}),fD="data-initial-z-index",dD=ko("snaps",[so("getSnapPoints"),Wu("onSensor"),so("leftAttr"),so("topAttr"),Oo("lazyViewport",Ae),Oo("mustSnap",!1)]),mD=[Oo("useFixed",S),so("blockerClass"),Oo("getTarget",c),Oo("onDrag",i),Oo("repositionTarget",!0),Oo("onDrop",i),Mo("getBounds",Ae),dD],gD=Object.freeze({__proto__:null,getData:function(t){return vt.from(Se(t.x,t.y))},getDelta:function(t,n){return Se(n.left-t.left,n.top-t.top)}}),pD=T(T([],mD,!0),[Xu("dragger",{handlers:UE(jE)})],!1),hD=Object.freeze({__proto__:null,getData:function(t){var n,e=t.raw.touches
return 1===e.length?(n=e[0],vt.some(Se(n.clientX,n.clientY))):vt.none()},getDelta:function(t,n){return Se(n.left-t.left,n.top-t.top)}}),vD=T(T([],mD,!0),[Xu("dragger",{handlers:UE(GE)})],!1),bD=T(T([],mD,!0),[Xu("dragger",{handlers:UE((function(t,n,e){return T(T([],jE(t,n,e),!0),GE(t,n,e),!0)}))})],!1),yD=ma({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:pD,touch:vD,mouseOrTouch:bD}),name:"dragging",active:{events:function(t,n){return t.dragger.handlers(t,n)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:vt.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var t=vt.none(),n=vt.none(),e=a({})
return gu({readState:e,reset:function(){t=vt.none(),n=vt.none()},update:function(n,e){return n.getData(e).bind((function(e){return o=n,r=e,i=t.map((function(t){return o.getDelta(t,r)})),t=vt.some(r),i
var o,r,i}))},getStartData:function(){return n},setStartData:function(t){n=vt.some(t)}})}}),apis:lD})
function xD(t,n,e){var o,r,i,u,a,c,s=At.fromDom(t.getContainer())
tt((o=t,r=n,i=e,u=xn(s),a=kn(s),(c={}).height=xT(u+r.top,Qp(o),th(o)),i===JE.Both&&(c.width=xT(a+r.left,$p(o),Zp(o))),c),(function(t,n){return fn(s,n,yT(t)),0})),t.fire("ResizeEditor")}function wD(t,n,e,o){return xD(t,Se(20*e,20*o),n),vt.some(!0)}function SD(t,n){var e,o,r,i,u,a,c,s,l,f,d,m,g,p,h,v
return{dom:{tag:"div",classes:["tox-statusbar"]},components:(v=[],t.getParam("elementpath",!0,"boolean")&&v.push((g=t,h=n,(p={}).delimiter||(p.delimiter=""),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:qa([wg.config({mode:"flow",selector:"div[role=button]"}),ed.config({disabled:h.isDisabled}),tv(),Gb.config({}),Cg.config({}),nm("elementPathEvents",[Ji((function(t,n){g.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return wg.focusIn(t)})),g.on("NodeChange",(function(n){var e,o,r=function(t){for(var n=[],e=t.length;0<e--;){var o=t[e]
if(1===o.nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return 1
if("bookmark"===t.getAttribute("data-mce-type"))return 1}}(o)){var r=g.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o})
if(r.isDefaultPrevented()||n.push({name:r.name,element:o}),r.isPropagationStopped())break}}return n}(n.parents)
0<r.length?Cg.set(t,(e=R(r||[],(function(t,n){return Qg.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":n,"tab-index":-1,"aria-level":n+1},innerHtml:t.name},action:function(n){g.focus(),g.selection.select(t.element),g.nodeChanged()},buttonBehaviours:qa([Vv(h.isDisabled),tv()])})})),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+p.delimiter+" "}},z(e.slice(1),(function(t,n){var e=t
return e.push(o),e.push(n),e}),[e[0]]))):Cg.set(t,[])}))}))])]),components:[]})),t.hasPlugin("wordcount")&&v.push((f=t,d=n,Qg.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:qa([Vv(d.isDisabled),tv(),Gb.config({}),Cg.config({}),vf.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),nm("wordcount-events",[Zi((function(t){var n=vf.getValue(t),e="words"===n.mode?"characters":"words"
vf.setValue(t,{mode:e,count:n.count}),b(t,n.count,e)})),Ji((function(t){f.on("wordCountUpdate",(function(n){var e=vf.getValue(t).mode
vf.setValue(t,{mode:e,count:n.wordCount}),b(t,n.wordCount,e)}))}))])]),eventOrder:((m={})[Ti()]=["disabling","alloy.base.behaviour","wordcount-events"],m)}))),t.getParam("branding",!0,"boolean")&&v.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(l=Zg.translate(["Powered by {0}","Tiny"]))+'">'+l+"</a>"}}),e=0<v.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:v}]:[],i=n,a=!(u=r=t).hasPlugin("autoresize"),o=(s=!1===(c=u.getParam("resize",a))?JE.None:"both"===c?JE.Both:JE.Vertical)===JE.None?vt.none():vt.some(Im("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:i.translate("Resize")},behaviours:[yD.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,n,e){return xD(r,e,s)},blockerClass:"tox-blocker"}),wg.config({mode:"special",onLeft:function(){return wD(r,s,-1,0)},onRight:function(){return wD(r,s,1,0)},onUp:function(){return wD(r,s,0,-1)},onDown:function(){return wD(r,s,0,1)}}),Gb.config({}),_g.config({})]},i.icons)),e.concat(o.toArray()))}
function b(t,n,e){return Cg.set(t,[$r(d.translate(["{0} "+e,n[e]]))])}}function CD(t){function n(){return d.bind(Z_.getHeader)}function e(){return Re.value(x)}function o(){return d.bind((function(t){return Z_.getThrobber(t)})).getOrDie("Could not find throbber element")}var r,u,a,c,s=t.inline,l=s?ZT:QT,f=$h(t)?g_:r_,d=vt.none(),m=se(),g=m.browser.isIE()?["tox-platform-ie"]:[],p=m.deviceType.isTouch()?["tox-platform-touch"]:[],h=Xh(t),v=Kh(t),b=Zg.isRtl()?{attributes:{dir:"rtl"}}:{},y={attributes:((r={})[jc]=h?gc.BottomToTop:gc.TopToBottom,r)},x=xu((u=Lt(ve(),v)&&"grid"===gn(v,"display"),a={dom:O({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(g).concat(p)},b),behaviours:qa([Ql.config({useFixed:function(){return f.isDocked(n)}})])},c={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ki([wr(Pi(),(function(){fn(Z.element,"width",document.body.clientWidth+"px")}))])},jo(a,u?c:{}))),w=Tm({dom:{tag:"div",classes:["tox-anchorbar"]}}),S=ck(x,t,(function(){return d.bind((function(t){return w.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),C=Z_.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:S,onEscape:function(){t.focus()}}),k=jh(t),_=Z_.parts.toolbar(O({dom:{tag:"div",classes:["tox-toolbar"]},getSink:e,providers:S.shared.providers,onEscape:function(){t.focus()},type:k,lazyToolbar:function(){return d.bind((function(t){return Z_.getToolbar(t)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return n().getOrDie("Could not find header element")}},y)),T=Z_.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:S.shared.providers,onEscape:function(){t.focus()},type:k}),E=Z_.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),D=Z_.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),B=Z_.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:S}),M=t.getParam("statusbar",!0,"boolean")&&!s?vt.some(SD(t,S.shared.providers)):vt.none(),A={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[E,D]},F=Uh(t),I=eh(t),R=nh(t),V=Z_.parts.header({dom:O({tag:"div",classes:["tox-editor-header"]},y),components:W([R?[C]:[],F?[T]:I?[_]:[],Yh(t)?[]:[w.asSpec()]]),sticky:$h(t),editor:t,sharedBackstage:S.shared}),P=W([h?[]:[V],s?[]:[A],h?[V]:[]]),H=W([[{dom:{tag:"div",classes:["tox-editor-container"]},components:P}],s?[]:M.toArray(),[B]]),z=Jh(t),N=O(O({role:"application"},Zg.isRtl()?{dir:"rtl"}:{}),z?{"aria-hidden":"true"}:{}),L=xu(Z_.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(s?["tox-tinymce-inline"]:[]).concat(h?["tox-tinymce--toolbar-bottom"]:[]).concat(p).concat(g),styles:O({visibility:"hidden"},z?{opacity:"0",border:"0"}:{}),attributes:N},components:H,behaviours:qa([tv(),ed.config({disableClass:"tox-tinymce--disabled"}),wg.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}))
d=vt.some(L)
t.shortcuts.add("alt+F9","focus menubar",(function(){Z_.focusMenubar(L)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){Z_.focusToolbar(L)})),t.addCommand("ToggleToolbarDrawer",(function(){Z_.toggleToolbarDrawer(L)})),t.addQueryStateHandler("ToggleToolbarDrawer",(function(){return Z_.isToolbarDrawerToggled(L)}))
var U,j,G,X,q,Y,K,J,$,Q=Mb(L),Z=Mb(x)
return U=t,j=Q,G=Z,X=ga(),q=ic(X,"touchstart",ot),Y=ic(X,"touchmove",(function(t){return tt(Ii(),t)})),K=ic(X,"touchend",(function(t){return tt(Ri(),t)})),J=ic(X,"mousedown",ot),$=ic(X,"mouseup",(function(t){0===t.raw.button&&et(sf(),{target:t.target})})),U.on("PostRender",(function(){U.on("click",rt),U.on("tap",rt),U.on("mouseup",it),U.on("mousedown",ut),U.on("ScrollWindow",ct),U.on("ResizeWindow",st),U.on("ResizeEditor",lt),U.on("AfterProgressState",ft),U.on("DismissPopups",dt)})),U.on("remove",(function(){U.off("click",rt),U.off("tap",rt),U.off("mouseup",it),U.off("mousedown",ut),U.off("ScrollWindow",ct),U.off("ResizeWindow",st),U.off("ResizeEditor",lt),U.off("AfterProgressState",ft),U.off("DismissPopups",dt),J.unbind(),q.unbind(),Y.unbind(),K.unbind(),$.unbind()})),U.on("detach",(function(){Ds(j),Ds(G),j.destroy(),G.destroy()})),{mothership:Q,uiMothership:Z,backstage:S,renderUI:function(){var r,i
f.setup(t,S.shared,n),pE(t,S),_E(t,e,S),i=(r=t).ui.registry.getAll().sidebars,St(kt(i),(function(t){function n(){return at(vt.from(r.queryCommandValue("ToggleSidebar")),t)}var e=i[t]
r.ui.registry.addToggleButton(t,{icon:e.icon,tooltip:e.tooltip,onAction:function(e){r.execCommand("ToggleSidebar",!1,t),e.setActive(n())},onSetup:function(t){function e(){return t.setActive(n())}return r.on("ToggleSidebar",e),function(){r.off("ToggleSidebar",e)}}})})),Wk(t,o,S.shared),nt(t.getParam("toolbar_groups",{},"object"),(function(n,e){t.ui.registry.addGroupToolbarButton(e,n)}))
var u,a=t.ui.registry.getAll(),c=a.buttons,s=a.menuItems,d=a.contextToolbars,m=a.sidebars,g=oh(t),p={menuItems:s,menus:(u=t.getParam("menu"))?nt(u,(function(t){return O(O({},t),{items:t.items})})):{},menubar:t.getParam("menubar"),toolbar:g.getOrThunk((function(){return t.getParam("toolbar",!0)})),allowToolbarGroups:k===rh.floating,buttons:c,sidebar:m}
DT(t,d,x,{backstage:S}),KE(t,x)
var h=t.getElement(),v=function(){var n,e,o,r,i,u,a=yT((r=Kp(o=e=t),i=Qp(o),u=th(o),bT(r).map((function(t){return xT(t,i,u)})).getOr(Kp(e)))),c=yT(wT(n=t).getOr(Jp(n)))
return t.inline||(hn("div","width",c)&&fn(L.element,"width",c),hn("div","height",a)?fn(L.element,"height",a):fn(L.element,"height","200px")),a}()
return l.render(t,{mothership:Q,uiMothership:Z,outerContainer:L},p,S,{targetNode:h,height:v})},getUi:function(){return{channels:{broadcastAll:Z.broadcast,broadcastOn:Z.broadcastOn,register:i}}}}
function tt(t,n){St([j,G],(function(e){e.broadcastEvent(t,n)}))}function et(t,n){St([j,G],(function(e){e.broadcastOn([t],n)}))}function ot(t){return et(af(),{target:t.target})}function rt(t){return et(af(),{target:At.fromDom(t.target)})}function it(t){0===t.button&&et(sf(),{target:At.fromDom(t.target)})}function ut(){St(U.editorManager.get(),(function(t){U!==t&&t.fire("DismissPopups",{relatedTarget:U})}))}function ct(t){return tt(Vi(),xc(t))}function st(t){et(cf(),{}),tt(Pi(),xc(t))}function lt(){return et(cf(),{})}function ft(t){t.state&&et(af(),{target:At.fromDom(U.getContainer())})}function dt(t){et(af(),{target:At.fromDom(t.relatedTarget.getContainer())})}}function kD(t){return rr("items","items",{tag:"required",process:{}},Qe(eo((function(n){return ro("Checking item of "+t,dM,n).fold((function(t){return Re.error(or(t))}),(function(t){return Re.value(t)}))}))))}function OD(t){return l(t.type)&&l(t.name)}function _D(t){return{internalDialog:io(ro("dialog",xM,t)),dataValidator:(n=U(P(CM(t),OD),(function(t){return vt.from(kM[t.type]).fold((function(){return[]}),(function(n){return[lo(t.name,n)]}))})),Yo(n)),initialData:t.initialData}
var n}function TD(t){var n=[],e={}
return tt(t,(function(t,o){t.fold((function(){n.push(o)}),(function(t){e[o]=t}))})),0<n.length?Re.error(n):Re.value(e)}function ED(t,n){fn(t,"height",n+"px"),se().browser.isIE()?vn(t,"flex-basis"):fn(t,"flex-basis",n+"px")}function DD(t,n,e){_u(t,'[role="dialog"]').each((function(t){Tu(t,'[role="tablist"]').each((function(o){e.get().map((function(e){return fn(n,"height","0"),fn(n,"flex-basis","0"),Math.min(e,(i=n,u=o,a=Gt(r=t).dom,c="fixed"===gn(_u(r,".tox-dialog-wrap").getOr(r),"position")?Math.max(a.clientHeight,window.innerHeight):Math.max(a.offsetHeight,a.scrollHeight),s=xn(i),l=i.dom.offsetLeft>=u.dom.offsetLeft+kn(u)?Math.max(xn(u),s):s,f=parseInt(gn(r,"margin-top"),10)||0,d=parseInt(gn(r,"margin-bottom"),10)||0,c-(xn(r)+f+d-l)))
var r,i,u,a,c,s,l,f,d})).each((function(t){ED(n,t)}))}))}))}function BD(t){return Tu(t,'[role="tabpanel"]')}function MD(t,n){function e(t){var n=TD(vf.getValue(t)).getOr({}),e=u.get(),o=jo(e,n)
u.set(o)}function o(t){var n=u.get()
vf.setValue(t,n)}var r,i,u=Io({}),a=Io(null),c=R(t.tabs,(function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:n.shared.providers.translate(t.title)},view:function(){return[TS.sketch((function(r){return{dom:{tag:"div",classes:["tox-form"]},components:R(t.items,(function(t){return HC(r,t,n)})),formBehaviours:qa([wg.config({mode:"acyclic",useTabstopAt:x(Ux)}),nm("TabView.form.events",[Ji(o),$i(e)]),$a.config({channels:ar([{key:IM,value:{onReceive:e}},{key:RM,value:{onReceive:o}}])})])}}))]}}})),s=(r=c,i=rc(),{extraEvents:[Ji((function(t){var n=t.element
BD(n).each((function(e){var o
fn(e,"visibility","hidden"),t.getSystem().getByDom(e).toOptional().each((function(t){var n,o,u
$(K((o=e,u=t,R(n=r,(function(t,e){Cg.set(u,n[e].view())
var r=o.dom.getBoundingClientRect()
return Cg.set(u,[]),r.height}))),(function(t,n){return n<t?-1:t<n?1:0}))).fold(i.clear,i.set)})),DD(n,e,i),vn(e,"visibility"),o=t,$(r).each((function(t){return FM.showTab(o,t.value)})),$g.requestAnimationFrame((function(){DD(n,e,i)}))}))})),wr(Pi(),(function(t){var n=t.element
BD(n).each((function(t){DD(n,t,i)}))})),wr(oy,(function(t,n){var e=t.element
BD(e).each((function(t){var n=va(me(t))
fn(t,"visibility","hidden")
var o=pn(t,"height").map((function(t){return parseInt(t,10)}))
vn(t,"height"),vn(t,"flex-basis")
var r=t.dom.getBoundingClientRect().height
o.forall((function(t){return t<r}))?(i.set(r),DD(e,t,i)):o.each((function(n){ED(t,n)})),vn(t,"visibility"),n.each(pa)}))}))],selectFirst:!1})
return FM.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,n,e){var o=vf.getValue(n)
pr(t,ey,{name:o,oldName:a.get()}),a.set(o)},tabs:c,components:[FM.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[DM.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:qa([Gb.config({})])}),FM.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:s.selectFirst,tabSectionBehaviours:qa([nm("tabpanel",s.extraEvents),wg.config({mode:"acyclic"}),Jf.config({find:function(t){return $(FM.getViewItems(t))}}),vf.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([IM],{}),u.get()},setValue:function(t,n){u.set(n),t.getSystem().broadcastOn([RM],{})}}})])})}function AD(t,n,e,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:O(O({},n.map((function(t){return{id:t}})).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:qa([FS(0),zT.config({channel:HM,updateState:function(t,n){return vt.some({isTabPanel:function(){return"tabpanel"===n.body.type}})},renderComponents:function(t){return"tabpanel"!==t.body.type?[(n=t.body,o=e,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(r=Tm(TS.sketch((function(t){return{dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:R(n.items,(function(n){return HC(t,n,o)}))}})))).asSpec()]}],behaviours:qa([wg.config({mode:"acyclic",useTabstopAt:x(Ux)}),AS(r),HS(r,{postprocess:function(t){return TD(t).fold((function(t){return console.error(t),{}}),c)}})])})]:[MD(t.body,e)]
var n,o,r},initialData:t})])}}function FD(t,n){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,n]}}function ID(t,n){return aB.parts.close(Qg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close")}},action:t,buttonBehaviours:qa([Gb.config({})])}))}function RD(){return aB.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function VD(t,n){return aB.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Nk("<p>"+n.translate(t)+"</p>")}]}]})}function PD(t){return aB.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})}function HD(t,n){return[Nb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Nb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:n})]}function zD(t){var n,e="tox-dialog",o=e+"-wrap",r=o+"__backdrop",i=e+"__disable-scroll"
return aB.sketch({lazySink:t.lazySink,onEscape:function(n){return t.onEscape(n),vt.some(!0)},useTabstopAt:function(t){return!Ux(t)},dom:{tag:"div",classes:[e].concat(t.extraClasses),styles:O({position:"relative"},t.extraStyles)},components:T([t.header,t.body],t.footer.toArray(),!0),parts:{blocker:{dom:Nk('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:LM?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:qa(T([_g.config({}),nm("dialog-events",t.dialogEvents.concat([Tr(fi(),(function(t,n){wg.focusIn(t)}))])),nm("scroll-lock",[Ji((function(){Ur(ve(),i)})),$i((function(){jr(ve(),i)}))])],t.extraBehaviours,!0)),eventOrder:O(((n={})[Ti()]=["dialog-events"],n[Hi()]=["scroll-lock","dialog-events","alloy.base.behaviour"],n[zi()]=["alloy.base.behaviour","dialog-events","scroll-lock"],n),t.eventOrder)})}function ND(t){return Qg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[Im("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:function(t){gr(t,$b)}})}function LD(t,n,e){function o(t){return[$r(e.translate(t.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:O({},n.map((function(t){return{id:t}})).getOr({}))},components:o(t),behaviours:qa([zT.config({channel:PM,renderComponents:o})])}}function WD(){return{dom:Nk('<div class="tox-dialog__draghandle"></div>')}}function UD(t,n){return e={title:n.shared.providers.translate(t),draggable:n.dialog.isDraggableModal()},o=n.shared.providers,r=aB.parts.title(LD(e,vt.none(),o)),i=aB.parts.draghandle(WD()),u=aB.parts.close(ND(o)),a=[r].concat(e.draggable?[i]:[]).concat([u]),Nb.sketch({dom:Nk('<div class="tox-dialog__header"></div>'),components:a})
var e,o,r,i,u,a}function jD(t,n,e){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:n,components:[{dom:Nk('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}function GD(t,n,e){return{onClose:function(){return e.closeWindow()},onBlock:function(e){aB.setBusy(t(),(function(t,o){return jD(e.message,o,n)}))},onUnblock:function(){aB.setIdle(t())}}}function XD(t,n,e,o){var r
return xu(zD(O(O({},t),{lazySink:o.shared.getSink,extraBehaviours:T([zT.config({channel:VM,updateState:function(t,n){return vt.some(n)},initialData:n}),NS({})],t.extraBehaviours,!0),onEscape:function(t){gr(t,$b)},dialogEvents:e,eventOrder:((r={})[_i()]=[zT.name(),$a.name()],r[Hi()]=["scroll-lock",zT.name(),"messages","dialog-events","alloy.base.behaviour"],r[zi()]=["alloy.base.behaviour","dialog-events","messages",zT.name(),"scroll-lock"],r)})))}function qD(t){return R(t,(function(t){return"menu"===t.type?(e=R((n=t).items,(function(t){var n=Io(!1)
return O(O({},t),{storage:n})})),O(O({},n),{items:e})):t
var n,e}))}function YD(t){return z(t,(function(t,n){return"menu"!==n.type?t:z(n.items,(function(t,n){return t[n.name]=n.storage,t}),t)}),{})}function KD(t,n){return[Or(fi(),Wx),t(Jb,(function(t,e){n.onClose(),e.onClose()})),t($b,(function(t,n,e,o){n.onCancel(t),gr(o,Jb)})),wr(ny,(function(t,e){return n.onUnblock()})),wr(ty,(function(t,e){return n.onBlock(e.event)}))]}function JD(t,n){function e(t,n){return Nb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:R(n,(function(t){return t.memento.asSpec()}))})}var o=V(n.map((function(t){return t.footerButtons})).getOr([]),(function(t){return"start"===t.align}))
return[e("start",o.pass),e("end",o.fail)]}function $D(t,n){return{dom:Nk('<div class="tox-dialog__footer"></div>'),components:[],behaviours:qa([zT.config({channel:zM,initialData:t,updateState:function(t,e){var o=R(e.buttons,(function(t){var e=Tm(kw(t,t.type,n))
return{name:t.name,align:t.align,memento:e}}))
return vt.some({lookupByName:function(t,n){return e=t,r=n,N(o,(function(t){return t.name===r})).bind((function(t){return t.memento.getOpt(e)}))
var e,r},footerButtons:o})},renderComponents:JD})])}}function QD(t,n){return aB.parts.footer($D(t,n))}function ZD(t,n){if(t.getRoot().getSystem().isConnected()){var e=Jf.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper())
return TS.getField(e,n).fold((function(){var o=t.getFooter()
return zT.getState(o).get().bind((function(t){return t.lookupByName(e,n)}))}),(function(t){return vt.some(t)}))}return vt.none()}function tB(t,n,e){function o(n){var e=t.getRoot()
e.getSystem().isConnected()&&n(e)}var r={getData:function(){var n=t.getRoot(),o=n.getSystem().isConnected()?t.getFormWrapper():n,r=vf.getValue(o),i=nt(e,(function(t){return t.get()}))
return O(O({},r),i)},setData:function(n){o((function(o){var i,u,a=r.getData(),c=O(O({},a),n),s=(i=c,u=t.getRoot(),zT.getState(u).get().map((function(t){return io(ro("data",t.dataValidator,i))})).getOr(i)),l=t.getFormWrapper()
vf.setValue(l,s),tt(e,(function(t,n){Tt(c,n)&&t.set(c[n])}))}))},disable:function(n){ZD(t,n).each(ed.disable)},enable:function(n){ZD(t,n).each(ed.enable)},focus:function(n){ZD(t,n).each(_g.focus)},block:function(t){if(!l(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument")
o((function(n){pr(n,ty,{message:t})}))},unblock:function(){o((function(t){gr(t,ny)}))},showTab:function(n){o((function(e){var o=t.getBody()
zT.getState(o).get().exists((function(t){return t.isTabPanel()}))&&Jf.getCurrent(o).each((function(t){FM.showTab(t,n)}))}))},redial:function(t){o((function(e){var o=n(t)
e.getSystem().broadcastOn([VM],o),e.getSystem().broadcastOn([PM],o.internalDialog),e.getSystem().broadcastOn([HM],o.internalDialog),e.getSystem().broadcastOn([zM],o.internalDialog),r.setData(o.initialData)}))},close:function(){o((function(t){gr(t,Jb)}))}}
return r}function nB(t){return f(t)&&-1!==XM.indexOf(t.mceAction)}function eB(t){function n(t,n,e,o){return OM.open((function(t,r,i){function l(){return P.on((function(t){qg.reposition(t),s_.refresh(t)}))}var f,d,m,g,p,h,v,b,y,x,w,S,C,k,_,E,D,B,M,A,F,I,R,V=io(ro("data",i,r)),P=rc(),H=u.shared.header.isPositionedAtTop(),z=(d={dataValidator:i,initialData:V,internalDialog:t},m={redial:OM.redial,closeWindow:function(){P.on(qg.hide),c.off("ResizeEditor",l),P.clear(),e(z.instanceApi)}},g=u,p=o,k=Mr("dialog-label"),_=Mr("dialog-content"),E=Tm((b={title:d.internalDialog.title,draggable:!0},y=k,x=g.shared.providers,Nb.sketch({dom:Nk('<div class="tox-dialog__header"></div>'),components:[LD(b,vt.some(y),x),WD(),ND(x)],containerBehaviours:qa([yD.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return Eu(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),D=Tm((w={body:d.internalDialog.body},S=g,C=p,AD(w,vt.some(_),S,C))),M=YD(B=qD(d.internalDialog.buttons)),A=Tm(jM({buttons:B},g)),F=UM((function(){return R}),{onBlock:function(t){M_.block(I,(function(n,e){return jD(t.message,e,g.shared.providers)}))},onUnblock:function(){M_.unblock(I)},onClose:function(){return m.closeWindow()}},g.shared.getSink),I=xu({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((h={role:"dialog"})["aria-labelledby"]=k,h["aria-describedby"]=_,h)},eventOrder:((v={})[_i()]=[zT.name(),$a.name()],v[Ti()]=["execute-on-form"],v[Hi()]=["reflecting","execute-on-form"],v),behaviours:qa([wg.config({mode:"cyclic",onEscape:function(t){return gr(t,Jb),vt.some(!0)},useTabstopAt:function(t){return!Ux(t)&&("button"!==Ft(t)||"disabled"!==rn(t,"disabled"))}}),zT.config({channel:VM,updateState:function(t,n){return vt.some(n)},initialData:d}),_g.config({}),nm("execute-on-form",F.concat([Tr(fi(),(function(t,n){wg.focusIn(t)}))])),M_.config({getRoot:function(){return vt.some(I)}}),Cg.config({}),NS({})]),components:[E.asSpec(),D.asSpec(),A.asSpec()]}),R=tB({getRoot:a(I),getFooter:function(){return A.get(I)},getBody:function(){return D.get(I)},getFormWrapper:function(){var t=D.get(I)
return Jf.getCurrent(t).getOr(t)}},m.redial,M),{dialog:I,instanceApi:R}),N=xu(qg.sketch(O(O({lazySink:u.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},H?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:qa(T([nm("window-manager-inline-events",[wr(Ni(),(function(t,n){gr(z.dialog,$b)}))])],(f=c,s&&H?[]:[s_.config({contextual:{lazyContext:function(){return vt.some(Me(At.fromDom(f.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]),!0)),isExtraPart:function(t,n){return Ob(e=n,".tox-alert-dialog")||Ob(e,".tox-confirm-dialog")
var e}})))
return P.set(N),qg.showWithin(N,wu(z.dialog),{anchor:n},vt.some(ve())),s&&H||(s_.refresh(N),c.on("ResizeEditor",l)),z.instanceApi.setData(V),wg.focusIn(z.dialog),z.instanceApi}),t)}var e,o,r,i,u=t.backstage,c=t.editor,s=$h(c),d=(o=(e=t).backstage.shared,{open:function(t,n){function r(){aB.hide(c),n()}var i=Tm(kw({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:vt.none()},"cancel",e.backstage)),u=RD(),a=ID(r,o.providers),c=xu(zD({lazySink:function(){return o.getSink()},header:FD(u,a),body:VD(t,o.providers),footer:vt.some(PD(HD([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[wr($b,r)],eventOrder:{}}))
aB.show(c)
var s=i.get(c)
_g.focus(s)}}),m=(i=(r=t).backstage.shared,{open:function(t,n){function e(t){aB.hide(s),n(t)}var o=Tm(kw({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:vt.none()},"submit",r.backstage)),u=kw({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:vt.none()},"cancel",r.backstage),a=RD(),c=ID((function(){return e(!1)}),i.providers),s=xu(zD({lazySink:function(){return i.getSink()},header:FD(a,c),body:VD(t,i.providers),footer:vt.some(PD(HD([],[u,o.asSpec()]))),onEscape:function(){return e(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[wr($b,(function(){return e(!1)})),wr(Zb,(function(){return e(!0)}))],eventOrder:{}}))
aB.show(s)
var l=o.get(s)
_g.focus(l)}})
return{open:function(t,e,o){return void 0!==e&&"toolbar"===e.inline?n(t,u.shared.anchors.inlineDialog(),o,e.ariaAttrs):void 0!==e&&"cursor"===e.inline?n(t,u.shared.anchors.cursor(),o,e.ariaAttrs):function(t,n){return OM.open((function(t,e,o){var r,i,c,s,l,f,d,m,g,p,h,v,b,y,x=e,w=(i={redial:OM.redial,closeWindow:function(){aB.hide(w.dialog),n(w.instanceApi)}},c=u,f=UD((r={dataValidator:o,initialData:x,internalDialog:t}).internalDialog.title,c),s=c,l=AD({body:r.internalDialog.body},vt.none(),s,!1),d=aB.parts.body(l),g=YD(m=qD(r.internalDialog.buttons)),p=QD({buttons:m},c),h=UM((function(){return y}),GD((function(){return b}),c.shared.providers,i),c.shared.getSink),v=function(){switch(r.internalDialog.size){case"large":return["tox-dialog--width-lg"]
case"medium":return["tox-dialog--width-md"]
default:return[]}}(),b=XD({header:f,body:d,footer:vt.some(p),extraClasses:v,extraBehaviours:[],extraStyles:{}},r,h,c),y=tB({getRoot:a(b),getBody:function(){return aB.getBody(b)},getFooter:function(){return aB.getFooter(b)},getFormWrapper:function(){var t=aB.getBody(b)
return Jf.getCurrent(t).getOr(t)}},i.redial,g),{dialog:b,instanceApi:y})
return aB.show(w.dialog),w.instanceApi.setData(x),w.instanceApi}),t)}(t,o)},openUrl:function(t,n){return e=n,OM.openUrl((function(t){var n=function(t,n,e,o){var r,i,u,a=UD(t.title,o),c=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Nx({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:qa([Gb.config({}),_g.config({})])})]}],behaviours:qa([wg.config({mode:"acyclic",useTabstopAt:x(Ux)})])},aB.parts.body(i)),s=t.buttons.bind((function(t){return 0===t.length?vt.none():vt.some(QD({buttons:t},o))})),d=WM((function(){return w}),GD((function(){return y}),o.shared.providers,n)),m=O(O({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((function(){return{}}),(function(t){return{width:t+"px","max-width":t+"px"}}))),p=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],h=new GM(t.url,{base_uri:new GM(window.location.href)}),v=h.protocol+"://"+h.host+(h.port?":"+h.port:""),b=oc(),y=XD({header:a,body:c,footer:s,extraClasses:p,extraBehaviours:[nm("messages",[Ji((function(){var n=ic(At.fromDom(window),"message",(function(n){var o,r
h.isSameOrigin(new GM(n.raw.origin))&&(nB(o=n.raw.data)?function(t,n,e){switch(e.mceAction){case"insertContent":t.insertContent(e.content)
break
case"setContent":t.setContent(e.content)
break
case"execCommand":var o=!!g(e.ui)&&e.ui
t.execCommand(e.cmd,o,e.value)
break
case"close":n.close()
break
case"block":n.block(e.message)
break
case"unblock":n.unblock()}}(e,w,o):!nB(r=o)&&f(r)&&Tt(r,"mceAction")&&t.onMessage(w,o))}))
b.set(n)})),$i(b.clear)]),$a.config({channels:((r={})[NM]={onReceive:function(t,n){Tu(t.element,"iframe").each((function(t){t.dom.contentWindow.postMessage(n,v)}))}},r)})],extraStyles:m},t,d,o),w={block:function(t){if(!l(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument")
S((function(n){pr(n,ty,{message:t})}))},unblock:function(){S((function(t){gr(t,ny)}))},close:function(){S((function(t){gr(t,Jb)}))},sendMessage:function(t){S((function(n){n.getSystem().broadcastOn([NM],t)}))}}
function S(t){u.getSystem().isConnected()&&t(u)}return{dialog:u=y,instanceApi:w}}(t,{closeWindow:function(){aB.hide(n.dialog),e(n.instanceApi)}},c,u)
return aB.show(n.dialog),n.instanceApi}),t)
var e},alert:function(t,n){d.open(t,(function(){n()}))},close:function(t){t.close()},confirm:function(t,n){m.open(t,(function(t){n(t)}))}}}($E=JE=JE||{})[$E.None=0]="None",$E[$E.Both=1]="Both",$E[$E.Vertical=2]="Vertical"
var oB,rB=a([so("lazySink"),bo("dragBlockClass"),Mo("getBounds",Ae),Oo("useTabstopAt",C),Oo("eventOrder",{}),Ls("modalBehaviours",[wg]),Uu("onExecute"),Gu("onEscape")]),iB={sketch:c},uB=a([Nf({name:"draghandle",overrides:function(t,n){return{behaviours:qa([yD.config({mode:"mouse",getTarget:function(t){return _u(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(n,null,2)).message),getBounds:t.getDragBounds})])}}}),Hf({schema:[so("dom")],name:"title"}),Hf({factory:iB,schema:[so("dom")],name:"close"}),Hf({factory:iB,schema:[so("dom")],name:"body"}),Nf({factory:iB,schema:[so("dom")],name:"footer"}),zf({factory:{sketch:function(t,n){return O(O({},t),{dom:n.dom,components:n.components})}},schema:[Oo("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Oo("components",[])],name:"blocker"})]),aB=dl({name:"ModalDialog",configFields:rB(),partFields:uB(),factory:function(t,n,e,o){var r,i=rc(),u=Mr("modal-events"),a=O(O({},t.eventOrder),((r={})[Hi()]=[u].concat(t.eventOrder["alloy.system.attached"]||[]),r))
return{uid:t.uid,dom:t.dom,components:n,apis:{show:function(n){i.set(n)
var e=t.lazySink(n).getOrDie(),r=o.blocker(),u=e.getSystem().build(O(O({},r),{components:r.components.concat([wu(n)]),behaviours:qa([_g.config({}),nm("dialog-blocker-events",[Tr(fi(),(function(){wg.focusIn(n)}))])])}))
ks(e,u),wg.focusIn(n)},hide:function(t){i.clear(),qt(t.element).each((function(n){t.getSystem().getByDom(n).each((function(t){_s(t)}))}))},getBody:function(n){return el(n,t,"body")},getFooter:function(n){return el(n,t,"footer")},setIdle:function(t){M_.unblock(t)},setBusy:function(t,n){M_.block(t,n)}},eventOrder:a,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Us(t.modalBehaviours,[Cg.config({}),wg.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),M_.config({getRoot:i.get}),nm(u,[Ji((function(n){var e,o,r,i=n.element,u=el(n,t,"title").element,a=un(i,"id").fold((function(){var t=Mr("dialog-label")
return on(u,"id",t),t}),c)
on(i,"aria-labelledby",a),e=n.element,o=el(n,t,"body").element,r=vt.from(rn(e,"id")).fold((function(){var t=Mr("dialog-describe")
return on(o,"id",t),t}),c),on(e,"aria-describedby",r)}))])])}},apis:{show:function(t,n){t.show(n)},hide:function(t,n){t.hide(n)},getBody:function(t,n){return t.getBody(n)},getFooter:function(t,n){return t.getFooter(n)},setBusy:function(t,n,e){t.setBusy(n,e)},setIdle:function(t,n){t.setIdle(n)}}}),cB=Yo([fo("type"),fo("name")].concat(_h)),sB=Zo,lB=[rr("name","name",We((function(){return Mr("button-name")})),Qo),wo("icon"),Do("align","end",["start","end"]),Bo("primary",!1),Bo("disabled",!1)],fB=T(T([],lB,!0),[fo("text")],!1),dB=T([mo("type",["submit","cancel","custom"])],fB,!0),mB=ao("type",{submit:dB,cancel:dB,custom:dB,menu:T([mo("type",["menu"]),wo("text"),wo("tooltip"),wo("icon"),vo("items",cB)],lB,!0)}),gB=[fo("type"),fo("text"),mo("level",["info","warn","error","success"]),fo("icon"),Oo("url","")],pB=Yo(gB),hB=[fo("type"),fo("text"),Bo("disabled",!1),Bo("primary",!1),rr("name","name",We((function(){return Mr("button-name")})),Qo),wo("icon"),Bo("borderless",!1)],vB=Yo(hB),bB=[fo("type"),fo("name"),fo("label"),Bo("disabled",!1)],yB=Yo(bB),xB=Zo,wB=[fo("type"),fo("name")],SB=wB.concat([wo("label")]),CB=SB.concat([Oo("columns","auto")]),kB=Yo(CB),OB=Ko([fo("value"),fo("text"),fo("icon")]),_B=Yo(SB),TB=Qo,EB=Yo(SB),DB=Qo,BB=wB.concat([Eo("tag","textarea"),fo("scriptId"),fo("scriptUrl"),_o("settings",void 0,er)]),MB=wB.concat([Eo("tag","textarea"),go("init")]),AB=eo((function(t){return ro("customeditor.old",$e(MB),t).orThunk((function(){return ro("customeditor.new",$e(BB),t)}))})),FB=Qo,IB=Yo(SB),RB=Qe(qo),VB=[fo("type"),fo("html"),Do("presets","presentation",["presentation","document"])],PB=Yo(VB),HB=SB.concat([Bo("sandboxed",!0)]),zB=Yo(HB),NB=Qo,LB=SB.concat([lo("currentState",Yo([so("blob"),fo("url")]))]),WB=Yo(LB),UB=SB.concat([wo("inputMode"),wo("placeholder"),Bo("maximized",!1),Bo("disabled",!1)]),jB=Yo(UB),GB=Qo,XB=[fo("text"),fo("value")],qB=[fo("text"),vo("items",(oB=Rt((function(){return YB})),{extract:function(t,n){return oB().extract(t,n)},toString:function(){return oB().toString()}}))],YB=Ze([Yo(XB),Yo(qB)]),KB=SB.concat([vo("items",YB),Bo("disabled",!1)]),JB=Yo(KB),$B=Qo,QB=SB.concat([ho("items",[fo("text"),fo("value")]),To("size",1),Bo("disabled",!1)]),ZB=Yo(QB),tM=Qo,nM=SB.concat([Bo("constrain",!0),Bo("disabled",!1)]),eM=Yo(nM),oM=Yo([fo("width"),fo("height")]),rM=[fo("type"),vo("header",Qo),vo("cells",Qe(Qo))],iM=Yo(rM),uM=SB.concat([wo("placeholder"),Bo("maximized",!1),Bo("disabled",!1)]),aM=Yo(uM),cM=Qo,sM=SB.concat([Do("filetype","file",["image","media","file"]),Oo("disabled",!1)]),lM=Yo(sM),fM=Yo([fo("value"),Oo("meta",{})]),dM=Je((function(){return no("type",{alertbanner:pB,bar:Yo((e=kD("bar"),[fo("type"),e])),button:vB,checkbox:yB,colorinput:_B,colorpicker:EB,dropzone:IB,grid:Yo((t=kD("grid"),[fo("type"),lo("columns",$o),t])),iframe:zB,input:jB,listbox:JB,selectbox:ZB,sizeinput:eM,textarea:aM,urlinput:lM,customeditor:AB,htmlpanel:PB,imagetools:WB,collection:kB,label:Yo((n=kD("label"),[fo("type"),fo("label"),n])),table:iM,panel:gM})
var t,n,e})),mM=[fo("type"),Oo("classes",[]),vo("items",dM)],gM=Yo(mM),pM=[rr("name","name",We((function(){return Mr("tab-name")})),Qo),fo("title"),vo("items",dM)],hM=[fo("type"),ho("tabs",pM)],vM=Yo(hM),bM=fB,yM=mB,xM=Yo([fo("title"),lo("body",no("type",{panel:gM,tabpanel:vM})),Eo("size","normal"),vo("buttons",yM),Oo("initialData",{}),Mo("onAction",i),Mo("onChange",i),Mo("onSubmit",i),Mo("onClose",i),Mo("onCancel",i),Oo("onTabChange",i)]),wM=Yo(T([mo("type",["cancel","custom"])],bM,!0)),SM=Yo([fo("title"),fo("url"),xo("height"),xo("width"),Co("buttons",wM),Mo("onAction",i),Mo("onCancel",i),Mo("onClose",i),Mo("onMessage",i)]),CM=function(t){return f(t)?[t].concat(U(rt(t),CM)):d(t)?U(t,CM):[]},kM={checkbox:xB,colorinput:TB,colorpicker:DB,dropzone:RB,input:GB,iframe:NB,sizeinput:oM,selectbox:tM,listbox:$B,size:oM,textarea:cM,urlinput:fM,customeditor:FB,collection:OB,togglemenuitem:sB},OM={open:function(t,n){var e=_D(n)
return t(e.internalDialog,e.initialData,e.dataValidator)},openUrl:function(t,n){return t(io(ro("dialog",SM,n)))},redial:_D},_M=fl({name:"TabButton",configFields:[Oo("uid",void 0),so("value"),rr("dom","dom",je((function(){return{attributes:{role:"tab",id:Mr("aria"),"aria-selected":"false"}}})),Jo()),bo("action"),Oo("domModification",{}),Ls("tabButtonBehaviours",[_g,wg,vf]),so("view")],factory:function(t,n){return{uid:t.uid,dom:t.dom,components:t.components,events:lm(t.action),behaviours:Us(t.tabButtonBehaviours,[_g.config({}),wg.config({mode:"execution",useSpace:!0,useEnter:!0}),vf.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),TM=a([so("tabs"),so("dom"),Oo("clickToDismiss",!1),Ls("tabbarBehaviours",[rd,wg]),Nu(["tabClass","selectedClass"])]),EM=a([Lf({factory:_M,name:"tabs",unit:"tab",overrides:function(t){return{action:function(n){var e=n.getSystem().getByUid(t.uid).getOrDie(),o=rd.isHighlighted(e,n);(o&&t.clickToDismiss?function(t,n){rd.dehighlight(t,n),pr(t,Gi(),{tabbar:t,button:n})}:o?i:function(t,n){rd.highlight(t,n),pr(t,ji(),{tabbar:t,button:n})})(e,n)},domModification:{classes:[t.markers.tabClass]}}}})]),DM=dl({name:"Tabbar",configFields:TM(),partFields:EM(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Us(t.tabbarBehaviours,[rd.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,n){on(n.element,"aria-selected","true")},onDehighlight:function(t,n){on(n.element,"aria-selected","false")}}),wg.config({mode:"flow",getInitial:function(t){return rd.getHighlighted(t).map((function(t){return t.element}))},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),BM=fl({name:"Tabview",configFields:[Ls("tabviewBehaviours",[Cg])],factory:function(t,n){return{uid:t.uid,dom:t.dom,behaviours:Us(t.tabviewBehaviours,[Cg.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),MM=a([Oo("selectFirst",!0),Wu("onChangeTab"),Wu("onDismissTab"),Oo("tabs",[]),Ls("tabSectionBehaviours",[])]),AM=a([Hf({factory:DM,schema:[so("dom"),po("markers",[so("tabClass"),so("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),Hf({factory:BM,name:"tabview"})]),FM=dl({name:"TabSection",configFields:MM(),partFields:AM(),factory:function(t,n,e,o){function r(n,e){nl(n,t,"tabbar").each((function(t){e(t).each(hr)}))}return{uid:t.uid,dom:t.dom,components:n,behaviours:Ws(t.tabSectionBehaviours),events:Ki(W([t.selectFirst?[Ji((function(t,n){r(t,rd.getFirst)}))]:[],[wr(ji(),(function(n,e){var o=e.event.button,r=vf.getValue(o)
nl(o,t,"tabview").each((function(n){N(t.tabs,(function(t){return t.value===r})).each((function(e){var r=e.view()
un(o.element,"id").each((function(t){on(n.element,"aria-labelledby",t)})),Cg.set(n,r),t.onChangeTab(n,o,r)}))}))})),wr(Gi(),(function(n,e){var o=e.event.button
t.onDismissTab(n,o)}))]])),apis:{getViewItems:function(n){return nl(n,t,"tabview").map((function(t){return Cg.contents(t)})).getOr([])},showTab:function(t,n){r(t,(function(t){return N(rd.getCandidates(t),(function(t){return vf.getValue(t)===n})).filter((function(n){return!rd.isHighlighted(t,n)}))}))}}}},apis:{getViewItems:function(t,n){return t.getViewItems(n)},showTab:function(t,n,e){t.showTab(n,e)}}}),IM="send-data-to-section",RM="send-data-to-view",VM=Mr("update-dialog"),PM=Mr("update-title"),HM=Mr("update-body"),zM=Mr("update-footer"),NM=Mr("body-send-message"),LM=Nv.deviceType.isTouch(),WM=function(t,n){function e(n,e){return wr(n,(function(n,o){var r,i
r=n,i=function(r,i){e(t(),r,o.event,n)},zT.getState(r).get().each((function(t){i(t)}))}))}return T(T([],KD(e,n),!0),[e(Qb,(function(t,n,e){n.onAction(t,{name:e.name})}))],!1)},UM=function(t,n,e){function o(n,e){return wr(n,(function(n,o){var r,i
r=n,i=function(r,i){e(t(),r,o.event,n)},zT.getState(r).get().each((function(t){i(t.internalDialog)}))}))}return T(T([],KD(o,n),!0),[o(Zb,(function(t,n){return n.onSubmit(t)})),o(Kb,(function(t,n,e){n.onChange(t,{name:e.name})})),o(Qb,(function(t,n,o,r){function i(){return wg.focusIn(r)}function u(t){return an(t,"disabled")||un(t,"aria-disabled").exists((function(t){return"true"===t}))}var a=me(r.element),c=va(a)
n.onAction(t,{name:o.name,value:o.value}),va(a).fold(i,(function(t){u(t)||c.exists((function(n){return Wt(t,n)&&u(n)}))?i():e().toOptional().filter((function(n){return!Wt(n.element,t)})).each(i)}))})),o(ey,(function(t,n,e){n.onTabChange(t,{newTabName:e.name,oldTabName:e.oldName})})),$i((function(n){var e=t()
vf.setValue(n,e.getData())}))],!1)},jM=$D,GM=tinymce.util.Tools.resolve("tinymce.util.URI"),XM=["insertContent","setContent","execCommand","close","block","unblock"]
k.add("silver",(function(t){var n=CD(t),e=n.uiMothership,o=n.backstage,r=n.renderUI,i=n.getUi
return Vb(t,o.shared),{renderUI:r,getWindowManagerImpl:a(eB({editor:t,backstage:o})),getNotificationManagerImpl:function(){return n=t,r=e,i=o.shared,{open:function(t,e){function o(){e(),qg.hide(c)}var u=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),a=xu(op.sketch({text:t.text,level:wt(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:vt.from(t.icon),closeButton:!u,onAction:o,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),c=xu(qg.sketch(O({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{}},i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})))
function s(){var t=Me(At.fromDom(n.getContentAreaContainer())),e=Ae(),o=Va(e.x,t.x,t.right),r=Va(e.y,t.y,t.bottom),i=Math.max(t.right,e.right),u=Math.max(t.bottom,e.bottom)
return vt.some(Be(o,r,i-o,u-r))}return r.add(c),0<t.timeout&&$g.setTimeout((function(){o()}),t.timeout),{close:o,moveTo:function(t,n){qg.showAt(c,wu(a),{anchor:{type:"makeshift",x:t,y:n}})},moveRel:function(t,n){var e,o,r,u=wu(a),l={maxHeightFunction:kc()}
"banner"!==n&&h(t)?(e=function(){switch(n){case"bc-bc":return Jg
case"tc-tc":return Kg
case"tc-bc":return Wa
default:return Ua}}(),o={type:"node",root:ve(),node:vt.some(At.fromDom(t)),overrides:l,layouts:{onRtl:function(){return[e]},onLtr:function(){return[e]}}},qg.showWithinBounds(c,u,{anchor:o},s)):(r=O(O({},i.anchors.banner()),{overrides:l}),qg.showWithinBounds(c,u,{anchor:r},s))},text:function(t){op.updateText(a,t)},settings:t,getEl:function(){return a.element.dom},progressBar:{value:function(t){op.updateProgress(a,t)}}}},close:function(t){t.close()},reposition:function(t){0<t.length&&St(t,(function(n,e){0===e?n.moveRel(null,"banner"):n.moveRel(t[e-1].getEl(),"bc-tc")}))},getArgs:function(t){return t.settings}}
var n,r,i},ui:i()}}))}()
