!function(){"use strict"
function e(e){var n=e
return{get:function(){return n},set:function(e){n=e}}}function n(e){return function(n){return t=typeof(r=n),(null===r?"null":"object"==t&&(Array.prototype.isPrototypeOf(r)||r.constructor&&"Array"===r.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(r)||r.constructor&&"String"===r.constructor.name)?"string":t)===e
var r,t}}function r(e){return function(n){return typeof n===e}}function t(e){return!(null==e)}function o(){}function i(e){return function(){return e}}function u(e){return e}var c=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=n("string"),s=n("array"),l=r("boolean"),f=r("function"),m=r("number")
function d(){return g}var h=i(!1),v=i(!0),g={fold:function(e,n){return e()},isSome:h,isNone:v,getOr:u,getOrThunk:p,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:u,orThunk:p,map:d,each:o,bind:d,exists:h,forall:v,filter:function(){return g},toArray:function(){return[]},toString:i("none()")}
function p(e){return e()}function w(n){function r(){return t.get().each(n)}var t=e(C.none())
return{clear:function(){r(),t.set(C.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){r(),t.set(C.some(e))}}}function y(){return w((function(e){return e.unbind()}))}function b(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o]
t[o]=n(i,o)}return t}function S(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function x(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t]
n(i,t)&&r.push(i)}return r}function E(e,n){return function(e,n,r){for(var t=0,o=e.length;t<o;t++){var i=e[t]
if(n(i,t))return C.some(i)
if(r(i,t))break}return C.none()}(e,n,h)}function O(e,n){return-1!==e.indexOf(n)}function F(e){return void 0!==e.style&&f(e.style.getPropertyValue)}function T(e){if(null==e)throw new Error("Node cannot be null or undefined")
return{dom:e}}var k=function(e){function n(){return o}function r(n){return n(e)}var t=i(e),o={fold:function(n,r){return r(e)},isSome:v,isNone:h,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(n){return k(n(e))},each:function(n){n(e)},bind:r,exists:r,forall:r,filter:function(n){return n(e)?o:g},toArray:function(){return[e]},toString:function(){return"some("+e+")"}}
return o},C={some:k,none:d,from:function(e){return null==e?g:k(e)}},D=function(){return(D=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])
return e}).apply(this,arguments)},A=Array.prototype.push,R=Object.keys,L={fromHtml:function(e,n){var r=(n||document).createElement("div")
if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node")
return T(r.childNodes[0])},fromTag:function(e,n){return T((n||document).createElement(e))},fromText:function(e,n){return T((n||document).createTextNode(e))},fromDom:T,fromPoint:function(e,n,r){return C.from(e.dom.elementFromPoint(n,r)).map(T)}}
function P(e){return function(n){return n.dom.nodeType===e}}function M(e,n){var r=String(n).toLowerCase()
return E(e,(function(e){return e.search(r)}))}function N(e){return function(n){return O(n,e)}}function H(e){return window.matchMedia(e).matches}function W(e,n){var r=e.dom
if(1!==r.nodeType)return!1
var t=r
if(void 0!==t.matches)return t.matches(n)
if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n)
if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n)
if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n)
throw new Error("Browser lacks native selectors")}function q(e){return L.fromDom(e.dom.ownerDocument)}function I(e){var n,r=Ce(e)
return se(n=r)&&t(n.dom.host)?C.some(r):C.none()}function j(e){return L.fromDom(e.dom.host)}function B(e,n,r){!function(e,n,r){if(!(a(r)||l(r)||m(r)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple")
e.setAttribute(n,r+"")}(e.dom,n,r)}function V(e,n){var r=e.dom.getAttribute(n)
return null===r?void 0:r}function X(e,n){e.dom.removeAttribute(n)}function _(e,n){var r=e.dom
!function(e){for(var n,t=R(e),o=0,i=t.length;o<i;o++){var u=t[o]
n=e[u],function(e,n,r){if(!a(r))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r)
F(e)&&e.style.setProperty(n,r)}(r,u,n)}}(n)}function z(e){function n(){return e.stopPropagation()}function r(){return e.preventDefault()}var o,i,u=L.fromDom(function(e){if(ke()&&t(e.target)){var n=L.fromDom(e.target)
if(ue(n)&&De(n)&&e.composed&&e.composedPath){var r=e.composedPath()
if(r)return 0<(o=r).length?C.some(o[0]):C.none()}}var o
return C.from(e.target)}(e).getOr(e.target)),c=(o=r,i=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
return o(i.apply(null,e))})
return{target:u,x:e.clientX,y:e.clientY,stop:n,prevent:r,kill:c,raw:e}}function U(e){var n=void 0===e?window:e
return Oe().browser.isFirefox()?C.none():C.from(n.visualViewport)}function $(e,n,r,t){return{x:e,y:n,width:r,height:t,right:e+r,bottom:n+t}}function K(e,n,r){return U(r).map((function(r){function t(e){return n(z(e))}return r.addEventListener(e,t),{unbind:function(){return r.removeEventListener(e,t)}}})).getOrThunk((function(){return{unbind:o}}))}function Y(e,n){e.fire("FullscreenStateChanged",{state:n})}function G(e){return e.getParam("fullscreen_native",!1,"boolean")}function J(e){return e.dom===(void 0!==(n=q(e).dom).fullscreenElement?n.fullscreenElement:void 0!==n.msFullscreenElement?n.msFullscreenElement:void 0!==n.webkitFullscreenElement?n.webkitFullscreenElement:null)
var n}function Q(e,n,r){function t(n){return function(r){var t=V(r,"style"),o=void 0===t?"no-styles":t.trim()
o===n||(B(r,Ie,o),_(r,e.parseStyle(n)))}}var o,i,u,c,a,l,m=(l=function(e){return W(e,"*")},x(function(e,n){for(var r=f(n)?n:h,t=e.dom,o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=L.fromDom(i)
if(o.push(u),!0===r(u))break
t=i}return o}(n,void 0),l)),d=function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!s(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e)
A.apply(n,e[r])}return n}(b(m,(function(e){return function(e,n){return t=function(e){return W(e,n)},x((r=e,C.from(r.dom.parentNode).map(L.fromDom).map(Fe).map((function(e){return x(e,(function(e){return r.dom!==e.dom}))})).getOr([])),t)
var r,t}(e,"*:not(.tox-silver-sink)")}))),v=(i="background-color",u=(o=r).dom,void 0!==(a=""!==(c=window.getComputedStyle(u).getPropertyValue(i))||Ae(o)?c:Re(u,i))&&""!==a?"background-color:"+a+"!important":"background-color:rgb(255,255,255)!important;")
S(d,t("display:none!important;")),S(m,t(je+Be+v)),t((!0===Ve?"":je)+Be+v)(n)}function Z(e,n){return function(r){function t(e){return r.setActive(e.state)}return r.setActive(null!==n.get()),e.on("FullscreenStateChanged",t),function(){return e.off("FullscreenStateChanged",t)}}}function ee(){return le(0,0)}function ne(e){function n(e){return function(){return r===e}}var r=e.current,t=e.version
return{current:r,version:t,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(he),isSafari:n("Safari")}}function re(e){function n(e){return function(){return r===e}}var r=e.current,t=e.version
return{current:r,version:t,isWindows:n(pe),isiOS:n("iOS"),isAndroid:n(we),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(ye),isFreeBSD:n(be),isChromeOS:n(Se)}}"undefined"!=typeof window||Function("return this;")()
var te,oe,ie,ue=P(1),ce=P(3),ae=P(9),se=P(11),le=function(e,n){return{major:e,minor:n}},fe={nu:le,detect:function(e,n){var r,t,o=String(n).toLowerCase()
return 0===e.length?ee():(t=function(e,n){for(var r=0;r<e.length;r++){var t=e[r]
if(t.test(n))return t}}(e,r=o))?le(i(1),i(2)):{major:0,minor:0}
function i(e){return Number(r.replace(t,"$"+e))}},unknown:ee},me=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,de={browsers:i([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return O(e,"edge/")&&O(e,"chrome")&&O(e,"safari")&&O(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,me],search:function(e){return O(e,"chrome")&&!O(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return O(e,"msie")||O(e,"trident")}},{name:"Opera",versionRegexes:[me,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:N("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:N("firefox")},{name:"Safari",versionRegexes:[me,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(O(e,"safari")||O(e,"mobile/"))&&O(e,"applewebkit")}}]),oses:i([{name:"Windows",search:N("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return O(e,"iphone")||O(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:N("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:N("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:N("linux"),versionRegexes:[]},{name:"Solaris",search:N("sunos"),versionRegexes:[]},{name:"FreeBSD",search:N("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:N("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},he="Firefox",ve=function(){return ne({current:void 0,version:fe.unknown()})},ge=ne,pe=(i("Edge"),i("Chrome"),i("IE"),i("Opera"),i(he),i("Safari"),"Windows"),we="Android",ye="Solaris",be="FreeBSD",Se="ChromeOS",xe=function(){return re({current:void 0,version:fe.unknown()})},Ee=re,Oe=(i(pe),i("iOS"),i(we),i("Linux"),i("OSX"),i(ye),i(be),i(Se),ie=!(te=function(){return e=navigator.userAgent,n=C.from(navigator.userAgentData),r=H,g=de.browsers(),p=de.oses(),{browser:w=n.bind((function(e){return function(e,n){return function(n){for(var r=0;r<n.length;r++){var t=function(n){var r=n.brand.toLowerCase()
return E(e,(function(e){var n
return r===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())})).map((function(e){return{current:e.name,version:fe.nu(parseInt(n.version,10),0)}}))}(n[r])
if(t.isSome())return t}return C.none()}(n.brands)}(g,e)})).orThunk((function(){return M(g,n=e).map((function(e){var r=fe.detect(e.versionRegexes,n)
return{current:e.name,version:r}}))
var n})).fold(ve,ge),os:y=M(p,t=e).map((function(e){var n=fe.detect(e.versionRegexes,t)
return{current:e.name,version:n}})).fold(xe,Ee),deviceType:(u=w,c=e,a=r,s=(o=y).isiOS()&&!0===/ipad/i.test(c),l=o.isiOS()&&!s,m=(f=o.isiOS()||o.isAndroid())||a("(pointer:coarse)"),d=s||!l&&f&&a("(min-device-width:768px)"),h=l||f&&!d,v=u.isSafari()&&o.isiOS()&&!1===/safari/i.test(c),{isiPad:i(s),isiPhone:i(l),isTablet:i(d),isPhone:i(h),isTouch:i(m),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:i(v),isDesktop:i(!h&&!d&&!v)})}
var e,n,r,t,o,u,c,a,s,l,f,m,d,h,v,g,p,w,y}),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
return ie||(ie=!0,oe=te.apply(null,e)),oe}),Fe=function(e){return b(e.dom.childNodes,L.fromDom)},Te=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode),ke=i(Te),Ce=Te?function(e){return L.fromDom(e.dom.getRootNode())}:function(e){return ae(e)?e:q(e)},De=function(e){return t(e.dom.shadowRoot)},Ae=function(e){var n=ce(e)?e.dom.parentNode:e.dom
if(null==n||null===n.ownerDocument)return!1
var r,t,o=n.ownerDocument
return I(L.fromDom(n)).fold((function(){return o.body.contains(n)}),(r=Ae,t=j,function(e){return r(t(e))}))},Re=function(e,n){return F(e)?e.style.getPropertyValue(n):""},Le=function(e,n,r,t){e.dom.removeEventListener(n,r,t)},Pe=v,Me=function(e,n){return{left:e,top:n,translate:function(r,t){return Me(e+r,n+t)}}},Ne=Me,He=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),We=tinymce.util.Tools.resolve("tinymce.Env"),qe=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ie="data-ephox-mobile-fullscreen-style",je="position:absolute!important;",Be="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Ve=We.os.isAndroid(),Xe=He.DOM,_e=U().fold((function(){return{bind:o,unbind:o}}),(function(e){var n,r=(n=w(o),D(D({},n),{on:function(e){return n.get().each(e)}})),t=y(),i=y(),u=qe.throttle((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((function(){r.on((function(n){return _(n,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})}))}))}),50)
return{bind:function(e){r.set(e),u(),t.set(K("resize",u)),i.set(K("scroll",u))},unbind:function(){r.on((function(){t.clear(),i.clear()})),r.clear()}}})),ze=function(e,n){function r(e){e(w,"tox-fullscreen"),e(y,"tox-fullscreen"),e(x,"tox-fullscreen"),I(E).map((function(e){return j(e).dom})).each((function(n){e(n,"tox-fullscreen"),e(n,"tox-shadowhost")}))}function t(){var t,o,i,u
k&&(t=e.dom,o="["+Ie+"]",S(1!==(i=u=document).nodeType&&9!==i.nodeType&&11!==i.nodeType||0===i.childElementCount?[]:b(u.querySelectorAll(o),L.fromDom),(function(e){var n=V(e,Ie)
"no-styles"!==n?_(e,t.parseStyle(n)):X(e,"style"),X(e,Ie)}))),r(Xe.removeClass),_e.unbind(),C.from(n.get()).each((function(e){return e.fullscreenChangeHandler.unbind()}))}var o,i,u,c,a,s,l,f,m,d,h,v,g,p,w=document.body,y=document.documentElement,x=e.getContainer(),E=L.fromDom(x),O=I(s=L.fromDom(e.getElement())).map(j).getOrThunk((function(){var e=q(s).dom.body
if(null==e)throw new Error("Body is not available yet")
return L.fromDom(e)})),F=n.get(),T=L.fromDom(e.getBody()),k=We.deviceType.isTouch(),D=x.style,A=e.iframeElement.style
F?(F.fullscreenChangeHandler.unbind(),G(e)&&J(O)&&((c=q(O).dom).exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.webkitCancelFullScreen&&c.webkitCancelFullScreen()),A.width=F.iframeWidth,A.height=F.iframeHeight,D.width=F.containerWidth,D.height=F.containerHeight,D.top=F.containerTop,D.left=F.containerLeft,u=F.scrollPos,window.scrollTo(u.x,u.y),n.set(null),Y(e,!1),t(),e.off("remove",t)):(o=function(e,n,r){return o=n,i=Pe,u=r,c=function(e){i(e)&&u(z(e))},(t=e).dom.addEventListener(o,c,!1),{unbind:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t]
var o=n.concat(r)
return e.apply(null,o)}}(Le,t,o,c,!1)}
var t,o,i,u,c}(q(O),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(function(r){G(e)&&(J(O)||null===n.get()||ze(e,n))})),i={scrollPos:(l=window,v=void 0===l?window:l,g=v.document,d=(m=void 0!==(f=L.fromDom(g))?f.dom:document).body.scrollLeft||m.documentElement.scrollLeft,h=m.body.scrollTop||m.documentElement.scrollTop,p=Ne(d,h),U(v).fold((function(){var e=v.document.documentElement,n=e.clientWidth,r=e.clientHeight
return $(p.left,p.top,n,r)}),(function(e){return $(Math.max(e.pageLeft,p.left),Math.max(e.pageTop,p.top),e.width,e.height)}))),containerWidth:D.width,containerHeight:D.height,containerTop:D.top,containerLeft:D.left,iframeWidth:A.width,iframeHeight:A.height,fullscreenChangeHandler:o},k&&Q(e.dom,E,T),A.width=A.height="100%",D.width=D.height="",r(Xe.addClass),_e.bind(E),e.on("remove",t),n.set(i),G(e)&&((a=O.dom).requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()),Y(e,!0))}
c.add("fullscreen",(function(n){var r,t,o,i,u,c=e(null)
return n.inline||(t=c,(r=n).addCommand("mceFullScreen",(function(){ze(r,t)})),(o=n).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:a,onSetup:Z(o,i=c)}),o.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:a,onSetup:Z(o,i)}),n.addShortcut("Meta+Shift+F","","mceFullScreen")),u=c,{isFullscreen:function(){return null!==u.get()}}
function a(){return o.execCommand("mceFullScreen")}}))}()
