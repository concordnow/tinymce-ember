!function(){"use strict"
function e(e){return function(n){return r=typeof(t=n),(null===t?"null":"object"==r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":r)===e
var t,r}}function n(e){return function(n){return typeof n===e}}function t(e){return function(n){return e===n}}function r(e){return!(null==e)}function o(){}function u(e){return function(){return e}}function i(e){return e}function c(e,n){return e===n}var l=e("string"),a=e("object"),f=e("array"),s=t(null),m=n("boolean"),d=t(void 0),g=n("function"),p=n("number")
function b(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t]
return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r]
var o=n.concat(t)
return e.apply(null,o)}}function h(e){return function(n){return!e(n)}}function v(){return C}var w=u(!1),y=u(!0),C={fold:function(e,n){return e()},isSome:w,isNone:y,getOr:i,getOrThunk:S,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:i,orThunk:S,map:v,each:o,bind:v,exists:w,forall:y,filter:function(){return C},toArray:function(){return[]},toString:u("none()")}
function S(e){return e()}function T(e,n){return-1<G.call(e,n)}function x(e,n){for(var t=0,r=e.length;t<r;t++)if(n(e[t],t))return!0
return!1}function R(e,n){for(var t=[],r=0;r<e;r++)t.push(n(r))
return t}function D(e,n){for(var t=e.length,r=new Array(t),o=0;o<t;o++){var u=e[o]
r[o]=n(u,o)}return r}function O(e,n){for(var t=0,r=e.length;t<r;t++)n(e[t],t)}function A(e,n){for(var t=[],r=[],o=0,u=e.length;o<u;o++){var i=e[o];(n(i,o)?t:r).push(i)}return{pass:t,fail:r}}function k(e,n){for(var t=[],r=0,o=e.length;r<o;r++){var u=e[r]
n(u,r)&&t.push(u)}return t}function I(e,n,t){return function(e){for(var r,o=e.length-1;0<=o;o--)r=e[o],t=n(t,r,o)}(e),t}function B(e,n,t){return O(e,(function(e,r){t=n(t,e,r)})),t}function M(e,n){return function(e,n,t){for(var r=0,o=e.length;r<o;r++){var u=e[r]
if(n(u,r))return q.some(u)
if(t(u,r))break}return q.none()}(e,n,w)}function E(e,n){for(var t=0,r=e.length;t<r;t++)if(n(e[t],t))return q.some(t)
return q.none()}function P(e){for(var n=[],t=0,r=e.length;t<r;++t){if(!f(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e)
$.apply(n,e[t])}return n}function N(e,n){return P(D(e,n))}function z(e,n){for(var t=0,r=e.length;t<r;++t)if(!0!==n(e[t],t))return!1
return!0}function L(e,n){for(var t={},r=0,o=e.length;r<o;r++){var u=e[r]
t[String(u)]=n(u,r)}return t}function _(e){return[e]}function W(e,n){return 0<=n&&n<e.length?q.some(e[n]):q.none()}function j(e){return W(e,0)}function F(e){return W(e,e.length-1)}function H(e,n){for(var t=0;t<e.length;t++){var r=n(e[t],t)
if(r.isSome())return r}return q.none()}var V=function(e){function n(){return o}function t(n){return n(e)}var r=u(e),o={fold:function(n,t){return t(e)},isSome:y,isNone:w,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return V(n(e))},each:function(n){n(e)},bind:t,exists:t,forall:t,filter:function(n){return n(e)?o:C},toArray:function(){return[e]},toString:function(){return"some("+e+")"}}
return o},q={some:V,none:v,from:function(e){return null==e?C:V(e)}},U=Array.prototype.slice,G=Array.prototype.indexOf,$=Array.prototype.push,K=function(){return(K=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])
return e}).apply(this,arguments)}
function X(e,n,t){if(t||2===arguments.length)for(var r,o=0,u=n.length;o<u;o++)!r&&o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o])
return e.concat(r||Array.prototype.slice.call(n))}function Y(e){var n,t=!1
return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o]
return t||(t=!0,n=e.apply(null,r)),n}}function J(e,n){var t=String(n).toLowerCase()
return M(e,(function(e){return e.search(t)}))}function Q(e,n,t){return""===n||e.length>=n.length&&e.substr(t,t+n.length)===n}function Z(e,n){return-1!==e.indexOf(n)}function ee(e,n){return Q(e,n,e.length-n.length)}function ne(e){return 0<e.length}function te(e){return function(n){return Z(n,e)}}function re(e){return window.matchMedia(e).matches}function oe(e,n){var t=e.dom
if(1!==t.nodeType)return!1
var r=t
if(void 0!==r.matches)return r.matches(n)
if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n)
if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n)
if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n)
throw new Error("Browser lacks native selectors")}function ue(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount}function ie(e,n){var t=void 0===n?document:n.dom
return ue(t)?q.none():q.from(t.querySelector(e)).map(Ve.fromDom)}function ce(e,n){return e.dom===n.dom}function le(e,n){return He().browser.isIE()?(t=e.dom,r=n.dom,o=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(t.compareDocumentPosition(r)&o)):(u=e.dom)!==(i=n.dom)&&u.contains(i)
var t,r,o,u,i}function ae(e,n){for(var t=Ue(e),r=0,o=t.length;r<o;r++){var u=t[r]
n(e[u],u)}}function fe(e,n){return $e(e,(function(e,t){return{k:t,v:n(e,t)}}))}function se(e,n){var t={},r=n,u=t,i=function(e,n){u[n]=e},c=o
return ae(e,(function(e,n){(r(e,n)?i:c)(e,n)})),t}function me(e,n){var t=[]
return ae(e,(function(e,r){t.push(n(e,r))})),t}function de(e){return me(e,i)}function ge(e){return Ue(e).length}function pe(e,n){return Ke(e,n)?q.from(e[n]):q.none()}function be(e,n){return Ke(e,n)&&void 0!==e[n]&&null!==e[n]}function he(e,n,t){return{element:e,rowspan:n,colspan:t}}function ve(e,n,t){return{element:e,cells:n,section:t}}function we(e,n,t){return{element:e,isNew:n,isLocked:t}}function ye(e,n,t,r){return{element:e,cells:n,section:t,isNew:r}}function Ce(){return De(0,0)}function Se(e){function n(e){return function(){return t===e}}var t=e.current,r=e.version
return{current:t,version:r,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(Me),isSafari:n("Safari")}}function Te(e){function n(e){return function(){return t===e}}var t=e.current,r=e.version
return{current:t,version:r,isWindows:n(Ne),isiOS:n("iOS"),isAndroid:n(ze),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(Le),isFreeBSD:n(_e),isChromeOS:n(We)}}function xe(e){if(null==e)throw new Error("Node cannot be null or undefined")
return{dom:e}}var Re,De=function(e,n){return{major:e,minor:n}},Oe={nu:De,detect:function(e,n){var t,r,o=String(n).toLowerCase()
return 0===e.length?Ce():(r=function(e,n){for(var t=0;t<e.length;t++){var r=e[t]
if(r.test(n))return r}}(e,t=o))?De(u(1),u(2)):{major:0,minor:0}
function u(e){return Number(t.replace(r,"$"+e))}},unknown:Ce},Ae=function(e,n){return Q(e,n,0)},ke=(Re=/^\s+|\s+$/g,function(e){return e.replace(Re,"")}),Ie=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Be={browsers:u([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Z(e,"edge/")&&Z(e,"chrome")&&Z(e,"safari")&&Z(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ie],search:function(e){return Z(e,"chrome")&&!Z(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Z(e,"msie")||Z(e,"trident")}},{name:"Opera",versionRegexes:[Ie,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:te("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:te("firefox")},{name:"Safari",versionRegexes:[Ie,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Z(e,"safari")||Z(e,"mobile/"))&&Z(e,"applewebkit")}}]),oses:u([{name:"Windows",search:te("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Z(e,"iphone")||Z(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:te("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:te("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:te("linux"),versionRegexes:[]},{name:"Solaris",search:te("sunos"),versionRegexes:[]},{name:"FreeBSD",search:te("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:te("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Me="Firefox",Ee=function(){return Se({current:void 0,version:Oe.unknown()})},Pe=Se,Ne=(u("Edge"),u("Chrome"),u("IE"),u("Opera"),u(Me),u("Safari"),"Windows"),ze="Android",Le="Solaris",_e="FreeBSD",We="ChromeOS",je=function(){return Te({current:void 0,version:Oe.unknown()})},Fe=Te,He=(u(Ne),u("iOS"),u(ze),u("Linux"),u("OSX"),u(Le),u(_e),u(We),Y((function(){return e=navigator.userAgent,n=q.from(navigator.userAgentData),t=re,b=Be.browsers(),h=Be.oses(),{browser:v=n.bind((function(e){return n=b,H(e.brands,(function(e){var t=e.brand.toLowerCase()
return M(n,(function(e){var n
return t===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())})).map((function(n){return{current:n.name,version:Oe.nu(parseInt(e.version,10),0)}}))}))
var n})).orThunk((function(){return J(b,n=e).map((function(e){var t=Oe.detect(e.versionRegexes,n)
return{current:e.name,version:t}}))
var n})).fold(Ee,Pe),os:w=J(h,r=e).map((function(e){var n=Oe.detect(e.versionRegexes,r)
return{current:e.name,version:n}})).fold(je,Fe),deviceType:(i=v,c=e,l=t,a=(o=w).isiOS()&&!0===/ipad/i.test(c),f=o.isiOS()&&!a,m=(s=o.isiOS()||o.isAndroid())||l("(pointer:coarse)"),d=a||!f&&s&&l("(min-device-width:768px)"),g=f||s&&!d,p=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(c),{isiPad:u(a),isiPhone:u(f),isTablet:u(d),isPhone:u(g),isTouch:u(m),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:u(p),isDesktop:u(!g&&!d&&!p)})}
var e,n,t,r,o,i,c,l,a,f,s,m,d,g,p,b,h,v,w}))),Ve={fromHtml:function(e,n){var t=(n||document).createElement("div")
if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node")
return xe(t.childNodes[0])},fromTag:function(e,n){return xe((n||document).createElement(e))},fromText:function(e,n){return xe((n||document).createTextNode(e))},fromDom:xe,fromPoint:function(e,n,t){return q.from(e.dom.elementFromPoint(n,t)).map(xe)}},qe=oe,Ue=Object.keys,Ge=Object.hasOwnProperty,$e=function(e,n){var t={}
return ae(e,(function(e,r){var o=n(e,r)
t[o.k]=o.v})),t},Ke=function(e,n){return Ge.call(e,n)},Xe=["tfoot","thead","tbody","colgroup"]
function Ye(e){return e.dom.nodeName.toLowerCase()}function Je(e){return e.dom.nodeType}function Qe(e){return function(n){return Je(n)===e}}function Ze(e){return 8===Je(e)||"#comment"===Ye(e)}function en(e){return function(n){return gn(n)&&Ye(n)===e}}function nn(e){return Ve.fromDom(e.dom.ownerDocument)}function tn(e){return bn(e)?e:nn(e)}function rn(e){return q.from(e.dom.parentNode).map(Ve.fromDom)}function on(e,n){for(var t=g(n)?n:w,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=Ve.fromDom(u)
if(o.push(i),!0===t(i))break
r=u}return o}function un(e){return q.from(e.dom.previousSibling).map(Ve.fromDom)}function cn(e){return q.from(e.dom.nextSibling).map(Ve.fromDom)}function ln(e){return D(e.dom.childNodes,Ve.fromDom)}function an(e,n){var t=e.dom.childNodes
return q.from(t[n]).map(Ve.fromDom)}function fn(e){return Ve.fromDom(e.dom.host)}function sn(e,n,t){return r=function(e){return oe(e,n)},k(on(e,t),r)
var r}function mn(e,n){return t=function(e){return oe(e,n)},k(ln(e),t)
var t}function dn(e,n){return ue(t=void 0===e?document:e.dom)?[]:D(t.querySelectorAll(n),Ve.fromDom)
var t}"undefined"!=typeof window||Function("return this;")()
var gn=Qe(1),pn=Qe(3),bn=Qe(9),hn=Qe(11),vn=g(Element.prototype.attachShadow)&&g(Node.prototype.getRootNode),wn=u(vn),yn=vn?function(e){return Ve.fromDom(e.dom.getRootNode())}:tn,Cn=function(e){var n=pn(e)?e.dom.parentNode:e.dom
if(null==n||null===n.ownerDocument)return!1
var t,o,u,i,c,l=n.ownerDocument
return u=Ve.fromDom(n),c=yn(u),(hn(i=c)&&r(i.dom.host)?q.some(c):q.none()).fold((function(){return l.body.contains(n)}),(t=Cn,o=fn,function(e){return t(o(e))}))},Sn=function(e){var n=e.dom.body
if(null==n)throw new Error("Body is not available yet")
return Ve.fromDom(n)},Tn=function(e,n){var t=[]
return O(ln(e),(function(e){t=(t=n(e)?t.concat([e]):t).concat(Tn(e,n))})),t}
function xn(e,n,t,r,o){return e(t,r)?q.some(t):g(o)&&o(t)?q.none():n(t,r,o)}function Rn(e,n,t){for(var r=e.dom,o=g(t)?t:w;r.parentNode;){r=r.parentNode
var u=Ve.fromDom(r)
if(n(u))return q.some(u)
if(o(u))break}return q.none()}function Dn(e,n,t){return Rn(e,(function(e){return oe(e,n)}),t)}function On(e,n){return t=function(e){return oe(e,n)},M(e.dom.childNodes,(function(e){return t(Ve.fromDom(e))})).map(Ve.fromDom)
var t}function An(e,n){return ie(n,e)}function kn(e,n,t){return xn(oe,Dn,e,n,t)}function In(e,n,t){if(!(l(t)||m(t)||p(t)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple")
e.setAttribute(n,t+"")}function Bn(e,n,t){In(e.dom,n,t)}function Mn(e,n){var t=e.dom
ae(n,(function(e,n){In(t,n,e)}))}function En(e,n){var t=e.dom.getAttribute(n)
return null===t?void 0:t}function Pn(e,n){return q.from(En(e,n))}function Nn(e){return B(e.dom.attributes,(function(e,n){return e[n.name]=n.value,e}),{})}function zn(e,n,t){return void 0===t&&(t=c),e.exists((function(e){return t(e,n)}))}function Ln(e){for(var n=[],t=function(e){n.push(e)},r=0;r<e.length;r++)e[r].each(t)
return n}function _n(e,n,t){return e.isSome()&&n.isSome()?q.some(t(e.getOrDie(),n.getOrDie())):q.none()}function Wn(e,n){return e?q.some(n):q.none()}function jn(e){return void 0!==e.style&&g(e.style.getPropertyValue)}function Fn(e,n,t){if(!l(t))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",t,":: Element ",e),new Error("CSS value must be a string: "+t)
jn(e)&&e.style.setProperty(n,t)}function Hn(e,n,t){Fn(e.dom,n,t)}function Vn(e,n){var t=e.dom
ae(n,(function(e,n){Fn(t,n,e)}))}function qn(e,n){var t=e.dom,r=window.getComputedStyle(t).getPropertyValue(n)
return""!==r||Cn(e)?r:Wt(t,n)}function Un(e,n){var t=e.dom,r=Wt(t,n)
return q.from(r).filter((function(e){return 0<e.length}))}function Gn(e,n){var t,r=n
jn(t=e.dom)&&t.style.removeProperty(r),zn(Pn(e,"style").map(ke),"")&&_t(e,"style")}function $n(e,n,t){return void 0===t&&(t=0),Pn(e,n).map((function(e){return parseInt(e,10)})).getOr(t)}function Kn(e,n){return $n(e,n,1)}function Xn(e){return en("col")(e)?1<$n(e,"span",1):1<Kn(e,"colspan")}function Yn(e){return 1<Kn(e,"rowspan")}function Jn(e,n){return parseInt(qn(e,n),10)}function Qn(e,n){return Ht(e,n,y)}function Zn(e,n){return t=["td","th"],(o=void 0===(o=n)?w:n)(r=e)?q.none():T(t,Ye(r))?q.some(r):Dn(r,t.join(","),(function(e){return oe(e,"table")||o(e)}))
var t,r,o}function et(e){return Qn(e,"th,td")}function nt(e){return oe(e,"colgroup")?mn(e,"col"):N(Vt(e),(function(e){return mn(e,"col")}))}function tt(e,n){return kn(e,"table",n)}function rt(e){return Qn(e,"tr")}function ot(e,n){return D(e,(function(e){if("colgroup"!==Ye(e))return ve(e,t=D(et(e),(function(e){return he(e,$n(e,"rowspan",1),$n(e,"colspan",1))})),n(e))
var t=D(nt(e),(function(e){return he(e,1,$n(e,"span",1))}))
return ve(e,t,"colgroup")}))}function ut(e){return rn(e).map((function(e){var n=Ye(e)
return T(Xe,n)?n:"tbody"})).getOr("tbody")}function it(e){var n=rt(e)
return ot(X(X([],Vt(e),!0),n,!0),ut)}function ct(e,n,t){var r=e.cells,o=r.slice(0,n),u=r.slice(n),i=o.concat(t).concat(u)
return qt(e,i)}function lt(e,n,t){return ct(e,n,[t])}function at(e,n,t){e.cells[n]=t}function ft(e,n){return e.cells[n]}function st(e,n){return ft(e,n).element}function mt(e){return e.cells.length}function dt(e){var n=A(e,(function(e){return"colgroup"===e.section}))
return{rows:n.fail,cols:n.pass}}function gt(e,n,t){var r=D(e.cells,t)
return ye(n(e.element),r,e.section,!0)}function pt(e){return Pn(e,Ut).bind((function(e){return q.from(e.match(/\d+/g))})).map((function(e){return L(e,y)}))}function bt(e){var n,t=me(B(dt(e).rows,(function(e,n){return O(n.cells,(function(n,t){n.isLocked&&(e[t]=!0)})),e}),{}),(function(e,n){return parseInt(n,10)}))
return(n=U.call(t,0)).sort(void 0),n}function ht(e){var n={},t=[],r=j(e).map((function(e){return e.element})).bind(tt).bind(pt).getOr({}),o=0,u=0,i=0,c=A(e,(function(e){return"colgroup"===e.section})),l=c.pass
O(c.fail,(function(e){var c=[]
O(e.cells,(function(e){for(var t=0;void 0!==n[i+","+t];)t++
for(var o=be(r,t.toString()),l={element:e.element,rowspan:e.rowspan,colspan:e.colspan,row:i,column:t,isLocked:o},a=0;a<e.colspan;a++)for(var f=0;f<e.rowspan;f++){var s=t+a
n[i+f+","+s]=l,u=Math.max(u,s+1)}c.push(l)})),o++,t.push(ve(e.element,c,e.section)),i++}))
var a=F(l).map((function(e){var n,t,r=(n={},t=0,O(e.cells,(function(e){var r=e.colspan
R(r,(function(o){var u=t+o
n[u]={element:e.element,colspan:r,column:u}})),t+=r})),n)
return{colgroups:[{element:e.element,columns:de(r)}],columns:r}})).getOrThunk((function(){return{colgroups:[],columns:{}}})),f=a.columns,s=a.colgroups
return{grid:{rows:o,columns:u},access:n,all:t,columns:f,colgroups:s}}function vt(e,n){var t=n.column,r=n.column+n.colspan-1,o=n.row,u=n.row+n.rowspan-1
return t<=e.finishCol&&r>=e.startCol&&o<=e.finishRow&&u>=e.startRow}function wt(e,n){return n.column>=e.startCol&&n.column+n.colspan-1<=e.finishCol&&n.row>=e.startRow&&n.row+n.rowspan-1<=e.finishRow}function yt(e,n,t){var r=Gt.findItem(e,n,ce),o=Gt.findItem(e,t,ce)
return r.bind((function(e){return o.map((function(n){return t=e,r=n,{startRow:Math.min(t.row,r.row),startCol:Math.min(t.column,r.column),finishRow:Math.max(t.row+t.rowspan-1,r.row+r.rowspan-1),finishCol:Math.max(t.column+t.colspan-1,r.column+r.colspan-1)}
var t,r}))}))}function Ct(e,n,t){return yt(e,n,t).map((function(n){return D(Gt.filterItems(e,b(vt,n)),(function(e){return e.element}))}))}function St(e,n){return Gt.findItem(e,n,(function(e,n){return le(n,e)})).map((function(e){return e.element}))}function Tt(e,n,t,r,o){var u=$t(e),i=ce(e,t)?q.some(n):St(u,n),c=ce(e,o)?q.some(r):St(u,r)
return i.bind((function(e){return c.bind((function(n){return Ct(u,e,n)}))}))}function xt(e,n){rn(e).each((function(t){t.dom.insertBefore(n.dom,e.dom)}))}function Rt(e,n){cn(e).fold((function(){rn(e).each((function(e){Kt(e,n)}))}),(function(e){xt(e,n)}))}function Dt(e,n){an(e,0).fold((function(){Kt(e,n)}),(function(t){e.dom.insertBefore(n.dom,t.dom)}))}function Ot(e,n){xt(e,n),Kt(n,e)}function At(e,n){O(n,(function(t,r){Rt(0===r?e:n[r-1],t)}))}function kt(e,n){O(n,(function(n){Kt(e,n)}))}function It(e){e.dom.textContent="",O(ln(e),(function(e){Xt(e)}))}function Bt(e){var n,t=ln(e)
0<t.length&&(n=e,O(t,(function(e){xt(n,e)}))),Xt(e)}function Mt(e){return Yt.get(e)}function Et(e){return Yt.getOption(e)}function Pt(e,n){return Yt.set(e,n)}function Nt(e,n){return k(N(e.all,(function(e){return e.cells})),n)}var zt,Lt,_t=function(e,n){e.dom.removeAttribute(n)},Wt=function(e,n){return jn(e)?e.style.getPropertyValue(n):""},jt=u(10),Ft=u(10),Ht=function(e,n,t){return N(ln(e),(function(e){return oe(e,n)?t(e)?[e]:[]:Ht(e,n,t)}))},Vt=function(e){return tt(e).fold(u([]),(function(e){return mn(e,"colgroup")}))},qt=function(e,n){return ye(e.element,n,e.section,e.isNew)},Ut="data-snooker-locked-cols",Gt={fromTable:function(e){return ht(it(e))},generate:ht,getAt:function(e,n,t){return q.from(e.access[n+","+t])},findItem:function(e,n,t){var r=Nt(e,(function(e){return t(n,e.element)}))
return 0<r.length?q.some(r[0]):q.none()},filterItems:Nt,justCells:function(e){return N(e.all,(function(e){return e.cells}))},justColumns:function(e){return de(e.columns)},hasColumns:function(e){return 0<Ue(e.columns).length},getColumnAt:function(e,n){return q.from(e.columns[n])}},$t=Gt.fromTable,Kt=function(e,n){e.dom.appendChild(n.dom)},Xt=function(e){var n=e.dom
null!==n.parentNode&&n.parentNode.removeChild(n)},Yt=(zt=pn,{get:function(e){if(!zt(e))throw new Error("Can only get text value of a text node")
return Lt(e).getOr("")},getOption:Lt=function(e){return zt(e)?q.from(e.dom.nodeValue):q.none()},set:function(e,n){if(!zt(e))throw new Error("Can only set raw text value of a text node")
e.dom.nodeValue=n}}),Jt=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"]
function Qt(){return{up:u({selector:Dn,closest:kn,predicate:Rn,all:on}),down:u({selector:dn,predicate:Tn}),styles:u({get:qn,getRaw:Un,set:Hn,remove:Gn}),attrs:u({get:En,set:Bn,remove:_t,copyTo:function(e,n){Mn(n,Nn(e))}}),insert:u({before:xt,after:Rt,afterAll:At,append:Kt,appendAll:kt,prepend:Dt,wrap:Ot}),remove:u({unwrap:Bt,remove:Xt}),create:u({nu:Ve.fromTag,clone:function(e){return Ve.fromDom(e.dom.cloneNode(!1))},text:Ve.fromText}),query:u({comparePosition:function(e,n){return e.dom.compareDocumentPosition(n.dom)},prevSibling:un,nextSibling:cn}),property:u({children:ln,name:Ye,parent:rn,document:function(e){return tn(e).dom},isText:pn,isComment:Ze,isElement:gn,isSpecial:function(e){return T(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ye(e))},getLanguage:function(e){return gn(e)?Pn(e,"lang"):q.none()},getText:Mt,setText:Pt,isBoundary:function(e){return!!gn(e)&&("body"===Ye(e)||T(Jt,Ye(e)))},isEmptyTag:function(e){return!!gn(e)&&T(["br","img","hr","input"],Ye(e))},isNonEditable:function(e){return gn(e)&&"false"===En(e,"contenteditable")}}),eq:ce,is:qe}}function Zt(e,n){return Wr(Fr,(function(n,t){return e(t)}),n)}function er(e){return Dn(e,"table")}function nr(e,n,t){function r(e){return function(n){return void 0!==t&&t(n)||ce(n,e)}}return ce(e,n)?q.some({boxes:q.some([e]),start:e,finish:n}):er(e).bind((function(o){return er(n).bind((function(u){if(ce(o,u))return q.some({boxes:(a=e,f=n,Ct($t(o),a,f)),start:e,finish:n})
if(le(o,u)){var i=0<(c=sn(n,"td,th",r(o))).length?c[c.length-1]:n
return q.some({boxes:Tt(o,e,o,n,u),start:e,finish:i})}if(le(u,o)){var c,l=0<(c=sn(e,"td,th",r(u))).length?c[c.length-1]:e
return q.some({boxes:Tt(u,e,o,n,u),start:e,finish:l})}return jr(Fr,e,n,void 0).shared.bind((function(i){return kn(i,"table",t).bind((function(t){var i=sn(n,"td,th",r(t)),c=0<i.length?i[i.length-1]:n,l=sn(e,"td,th",r(t)),a=0<l.length?l[l.length-1]:e
return q.some({boxes:Tt(t,e,o,n,u),start:a,finish:c})}))}))
var a,f}))}))}function tr(e,n){var t=dn(e,n)
return 0<t.length?q.some(t):q.none()}function rr(e,n,t){return An(e,n).bind((function(n){return An(e,t).bind((function(e){return Zt(er,[n,e]).map((function(t){return{first:n,last:e,table:t}}))}))}))}function or(e,n,t,r,o){return u=o,M(e,(function(e){return oe(e,u)})).bind((function(e){return u=n,i=t,tt(o=e).bind((function(e){var n=$t(e),t=u,r=i
return Gt.findItem(n,o,ce).bind((function(e){var o=0<t?e.row+e.rowspan-1:e.row,u=0<r?e.column+e.colspan-1:e.column
return Gt.getAt(n,o+t,u+r).map((function(e){return e.element}))}))})).bind((function(e){return t=r,Dn(n=e,"table").bind((function(e){return An(e,t).bind((function(e){return nr(e,n).bind((function(e){return e.boxes.map((function(n){return{boxes:n,start:e.start,finish:e.finish}}))}))}))}))
var n,t}))
var o,u,i}))
var u}function ur(e,n,t,r){return e.fold(n,t,r)}function ir(e,n){return Ve.fromDom(e.dom.cloneNode(n))}function cr(e){return ir(e,!1)}function lr(e){return ir(e,!0)}function ar(e,n){var t=Ve.fromTag(n)
return Mn(t,Nn(e)),t}function fr(e,n){function t(t){var r=n(t)
if(r<=0||null===r){var o=qn(t,e)
return parseFloat(o)||0}return r}function r(e,n){return B(n,(function(n,t){var r=qn(e,t),o=void 0===r?0:parseInt(r,10)
return isNaN(o)?n:n+o}),0)}return{set:function(n,t){if(!p(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t)
var r=n.dom
jn(r)&&(r.style[e]=t+"px")},get:t,getOuter:t,aggregate:r,max:function(e,n,t){var o=r(e,t)
return o<n?n-o:0}}}function sr(){var e=He().browser
return e.isIE()||e.isEdge()}function mr(e,n,t){return r=qn(e,n),o=t,u=parseFloat(r),(isNaN(u)?q.none():q.some(u)).getOr(o)
var r,o,u}function dr(e){return qn(e,"box-sizing")}function gr(e,n,t,r){return n-mr(e,"padding-"+t,0)-mr(e,"padding-"+r,0)-mr(e,"border-"+t+"-width",0)-mr(e,"border-"+r+"-width",0)}function pr(e,n){var t=e.dom,r=t.getBoundingClientRect().width||t.offsetWidth
return"border-box"===n?r:gr(e,r,"left","right")}function br(e){return Kr.get(e)}function hr(e){return Kr.getOuter(e)}function vr(e,n){void 0===n&&(n=y)
var t=e.grid,r=R(t.columns,i),o=R(t.rows,i)
return D(r,(function(t){return Jr((function(){return N(o,(function(n){return Gt.getAt(e,n,t).filter((function(e){return e.column===t})).toArray()}))}),(function(e){return 1===e.colspan&&n(e.element)}),(function(){return Gt.getAt(e,0,t)}))}))}function wr(e){var n=e.grid,t=R(n.rows,i),r=R(n.columns,i)
return D(t,(function(n){return Jr((function(){return N(r,(function(t){return Gt.getAt(e,n,t).filter((function(e){return e.row===n})).fold(u([]),(function(e){return[e]}))}))}),(function(e){return 1===e.rowspan}),(function(){return Gt.getAt(e,n,0)}))}))}function yr(e,n){return function(t){return"rtl"===Qr(t)?n:e}}function Cr(e){return Zr.get(e)}function Sr(e){return Zr.getOuter(e)}function Tr(e,n){return void 0!==e?e:void 0!==n?n:0}function xr(e){var n=e.dom.ownerDocument,t=n.body,r=n.defaultView,o=n.documentElement
if(t===e.dom)return no(t.offsetLeft,t.offsetTop)
var u=Tr(null==r?void 0:r.pageYOffset,o.scrollTop),i=Tr(null==r?void 0:r.pageXOffset,o.scrollLeft),c=Tr(o.clientTop,t.clientTop),l=Tr(o.clientLeft,t.clientLeft)
return to(e).translate(i-l,u-c)}function Rr(e,n){return{row:e,y:n}}function Dr(e,n){return{col:e,x:n}}function Or(e){return xr(e).left+hr(e)}function Ar(e){return xr(e).left}function kr(e,n){return Dr(e,Ar(n))}function Ir(e,n){return Dr(e,Or(n))}function Br(e){return xr(e).top}function Mr(e,n){return Rr(e,Br(n))}function Er(e,n){return Rr(e,Br(n)+Sr(n))}function Pr(e,n,t){if(0===t.length)return[]
var r=D(t.slice(1),(function(n,t){return n.map((function(n){return e(t,n)}))})),o=t[t.length-1].map((function(e){return n(t.length-1,e)}))
return r.concat([o])}function Nr(e){if(!f(e))throw new Error("cases must be an array")
if(0===e.length)throw new Error("there must be at least one case")
var n=[],t={}
return O(e,(function(r,o){var u=Ue(r)
if(1!==u.length)throw new Error("one and only one name per case")
var i=u[0],c=r[i]
if(void 0!==t[i])throw new Error("duplicate key detected:"+i)
if("cata"===i)throw new Error("cannot have a case named cata (sorry)")
if(!f(c))throw new Error("case arguments must be an array")
n.push(i),t[i]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r]
var u=t.length
if(u!==c.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+u)
return{fold:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r]
if(n.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+n.length)
return n[o].apply(null,t)},match:function(e){var r=Ue(e)
if(n.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+r.join(","))
if(!z(n,(function(e){return T(r,e)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+n.join(", "))
return e[i].apply(null,t)},log:function(e){console.log(e,{constructors:n,constructor:i,params:t})}}}})),t}var zr,Lr,_r,Wr=function(e,n,t){return 0<t.length?(r=e,o=n,u=t[0],I(t.slice(1),(function(e,n){var t=o(r,n)
return function(e,n,t){return n.bind((function(n){return t.filter(b(e.eq,n))}))}(r,e,t)}),o(r,u))):q.none()
var r,o,u},jr=function(e,n,t,r){function o(e){return E(e,r).fold((function(){return e}),(function(n){return e.slice(0,n+1)}))}void 0===r&&(r=w)
var u=[n].concat(e.up().all(n)),i=[t].concat(e.up().all(t)),c=o(u),l=o(i),a=M(c,(function(n){return x(l,b(e.eq,n))}))
return{firstpath:c,secondpath:l,shared:a}},Fr=Qt(),Hr=tr,Vr=Nr([{none:[]},{multiple:["elements"]},{single:["element"]}]),qr=Vr.none,Ur=Vr.multiple,Gr=Vr.single,$r=tinymce.util.Tools.resolve("tinymce.PluginManager"),Kr=fr("width",(function(e){return e.dom.offsetWidth})),Xr=function(e){return pr(e,"content-box")},Yr=function(e){return sr()?pr(e,dr(e)):mr(e,"width",e.dom.offsetWidth)},Jr=function(e,n,t){var r=e()
return M(r,n).orThunk((function(){return q.from(r[0]).orThunk(t)})).map((function(e){return e.element}))},Qr=function(e){return"rtl"===qn(e,"direction")?"rtl":"ltr"},Zr=fr("height",(function(e){var n=e.dom
return Cn(e)?n.getBoundingClientRect().height:n.offsetHeight})),eo=function(e,n){return{left:e,top:n,translate:function(t,r){return eo(e+t,n+r)}}},no=eo,to=function(e){var n,t=e.dom,r=t.ownerDocument.body
return r===t?no(r.offsetLeft,r.offsetTop):Cn(e)?(n=t.getBoundingClientRect(),no(n.left,n.top)):no(0,0)},ro={delta:i,positions:function(e){return Pr(Mr,Er,e)},edge:Br},oo=yr({delta:i,edge:Ar,positions:function(e){return Pr(kr,Ir,e)}},{delta:function(e){return-e},edge:Or,positions:function(e){return Pr(Ir,kr,e)}}),uo={delta:function(e,n){return oo(n).delta(e,n)},positions:function(e,n){return oo(n).positions(e,n)},edge:function(e){return oo(e).edge(e)}},io={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},co=(_r=["Infinity",(zr="[0-9]+")+"\\."+lo(zr)+lo(Lr="[eE][+-]?[0-9]+"),"\\."+zr+lo(Lr),zr+lo(Lr)].join("|"),new RegExp("^([+-]?(?:"+_r+"))(.*)$"))
function lo(e){return"(?:"+e+")?"}function ao(e,n,t){var r=q.from(e.dom.parentElement).map(Ve.fromDom).getOrThunk((function(){return Sn(nn(e))}))
return n(e)/t(r)*100}function fo(e,n){Hn(e,"width",n+"px")}function so(e,n){Hn(e,"width",n+"%")}function mo(e,n){Hn(e,"height",n+"px")}function go(e){var n,t,r,o,u,i,c,l,a,f,s=function(e){return sr()?(t=dr(n=e),o=(r=n.dom).getBoundingClientRect().height||r.offsetHeight,"border-box"===t?o:gr(n,o,"top","bottom")):mr(e,"height",e.dom.offsetHeight)
var n,t,r,o}(e)+"px"
return s?(n=s,t=e,r=Cr,o=mo,f=parseFloat(n),ee(n,"%")&&"table"!==Ye(t)?(i=f,c=r,l=o,a=tt(u=t).map((function(e){var n=c(e)
return Math.floor(i/100*n)})).getOr(i),l(u,a),a):f):Cr(e)}function po(e,n){return Un(e,n).orThunk((function(){return Pn(e,n).map((function(e){return e+"px"}))}))}function bo(e){return po(e,"width")}function ho(e){return ao(e,br,Xr)}function vo(e){return(Ol(e)?br:Yr)(e)}function wo(e){return go(n=e)/Kn(n,"rowspan")
var n}function yo(e,n,t){Hn(e,"width",n+t)}function Co(e){return ao(e,br,Xr)+"%"}function So(e){return bo(e).getOrThunk((function(){return vo(e)+"px"}))}function To(e){return po(e,"height").getOrThunk((function(){return wo(e)+"px"}))}function xo(e,n,t,r,o,u){return e.filter(r).fold((function(){return u(function(e,n){if(n<0||n>=e.length-1)return q.none()
var t=e[n].fold((function(){var t,r
return H((t=e.slice(0,n),(r=U.call(t,0)).reverse(),r),(function(e,n){return e.map((function(e){return{value:e,delta:n+1}}))}))}),(function(e){return q.some({value:e,delta:0})})),r=e[n+1].fold((function(){return H(e.slice(n+1),(function(e,n){return e.map((function(e){return{value:e,delta:n+1}}))}))}),(function(e){return q.some({value:e,delta:1})}))
return t.bind((function(e){return r.map((function(n){var t=n.delta+e.delta
return Math.abs(n.value-e.value)/t}))}))}(t,n))}),(function(e){return o(e)}))}function Ro(e,n,t,r){var o=vr(e),u=Gt.hasColumns(e)?D(Gt.justColumns(e),(function(e){return q.from(e.element)})):o,i=[q.some(uo.edge(n))].concat(D(uo.positions(o,n),(function(e){return e.map((function(e){return e.x}))}))),c=h(Xn)
return D(u,(function(e,n){return xo(e,n,i,c,(function(e){return l=e,f=(a=He().browser).isChrome()||a.isFirefox(),!kl(l)||f?t(e):xo(null!=(u=o[n])?u:q.none(),n,i,c,(function(e){return r(q.some(br(e)))}),r)
var u,l,a,f}),r)}))}function Do(e){return e.map((function(e){return e+"px"})).getOr("")}function Oo(e,n,t){return Ro(e,n,vo,(function(e){return e.getOrThunk(t.minCellWidth)}))}function Ao(e,n,t,r,o){var u=wr(e),i=[q.some(t.edge(n))].concat(D(t.positions(u,n),(function(e){return e.map((function(e){return e.y}))})))
return D(u,(function(e,n){return xo(e,n,i,h(Yn),r,o)}))}function ko(e,n){return function(){return Cn(e)?n(e):parseFloat(Un(e,"width").getOr("0"))}}function Io(e){var n=ko(e,(function(e){return parseFloat(Co(e))})),t=ko(e,br)
return{width:n,pixelWidth:t,getWidths:function(n,t){return r=t,Ro(n,e,ho,(function(e){return e.fold((function(){return r.minCellWidth()}),(function(e){return e/r.pixelWidth()*100}))}))
var r},getCellDelta:function(e){return e/t()*100},singleColumnWidth:function(e,n){return[100-e]},minCellWidth:function(){return jt()/t()*100},setElementWidth:so,adjustTableWidth:function(t){var r=n()
so(e,r+t/100*r)},isRelative:!0,label:"percent"}}function Bo(e){var n=ko(e,br)
return{width:n,pixelWidth:n,getWidths:function(n,t){return Oo(n,e,t)},getCellDelta:i,singleColumnWidth:function(e,n){return[Math.max(jt(),e+n)-e]},minCellWidth:jt,setElementWidth:fo,adjustTableWidth:function(t){var r=n()+t
fo(e,r)},isRelative:!1,label:"pixel"}}function Mo(e){return"img"===Ye(e)?1:Et(e).fold((function(){return ln(e).length}),(function(e){return e.length}))}function Eo(e){return Et(e).filter((function(e){return 0!==e.trim().length||-1<e.indexOf(" ")})).isSome()||T(El,Ye(e))}function Po(e){return n=Eo,(t=function(e){for(var r=0;r<e.childNodes.length;r++){var o=Ve.fromDom(e.childNodes[r])
if(n(o))return q.some(o)
var u=t(e.childNodes[r])
if(u.isSome())return u}return q.none()})(e.dom)
var n,t}function No(e){return Pl(e,Eo)}function zo(e){return function(){var n=Ve.fromTag("td",e.dom)
return Kt(n,Ve.fromTag("br",e.dom)),n}}function Lo(e){return function(){return Ve.fromTag("col",e.dom)}}function _o(e){return function(){return Ve.fromTag("colgroup",e.dom)}}function Wo(e){return function(){return Ve.fromTag("tr",e.dom)}}function jo(e,n,t){var r,o,u=(kt(o=ar(r=e,n),ln(lr(r))),o)
return ae(t,(function(e,n){null===e?_t(u,n):Bn(u,n,e)})),u}function Fo(e){return e}function Ho(e,n,t){function r(e,n){var t=e.element.dom,r=n.dom
jn(t)&&jn(r)&&(r.style.cssText=t.style.cssText),Gn(n,"height"),1!==e.colspan&&Gn(n,"width")}return{col:function(t){var o=Ve.fromTag(Ye(t.element),n.dom)
return r(t,o),e(t.element,o),o},colgroup:_o(n),row:Wo(n),cell:function(o){var u,i,c,l,a,f=Ve.fromTag(Ye(o.element),n.dom),s=t.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),m=0<s.length?(u=o.element,i=f,c=s,Po(u).map((function(e){return I(sn(e,c.join(","),(function(e){return ce(e,u)})),(function(e,n){var t=cr(n)
return _t(t,"contenteditable"),Kt(e,t),t}),i)})).getOr(i)):f
return Kt(m,Ve.fromTag("br")),r(o,f),l=o.element,a=f,ae(Nl,(function(e,n){return Pn(l,n).filter((function(n){return T(e,n)})).each((function(e){return Bn(a,n,e)}))})),e(o.element,f),f},replace:jo,colGap:Lo(n),gap:zo(n)}}function Vo(e){return{col:Lo(e),colgroup:_o(e),row:Wo(e),cell:zo(e),replace:Fo,colGap:Lo(e),gap:zo(e)}}function qo(e){return D(e,Ve.fromDom)}function Uo(e){return Ve.fromDom(e.getBody())}function Go(e){return e.getBoundingClientRect().width}function $o(e){return e.getBoundingClientRect().height}function Ko(e){return function(n){return ce(n,Uo(e))}}function Xo(e){return/^\d+(\.\d+)?$/.test(e)?e+"px":e}function Yo(e){function n(e){return _t(e,"data-mce-style")}_t(e,"data-mce-style"),O(et(e),n),O(nt(e),n),O(rt(e),n)}function Jo(e){return Ve.fromDom(e.selection.getStart())}function Qo(e){return ur(e.get(),u([]),i,_)}function Zo(e,n,t){return{element:t,mergable:(u=n,i=zl,ur(e.get(),q.none,(function(e){return e.length<=1?q.none():function(e,n,t){return rr(e,n,t).bind((function(n){function t(n){return ce(e,n)}var r="thead,tfoot,tbody,table",o=Dn(n.first,r,t),u=Dn(n.last,r,t)
return o.bind((function(e){return u.bind((function(t){return ce(e,t)?(o=n.table,u=n.first,i=n.last,c=$t(o),yt(r=c,u,i).bind((function(e){return function(e,n){for(var t=!0,r=b(wt,n),o=n.startRow;o<=n.finishRow;o++)for(var u=n.startCol;u<=n.finishCol;u++)t=t&&Gt.getAt(e,o,u).exists(r)
return t?q.some(n):q.none()}(r,e)}))):q.none()
var r,o,u,i,c}))}))}))}(u,i.firstSelectedSelector,i.lastSelectedSelector).map((function(n){return{bounds:n,cells:e}}))}),q.none)),unmergable:0<(o=Qo(e)).length&&z(o,(function(e){return r(e,"rowspan")||r(e,"colspan")}))?q.some(o):q.none(),selection:Qo(e)}
function r(e,n){return Pn(e,n).exists((function(e){return 1<parseInt(e,10)}))}var o,u,i}function eu(e){return function(n,t){var r,o=Ye(n)
return kn("col"===o||"colgroup"===o?tt(r=n).bind((function(e){return Hr(e,zl.firstSelectedSelector)})).fold(u(r),(function(e){return e[0]})):n,e,t)}}function nu(e,n,t){e.on("BeforeGetContent",(function(t){!0===t.selection&&ur(n.get(),o,(function(n){t.preventDefault(),tt(n[0]).map((function(e){var n=function(e,n){function t(e){return oe(e.element,n)}var r,o,u,i,c,l,a,f,s,m,d,g,p=lr(e),b=it(p),h=Il(e),v=Gt.generate(b),w=(r=t,o=v.grid.columns,u=v.grid.rows,i=o,l=c=0,a=[],f=[],ae(v.access,(function(e){var n,t,o,s
a.push(e),r(e)&&(f.push(e),t=(n=e.row)+e.rowspan-1,s=(o=e.column)+e.colspan-1,n<u?u=n:c<t&&(c=t),o<i?i=o:l<s&&(l=s))})),{minRow:u,minCol:i,maxRow:c,maxCol:l,allCells:a,selectedCells:f}),y="th:not("+n+"),td:not("+n+")"
return O(Ht(p,"th,td",(function(e){return oe(e,y)})),Xt),function(e,n,t,r){for(var o,u,i,c=n.grid.columns,l=n.grid.rows,a=0;a<l;a++)for(var f=!1,s=0;s<c;s++)a<t.minRow||a>t.maxRow||s<t.minCol||s>t.maxCol||(Gt.getAt(n,a,s).filter(r).isNone()?(o=f,u=e[a].element,i=Ve.fromTag("td"),Kt(i,Ve.fromTag("br")),(o?Kt:Dt)(u,i)):f=!0)}(b,v,w,t),s=p,m=w,d=v,g=function(e,n,t,r){if(0===r.minCol&&n.grid.columns===r.maxCol+1)return 0
var o=Oo(n,e,t),u=B(o,(function(e,n){return e+n}),0),i=B(o.slice(r.minCol,r.maxCol+1),(function(e,n){return e+n}),0)/u*t.pixelWidth()-t.pixelWidth()
return t.getCellDelta(i)}(e,Gt.fromTable(e),h,w),ae(d.columns,(function(e){(e.column<m.minCol||e.column>m.maxCol)&&Xt(e.element)})),O(k(Qn(s,"tr"),(function(e){return 0===e.dom.childElementCount})),Xt),m.minCol!==m.maxCol&&m.minRow!==m.maxRow||O(Qn(s,"th,td"),(function(e){_t(e,"rowspan"),_t(e,"colspan")})),_t(s,Ut),_t(s,"data-snooker-col-series"),Il(s).adjustTableWidth(g),p}(e,"[data-mce-selected]")
return Yo(n),[n]})).each((function(n){var r
t.content="text"===t.format?D(n,(function(e){return e.dom.innerText})).join(""):(r=e,D(n,(function(e){return r.selection.serializer.serialize(e.dom,{})})).join(""))}))}),o)})),e.on("BeforeSetContent",(function(r){!0===r.selection&&!0===r.paste&&j(Wl(n)).each((function(n){tt(n).each((function(o){var u,i,c,l,a=k((u=r.content,(i=document.createElement("div")).innerHTML=u,ln(Ve.fromDom(i))),(function(e){return"meta"!==Ye(e)})),f=en("table")
1===a.length&&f(a[0])&&(r.preventDefault(),c=Vo(Ve.fromDom(e.getDoc())),l={element:n,clipboard:a[0],generators:c},t.pasteCells(o,l).each((function(){e.focus()})))}))}))}))}function tu(e,n,t){for(var r=0,o=e;o<n;o++)r+=void 0!==t[o]?t[o]:0
return r}function ru(e,n,t){var r,o,u,i
O((r=e,o=n,Gt.hasColumns(r)?(i=o,D(Gt.justColumns(r),(function(e,n){return{element:e.element,width:i[n],colspan:e.colspan}}))):(u=o,D(Gt.justCells(r),(function(e){var n=tu(e.column,e.column+e.colspan,u)
return{element:e.element,width:n,colspan:e.colspan}})))),(function(e){t.setElementWidth(e.element,e.width)}))}function ou(e,n,t,r,o){var i,c,l,a,f,s,m,d,g,p,b=Gt.fromTable(e),h=o.getCellDelta(n),v=o.getWidths(b,o),w=t===b.grid.columns-1,y=r.clampTableDelta(v,t,h,o.minCellWidth(),w),C=(c=t,l=y,a=o,f=r,d=(i=v).slice(0),m=c,g=0===(s=i).length?Fl.none():1===s.length?Fl.only(0):0===m?Fl.left(0,1):m===s.length-1?Fl.right(m-1,m):0<m&&m<s.length-1?Fl.middle(m-1,m,m+1):Fl.none(),p=u(D(d,u(0))),g.fold(p,(function(e){return a.singleColumnWidth(d[e],l)}),(function(e,n){return f.calcLeftEdgeDeltas(d,e,n,l,a.minCellWidth(),a.isRelative)}),(function(e,n,t){return f.calcMiddleDeltas(d,e,n,t,l,a.minCellWidth(),a.isRelative)}),(function(e,n){return f.calcRightEdgeDeltas(d,e,n,l,a.minCellWidth(),a.isRelative)})))
ru(b,D(C,(function(e,n){return e+v[n]})),o),r.resizeTable(o.adjustTableWidth,y,w)}function uu(e){return D(e,u(0))}function iu(e,n,t,r,o){return o(e.slice(0,n)).concat(r).concat(o(e.slice(t)))}function cu(e){return function(n,t,r,o){if(e(r)){var u=Math.max(o,n[t]-Math.abs(r)),i=Math.abs(u-n[t])
return 0<=r?i:-i}return r}}function lu(){function e(e,n,t,r){var o=(100+t)/100,u=Math.max(r,(e[n]+t)/o)
return D(e,(function(e,t){return(t===n?u:e/o)-e}))}function n(n,t,r,o,u,i){return i?e(n,t,o,u):(a=r,f=Hl(c=n,l=t,o,u),iu(c,l,a+1,[f,0],uu))
var c,l,a,f}return{resizeTable:function(e,n){return e(n)},clampTableDelta:Hl,calcLeftEdgeDeltas:n,calcMiddleDeltas:function(e,t,r,o,u,i,c){return n(e,r,o,u,i,c)},calcRightEdgeDeltas:function(n,t,r,o,u,i){if(i)return e(n,r,o,u)
var c=Hl(n,r,o,u)
return uu(n.slice(0,r)).concat([c])},calcRedestributedWidths:function(e,n,t,r){if(r){var o=(n+t)/n,u=D(e,(function(e){return e/o}))
return{delta:100*o-100,newSizes:u}}return{delta:t,newSizes:e}}}}function au(){function e(e,n,t,r,o){var u=Vl(e,0<=r?t:n,r,o)
return iu(e,n,t+1,[u,-u],uu)}return{resizeTable:function(e,n,t){t&&e(n)},clampTableDelta:function(e,n,t,r,o){if(o){if(0<=t)return t
var u=B(e,(function(e,n){return e+n-r}),0)
return Math.max(-u,t)}return Hl(e,n,t,r)},calcLeftEdgeDeltas:e,calcMiddleDeltas:function(n,t,r,o,u,i){return e(n,r,o,u,i)},calcRightEdgeDeltas:function(e,n,t,r,o,i){return i?uu(e):D(e,u(r/e.length))},calcRedestributedWidths:function(e,n,t,r){return{delta:0,newSizes:e}}}}function fu(e,n,t){var r=t.substring(0,t.length-e.length),o=parseFloat(r)
return r===o.toString()?n(o):ql.invalid(t)}function su(e,n,t){var r,o,i,c,l=Ul.from(t),a=z(e,(function(e){return"0px"===e}))?(r=e.length,o=l.fold((function(){return u("")}),(function(e){return u(e/r+"px")}),(function(){return u(100/r+"%")})),R(r,o)):(i=e,c=n,l.fold((function(){return i}),(function(e){return t=(n=e)/c,D(i,(function(e){return Ul.from(e).fold((function(){return e}),(function(e){return e*t+"px"}),(function(e){return e/100*n+"px"}))}))
var n,t}),(function(e){return n=c,D(i,(function(e){return Ul.from(e).fold((function(){return e}),(function(e){return e/n*100+"%"}),(function(e){return e+"%"}))}))
var n})))
return Gl(a)}function mu(e,n){return 0===e.length?n:I(e,(function(e,n){return Ul.from(n).fold(u(0),i,i)+e}),0)}function du(e){return $l(e).fold(u("px"),u("px"),u("%"))}function gu(e,n,t){var r=Gt.fromTable(e),o=r.all,u=Gt.justCells(r),i=Gt.justColumns(r)
n.each((function(n){var t,o,c,l,a=du(n),f=br(e),s=su(Ro(r,e,So,Do),f,n)
Gt.hasColumns(r)?(c=s,l=a,O(i,(function(e,n){var t=mu([c[n]],jt())
Hn(e.element,"width",t+l)}))):(t=s,o=a,O(u,(function(e){var n=mu(t.slice(e.column,e.colspan+e.column),jt())
Hn(e.element,"width",n+o)}))),Hn(e,"width",n)})),t.each((function(n){var t=du(n),i=Cr(e),c=su(Ao(r,e,ro,To,Do),i,n),l=o,a=t
O(u,(function(e){var n=mu(c.slice(e.row,e.rowspan+e.row),Ft())
Hn(e.element,"height",n+a)})),O(l,(function(e,n){Hn(e.element,"height",c[n])})),Hn(e,"height",n)}))}function pu(e){return Gt.fromTable(e).grid}function bu(e){var n=[]
return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler")
n.push(e)},unbind:function(e){n=k(n,(function(n){return n!==e}))},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r]
var o={}
O(e,(function(e,n){o[e]=t[n]})),O(n,(function(e){e(o)}))}}}function hu(e){return{registry:fe(e,(function(e){return{bind:e.bind,unbind:e.unbind}})),trigger:fe(e,(function(e){return e.trigger}))}}function vu(e){return e.slice(0).sort()}function wu(e,n){var t=k(n,(function(n){return!T(e,n)}))
0<t.length&&function(){throw new Error("Unsupported keys for object: "+vu(t).join(", "))}()}function yu(e){return function(e,n,t){if(0===n.length)throw new Error("You must specify at least one required field.")
var r
return function(e,n){if(!f(n))throw new Error("The "+e+" fields must be an array. Was: "+n+".")
O(n,(function(n){if(!l(n))throw new Error("The value "+n+" in the "+e+" fields was not a string.")}))}("required",n),M(r=vu(n),(function(e,n){return n<r.length-1&&e===r[n+1]})).each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+r.join(", ")+"].")})),function(r){var o=Ue(r)
z(n,(function(e){return T(o,e)}))||function(e,n){throw new Error("All required keys ("+vu(e).join(", ")+") were not specified. Specified keys were: "+vu(n).join(", ")+".")}(n,o),e(n,o)
var u=k(n,(function(e){return!t.validate(r[e],e)}))
return 0<u.length&&function(e,n){throw new Error("All values need to be of type: "+n+". Keys ("+vu(e).join(", ")+") were not.")}(u,t.label),r}}(wu,e,{validate:g,label:"function"})}function Cu(e){function n(){return e.stopPropagation()}function t(){return e.preventDefault()}var o,u,i=Ve.fromDom(function(e){if(wn()&&r(e.target)){var n=Ve.fromDom(e.target)
if(gn(n)&&function(e){return r(e.dom.shadowRoot)}(n)&&e.composed&&e.composedPath){var t=e.composedPath()
if(t)return j(t)}}return q.from(e.target)}(e).getOr(e.target)),c=(o=t,u=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
return o(u.apply(null,e))})
return{target:i,x:e.clientX,y:e.clientY,stop:n,prevent:t,kill:c,raw:e}}function Su(e,n,t){return o=n,!1,u=Ql,i=t,c=function(e){u(e)&&i(Cu(e))},(r=e).dom.addEventListener(o,c,false),{unbind:b(Jl,r,o,c,false)}
var r,o,u,i,c}function Tu(e){return void 0!==e.dom.classList}function xu(e,n){Tu(e)?e.dom.classList.add(n):function(e,n){return r=n,Bn(e,"class",(void 0===(t=En(e,"class"))||""===t?[]:t.split(" ")).concat([r]).join(" ")),1
var t,r}(e,n)}function Ru(e,n){return Tu(e)&&e.dom.classList.contains(n)}function Du(e){var n=e.replace(/\./g,"-")
return{resolve:function(e){return n+"-"+e}}}function Ou(e){return kn(e,"[contenteditable]")}function Au(e,n){return void 0===n&&(n=!1),!He().browser.isIE()&&Cn(e)?e.dom.isContentEditable:Ou(e).fold(u(n),(function(e){return"true"===ta(e)}))}function ku(e){O(dn(e.parent(),"."+oa),Xt)}function Iu(e,n,t){var r=e.origin()
O(n,(function(n){n.each((function(n){var o=t(r,n)
xu(o,oa),Kt(e.parent(),o)}))}))}function Bu(e,n){var t
ku(e),e.isResizable(n)&&function(e,n,t,r,o){var u,i,c,l,a,f=xr(t),s=n.isResizable,m=0<r.length?ro.positions(r,t):[],d=0<m.length?(u=s,N(e.all,(function(e,n){return u(e.element)?[n]:[]}))):[]
i=n,c=k(m,(function(e,n){return x(d,(function(e){return n===e}))})),l=f,a=hr(t),Iu(i,c,(function(e,n){var t,r,o,u,i,c=(t=n.row,r=l.left-e.left,o=n.y-e.top,u=a,Vn(i=Ve.fromTag("div"),{position:"absolute",left:r+"px",top:o-3.5+"px",height:"7px",width:u+"px"}),Mn(i,{"data-row":t,role:"presentation"}),i)
return xu(c,ua),c}))
var g,p,b,h,v,w,y,C=0<o.length?uo.positions(o,t):[],S=0<C.length?(p=s,b=[],R((g=e).grid.columns,(function(e){Gt.getColumnAt(g,e).map((function(e){return e.element})).forall(p)&&b.push(e)})),k(b,(function(e){return z(Gt.filterItems(g,(function(n){return n.column===e})),(function(e){return p(e.element)}))}))):[]
h=n,v=k(C,(function(e,n){return x(S,(function(e){return n===e}))})),w=f,y=Sr(t),Iu(h,v,(function(e,n){var t,r,o,u,i,c=(t=n.col,r=n.x-e.left,o=w.top-e.top,u=y,Vn(i=Ve.fromTag("div"),{position:"absolute",left:r-3.5+"px",top:o+"px",height:u+"px",width:"7px"}),Mn(i,{"data-column":t,role:"presentation"}),i)
return xu(c,ia),c}))}(t=Gt.fromTable(n),e,n,wr(t),vr(t))}function Mu(e,n){O(dn(e.parent(),"."+oa),n)}function Eu(e){Mu(e,(function(e){Hn(e,"display","none")}))}function Pu(e){Mu(e,(function(e){Hn(e,"display","block")}))}function Nu(e){function n(e,n){return q.from(En(e,n))}var t,r,u,i,c,l,a=(i=hu({drag:bu(["xDelta","yDelta","target"])}),c=q.none(),(l={mutate:function(e,n){u.trigger.drag(e,n)},events:(u=hu({drag:bu(["xDelta","yDelta"])})).registry}).events.drag.bind((function(e){c.each((function(n){i.trigger.drag(e.xDelta,e.yDelta,n)}))})),{assign:function(e){c=q.some(e)},get:function(){return c},mutate:l.mutate,events:i.registry}),f=(r=void 0!==(t={}).mode?t.mode:na,function(e,n,t){function r(){g.stop(),a.isOn()&&(a.off(),l.trigger.stop())}var u,i,c=!1,l=hu({start:bu([]),stop:bu([])}),a=function(){var e,n,t={onEvent:o,reset:o,events:hu({move:bu(["info"])}).registry},r=(e=q.none(),{onEvent:function(t,r){r.extract(t).each((function(t){var o=r,u=t,i=e.map((function(e){return o.compare(e,u)}))
e=q.some(u),i.each((function(e){n.trigger.move(e)}))}))},reset:function(){e=q.none()},events:(n=hu({move:bu(["info"])})).registry}),u=t
return{on:function(){u.reset(),u=r},off:function(){u.reset(),u=t},isOn:function(){return u===r},onEvent:function(e,n){u.onEvent(e,n)},events:r.events}}(),f=(u=r,i=null,{cancel:m,throttle:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
m(),i=setTimeout((function(){i=null,u.apply(null,e)}),200)}})
function m(){s(i)||(clearTimeout(i),i=null)}function d(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]
c&&e.apply(null,n)}}a.events.move.bind((function(t){n.mutate(e,t.info)}))
var g=n.sink(Yl({forceDrop:r,drop:d(r),move:d((function(e){f.cancel(),a.onEvent(e,n)})),delayDrop:d(f.throttle)}),t)
return{element:g.element,go:function(e){g.start(e),a.on(),l.trigger.start()},on:function(){c=!0},off:function(){c=!1},destroy:function(){g.destroy()},events:l.registry}}(a,r,t)),m=q.none()
function d(e,n){return Jn(e,n)-$n(e,"data-initial-"+n,0)}function g(n,t){w.trigger.startAdjust(),a.assign(n),Bn(n,"data-initial-"+t,Jn(n,t)),xu(n,ca),Hn(n,"opacity","0.2"),f.go(e.parent())}function p(n){return ce(n,e.view())}a.events.drag.bind((function(e){n(e.target,"data-row").each((function(n){var t=Jn(e.target,"top")
Hn(e.target,"top",t+e.yDelta+"px")})),n(e.target,"data-column").each((function(n){var t=Jn(e.target,"left")
Hn(e.target,"left",t+e.xDelta+"px")}))})),f.events.stop.bind((function(){a.get().each((function(t){m.each((function(r){n(t,"data-row").each((function(e){var n=d(t,"top")
_t(t,"data-initial-top"),w.trigger.adjustHeight(r,n,parseInt(e,10))})),n(t,"data-column").each((function(e){var n=d(t,"left")
_t(t,"data-initial-left"),w.trigger.adjustWidth(r,n,parseInt(e,10))})),Bu(e,r)}))}))}))
var h=Su(e.parent(),"mousedown",(function(e){Ru(e.target,ua)&&g(e.target,"top"),Ru(e.target,ia)&&g(e.target,"left")})),v=Su(e.view(),"mouseover",(function(n){kn(n.target,"table",p).filter(Au).fold((function(){Cn(n.target)&&ku(e)}),(function(n){m=q.some(n),Bu(e,n)}))})),w=hu({adjustHeight:bu(["table","delta","row"]),adjustWidth:bu(["table","delta","column"]),startAdjust:bu([])})
return{destroy:function(){h.unbind(),v.unbind(),f.destroy(),ku(e)},refresh:function(n){Bu(e,n)},on:f.on,off:f.off,hideBars:b(Eu,e),showBars:b(Pu,e),events:w.registry}}function zu(e,n){return e.fire("newrow",{node:n})}function Lu(e,n){return e.fire("newcell",{node:n})}function _u(e,n,t){e.fire("TableModified",K(K({},t),{table:n}))}function Wu(e){return e.getParam("table_sizing_mode","auto")}function ju(e){return e.getParam("table_responsive_width")}function Fu(e){return e.getParam("table_border_widths",ma,"array")}function Hu(e){return e.getParam("table_border_styles",da,"array")}function Vu(e){return e.getParam("table_default_attributes",ga,"object")}function qu(e){return e.getParam("table_default_styles",function(e){var n
if(ba(e)){var t=e.dom,r=null!==(n=t.getParent(e.selection.getStart(),t.isBlock))&&void 0!==n?n:e.getBody(),o=Xr(Ve.fromDom(r))
return K(K({},sa),{width:o+"px"})}return ha(e)?se(sa,(function(e,n){return"width"!==n})):sa}(e),"object")}function Uu(e){return e.getParam("table_cell_advtab",!0,"boolean")}function Gu(e){return e.getParam("table_row_advtab",!0,"boolean")}function $u(e){return e.getParam("table_advtab",!0,"boolean")}function Ku(e){return e.getParam("table_style_by_css",!1,"boolean")}function Xu(e){return e.getParam("table_cell_class_list",[],"array")}function Yu(e){return e.getParam("table_class_list",[],"array")}function Ju(e){return"relative"===Wu(e)||!0===ju(e)}function Qu(e){var n="section",t=e.getParam("table_header_type",n,"string")
return T(["section","cells","sectionCells","auto"],t)?t:n}function Zu(e){var n=e.getParam("table_column_resizing",pa,"string")
return M(["preservetable","resizetable"],(function(e){return e===n})).getOr(pa)}function ei(e){return"preservetable"===Zu(e)}function ni(e){return"resizetable"===Zu(e)}function ti(e){var n=e.getParam("table_clone_elements")
return l(n)?q.some(n.split(/[ ,]/)):Array.isArray(n)?q.some(n):q.none()}function ri(e){return e.getParam("table_background_color_map",[],"array")}function oi(e){return e.getParam("table_border_color_map",[],"array")}function ui(e,n){return(Ju(e)?Ml:ba(e)?Bl:Il)(n)}function ii(e){_t(e,"width")}function ci(e){return"false"!==En(e,"data-mce-resize")}function li(e,n){return{element:e,offset:n}}function ai(e,n){return(e.property().isText(n)?e.property().getText(n):e.property().children(n)).length}function fi(e,n){1===Kn(e,"colspan")&&bo(e).bind((function(e){return n=["fixed","relative","empty"],q.from(co.exec(e)).bind((function(e){var t=Number(e[1]),r=e[2],o=r
return x(n,(function(e){return x(io[e],(function(e){return o===e}))}))?q.some({value:t,unit:r}):q.none()}))
var n})).each((function(t){var r=t.value/2
yo(e,r,t.unit),yo(n,r,t.unit)}))}function si(e){return z(e,(function(e){return Da(e.element)}))}function mi(e){var n="thead"===e.section,t=zn(Oa(e.cells),"th")
return n||t?{type:"header",subType:n&&t?"sectionCells":n?"section":"cells"}:"tfoot"===e.section?{type:"footer"}:{type:"body"}}function di(e,n,t){return we(t(e.element,n),!0,e.isLocked)}function gi(e,n){return e.section!==n?ye(e.element,e.cells,n,e.isNew):e}function pi(){return{transformRow:gi,transformCell:function(e,n,t){var r,o,u=t(e.element,n)
return we("td"!==Ye(u)?(o=ar(r=u,"td"),xt(r,o),kt(o,ln(r)),Xt(r),o):u,e.isNew,e.isLocked)}}}function bi(){return{transformRow:gi,transformCell:di}}function hi(){return{transformRow:function(e,n){return gi(e,"thead"===n?"tbody":n)},transformCell:di}}function vi(e,n,t,r){t===r?_t(e,n):Bn(e,n,t)}function wi(e,n,t){F(mn(e,n)).fold((function(){return Dt(e,t)}),(function(e){return Rt(e,t)}))}function yi(e,n){function t(n,t){0<n.length?function(n,t){var u,i,c
kt((It(c=On(u=e,i=t).getOrThunk((function(){var e=Ve.fromTag(i,nn(u).dom)
return"thead"===i?wi(u,"caption,colgroup",e):"colgroup"===i?wi(u,"caption",e):Kt(u,e),e}))),c),("colgroup"===t?function(e){return N(e,(function(e){return D(e.cells,(function(e){return vi(e.element,"span",e.colspan,1),e.element}))}))}:function(e){return D(e,(function(e){e.isNew&&r.push(e.element)
var n=e.element
return It(n),O(e.cells,(function(e){e.isNew&&o.push(e.element),vi(e.element,"colspan",e.colspan,1),vi(e.element,"rowspan",e.rowspan,1),Kt(n,e.element)})),n}))})(n))}(n,t):On(e,t).each(Xt)}var r=[],o=[],u=[],i=[],c=[],l=[]
return O(n,(function(e){switch(e.section){case"thead":u.push(e)
break
case"tbody":i.push(e)
break
case"tfoot":c.push(e)
break
case"colgroup":l.push(e)}})),t(l,"colgroup"),t(u,"thead"),t(i,"tbody"),t(c,"tfoot"),{newRows:r,newCells:o}}function Ci(e,n){if(0===e.length)return 0
var t=e[0]
return E(e,(function(e){return!n(t.element,e.element)})).getOr(e.length)}function Si(e,n,t){var r=[]
O(e.colgroups,(function(o){for(var u=[],i=0;i<e.grid.columns;i++){var c=Gt.getColumnAt(e,i).map((function(e){return we(e.element,t,!1)})).getOrThunk((function(){return we(n.colGap(),!0,!1)}))
u.push(c)}r.push(ye(o.element,u,"colgroup",t))}))
for(var o=0;o<e.grid.rows;o++){for(var u=[],i=0;i<e.grid.columns;i++){var c=Gt.getAt(e,o,i).map((function(e){return we(e.element,t,e.isLocked)})).getOrThunk((function(){return we(n.gap(),!0,!1)}))
u.push(c)}var l=e.all[o],a=ye(l.element,u,l.section,t)
r.push(a)}return r}function Ti(e){return function(e,n){var t=D(e,(function(e){return D(e.cells,w)}))
return D(e,(function(r,o){var u=N(r.cells,(function(r,u){if(!1!==t[o][u])return[]
var i,c,l,a,f,s,m,d,g=(l=u,a=n,d="colgroup"===(m=(i=e)[c=o]).section,{colspan:Ci(m.cells.slice(l),a),rowspan:d?1:Ci((f=i.slice(c),s=l,D(f,(function(e){return ft(e,s)}))),a)})
return function(e,n,r,o){for(var u=e;u<e+r;u++)for(var i=n;i<n+o;i++)t[u][i]=!0}(o,u,g.rowspan,g.colspan),[{element:r.element,rowspan:g.rowspan,colspan:g.colspan,isNew:r.isNew}]}))
return{element:r.element,cells:u,section:r.section,isNew:r.isNew}}))}(e,ce)}function xi(e,n){return H(e.all,(function(e){return M(e.cells,(function(e){return ce(n,e.element)}))}))}function Ri(e,n,t){var r=Ln(D(n.selection,(function(n){return Zn(n).bind((function(n){return xi(e,n)})).filter(t)})))
return Wn(0<r.length,r)}function Di(e,n,t,r,o){return function(u,i,c,l,a){var f=Gt.fromTable(i),s=q.from(null==a?void 0:a.section).getOrThunk(Cl)
return n(f,c).map((function(n){var t=Si(f,l,!1),r=e(t,n,ce,o(l),s),u=bt(r.grid)
return{info:n,grid:Ti(r.grid),cursor:r.cursor,lockedColumns:u}})).bind((function(e){var n=yi(i,e.grid),o=q.from(null==a?void 0:a.sizing).getOrThunk((function(){return Il(i)})),c=q.from(null==a?void 0:a.resize).getOrThunk(au)
return t(i,e.grid,e.info,{sizing:o,resize:c,section:s}),r(i),Bu(u,i),_t(i,Ut),0<e.lockedColumns.length&&Bn(i,Ut,e.lockedColumns.join(",")),q.some({cursor:e.cursor,newRows:n.newRows,newCells:n.newCells})}))}}function Oi(e,n){return Ri(e,n,y).map((function(e){return{cells:e,generators:n.generators,clipboard:n.clipboard}}))}function Ai(e,n){return Ri(e,n,y)}function ki(e,n){return Ri(e,n,(function(e){return!e.isLocked}))}function Ii(e,n){return z(n,(function(n){return xi(e,n).exists((function(e){return!e.isLocked}))}))}function Bi(e,n){return n.mergable.filter((function(n){return Ii(e,n.cells)}))}function Mi(e,n){return n.unmergable.filter((function(n){return Ii(e,n)}))}function Ei(e,n,t,r){for(var o=dt(e).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<mt(o[0]);c++){var l=o[i],a=ft(l,c),f=t(a.element,n)
!0===f&&!1===u?at(l,c,we(r(),!0,a.isLocked)):!0===f&&(u=!1)}return e}function Pi(e,n){return{rowDelta:0,colDelta:mt(e[0])-mt(n[0])}}function Ni(e,n){return{rowDelta:e.length-n.length,colDelta:0}}function zi(e,n,t,r){var o="colgroup"===n.section?t.col:t.cell
return R(e,(function(e){return we(o(),!0,r(e))}))}function Li(e,n,t,r){var o=e[e.length-1]
return e.concat(R(n,(function(){var e="colgroup"===o.section?t.colgroup:t.row,n=gt(o,e,i),u=zi(n.cells.length,n,t,(function(e){return Ke(r,e.toString())}))
return qt(n,u)})))}function _i(e,n,t,r){return D(e,(function(e){var o=zi(n,e,t,w)
return ct(e,r,o)}))}function Wi(e,n,t){var r=n.colDelta<0?_i:i,o=n.rowDelta<0?Li:i,u=bt(e),c=mt(e[0]),l=x(u,(function(e){return e===c-1})),a=r(e,Math.abs(n.colDelta),t,l?c-1:c),f=bt(a)
return o(a,Math.abs(n.rowDelta),t,L(f,y))}function ji(e,n,t){return k(t,(function(t){return t>=e.column&&t<=mt(n[0])+e.column}))}function Fi(e,n,t,r,o){var u=e,i=o,c=r.cell
0<u&&u<n[0].cells.length&&O(n,(function(e){var n=e.cells[u-1],t=e.cells[u]
i(t.element,n.element)&&at(e,u,we(c(),!0,t.isLocked))}))
var l=Wi(t,Ni(t,n),r)
return D(Wi(n,Ni(n,l),r),(function(n,t){return ct(n,e,l[t].cells)}))}function Hi(e,n,t,r,o){(function(e,n,t,r){var o,u,i=dt(e).rows
0<n&&n<i.length&&(o=i[n-1].cells,u=t,O(B(o,(function(e,n){return x(e,(function(e){return u(e.element,n.element)}))?e:e.concat([n])}),[]),(function(e){for(var o=q.none(),u=n;u<i.length;u++)for(var c=0;c<mt(i[0]);c++)!function(n){var c=i[u],l=ft(c,n)
t(l.element,e.element)&&(o=o.isNone()?q.some(r()):o).each((function(e){at(c,n,we(e,!0,l.isLocked))}))}(c)})))})(n,e,o,r.cell)
var u,i,c=bt(n),l=Pi(n,t),a=Wi(n,K(K({},l),{colDelta:l.colDelta-c.length}),r),f=dt(a),s=f.cols,m=f.rows,d=bt(a),g=Pi(t,n),p=K(K({},g),{colDelta:g.colDelta+d.length}),b=Wi((u=r,i=d,D(t,(function(e){return B(i,(function(n,t){return lt(n,t,zi(1,e,u,y)[0])}),e)}))),p,r)
return s.concat(m.slice(0,e)).concat(b).concat(m.slice(e,m.length))}function Vi(e,n,t,r,o){var u,i,c,l,a=dt(e),f=a.rows,s=a.cols,m=f.slice(0,n),d=f.slice(n),g=(u=f[t],i=function(e,t){return 0<n&&n<f.length&&r(st(f[n-1],t),st(f[n],t))?ft(f[n],t):we(o(e.element,r),!0,e.isLocked)},c=r,l=o,gt(u,(function(e){return l(e,c)}),i))
return s.concat(m).concat([g]).concat(d)}function qi(e,n,t,r,o){return D(e,(function(e){var u,i,c=0<n&&n<mt(e)&&r(st(e,n-1),st(e,n)),l=(u=e.section,i=o,"colgroup"!==u&&c?ft(e,n):we(i(ft(e,t).element,r),!0,!1))
return lt(e,n,l)}))}function Ui(e,n,t,r){return void 0!==st((u=e)[i=n],t)&&0<i&&r(st(u[i-1],t),st(u[i],t))||(o=e[n],0<t&&r(st(o,t-1),st(o,t)))
var o,u,i}function Gi(e,n,t,r){function o(e){return("row"===e?Yn:Xn)(n)?e+"group":e}return e?Da(n)?o(t):null:r&&Da(n)?o("row"===t?"col":"row"):null}function $i(e,n,t){return we(t(e.element,n),!0,e.isLocked)}function Ki(e,n,t,r,o,u,i){return D(e,(function(e,c){return a=function(e,l){if(f=e,x(n,(function(e){return t(f.element,e.element)}))){var a=i(e,c,l)?o(e,t,r):e
return u(a,c,l).each((function(e){var n=a.element
ae({scope:q.from(e)},(function(e,t){e.fold((function(){_t(n,t)}),(function(e){In(n.dom,t,e)}))}))})),a}return e
var f},f=D((l=e).cells,a),ye(l.element,f,l.section,l.isNew)
var l,a,f}))}function Xi(e,n,t){return N(e,(function(r,o){return Ui(e,o,n,t)?[]:[ft(r,n)]}))}function Yi(e,n,t,r,o){var u,c,l,a,f=dt(e).rows,s=N(n,(function(e){return Xi(f,e,r)})),m=D(e,(function(e){return si(e.cells)})),d=(u=s,z(c=m,i)&&si(u)?y:function(e,n,t){return!("th"===Ye(e.element)&&c[n])}),g=(l=t,a=m,function(e,n){return q.some(Gi(l,e.element,"row",a[n]))})
return Ki(e,s,r,o,$i,g,d)}function Ji(e,n,t,r){var o=dt(e).rows
return Ki(e,D(n,(function(e){return ft(o[e.row],e.column)})),t,r,$i,q.none,y)}function Qi(e){return B(e,(function(e,n){return x(e,(function(e){return e.column===n.column}))?e:e.concat([n])}),[]).sort((function(e,n){return e.column-n.column}))}function Zi(e){return"tr"===Ye(e)||Na(e)}function ec(e){return{element:e,colspan:$n(e,"colspan",1),rowspan:$n(e,"rowspan",1)}}function nc(e){return Pn(e,"scope").map((function(e){return e.substr(0,3)}))}function tc(e){return n=e,t=La.property().name(n),T(za,t)
var n,t}function rc(e){return n=e,T(["ol","ul"],La.property().name(n))
var n}function oc(e){function n(e){return"br"===Ye(e)}var t,r=0===(t=N(e,(function(e){var t=ln(e)
return z(t,(function(e){return n(e)||pn(e)&&0===Mt(e).trim().length}))?[]:t.concat(function(e){return No(e).bind((function(t){var r=cn(t).map((function(e){return!!tc(e)||(n=e,!!T(["br","img","hr","input"],La.property().name(n))&&"img"!==Ye(e))
var n})).getOr(!1)
return rn(t).map((function(o){return!0===r||"li"===Ye(u=o)||Rn(u,rc).isSome()||n(t)||tc(o)&&!ce(e,o)?[]:[Ve.fromTag("br")]
var u}))})).getOr([])}(e))}))).length?[Ve.fromTag("br")]:t
It(e[0]),kt(e[0],r)}function uc(e){return Au(e,!0)}function ic(e){0===et(e).length&&Xt(e)}function cc(e,n){return{grid:e,cursor:n}}function lc(e,n,t){var r,o,u,i,c
return cc(e,(r=n,o=t,c=dt(e).rows,q.from(null===(i=null===(u=c[r])||void 0===u?void 0:u.cells[o])||void 0===i?void 0:i.element).filter(uc).orThunk((function(){return H(c,(function(e){return H(e.cells,(function(e){var n=e.element
return Wn(uc(n),n)}))}))}))))}function ac(e){return B(e,(function(e,n){return x(e,(function(e){return e.row===n.row}))?e:e.concat([n])}),[]).sort((function(e,n){return e.row-n.row}))}function fc(e,n){return function(t,r,o,u,c){return lc(function(e,n,t,r,o,u,c){var l=dt(e),a=l.cols,f=l.rows,s=f[n[0]],m=N(n,(function(e){return r=o,N((n=f)[t=e].cells,(function(e,o){return Ui(n,t,o,r)?[]:[e]}))
var n,t,r})),d=D(s.cells,(function(e,n){return si(Xi(f,n,o))})),g=X([],f,!0)
O(n,(function(e){g[e]=c.transformRow(f[e],t)}))
var p,b,h,v,w=a.concat(g),C=(p=s,z(b=d,i)&&si(p.cells)?y:function(e,n,t){return!("th"===Ye(e.element)&&b[t])}),S=(h=r,v=d,function(e,n,t){return q.some(Gi(h,e.element,"col",v[t]))})
return Ki(w,m,o,u,c.transformCell,S,C)}(t,D(ac(r),(function(e){return e.row})),e,n,o,u.replaceOrInit,c),r[0].row,r[0].column)}}function sc(e,n,t){var r,o=(r=t.section,ot(e,(function(){return r})))
return Si(Gt.generate(o),n,!0)}function mc(e,n,t,r){var o=r.sizing,u=Gt.generate(n)
ru(u,o.getWidths(u,o),o)}function dc(e,n,t,r){var o=t,u=r.sizing,i=r.resize,c=Gt.generate(n),l=u.getWidths(c,u),a=u.pixelWidth(),f=i.calcRedestributedWidths(l,a,o.pixelDelta,u.isRelative),s=f.newSizes,m=f.delta
ru(c,s,u),u.adjustTableWidth(m)}function gc(e,n){return x(n,(function(e){return 0===e.column&&e.isLocked}))}function pc(e,n){return x(n,(function(n){return n.column+n.colspan>=e.grid.columns&&n.isLocked}))}function bc(e,n){var t=vr(e)
return B(Qi(n),(function(e,n){return e+t[n.column].map(hr).getOr(0)}),0)}function hc(e){return function(n,t){return Ai(n,t).filter((function(t){return!(e?gc:pc)(n,t)})).map((function(e){return{details:e,pixelDelta:bc(n,e)}}))}}function vc(e){return function(n,t){return Oi(n,t).filter((function(t){return!(e?gc:pc)(n,t.cells)}))}}function wc(e,n){var t=Gt.fromTable(e)
return Ai(t,n).bind((function(e){var n=e[e.length-1],r=e[0].column,o=n.column+n.colspan,u=P(D(t.all,(function(e){return k(e.cells,(function(e){return e.column>=r&&e.column<o}))})))
return Oa(u)})).getOr("")}function yc(e,n){return Ai(Gt.fromTable(e),n).bind(Oa).getOr("")}function Cc(e,n,t,r){return R(e,(function(e){return function(e,n,t,r){for(var o=Ve.fromTag("tr"),u=0;u<e;u++){var i=r<n||u<t?Ve.fromTag("th"):Ve.fromTag("td")
u<t&&Bn(i,"scope","row"),r<n&&Bn(i,"scope","col"),Kt(i,Ve.fromTag("br")),Kt(o,i)}return o}(n,t,r,e)}))}function Sc(e,n){e.selection.select(n.dom,!0),e.selection.collapse(!0)}function Tc(e,n,t,r,o){var u=qu(e),i={styles:u,attributes:Vu(e),colGroups:e.getParam("table_use_colgroups",!1,"boolean")}
return e.undoManager.ignore((function(){var u=function(e,n,t,r,o,u){void 0===u&&(u=sf)
var i,c,l=Ve.fromTag("table"),a="cells"!==o
Vn(l,u.styles),Mn(l,u.attributes),u.colGroups&&Kt(l,(i=n,c=Ve.fromTag("colgroup"),R(i,(function(){return Kt(c,Ve.fromTag("col"))})),c))
var f,s=Math.min(e,t)
a&&0<t&&(f=Ve.fromTag("thead"),Kt(l,f),kt(f,Cc(t,n,"sectionCells"===o?s:0,r)))
var m=Ve.fromTag("tbody")
return Kt(l,m),kt(m,Cc(a?e-s:e,n,a?0:t,r)),l}(t,n,o,r,Qu(e),i)
Bn(u,"data-mce-id","__mce")
var c,l,a,f=(c=u,l=Ve.fromTag("div"),a=Ve.fromDom(c.dom.cloneNode(!0)),Kt(l,a),l.dom.innerHTML)
e.insertContent(f),e.addVisual()})),An(Uo(e),'table[data-mce-id="__mce"]').map((function(n){var t,r,o
return ba(e)?wa(n):ha(e)?ya(n):(Ju(e)||(t=u.width,l(t)&&-1!==t.indexOf("%")))&&va(n),Yo(n),_t(n,"data-mce-id"),r=e,O(dn(n,"tr"),(function(e){zu(r,e.dom),O(dn(e,"th,td"),(function(e){Lu(r,e.dom)}))})),o=e,An(n,"td,th").each(b(Sc,o)),n.dom})).getOr(null)}function xc(e,n,t,r,o){function u(e){return p(e)&&0<e}if(void 0===r&&(r={}),u(n)&&u(t)){var i=r.headerRows||0
return Tc(e,t,n,r.headerColumns||0,i)}return console.error(o),null}function Rc(e){return function(){return e().fold((function(){return[]}),(function(e){return D(e,(function(e){return e.dom}))}))}}function Dc(e){return function(n){var t=0<n.length?q.some(qo(n)):q.none()
e(t)}}function Oc(e,n,t){var r=$n(e,n,1)
1===t||r<=1?_t(e,n):Bn(e,n,Math.min(t,r))}function Ac(e,n,t){return function(n,r){for(var o=0;o<r.length;o++){var u=e.getStyle(r[o],t)
if((n=void 0===n?u:n)!==u)return""}return n}(void 0,e.select("td,th",n))}function kc(e,n,t){t&&e.formatter.apply("align"+t,{},n)}function Ic(e,n){mf.each("left center right".split(" "),(function(t){e.formatter.remove("align"+t,{},n)}))}function Bc(e){return gf.test(t=e)||pf.test(t)?q.some({value:(Ae(n=e,"#")?n.substring("#".length):n).toUpperCase()}):q.none()
var n,t}function Mc(e){var n=e.toString(16)
return(1===n.length?"0"+n:n).toUpperCase()}function Ec(e){return{value:Mc(e.red)+Mc(e.green)+Mc(e.blue)}}function Pc(e,n,t,r){return{red:e,green:n,blue:t,alpha:r}}function Nc(e,n,t,r){return Pc(parseInt(e,10),parseInt(n,10),parseInt(t,10),parseFloat(r))}function zc(e){var n=e
return{get:function(){return n},set:function(e){n=e}}}function Lc(e){function n(){return t.get().each(e)}var t=zc(q.none())
return{clear:function(){n(),t.set(q.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){n(),t.set(q.some(e))}}}function _c(){var e=Lc(o)
return K(K({},e),{on:function(n){return e.get().each(n)}})}function Wc(e){return be(e,"menu")}function jc(e,n){return function(t){var r
e.execCommand("mceTableApplyCellStyle",!1,((r={})[n]=t,r))}}function Fc(e,n,t,r,o){return function(u){return u(wf(e,n,t,r,o))}}function Hc(e,n,t){var r=D(n,(function(e){return{text:e.title,value:"#"+Bc(n=e.value).orThunk((function(){return function(e){if("transparent"===e)return q.some(Pc(0,0,0,0))
var n=bf.exec(e)
if(null!==n)return q.some(Nc(n[1],n[2],n[3],"1"))
var t=hf.exec(e)
return null!==t?q.some(Nc(t[1],t[2],t[3],t[4])):q.none()}(n).map(Ec)})).getOrThunk((function(){var e=document.createElement("canvas")
e.height=1,e.width=1
var t=e.getContext("2d")
t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=n,t.fillRect(0,0,1,1)
var r=t.getImageData(0,0,1,1).data
return Ec(Pc(r[0],r[1],r[2],r[3]))})).value,type:"choiceitem"}
var n}))
return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<r.length?r:void 0,allowCustomColors:!1},onAction:function(n){var r,o="remove"===n.value?"":n.value
e.execCommand("mceTableApplyCellStyle",!1,((r={})[t]=o,r))}}]}function Vc(e){return function(){var n=e.queryCommandValue("mceTableRowType")
e.execCommand("mceTableRowType",!1,{type:"header"===n?"body":"header"})}}function qc(e){return function(){var n=e.queryCommandValue("mceTableColType")
e.execCommand("mceTableColType",!1,{type:"th"===n?"td":"th"})}}function Uc(e){return Cf.concat((0<(n=vf(Xu(e))).length?q.some({name:"class",type:"listbox",label:"Class",items:n}):q.none()).toArray())
var n}function Gc(e,n){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(vf(Hu(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}]
return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(t):t}}function $c(e){return function(n,t){var r=n.dom
return{setAttrib:function(n,o){e&&!o||r.setAttrib(t,n,o)},setStyle:function(n,o){e&&!o||r.setStyle(t,n,o)},setFormat:function(r,o){e&&!o||(""===o?n.formatter.remove(r,{value:null},t,!0):n.formatter.apply(r,{value:o},t))}}}}function Kc(e){return function(n){return Ae(n,"rgb")?e.toHex(n):n}}function Xc(e,n){var t=Ve.fromDom(n)
return{borderwidth:Un(t,"border-width").getOr(""),borderstyle:Un(t,"border-style").getOr(""),bordercolor:Un(t,"border-color").map(Kc(e)).getOr(""),backgroundcolor:Un(t,"background-color").map(Kc(e)).getOr("")}}function Yc(e){var n=e[0]
return O(e.slice(1),(function(e){O(Ue(n),(function(t){ae(e,(function(e,r){var o=n[t]
""!==o&&t===r&&o!==e&&(n[t]="")}))}))})),n}function Jc(e,n,t,r){return M(e,(function(e){return!d(t.formatter.matchNode(r,n+e))})).getOr("")}function Qc(e,n){var t=Gt.fromTable(e)
return D(k(Gt.justCells(t),(function(e){return x(n,(function(n){return ce(e.element,n)}))})),(function(e){return{element:e.element.dom,column:Gt.getColumnAt(t,e.column).map((function(e){return e.element.dom}))}}))}function Zc(e,n,t,r){var o=r.getData()
r.close(),e.undoManager.transact((function(){var r,u=e,i=n,c=t,l=se(r=o,(function(e,n){return c[n]!==e}))
0<ge(l)&&1<=i.length&&tt(i[0]).each((function(e){var n,t,o,c=Qc(e,i),a=0<ge(se(l,(function(e,n){return"scope"!==n&&"celltype"!==n}))),f=Ke(l,"celltype");(a||Ke(l,"scope"))&&(n=u,t=r,o=1===c.length,O(c,(function(e){var r,u,i,c,l,a,f=e.element,s=o?Sf.normal(n,f):Sf.ifTruthy(n,f),m=e.column.map((function(e){return o?Sf.normal(n,e):Sf.ifTruthy(n,e)})).getOr(s),d=t;(r=s).setAttrib("scope",d.scope),r.setAttrib("class",d.class),r.setStyle("height",Xo(d.height)),m.setStyle("width",Xo(d.width)),Uu(n)&&((u=s).setFormat("tablecellbackgroundcolor",(i=t).backgroundcolor),u.setFormat("tablecellbordercolor",i.bordercolor),u.setFormat("tablecellborderstyle",i.borderstyle),u.setFormat("tablecellborderwidth",Xo(i.borderwidth))),o&&(Ic(n,f),c=n,l=f,mf.each("top middle bottom".split(" "),(function(e){c.formatter.remove("valign"+e,{},l)}))),t.halign&&kc(n,f,t.halign),!t.valign||(a=t.valign)&&n.formatter.apply("valign"+a,{},f)}))),f&&u.execCommand("mceTableCellType",!1,{type:r.celltype,no_events:!0}),_u(u,e.dom,{structure:f,style:a})})),e.focus()}))}function el(e,n){var t,r,o,u,i,c=Wl(n)
0!==c.length&&(r=e,t=Yc(tt((o=c)[0]).map((function(e){return D(Qc(e,o),(function(e){return t=r,o=e.element,u=Uu(r),i=e.column,c=t.dom,l=i.getOr(o),K({width:n(l,"width"),height:n(o,"height"),scope:c.getAttrib(o,"scope"),celltype:o.nodeName.toLowerCase(),class:c.getAttrib(o,"class",""),halign:Tf(t,o),valign:xf(t,o)},u?Xc(c,o):{})
function n(e,n){return c.getStyle(e,n)||c.getAttrib(e,n)}var t,o,u,i,c,l}))})).getOrDie()),u={type:"tabpanel",tabs:[{title:"General",name:"general",items:Uc(e)},Gc(e,"cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:Uc(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:Uu(e)?u:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:t,onSubmit:b(Zc,e,c,t)}))}function nl(e){return Rf.concat((0<(n=vf(e.getParam("table_row_class_list",[],"array"))).length?q.some({name:"class",type:"listbox",label:"Class",items:n}):q.none()).toArray())
var n}function tl(e,n,t,r){var o=r.getData()
r.close(),e.undoManager.transact((function(){var r,u,i,c,l,a,f,s=e,m=n,d=t,g=se(r=o,(function(e,n){return d[n]!==e}))
0<ge(g)&&(u=Ke(g,"type"),(i=!u||1<ge(g))&&(c=s,l=r,a=d,f=1===m.length,O(m,(function(e){var n,t,r,o=f?Sf.normal(c,e):Sf.ifTruthy(c,e),u=l;(n=o).setAttrib("class",u.class),n.setStyle("height",Xo(u.height)),Gu(c)&&((t=o).setStyle("background-color",(r=l).backgroundcolor),t.setStyle("border-color",r.bordercolor),t.setStyle("border-style",r.borderstyle)),l.align!==a.align&&(Ic(c,e),kc(c,e,l.align))}))),u&&s.execCommand("mceTableRowType",!1,{type:r.type,no_events:!0}),tt(Ve.fromDom(m[0])).each((function(e){return _u(s,e.dom,{structure:u,style:i})}))),e.focus()}))}function rl(e){var n,t,r,o,u,i,c,l=(n=Jo(e),t=zl.selected,o=(r=_l(n)).bind((function(e){return tt(e)})).map(rt),_n(r,o,(function(e,n){return k(n,(function(n){return x(qo(n.dom.cells),(function(n){return"1"===En(n,t)||ce(n,e)}))}))})).getOr([]))
0!==l.length&&(u=Yc(D(l,(function(n){return t=e,r=n.dom,o=Gu(e),i=t.dom,K({height:i.getStyle(r,"height")||i.getAttrib(r,"height"),class:i.getAttrib(r,"class",""),type:tt(Ve.fromDom(u=r)).map((function(e){var n={selection:qo(u.cells)}
return ff(e,n)})).getOr(""),align:Tf(t,r)},o?Xc(i,r):{})
var t,r,o,u,i}))),i={type:"tabpanel",tabs:[{title:"General",name:"general",items:nl(e)},Gc(e,"row")]},c={type:"panel",items:[{type:"grid",columns:2,items:nl(e)}]},e.windowManager.open({title:"Row Properties",size:"normal",body:Gu(e)?i:c,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u,onSubmit:b(tl,e,D(l,(function(e){return e.dom})),u)}))}function ol(e,n,t,r){var o=e.dom,u=r.getData(),i=se(u,(function(e,n){return t[n]!==e}))
r.close(),""===u.class&&delete u.class,e.undoManager.transact((function(){var t,r,c,l,a
n||(t=parseInt(u.cols,10)||1,r=parseInt(u.rows,10)||1,n=Tc(e,t,r,0,0)),0<ge(i)&&(function(e,n,t){var r,o=e.dom,u={},i={}
if(u.class=t.class,i.height=Xo(t.height),o.getAttrib(n,"width")&&!Ku(e)?u.width=(r=t.width)?r.replace(/px$/,""):"":i.width=Xo(t.width),Ku(e)?(i["border-width"]=Xo(t.border),i["border-spacing"]=Xo(t.cellspacing)):(u.border=t.border,u.cellpadding=t.cellpadding,u.cellspacing=t.cellspacing),Ku(e)&&n.children)for(var c=0;c<n.children.length;c++)Df(o,n.children[c],{"border-width":Xo(t.border),padding:Xo(t.cellpadding)}),$u(e)&&Df(o,n.children[c],{"border-color":t.bordercolor})
$u(e)&&(i["background-color"]=t.backgroundcolor,i["border-color"]=t.bordercolor,i["border-style"]=t.borderstyle),u.style=o.serializeStyle(K(K({},qu(e)),i)),o.setAttribs(n,K(K({},Vu(e)),u))}(e,n,u),((c=o.select("caption",n)[0])&&!u.caption||!c&&u.caption)&&e.execCommand("mceTableToggleCaption"),""===u.align?Ic(e,n):kc(e,n,u.align)),e.focus(),e.addVisual(),0<ge(i)&&(a=!(l=Ke(i,"caption"))||1<ge(i),_u(e,n,{structure:l,style:a}))}))}function ul(e,n){var t,r,o,u,i,c,l,a,f,s,m,d,g,p,h,v,w,y,C,S=e.dom,T=(o=$u(r=e),a=qu(r),f=Vu(r),s=o?(u=r.dom,{borderstyle:pe(a,"border-style").getOr(""),bordercolor:Kc(u)(pe(a,"border-color").getOr("")),backgroundcolor:Kc(u)(pe(a,"background-color").getOr(""))}):{},K(K(K(K(K(K({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),a),f),s),(l=a["border-width"],Ku(r)&&l?{border:l}:pe(f,"border").fold((function(){return{}}),(function(e){return{border:e}})))),(i=pe(a,"border-spacing").or(pe(f,"cellspacing")).fold((function(){return{}}),(function(e){return{cellspacing:e}})),c=pe(a,"border-padding").or(pe(f,"cellpadding")).fold((function(){return{}}),(function(e){return{cellpadding:e}})),K(K({},i),c))))
!1===n?(t=S.getParent(e.selection.getStart(),"table",e.getBody()))?(d=t,g=$u(m=e),w=m.dom,y=Ku(m)?w.getStyle(d,"border-spacing")||w.getAttrib(d,"cellspacing"):w.getAttrib(d,"cellspacing")||w.getStyle(d,"border-spacing"),C=Ku(m)?Ac(w,d,"padding")||w.getAttrib(d,"cellpadding"):w.getAttrib(d,"cellpadding")||Ac(w,d,"padding"),T=K({width:w.getStyle(d,"width")||w.getAttrib(d,"width"),height:w.getStyle(d,"height")||w.getAttrib(d,"height"),cellspacing:y,cellpadding:C,border:(p=w,v=Un(Ve.fromDom(h=d),"border-width"),Ku(m)&&v.isSome()?v.getOr(""):p.getAttrib(h,"border")||Ac(m.dom,h,"border-width")||Ac(m.dom,h,"border")),caption:!!w.select("caption",d)[0],class:w.getAttrib(d,"class",""),align:Tf(m,d)},g?Xc(w,d):{})):$u(e)&&(T.borderstyle="",T.bordercolor="",T.backgroundcolor=""):(T.cols="1",T.rows="1",$u(e)&&(T.borderstyle="",T.bordercolor="",T.backgroundcolor=""))
var x=vf(Yu(e))
0<x.length&&T.class&&(T.class=T.class.replace(/\s*mce\-item\-table\s*/g,""))
var R,D,O,A,k={type:"grid",columns:2,items:(R=x,D=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],O=e.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],A=0<R.length?[{type:"listbox",name:"class",label:"Class",items:R}]:[],D.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(O).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(A))},I=$u(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[k]},Gc(e,"table")]}:{type:"panel",items:[k]}
e.windowManager.open({title:"Table Properties",size:"normal",body:I,onSubmit:b(ol,e,t,T),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:T})}function il(e){return Ll(Jo(e),Ko(e))}function cl(e,n,t,r,u){function i(e){return tt(e,v)}function c(n){return _l(Jo(t=e),Ko(t)).bind((function(e){return i(e).map((function(t){return n(t,e)}))}))
var t}function f(n){e.focus()}function s(e,n){return void 0===n&&(n=!1),c((function(t,o){var u=Zo(r,t,o)
e(t,u,n).each(f)}))}function m(){return c((function(n,t){var u,i,c,l=Zo(r,n,t),a=Ho(o,Ve.fromDom(e.getDoc()),q.none())
return u=l,i=a,Ai(c=Gt.fromTable(n),u).bind((function(e){var n=Ti(N(dt(Si(c,i,!1)).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),(function(e){var n=k(e.cells,(function(e){return!e.isLocked}))
return 0<n.length?[K(K({},e),{cells:n})]:[]})))
return Wn(0<n.length,n)})).map((function(e){return D(e,(function(e){var n=cr(e.element)
return O(e.cells,(function(e){var t=lr(e.element)
vi(t,"colspan",e.colspan,1),vi(t,"rowspan",e.rowspan,1),Kt(n,t)})),n}))}))}))}function d(){return c((function(e,n){var t,o
return t=Zo(r,e,n),ki(o=Gt.fromTable(e),t).map((function(e){var n,t,r=e[e.length-1],u=e[0].column,i=r.column+r.colspan,c=function(e,n,t){if(Gt.hasColumns(e)){var r=D(k(Gt.justColumns(e),(function(e){return e.column>=n&&e.column<t})),(function(e){var r=lr(e.element)
return Oc(r,"span",t-n),r})),o=Ve.fromTag("colgroup")
return kt(o,r),[o]}return[]}(o,u,i),l=(n=u,t=i,D(o.all,(function(e){var r=D(k(e.cells,(function(e){return e.column>=n&&e.column<t})),(function(e){var r=lr(e.element)
return Oc(r,"colspan",t-n),r})),o=Ve.fromTag("tr")
return kt(o,r),o})))
return X(X([],c,!0),l,!0)}))}))}function g(n,t){return t().each((function(t){var o=D(t,lr)
c((function(t,u){var i,c,l=Vo(Ve.fromDom(e.getDoc())),a=(i=o,c=l,{selection:Qo(r),clipboard:i,generators:c})
n(t,a).each(f)}))}))}function p(e){return function(n,t){return pe(t,"type").each((function(n){s(e(n),t.no_events)}))}}var v=Ko(e)
ae({mceTableSplitCells:function(){return s(n.unmergeCells)},mceTableMergeCells:function(){return s(n.mergeCells)},mceTableInsertRowBefore:function(){return s(n.insertRowsBefore)},mceTableInsertRowAfter:function(){return s(n.insertRowsAfter)},mceTableInsertColBefore:function(){return s(n.insertColumnsBefore)},mceTableInsertColAfter:function(){return s(n.insertColumnsAfter)},mceTableDeleteCol:function(){return s(n.deleteColumn)},mceTableDeleteRow:function(){return s(n.deleteRow)},mceTableCutCol:function(){return d().each((function(e){u.setColumns(e),s(n.deleteColumn)}))},mceTableCutRow:function(){return m().each((function(e){u.setRows(e),s(n.deleteRow)}))},mceTableCopyCol:function(){return d().each((function(e){return u.setColumns(e)}))},mceTableCopyRow:function(){return m().each((function(e){return u.setRows(e)}))},mceTablePasteColBefore:function(){return g(n.pasteColsBefore,u.getColumns)},mceTablePasteColAfter:function(){return g(n.pasteColsAfter,u.getColumns)},mceTablePasteRowBefore:function(){return g(n.pasteRowsBefore,u.getRows)},mceTablePasteRowAfter:function(){return g(n.pasteRowsAfter,u.getRows)},mceTableDelete:function(){return il(e).each((function(n){tt(n,v).filter(h(v)).each((function(n){var t,r=Ve.fromText("")
Rt(n,r),Xt(n),e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):((t=e.dom.createRng()).setStart(r.dom,0),t.setEnd(r.dom,0),e.selection.setRng(t),e.nodeChanged())}))}))},mceTableCellToggleClass:function(n,t){c((function(n){var o=Wl(r),u=z(o,(function(n){return e.formatter.match("tablecellclass",{value:t},n.dom)}))?e.formatter.remove:e.formatter.apply
O(o,(function(e){return u("tablecellclass",{value:t},e.dom)})),_u(e,n.dom,la)}))},mceTableToggleClass:function(n,t){c((function(n){e.formatter.toggle("tableclass",{value:t},n.dom),_u(e,n.dom,la)}))},mceTableToggleCaption:function(){il(e).each((function(n){tt(n,v).each((function(t){On(t,"caption").fold((function(){var n,r,o=Ve.fromTag("caption")
Kt(o,Ve.fromText("Caption")),r=o,an(n=t,0).fold((function(){Kt(n,r)}),(function(e){xt(e,r)})),e.selection.setCursorLocation(o.dom,0)}),(function(r){en("caption")(n)&&ie("td",t).each((function(n){return e.selection.setCursorLocation(n.dom,0)})),Xt(r)})),_u(e,t.dom,aa)}))}))},mceTableSizingMode:function(n,t){return r=t,il(e).each((function(n){ha(e)||ba(e)||Ju(e)||tt(n,v).each((function(n){"relative"!==r||vl(n)?"fixed"!==r||wl(n)?"responsive"!==r||yl(n)||ya(n):wa(n):va(n),Yo(n),_u(e,n.dom,aa)}))}))
var r},mceTableCellType:p((function(e){return"th"===e?n.makeCellsHeader:n.unmakeCellsHeader})),mceTableColType:p((function(e){return"th"===e?n.makeColumnsHeader:n.unmakeColumnsHeader})),mceTableRowType:p((function(e){switch(e){case"header":return n.makeRowsHeader
case"footer":return n.makeRowsFooter
default:return n.makeRowsBody}}))},(function(n,t){return e.addCommand(t,n)})),ae({mceTableProps:b(ul,e,!1),mceTableRowProps:b(rl,e),mceTableCellProps:b(el,e,r)},(function(n,t){return e.addCommand(t,(function(){return n()}))})),e.addCommand("mceInsertTable",(function(n,t){a(t)&&0<Ue(t).length?xc(e,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):ul(e,!0)})),e.addCommand("mceTableApplyCellStyle",(function(n,t){function o(e){return"tablecell"+e.toLowerCase().replace("-","")}var u,c
!a(t)||0!==(u=Wl(r)).length&&(function(e){for(var n in e)if(Ge.call(e,n))return
return 1}(c=se(t,(function(n,t){return e.formatter.has(o(t))&&l(n)})))||(ae(c,(function(n,t){O(u,(function(r){Sf.normal(e,r.dom).setFormat(o(t),n)}))})),i(u[0]).each((function(n){return _u(e,n.dom,la)}))))}))}function ll(e,n){return tt(e,n).bind((function(n){var t=et(n)
return E(t,(function(n){return ce(e,n)})).map((function(e){return{index:e,all:t}}))}))}function al(e,n){var t=e.document.createRange()
return t.selectNode(n.dom),t}function fl(e,n){var t=e.document.createRange()
return _f(t,n),t}function sl(e,n,t){var r,o=e.document.createRange(),u=o
return n.fold((function(e){u.setStartBefore(e.dom)}),(function(e,n){u.setStart(e.dom,n)}),(function(e){u.setStartAfter(e.dom)})),r=o,t.fold((function(e){r.setEndBefore(e.dom)}),(function(e,n){r.setEnd(e.dom,n)}),(function(e){r.setEndAfter(e.dom)})),o}function ml(e,n,t,r,o){var u=e.document.createRange()
return u.setStart(n.dom,t),u.setEnd(r.dom,o),u}function dl(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}}function gl(e,n,t){return n(Ve.fromDom(t.startContainer),t.startOffset,Ve.fromDom(t.endContainer),t.endOffset)}function pl(e,n){var t,r,o,i=(t=e,n.match({domRange:function(e){return{ltr:u(e),rtl:q.none}},relative:function(e,n){return{ltr:Y((function(){return sl(t,e,n)})),rtl:Y((function(){return q.some(sl(t,n,e))}))}},exact:function(e,n,r,o){return{ltr:Y((function(){return ml(t,e,n,r,o)})),rtl:Y((function(){return q.some(ml(t,r,o,e,n))}))}}}))
return(o=(r=i).ltr()).collapsed?r.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return Wf.rtl(Ve.fromDom(e.endContainer),e.endOffset,Ve.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return gl(0,Wf.ltr,o)})):gl(0,Wf.ltr,o)}function bl(e,n){return pl(e,n).match({ltr:function(n,t,r,o){var u=e.document.createRange()
return u.setStart(n.dom,t),u.setEnd(r.dom,o),u},rtl:function(n,t,r,o){var u=e.document.createRange()
return u.setStart(r.dom,o),u.setEnd(n.dom,t),u}})}function hl(e,n){return{parent:u(q.from(e.dom.documentElement).map(Ve.fromDom).getOr(e)),view:u(e),origin:u(no(0,0)),isResizable:n}}function vl(e){return bo(e).exists((function(e){return Rl.test(e)}))}function wl(e){return bo(e).exists((function(e){return Dl.test(e)}))}function yl(e){return bo(e).isNone()}function Cl(){return{transformRow:i,transformCell:di}}function Sl(e,n){function t(t){if(Zi(t))return Na((u={element:t}).element)?e.colgroup(u):e.row(u)
var o,u,i=(o=n(t),Pa(o.element)?e.col(o):e.cell(o))
return r=q.some({item:t,replacement:i}),i}void 0===n&&(n=ec)
var r=q.none()
return{getOrInit:function(e,n){return r.fold((function(){return t(e)}),(function(r){return n(e,r.item)?r.replacement:t(e)}))}}}function Tl(e){return function(n){function t(t){var o=n.replace(t,e,"td"===e?{scope:null}:{})
return r.push({item:t,sub:o}),o}var r=[]
return{replaceOrInit:function(e,n){return Zi(e)||Pa(e)?e:(o=e,u=n,M(r,(function(e){return u(e.item,o)})).fold((function(){return t(e)}),(function(r){return n(e,r.item)?r.sub:t(e)})))
var o,u}}}}function xl(e){return{unmerge:function(n){var t=nc(n)
return t.each((function(e){return Bn(n,"scope",e)})),function(){var r=e.cell({element:n,colspan:1,rowspan:1})
return Gn(r,"width"),Gn(n,"width"),t.each((function(e){return Bn(r,"scope",e)})),r}},merge:function(e){return Gn(e[0],"width"),function(){var n=Ln(D(e,nc))
if(0===n.length)return q.none()
var t=n[0],r=["row","col"]
return x(n,(function(e){return e!==t&&T(r,e)}))?q.none():q.from(t)}().fold((function(){return _t(e[0],"scope")}),(function(n){return Bn(e[0],"scope",n+"group")})),u(e[0])}}}var Rl=/(\d+(\.\d+)?)%/,Dl=/(\d+(\.\d+)?)px|em/,Ol=en("col"),Al=u(Rl),kl=en("col"),Il=function(e){return bo(e).fold((function(){return{width:t=ko(n=e,br),pixelWidth:t,getWidths:function(e,t){return Oo(e,n,t)},getCellDelta:r=u(0),singleColumnWidth:u([0]),minCellWidth:r,setElementWidth:o,adjustTableWidth:o,isRelative:!0,label:"none"}
var n,t,r}),(function(n){return t=e,r=n,(null!==Al().exec(r)?Io:Bo)(t)
var t,r}))},Bl=Bo,Ml=Io,El=["img","br"],Pl=function(e,n){var t=function(e){for(var r=ln(e),o=r.length-1;0<=o;o--){var u=r[o]
if(n(u))return q.some(u)
var i=t(u)
if(i.isSome())return i}return q.none()}
return t(e)},Nl={scope:["row","col"]},zl={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Ll=eu("th,td,caption"),_l=eu("th,td"),Wl=Qo,jl=Nr([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Fl=K({},jl),Hl=cu((function(e){return e<0})),Vl=cu(y),ql=Nr([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ul=K(K({},ql),{from:function(e){return ee(e,"%")?fu("%",ql.percent,e):ee(e,"px")?fu("px",ql.pixels,e):ql.invalid(e)}}),Gl=function(e){if(0===e.length)return e
var n,t,r=I(e,(function(e,n){var t=Ul.from(n).fold((function(){return{value:n,remainder:0}}),(function(e){return n=e,{value:(t=Math.floor(n))+"px",remainder:n-t}
var n,t}),(function(e){return{value:e+"%",remainder:0}}))
return{output:[t.value].concat(e.output),remainder:e.remainder+t.remainder}}),{output:[],remainder:0}),o=r.output
return o.slice(0,o.length-1).concat([(n=o[o.length-1],t=Math.round(r.remainder),Ul.from(n).fold(u(n),(function(e){return e+t+"px"}),(function(e){return e+t+"%"})))])},$l=Ul.from,Kl=yu(["compare","extract","mutate","sink"]),Xl=yu(["element","start","stop","destroy"]),Yl=yu(["forceDrop","drop","move","delayDrop"]),Jl=function(e,n,t,r){e.dom.removeEventListener(n,t,r)},Ql=y,Zl=Cu,ea=Du("ephox-dragster").resolve,na=Kl({compare:function(e,n){return no(n.left-e.left,n.top-e.top)},extract:function(e){return q.some(no(e.x,e.y))},sink:function(e,n){var t,r,o,i=(t=n,r=K({layerClass:ea("blocker")},t),Bn(o=Ve.fromTag("div"),"role","presentation"),Vn(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),xu(o,ea("blocker")),xu(o,r.layerClass),{element:u(o),destroy:function(){Xt(o)}}),c=Su(i.element(),"mousedown",e.forceDrop),l=Su(i.element(),"mouseup",e.drop),a=Su(i.element(),"mousemove",e.move),f=Su(i.element(),"mouseout",e.delayDrop)
return Xl({element:i.element,start:function(e){Kt(e,i.element())},stop:function(){Xt(i.element())},destroy:function(){i.destroy(),l.unbind(),a.unbind(),f.unbind(),c.unbind()}})},mutate:function(e,n){e.mutate(n.left,n.top)}}),ta=function(e){return e.dom.contentEditable},ra=Du("ephox-snooker").resolve,oa=ra("resizer-bar"),ua=ra("resizer-rows"),ia=ra("resizer-cols"),ca=ra("resizer-bar-dragging"),la={structure:!1,style:!0},aa={structure:!0,style:!1},fa={structure:!0,style:!0},sa={"border-collapse":"collapse",width:"100%"},ma=R(5,(function(e){var n=e+1+"px"
return{title:n,value:n}})),da=D(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(function(e){return{title:e,value:e.toLowerCase()}})),ga={border:"1"},pa="preservetable",ba=function(e){return"fixed"===Wu(e)||!1===ju(e)},ha=function(e){return"responsive"===Wu(e)},va=function(e){var n=Co(e)
gu(e,q.some(n),q.none()),ii(e)},wa=function(e){var n=br(e)+"px"
gu(e,q.some(n),q.none()),ii(e)},ya=function(e){Gn(e,"width")
var n=nt(e)
O(0<n.length?n:et(e),(function(e){Gn(e,"width"),ii(e)})),ii(e)},Ca="bar-",Sa=function(e,n,t){return e.property().isText(n)&&0===e.property().getText(n).trim().length||e.property().isComment(n)?t(n).bind((function(n){return Sa(e,n,t).orThunk((function(){return q.some(n)}))})):q.none()},Ta=function(e,n){var t=Sa(e,n,e.query().prevSibling).getOr(n)
if(e.property().isText(t))return li(t,ai(e,t))
var r=e.property().children(t)
return 0<r.length?Ta(e,r[r.length-1]):li(t,ai(e,t))},xa=Ta,Ra=Qt(),Da=en("th"),Oa=function(e){var n=k(e,(function(e){return Da(e.element)}))
return 0===n.length?q.some("td"):n.length===e.length?q.some("th"):q.none()},Aa=pi,ka=bi,Ia=hi,Ba=function(e){return{isValue:y,isError:w,getOr:u(e),getOrThunk:u(e),getOrDie:u(e),or:function(n){return Ba(e)},orThunk:function(n){return Ba(e)},fold:function(n,t){return t(e)},map:function(n){return Ba(n(e))},mapError:function(n){return Ba(e)},each:function(n){n(e)},bind:function(n){return n(e)},exists:function(n){return n(e)},forall:function(n){return n(e)},toOptional:function(){return q.some(e)}}},Ma=function(e){return{isValue:w,isError:y,getOr:i,getOrThunk:function(e){return e()},getOrDie:function(){return n=String(e),function(){throw new Error(n)}()
var n},or:i,orThunk:function(e){return e()},fold:function(n,t){return n(e)},map:function(n){return Ma(e)},mapError:function(n){return Ma(n(e))},each:o,bind:function(n){return Ma(e)},exists:w,forall:y,toOptional:q.none}},Ea={value:Ba,error:Ma,fromOption:function(e,n){return e.fold((function(){return Ma(n)}),Ba)}},Pa=en("col"),Na=en("colgroup"),za=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],La=Qt(),_a=fc("thead",!0),Wa=fc("tbody",!1),ja=fc("tfoot",!1),Fa=Tl("th"),Ha=Tl("td"),Va=Di((function(e,n,t,r){var o=n[0].row
return lc(I(ac(n),(function(e,n){return{grid:Vi(e.grid,o,n.row+e.delta,t,r.getOrInit),delta:e.delta+1}}),{grid:e,delta:0}).grid,o,n[0].column)}),Ai,o,o,Sl),qa=Di((function(e,n,t,r){var o=ac(n),u=o[o.length-1],i=u.row+u.rowspan
return lc(I(o,(function(e,n){return Vi(e,i,n.row,t,r.getOrInit)}),e),i,n[0].column)}),Ai,o,o,Sl),Ua=Di((function(e,n,t,r){var o=n.details,u=Qi(o),i=u[0].column
return lc(I(u,(function(e,n){return{grid:qi(e.grid,i,n.column+e.delta,t,r.getOrInit),delta:e.delta+1}}),{grid:e,delta:0}).grid,o[0].row,i)}),hc(!0),dc,o,Sl),Ga=Di((function(e,n,t,r){var o=n.details,u=o[o.length-1],i=u.column+u.colspan
return lc(I(Qi(o),(function(e,n){return qi(e,i,n.column,t,r.getOrInit)}),e),o[0].row,i)}),hc(!1),dc,o,Sl),$a=Di((function(e,n,t,r){var o,u,i=Qi(n.details),c=(o=e,u=D(i,(function(e){return e.column})),N(o,(function(e){var n=e.cells,t=I(u,(function(e,n){return 0<=n&&n<e.length?e.slice(0,n).concat(e.slice(n+1)):e}),n)
return 0<t.length?[ye(e.element,t,e.section,e.isNew)]:[]}))),l=0<c.length?c[0].cells.length-1:0
return lc(c,i[0].row,Math.min(i[0].column,l))}),(function(e,n){return ki(e,n).map((function(n){return{details:n,pixelDelta:-bc(e,n)}}))}),dc,ic,Sl),Ka=Di((function(e,n,t,r){var o,u,i,c,l=ac(n),a=(o=l[0].row,u=l[l.length-1].row,c=(i=dt(e)).rows,i.cols.concat(c.slice(0,o)).concat(c.slice(u+1))),f=0<a.length?a.length-1:0
return lc(a,Math.min(n[0].row,f),n[0].column)}),Ai,o,ic,Sl),Xa=Di((function(e,n,t,r){return lc(Yi(e,D(Qi(n),(function(e){return e.column})),!0,t,r.replaceOrInit),n[0].row,n[0].column)}),ki,o,o,Fa),Ya=Di((function(e,n,t,r){return lc(Yi(e,D(Qi(n),(function(e){return e.column})),!1,t,r.replaceOrInit),n[0].row,n[0].column)}),ki,o,o,Ha),Ja=Di(_a,ki,o,o,Fa),Qa=Di(Wa,ki,o,o,Ha),Za=Di(ja,ki,o,o,Ha),ef=Di((function(e,n,t,r){return lc(Ji(e,n,t,r.replaceOrInit),n[0].row,n[0].column)}),ki,o,o,Fa),nf=Di((function(e,n,t,r){return lc(Ji(e,n,t,r.replaceOrInit),n[0].row,n[0].column)}),ki,o,o,Ha),tf=Di((function(e,n,t,r){var o=n.cells
return oc(o),cc(function(e,n,t){var r=dt(e).rows
if(0===r.length)return e
for(var o=n.startRow;o<=n.finishRow;o++)for(var u=n.startCol;u<=n.finishCol;u++){var i=r[o],c=ft(i,u).isLocked
at(i,u,we(t(),!1,c))}return e}(e,n.bounds,r.merge(o)),q.from(o[0]))}),Bi,mc,o,xl),rf=Di((function(e,n,t,r){return cc(I(n,(function(e,n){return Ei(e,n,t,r.unmerge(n))}),e),q.from(n[0]))}),Mi,mc,o,xl),of=Di((function(e,n,t,r){var o,u,i=(o=n.clipboard,u=n.generators,Si(Gt.fromTable(o),u,!0))
return function(e,n,t,r,o){var u,i,c,l=bt(n),a=(u=e,i=l,c=mt(n[0]),{row:dt(n).cols.length+u.row,column:M(R(c-u.column,(function(e){return e+u.column})),(function(e){return z(i,(function(n){return n!==e}))})).getOr(c-1)}),f=dt(t).rows,s=ji(a,f,l)
return function(e,n,t){if(e.row>=n.length||e.column>mt(n[0]))return Ea.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column)
var r=n.slice(e.row),o=r[0].cells.slice(e.column),u=mt(t[0]),i=t.length
return Ea.value({rowDelta:r.length-i,colDelta:o.length-u})}(a,n,f).map((function(e){var t=K(K({},e),{colDelta:e.colDelta-s.length}),u=Wi(n,t,r),i=bt(u),c=ji(a,f,i)
return function(e,n,t,r,o,u){for(var i,c,l,a,f,s=e.row,m=e.column,d=s+t.length,g=m+mt(t[0])+u.length,p=L(u,y),h=s;h<d;h++)for(var v,w,C,S=0,T=m;T<g;T++)p[T]?S++:(l=T,a=void 0,a=b(o,ft((i=n)[c=h],l).element),f=i[c],1<i.length&&1<mt(f)&&(0<l&&a(st(f,l-1))||l<f.cells.length-1&&a(st(f,l+1))||0<c&&a(st(i[c-1],l))||c<i.length-1&&a(st(i[c+1],l)))&&Ei(n,st(n[h],T),o,r.cell),w=(v=ft(t[h-s],T-m-S)).element,C=r.replace(w),at(n[h],T,we(C,!0,v.isLocked)))
return n}(a,u,f,r,o,c)}))}({row:n.row,column:n.column},e,i,n.generators,t).fold((function(){return cc(e,q.some(n.element))}),(function(e){return lc(e,n.row,n.column)}))}),(function(e,n){return Zn(n.element).bind((function(t){return xi(e,t).map((function(e){return K(K({},e),{generators:n.generators,clipboard:n.clipboard})}))}))}),mc,o,Sl),uf=Di((function(e,n,t,r){var o=dt(e).rows,u=n.cells[0].column,i=o[n.cells[0].row]
return lc(Fi(u,e,sc(n.clipboard,n.generators,i),n.generators,t),n.cells[0].row,n.cells[0].column)}),vc(!0),o,o,Sl),cf=Di((function(e,n,t,r){var o=dt(e).rows,u=n.cells[n.cells.length-1].column+n.cells[n.cells.length-1].colspan,i=o[n.cells[0].row]
return lc(Fi(u,e,sc(n.clipboard,n.generators,i),n.generators,t),n.cells[0].row,n.cells[0].column)}),vc(!1),o,o,Sl),lf=Di((function(e,n,t,r){var o=dt(e).rows,u=n.cells[0].row,i=o[u]
return lc(Hi(u,e,sc(n.clipboard,n.generators,i),n.generators,t),n.cells[0].row,n.cells[0].column)}),Oi,o,o,Sl),af=Di((function(e,n,t,r){var o=dt(e).rows,u=n.cells[n.cells.length-1].row+n.cells[n.cells.length-1].rowspan,i=o[n.cells[0].row]
return lc(Hi(u,e,sc(n.clipboard,n.generators,i),n.generators,t),n.cells[0].row,n.cells[0].column)}),Oi,o,o,Sl),ff=function(e,n){var t=Gt.fromTable(e)
return Ai(t,n).bind((function(e){var n=e[e.length-1],r=e[0].row,o=n.row+n.rowspan
return function(){var e=D(t.all.slice(r,o),(function(e){return mi(e).type})),n=T(e,"header"),u=T(e,"footer")
if(n||u){var i=T(e,"body")
return!n||i||u?n||i||!u?q.none():q.some("footer"):q.some("header")}return q.some("body")}()})).getOr("")},sf={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},mf=tinymce.util.Tools.resolve("tinymce.util.Tools"),df=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],gf=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,pf=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,bf=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,hf=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,vf=function(e){return D(e,(function(e){var n=e.text||e.title
return Wc(e)?{text:n,items:vf(e.menu)}:{text:n,value:e.value}}))},wf=function(e,n,t,r,o){return D(t,(function(t){var u,i,c,l,a=t.text||t.title
return Wc(t)?{type:"nestedmenuitem",text:a,getSubmenuItems:function(){return wf(e,n,t.menu,r,o)}}:{text:a,type:"togglemenuitem",onAction:function(){return o(t.value)},onSetup:(u=e,i=n,c=r,l=t.value,function(e){function n(){function n(e){return u.formatter.match(c,{value:l},e.dom,r)}var o=Wl(i)
r?(e.setActive(!x(o,n)),t.set(u.formatter.formatChanged(c,(function(n){return e.setActive(!n)}),!0))):(e.setActive(z(o,n)),t.set(u.formatter.formatChanged(c,e.setActive,!1,{value:l})))}var t=Lc((function(e){return e.unbind()})),r=!ne(l)
return u.initialized?n():u.on("init",n),t.clear})}}))},yf=function(e){return N(e,(function(e){return Wc(e)?[K(K({},e),{menu:yf(e.menu)})]:ne(e.value)?[e]:[]}))},Cf=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:df}],Sf={normal:$c(!1),ifTruthy:$c(!0)},Tf=b(Jc,["left","center","right"],"align"),xf=b(Jc,["top","middle","bottom"],"valign"),Rf=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Df=function(e,n,t,r){if("TD"===n.tagName||"TH"===n.tagName)l(t)?e.setStyle(n,t,r):e.setStyle(n,t)
else if(n.children)for(var o=0;o<n.children.length;o++)Df(e,n.children[o],t,r)},Of={remove_similar:!0,inherit:!1},Af=K({selector:"td,th"},Of),kf={tablecellbackgroundcolor:K({styles:{backgroundColor:"%value"}},Af),tablecellverticalalign:K({styles:{"vertical-align":"%value"}},Af),tablecellbordercolor:K({styles:{borderColor:"%value"}},Af),tablecellclass:K({classes:["%value"]},Af),tableclass:K({selector:"table",classes:["%value"]},Of),tablecellborderstyle:K({styles:{borderStyle:"%value"}},Af),tablecellborderwidth:K({styles:{borderWidth:"%value"}},Af)},If=Nr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Bf=K(K({},If),{none:function(e){return If.none(e=void 0===e?void 0:e)}}),Mf=function(e,n,t,r,o){void 0===o&&(o=y)
var u=1===r
if(!u&&t<=0)return Bf.first(e[0])
if(u&&t>=e.length-1)return Bf.last(e[e.length-1])
var i=t+r,c=e[i]
return o(c)?Bf.middle(n,c):Mf(e,n,i,r,o)},Ef=function(e,n,t,r){return{start:e,soffset:n,finish:t,foffset:r}},Pf=Nr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Nf={before:Pf.before,on:Pf.on,after:Pf.after,cata:function(e,n,t,r){return e.fold(n,t,r)},getStart:function(e){return e.fold(i,i,i)}},zf=Nr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Lf={domRange:zf.domRange,relative:zf.relative,exact:zf.exact,exactFromRange:function(e){return zf.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var n=e.match({domRange:function(e){return Ve.fromDom(e.startContainer)},relative:function(e,n){return Nf.getStart(e)},exact:function(e,n,t,r){return e}})
return Ve.fromDom(tn(n).dom.defaultView)},range:Ef},_f=function(e,n){return e.selectNodeContents(n.dom)},Wf=Nr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}])
function jf(e,n,t){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}function Ff(e,n){return n-e.left<e.right-n}function Hf(e,n,t){var r=e.dom.createRange()
return r.selectNode(n.dom),r.collapse(t),r}function Vf(e,n,t){var r=e.dom.createRange()
r.selectNode(n.dom)
var o=Ff(r.getBoundingClientRect(),t)
return(!0===o?Po:No)(n).map((function(n){return Hf(e,n,o)}))}function qf(e,n,t){var r=Ff(n.dom.getBoundingClientRect(),t)
return q.some(Hf(e,n,r))}function Uf(e,n){var t=Ye(e)
return"input"===t?Nf.after(e):T(["br","img"],t)?0===n?Nf.before(e):Nf.after(e):Nf.on(e,n)}function Gf(e,n){var t=e.fold(Nf.before,Uf,Nf.after),r=n.fold(Nf.before,Uf,Nf.after)
return Lf.relative(t,r)}function $f(e,n,t,r){var o=Uf(e,n),u=Uf(t,r)
return Lf.relative(o,u)}function Kf(e){return q.from(e.getSelection())}function Xf(e,n){Kf(e).each((function(e){e.removeAllRanges(),e.addRange(n)}))}function Yf(e,n,t,r,o){Xf(e,ml(e,n,t,r,o))}function Jf(e,n){return pl(e,n).match({ltr:function(n,t,r,o){Yf(e,n,t,r,o)},rtl:function(n,t,r,o){Kf(e).each((function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(n.dom,t,r.dom,o)
else if(u.extend)try{c=r,l=o,(i=u).collapse(n.dom,t),i.extend(c.dom,l)}catch(u){Yf(e,r,o,n,t)}else Yf(e,r,o,n,t)
var i,c,l}))}})}function Qf(e,n,t,r,o){Jf(e,$f(n,t,r,o))}function Zf(e,n,t){Jf(e,Gf(n,t))}function es(e){if(0<e.rangeCount){var n=e.getRangeAt(0),t=e.getRangeAt(e.rangeCount-1)
return q.some(Ef(Ve.fromDom(n.startContainer),n.startOffset,Ve.fromDom(t.endContainer),t.endOffset))}return q.none()}function ns(e){if(null===e.anchorNode||null===e.focusNode)return es(e)
var n,t,r,o,u,i,c,l,a,f,s,m=Ve.fromDom(e.anchorNode),d=Ve.fromDom(e.focusNode)
return n=m,i=t=e.anchorOffset,c=r=d,l=o=e.focusOffset,(a=nn(u=n).dom.createRange()).setStart(u.dom,i),a.setEnd(c.dom,l),f=a,s=ce(n,r)&&t===o,f.collapsed&&!s?q.some(Ef(m,e.anchorOffset,d,e.focusOffset)):es(e)}function ts(e,n,t){Xf(e,((t=void 0===t||t)?fl:al)(e,n))}function rs(e){return Kf(e).filter((function(e){return 0<e.rangeCount})).bind(ns).map((function(e){return Lf.exact(e.start,e.soffset,e.finish,e.foffset)}))}function os(e,n,t){return Ls(e,n,(o=Au,ll(r=t,void 0).fold((function(){return Bf.none(r)}),(function(e){return Mf(e.all,r,e.index,1,o)}))))
var r,o}function us(e,n){var t=bl(e,n)
return Ef(Ve.fromDom(t.startContainer),t.startOffset,Ve.fromDom(t.endContainer),t.endOffset)}function is(e,n){return{item:e,mode:n}}function cs(e,n,t,r){return void 0===r&&(r=Es),e.property().parent(n).map((function(e){return is(e,r)}))}function ls(e){return function(n){return 0===e.property().children(n).length}}function as(e,n){return $s(Xs,e,ls(Xs),n)}function fs(e,n){return Ks(Xs,e,ls(Xs),n)}function ss(e){return kn(e,"tr")}function ms(e){return"br"===Ye(e)}function ds(e,n){return{left:e.left,top:e.top+n,right:e.right,bottom:e.bottom+n}}function gs(e,n){return{left:e.left,top:e.top-n,right:e.right,bottom:e.bottom-n}}function ps(e,n,t){return{left:e.left+n,top:e.top+t,right:e.right+n,bottom:e.bottom+t}}function bs(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function hs(e,n){return q.some(e.getRect(n))}function vs(e,n,t){return gn(n)?hs(e,n).map(bs):pn(n)?(r=e,o=n,(0<=(u=t)&&u<Mo(o)?r.getRangedRect(o,u,o,u+1):0<u?r.getRangedRect(o,u-1,o,u):q.none()).map(bs)):q.none()
var r,o,u}function ws(e,n){return gn(n)?hs(e,n).map(bs):pn(n)?e.getRangedRect(n,0,n,Mo(n)).map(bs):q.none()}function ys(e,n,t){return xn((function(e,n){return n(e)}),Rn,n,tc,void 0).fold(w,(function(n){return ws(e,n).exists((function(e){return(n=t).left<(r=e).left||Math.abs(r.right-n.left)<1||n.left>r.right
var n,r}))}))}function Cs(e,n,t){var r,o=e.move(t,5),u=tm(n,e,t,o,100).getOr(o),i=u,c=n
return((r=e).point(i)>c.getInnerHeight()?q.some(r.point(i)-c.getInnerHeight()):r.point(i)<0?q.some(-r.point(i)):q.none()).fold((function(){return n.situsFromPoint(u.left,e.point(u))}),(function(t){return n.scrollBy(0,t),n.situsFromPoint(u.left,e.point(u)-t)}))}function Ss(e,n,t,r,o){return kn(r,"td,th",n).bind((function(r){return kn(r,"table",n).bind((function(u){return a=u,Rn(o,(function(e){return rn(e).exists((function(e){return ce(e,a)}))}),void 0).isSome()?(i=f=e,c=s=n,l=m=t,i.getSelection().bind((function(e){return function(e,n,t,r){var o,u,i,c,l,a,f
return(ms(n)?(o=e,(i=r).traverse(u=n).orThunk((function(){return Zs(u,i.gather,o)})).map(i.relative)):(c=e,l=r,an(a=n,f=t).filter(ms).orThunk((function(){return an(a,f-1).filter(ms)})).bind((function(e){return l.traverse(e).fold((function(){return Zs(e,l.gather,c).map(l.relative)}),(function(e){return rn(n=e).bind((function(e){var t=ln(e)
return Qs(t,n).map((function(r){return{parent:e,children:t,element:n,index:r}}))})).map((function(e){return Nf.on(e.parent,e.index)}))
var n}))})))).map((function(e){return{start:e,finish:e}}))}(c,e.finish,e.foffset,l).fold((function(){return q.some(li(e.finish,e.foffset))}),(function(n){var t=i.fromSitus(n),r=Js.verify(i,e.finish,e.foffset,t.finish,t.foffset,l.failure,c)
return Js.cata(r,(function(e){return q.none()}),(function(){return q.none()}),(function(e){return q.some(li(e,0))}),(function(e){return q.some(li(e,Mo(e)))}))}))})).bind((function(e){return om(f,s,e.element,e.offset,m,20).map(f.fromSitus)})).bind((function(e){return kn(e.finish,"td,th",n).map((function(n){return{start:r,finish:n,range:e}}))}))):q.none()
var i,c,l,a,f,s,m}))}))}function Ts(e,n,t,r,o,u){return He().browser.isIE()?q.none():u(r,n).orThunk((function(){return Ss(e,n,t,r,o).map((function(e){var n=e.range
return Ws(q.some(Fs(n.start,n.soffset,n.finish,n.foffset)),!0)}))}))}function xs(e,n){return kn(e,"tr",n).bind((function(e){return kn(e,"table",n).bind((function(t){var r=dn(t,"tr")
return ce(e,r[0])?$s(Xs,t,(function(e){return No(e).isSome()}),n).map((function(e){var n=Mo(e)
return Ws(q.some(Fs(e,n,e,n)),!0)})):q.none()}))}))}function Rs(e,n){return kn(e,"tr",n).bind((function(e){return kn(e,"table",n).bind((function(t){var r=dn(t,"tr")
return ce(e,r[r.length-1])?Ks(Xs,t,(function(e){return Po(e).isSome()}),n).map((function(e){return Ws(q.some(Fs(e,0,e,0)),!0)})):q.none()}))}))}function Ds(e,n,t,r,o,u,i){return Ss(e,t,r,o,u).bind((function(e){return Hs(n,t,e.start,e.finish,i)}))}function Os(e,n){return kn(e,"td,th",n)}function As(e){return function(n){return n===e}}function ks(e){return 37<=e&&e<=40}function Is(e){return{elementFromPoint:function(n,t){return Ve.fromPoint(Ve.fromDom(e.document),n,t)},getRect:function(e){return e.dom.getBoundingClientRect()},getRangedRect:function(n,t,r,o){var u,i,c,l=Lf.exact(n,t,r,o)
return 0<(i=0<(c=(u=bl(e,l)).getClientRects()).length?c[0]:u.getBoundingClientRect()).width||0<i.height?q.some(i).map(dl):q.none()},getSelection:function(){return rs(e).map((function(n){return us(e,n)}))},fromSitus:function(n){var t=Lf.relative(n.start,n.finish)
return us(e,t)},situsFromPoint:function(n,t){return r=n,o=t,u=Ve.fromDom(e.document),Ns(u,r,o).map((function(e){return Ef(Ve.fromDom(e.startContainer),e.startOffset,Ve.fromDom(e.endContainer),e.endOffset)})).map((function(e){return js(e.start,e.soffset,e.finish,e.foffset)}))
var r,o,u},clearSelection:function(){Kf(e).each((function(e){return e.removeAllRanges()}))},collapseSelection:function(n){void 0===n&&(n=!1),rs(e).each((function(t){return t.fold((function(e){return e.collapse(n)}),(function(t,r){var o=n?t:r
Zf(e,o,o)}),(function(t,r,o,u){var i=n?t:o,c=n?r:u
Qf(e,i,c,i,c)}))}))},setSelection:function(n){Qf(e,n.start,n.soffset,n.finish,n.foffset)},setRelativeSelection:function(n,t){Zf(e,n,t)},selectNode:function(n){ts(e,n,!1)},selectContents:function(n){ts(e,n)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){var n=Ve.fromDom(e.document),t=void 0!==n?n.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop
return no(r,o).top},scrollBy:function(n,t){var r,o=n,u=t,i=Ve.fromDom(e.document);(r=(void 0!==i?i.dom:document).defaultView)&&r.scrollBy(o,u)}}}function Bs(e,n){return{rows:e,cols:n}}function Ms(e){return!1===Ru(Ve.fromDom(e.target),"ephox-snooker-resizer-bar")}function Es(e,n,t,r){return void 0===r&&(r=Vs),t.sibling(e,n).map((function(e){return is(e,r)}))}Wf.ltr,Wf.rtl
var Ps=function(e,n,t,r){return pn(n)?(u=n,i=t,c=r,(l=(o=e).dom.createRange()).selectNode(u.dom),H(l.getClientRects(),(function(e){return jf(e,i,c)?q.some(e):q.none()})).map((function(e){return function(e,n,t,r,o){function u(t){var r=e.dom.createRange()
return r.setStart(n.dom,t),r.collapse(!0),r}var i=Mt(n).length,c=function(e,n,t,r){if(0===r)return 0
if(e===t)return r-1
for(var o=t,i=1;i<r;i++){var c=u(i).getBoundingClientRect(),l=Math.abs(e-c.left)
if(n<=c.bottom){if(n<c.top||o<l)return i-1
o=l}}return 0}(t,r,o.right,i)
return u(c)}(o,u,i,c,e)}))):(f=n,s=t,m=r,d=(a=e).dom.createRange(),H(ln(f),(function(e){return d.selectNode(e.dom),jf(d.getBoundingClientRect(),s,m)?Ps(a,e,s,m):q.none()})))
var o,u,i,c,l,a,f,s,m,d},Ns=document.caretPositionFromPoint?function(e,n,t){var r,o
return q.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,n,t)).bind((function(n){if(null===n.offsetNode)return q.none()
var t=e.dom.createRange()
return t.setStart(n.offsetNode,n.offset),t.collapse(),q.some(t)}))}:document.caretRangeFromPoint?function(e,n,t){var r,o
return q.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,n,t))}:function(e,n,t){return Ve.fromPoint(e,n,t).bind((function(r){function o(){return t=e,u=n,(0===ln(o=r).length?qf:Vf)(t,o,u)
var t,o,u}return 0===ln(r).length?o():function(e,n,t,r){var o=e.dom.createRange()
o.selectNode(n.dom)
var u=o.getBoundingClientRect()
return function(e,n,t,r){var o=e.dom.createRange()
o.selectNode(n.dom)
var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,r))
return Ps(e,n,i,c)}(e,n,Math.max(u.left,Math.min(u.right,t)),Math.max(u.top,Math.min(u.bottom,r)))}(e,r,n,t).orThunk(o)}))},zs=tinymce.util.Tools.resolve("tinymce.util.VK"),Ls=function(e,n,t){return t.fold(q.none,q.none,(function(e,n){return Po(n).map((function(e){return t=Lf.exact(e,0,e,0),r=Lf.getWin(t).dom,o=t.match({domRange:function(e){var n=Ve.fromDom(e.startContainer),t=Ve.fromDom(e.endContainer)
return $f(n,e.startOffset,t,e.endOffset)},relative:Gf,exact:$f}),pl(r,o).match({ltr:n,rtl:n})
function n(e,n,t,o){return ml(r,e,n,t,o)}var t,r,o}))}),(function(t){return e.execCommand("mceTableInsertRowAfter"),os(e,n,t)}))},_s=["table","li","dl"],Ws=function(e,n){return{selection:e,kill:n}},js=function(e,n,t,r){return{start:Nf.on(e,n),finish:Nf.on(t,r)}},Fs=js,Hs=function(e,n,t,r,o){return ce(t,r)?q.none():nr(t,r,n).bind((function(n){var r=n.boxes.getOr([])
return 1<r.length?(o(e,r,n.start,n.finish),q.some(Ws(q.some(Fs(t,0,t,Mo(t))),!0))):q.none()}))},Vs=function(e,n,t,r){void 0===r&&(r=Vs)
var o=e.property().children(n)
return t.first(o).map((function(e){return is(e,r)}))},qs=[{current:cs,next:Es,fallback:q.none()},{current:Es,next:Vs,fallback:q.some(cs)},{current:Vs,next:Vs,fallback:q.some(Es)}],Us=function(e,n,t,r,o){return M(o=void 0===o?qs:o,(function(e){return e.current===t})).bind((function(t){return t.current(e,n,r,t.next).orThunk((function(){return t.fallback.bind((function(t){return Us(e,n,t,r)}))}))}))},Gs=function(e,n,t,r,o,u){return Us(e,n,r,o).bind((function(n){return u(n.item)?q.none():t(n.item)?q.some(n.item):Gs(e,n.item,t,n.mode,o,u)}))},$s=function(e,n,t,r){return Gs(e,n,t,Es,{sibling:function(e,n){return e.query().prevSibling(n)},first:function(e){return 0<e.length?q.some(e[e.length-1]):q.none()}},r)},Ks=function(e,n,t,r){return Gs(e,n,t,Es,{sibling:function(e,n){return e.query().nextSibling(n)},first:function(e){return 0<e.length?q.some(e[0]):q.none()}},r)},Xs=Qt(),Ys=Nr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Js=K(K({},Ys),{verify:function(e,n,t,r,o,u,i){return kn(r,"td,th",i).bind((function(t){return kn(n,"td,th",i).map((function(n){return ce(t,n)?ce(r,t)&&Mo(t)===o?u(n):Ys.none("in same cell"):Zt(ss,[t,n]).fold((function(){return o=t,i=(r=e).getRect(n),(c=r.getRect(o)).right>i.left&&c.left<i.right?Ys.success():u(n)
var r,o,i,c}),(function(e){return u(n)}))}))})).getOr(Ys.none("default"))},cata:function(e,n,t,r,o){return e.fold(n,t,r,o)}}),Qs=function(e,n){return E(e,b(ce,n))},Zs=function(e,n,t){return n(e,t).bind((function(e){return pn(e)&&0===Mt(e).trim().length?Zs(e,n,t):q.some(e)}))},em=Nr([{none:[]},{retry:["caret"]}]),nm={point:function(e){return e.bottom},adjuster:function(e,n,t,r,o){var u=ds(o,5)
return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?em.retry(u):t.top===o.bottom?em.retry(ds(o,1)):ys(e,n,o)?em.retry(ps(u,5,0)):em.none()},move:ds,gather:fs},tm=function(e,n,t,r,o){return 0===o?q.some(r):(i=e,c=r.left,l=n.point(r),i.elementFromPoint(c,l).filter((function(e){return"table"===Ye(e)})).isSome()?(u=o-1,tm(e,n,t,n.move(r,5),u)):e.situsFromPoint(r.left,n.point(r)).bind((function(u){return u.start.fold(q.none,(function(u){return ws(e,u).bind((function(i){return n.adjuster(e,u,i,t,r).fold(q.none,(function(r){return tm(e,n,t,r,o-1)}))})).orThunk((function(){return q.some(r)}))}),q.none)})))
var u,i,c,l},rm={tryUp:b(Cs,{point:function(e){return e.top},adjuster:function(e,n,t,r,o){var u=gs(o,5)
return Math.abs(t.top-r.top)<1||t.bottom<o.top?em.retry(u):t.bottom===o.top?em.retry(gs(o,1)):ys(e,n,o)?em.retry(ps(u,5,0)):em.none()},move:gs,gather:as}),tryDown:b(Cs,nm),ieTryUp:function(e,n){return e.situsFromPoint(n.left,n.top-5)},ieTryDown:function(e,n){return e.situsFromPoint(n.left,n.bottom+5)},getJumpSize:u(5)},om=function(e,n,t,r,o,u){return 0===u?q.none():cm(e,n,t,r,o).bind((function(i){var c=e.fromSitus(i),l=Js.verify(e,t,r,c.finish,c.foffset,o.failure,n)
return Js.cata(l,(function(){return q.none()}),(function(){return q.some(i)}),(function(i){return ce(t,i)&&0===r?um(e,t,r,gs,o):om(e,n,i,0,o,u-1)}),(function(i){return ce(t,i)&&r===Mo(i)?um(e,t,r,ds,o):om(e,n,i,Mo(i),o,u-1)}))}))},um=function(e,n,t,r,o){return vs(e,n,t).bind((function(n){return im(e,o,r(n,rm.getJumpSize()))}))},im=function(e,n,t){var r=He().browser
return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?n.otherRetry(e,t):r.isIE()?n.ieRetry(e,t):q.none()},cm=function(e,n,t,r,o){return vs(e,t,r).bind((function(n){return im(e,o,n)}))},lm={traverse:cn,gather:fs,relative:Nf.before,otherRetry:rm.tryDown,ieRetry:rm.ieTryDown,failure:Js.failedDown},am={traverse:un,gather:as,relative:Nf.before,otherRetry:rm.tryUp,ieRetry:rm.ieTryUp,failure:Js.failedUp},fm=As(38),sm=As(40),mm={isBackward:As(37),isForward:As(39)},dm={isBackward:As(39),isForward:As(37)},gm=tinymce.util.Tools.resolve("tinymce.Env")
function pm(e,n,t){var r=function(e,n,t){function r(n){_t(n,e.selected),_t(n,e.firstSelected),_t(n,e.lastSelected)}function o(n){Bn(n,e.selected,"1")}function u(e){i(e),t()}function i(n){O(dn(n,e.selectedSelector+","+e.firstSelectedSelector+","+e.lastSelectedSelector),r)}return{clearBeforeUpdate:i,clear:u,selectRange:function(t,r,i,c){u(t),O(r,o),Bn(i,e.firstSelected,"1"),Bn(c,e.lastSelected,"1"),n(r,i,c)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}(zl,(function(n,r,u){t.targets().each((function(t){tt(r).each((function(i){var c,l,a,f=ti(e),s=Ho(o,Ve.fromDom(e.getDoc()),f),m=(c=t,l=s,Ai(a=Gt.fromTable(i),c).map((function(e){var n,t,r=Si(a,l,!1)
return{upOrLeftCells:N(Ti(r.slice(0,(n=e)[n.length-1].row+1)),(function(e){return D(e.cells.slice(0,n[n.length-1].column+1),(function(e){return e.element}))})),downOrRightCells:N(Ti(r.slice((t=e)[0].row+t[0].rowspan-1,r.length)),(function(e){return D(e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length),(function(e){return e.element}))}))}})))
e.fire("TableSelectionChange",{cells:n,start:r,finish:u,otherCells:m})}))}))}),(function(){e.fire("TableSelectionClear")}))
return e.on("init",(function(t){var u,i,c,l,a,f,s,m,d,g,p,h,v,w,y,C,S=e.getWin(),T=Uo(e),x=Ko(e),R=(u=Is(S),{clearstate:(p=u,h=T,v=x,w=r,y=_c(),(i={clearstate:C=y.clear,mousedown:function(e){w.clear(h),Os(e.target,v).each(y.set)},mouseover:function(e){k(e)},mouseup:function(e){k(e),C()}}).clearstate),mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}),D=(g=Is(S),{keydown:function(e,n,t,r,o,u){var i=e.raw,c=i.which,l=!0===i.shiftKey
return tr(s,d.selectedSelector).fold((function(){return ks(c)&&!l&&d.clearBeforeUpdate(s),sm(c)&&l?b(Ds,g,s,m,lm,r,n,d.selectRange):fm(c)&&l?b(Ds,g,s,m,am,r,n,d.selectRange):sm(c)?b(Ts,g,m,lm,r,n,Rs):fm(c)?b(Ts,g,m,am,r,n,xs):q.none}),(function(e){function n(n){return function(){return H(n,(function(n){return t=n.rows,r=n.cols,o=s,or(e,t,r,(u=d).firstSelectedSelector,u.lastSelectedSelector).map((function(e){return u.clearBeforeUpdate(o),u.selectRange(o,e.boxes,e.start,e.finish),e.boxes}))
var t,r,o,u})).fold((function(){return rr(s,d.firstSelectedSelector,d.lastSelectedSelector).map((function(e){var n=sm(c)||u.isForward(c)?Nf.after:Nf.before
return g.setRelativeSelection(Nf.on(e.first,0),n(e.table)),d.clear(s),Ws(q.none(),!0)}))}),(function(e){return q.some(Ws(q.none(),!0))}))}}return sm(c)&&l?n([Bs(1,0)]):fm(c)&&l?n([Bs(-1,0)]):u.isBackward(c)&&l?n([Bs(0,-1),Bs(-1,0)]):u.isForward(c)&&l?n([Bs(0,1),Bs(1,0)]):ks(c)&&!l?A:q.none}))()},keyup:function(e,n,t,r,o){return tr(s,d.selectedSelector).fold((function(){var u,i,c,l,a,f=e.raw,g=f.which
return!0===f.shiftKey&&ks(g)?(u=s,i=m,a=d.selectRange,ce(c=n,l=r)&&t===o?q.none():kn(c,"td,th",i).bind((function(e){return kn(l,"td,th",i).bind((function(n){return Hs(u,i,e,n,a)}))}))):q.none()}),q.none)}}),O=(c=s=T,l=m=x,a=d=r,f=Is(S),function(e,n){a.clearBeforeUpdate(c),nr(e,n,l).each((function(e){var t=e.boxes.getOr([])
a.selectRange(c,t,e.start,e.finish),f.selectContents(n),f.collapseSelection()}))})
function A(){return d.clear(s),q.none()}function k(e){y.on((function(n){w.clearBeforeUpdate(h),Os(e.target,v).each((function(t){nr(n,t,v).each((function(n){var r,o,u,i=n.boxes.getOr([])
1===i.length?(r=i[0],o="false"===ta(r),u=zn(Ou(e.target),r,ce),o&&u&&(w.selectRange(h,i,r,r),p.selectContents(r))):1<i.length&&(w.selectRange(h,i,n.start,n.finish),p.selectContents(t))}))}))}))}function I(n,t){!0===n.raw.shiftKey&&(t.kill&&n.kill(),t.selection.each((function(n){var t=Lf.relative(n.start,n.finish),r=bl(S,t)
e.selection.setRng(r)})))}function B(e){return 0===e.button}e.on("TableSelectorChange",(function(e){return O(e.start,e.finish)}))
var M,E,P=(M=zc(Ve.fromDom(T)),E=zc(0),{touchEnd:function(e){var n,t,r=Ve.fromDom(e.target)
"td"!==Ye(r)&&"th"!==Ye(r)||(n=M.get(),t=E.get(),ce(n,r)&&e.timeStamp-t<300&&(e.preventDefault(),O(r,r))),M.set(r),E.set(e.timeStamp)}})
e.on("dragstart",(function(e){R.clearstate()})),e.on("mousedown",(function(e){B(e)&&Ms(e)&&R.mousedown(Zl(e))})),e.on("mouseover",(function(e){var n;(void 0===(n=e).buttons||gm.browser.isEdge()&&0===n.buttons||0!=(1&n.buttons))&&Ms(e)&&R.mouseover(Zl(e))})),e.on("mouseup",(function(e){B(e)&&Ms(e)&&R.mouseup(Zl(e))})),e.on("touchend",P.touchEnd),e.on("keyup",(function(n){var t,r,o,u=Zl(n)
u.raw.shiftKey&&ks(u.raw.which)&&(t=e.selection.getRng(),r=Ve.fromDom(t.startContainer),o=Ve.fromDom(t.endContainer),D.keyup(u,r,t.startOffset,o,t.endOffset).each((function(e){I(u,e)})))})),e.on("keydown",(function(t){var r=Zl(t)
n().each((function(e){return e.hideBars()}))
var o=e.selection.getRng(),u=Ve.fromDom(o.startContainer),i=Ve.fromDom(o.endContainer),c=yr(mm,dm)(Ve.fromDom(e.selection.getStart()))
D.keydown(r,u,o.startOffset,i,o.endOffset,c).each((function(e){I(r,e)})),n().each((function(e){return e.showBars()}))})),e.on("NodeChange",(function(){var n=e.selection
Zt(tt,[Ve.fromDom(n.getStart()),Ve.fromDom(n.getEnd())]).fold((function(){return r.clear(T)}),o)}))})),{clear:r.clear}}function bm(e,n){function t(e){return g.forall((function(n){return!n[e]}))}function r(){return Ll(Jo(e),Ko(e)).bind((function(t){return _n(tt(t),Ll(Ve.fromDom(e.selection.getEnd()),Ko(e)).bind(tt),(function(e,r){return ce(e,r)?p(t)?q.some({element:o=t,mergable:q.none(),unmergable:q.none(),selection:[o]}):q.some(Zo(n,e,t)):q.none()
var o})).bind(i)}))}function o(e){return tt(e.element).map((function(n){var t=Gt.fromTable(n),r=B(Ai(t,e).getOr([]),(function(e,n){return n.isLocked&&(e.onAny=!0,0===n.column?e.onFirst=!0:n.column+n.colspan>=t.grid.columns&&(e.onLast=!0)),e}),{onAny:!1,onFirst:!1,onLast:!1})
return{mergeable:Bi(t,e).isSome(),unmergeable:Mi(t,e).isSome(),locked:r}}))}function u(){m.set(Y(r)()),g=m.get().bind(o),O(d.get(),(function(e){return e()}))}function c(e){return e(),d.set(d.get().concat([e])),function(){d.set(k(d.get(),(function(n){return n!==e})))}}function l(e,n){return c((function(){return m.get().fold((function(){e.setDisabled(!0)}),(function(t){e.setDisabled(n(t))}))}))}function a(e,n,t){return c((function(){return m.get().fold((function(){e.setDisabled(!0),e.setActive(!1)}),(function(r){e.setDisabled(n(r)),e.setActive(t(r))}))}))}function f(e){return g.exists((function(n){return n.locked[e]}))}function s(n,t){return function(r){return a(r,(function(e){return p(e.element)}),(function(){return e.queryCommandValue(n)===t}))}}var m=zc(q.none()),d=zc([]),g=q.none(),p=en("caption"),b=s("mceTableRowType","header"),h=s("mceTableColType","th")
return e.on("NodeChange ExecCommand TableSelectorChange",u),{onSetupTable:function(e){return l(e,(function(e){return!1}))},onSetupCellOrRow:function(e){return l(e,(function(e){return p(e.element)}))},onSetupColumn:function(e){return function(n){return l(n,(function(n){return p(n.element)||f(e)}))}},onSetupPasteable:function(e){return function(n){return l(n,(function(n){return p(n.element)||e().isNone()}))}},onSetupPasteableColumn:function(e,n){return function(t){return l(t,(function(t){return p(t.element)||e().isNone()||f(n)}))}},onSetupMergeable:function(e){return l(e,(function(e){return t("mergeable")}))},onSetupUnmergeable:function(e){return l(e,(function(e){return t("unmergeable")}))},resetTargets:u,onSetupTableWithCaption:function(n){return a(n,w,(function(n){return tt(n.element,Ko(e)).exists((function(e){return On(e,"caption").isSome()}))}))},onSetupTableRowHeaders:b,onSetupTableColumnHeaders:h,targets:m.get}}$r.add("table",(function(e){var n,t,r,i,c,a,f,s,m,d,g,p,b=(n=function(){return Uo(e)},t=function(){return _l(Jo(e),Ko(e))},r=zl.selectedSelector,{get:function(){return Hr(n(),r).fold((function(){return t().fold(qr,Gr)}),(function(e){return Ur(e)}))}}),h=bm(e,b),v=function(e){function n(e){return"TABLE"===e.nodeName}function t(n){return ui(e,n)}function r(){return(ei(e)?au:lu)()}var o,i,c=q.none(),a=q.none(),f=q.none()
return e.on("init",(function(){var n,o,i,s,m,d,g,p,b,h,v,w,y,C,S=(o=ci,(n=e).inline?(d=Uo(n),Vn(p=Ve.fromTag("div"),{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Kt(Sn(Ve.fromDom(document)),p),g=o,{parent:u(p),view:u(d),origin:u(no(0,0)),isResizable:g}):hl(Ve.fromDom(n.getDoc()),o))
f=q.some(S),m=e.getParam("object_resizing",!0),(l(m)?"table"===m:m)&&e.getParam("table_resize_bars",!0,"boolean")&&(i=r(),b=i,h=t,v=ro,w=uo,y=Nu(S),C=hu({beforeResize:bu(["table","type"]),afterResize:bu(["table","type"]),startDrag:bu([])}),y.events.adjustHeight.bind((function(e){var n=e.table
C.trigger.beforeResize(n,"row")
var t,r,o,u,i,c,l,a,f,s=v.delta(e.delta,n)
t=n,r=s,o=e.row,u=v,a=D(Ao(l=Gt.fromTable(t),t,u,wo,(function(e){return e.getOrThunk(Ft)})),(function(e,n){return o===n?Math.max(r+e,Ft()):e})),i=a,f=D(Gt.justCells(l),(function(e){var n=tu(e.row,e.row+e.rowspan,i)
return{element:e.element,height:n,rowspan:e.rowspan}})),O((c=a,D(l.all,(function(e,n){return{element:e.element,height:c[n]}}))),(function(e){mo(e.element,e.height)})),O(f,(function(e){mo(e.element,e.height)})),mo(t,I(a,(function(e,n){return e+n}),0)),C.trigger.afterResize(n,"row")})),y.events.startAdjust.bind((function(e){C.trigger.startDrag()})),y.events.adjustWidth.bind((function(e){var n=e.table
C.trigger.beforeResize(n,"col")
var t=w.delta(e.delta,n),r=h(n)
ou(n,t,e.column,b,r),C.trigger.afterResize(n,"col")})),(s={on:y.on,off:y.off,hideBars:y.hideBars,showBars:y.showBars,destroy:y.destroy,events:C.registry}).on(),s.events.startDrag.bind((function(n){c=q.some(e.selection.getRng())})),s.events.beforeResize.bind((function(n){var t,r=n.table.dom,o=e,u=Go(t=r),i=$o(r),c=Ca+n.type
o.fire("ObjectResizeStart",{target:t,width:u,height:i,origin:c})})),s.events.afterResize.bind((function(n){var t,r,o,u,i,l=n.table,a=l.dom
Yo(l),c.each((function(n){e.selection.setRng(n),e.focus()})),t=e,o=Go(r=a),u=$o(a),i=Ca+n.type,t.fire("ObjectResized",{target:r,width:o,height:u,origin:i}),e.undoManager.add()})),a=q.some(s))})),e.on("ObjectResizeStart",(function(t){var r,u,c,l,a=t.target
n(a)&&(r=Ve.fromDom(a),O(e.dom.select(".mce-clonedresizable"),(function(n){e.dom.addClass(n,"mce-"+Zu(e)+"-columns")})),!wl(r)&&ba(e)?wa(r):!vl(r)&&Ju(e)&&va(r),yl(r)&&Ae(t.origin,Ca)&&va(r),o=t.width,i=ha(e)?"":(l=(u=e).dom.getStyle(c=a,"width")||u.dom.getAttrib(c,"width"),q.from(l).filter(ne).getOr("")))})),e.on("ObjectResized",(function(u){var c,l,a,f,s,m,d,g,p,b,h=u.target
n(h)&&(c=Ve.fromDom(h),l=u.origin,Ae(l,"corner-")&&(a=c,f=u.width,b=ee(l,"e"),""===i&&va(a),f!==o&&""!==i?(Hn(a,"width",i),s=r(),m=t(a),d=ei(e)||b?pu(a).columns-1:0,ou(a,f-o,d,s,m)):/^(\d+(\.\d+)?)%$/.test(i)&&Hn(a,"width",f*parseFloat(i.replace("%",""))/o+"%"),/^(\d+(\.\d+)?)px$/.test(i)&&(p=Gt.fromTable(g=a),Gt.hasColumns(p)||O(et(g),(function(e){Hn(e,"width",qn(e,"width")),_t(e,"width")})))),Yo(c),_u(e,c.dom,la))})),e.on("SwitchMode",(function(){a.each((function(n){e.mode.isReadOnly()?n.hideBars():n.showBars()}))})),{lazyResize:function(){return a},lazyWire:function(){return f.getOr(hl(Ve.fromDom(e.getBody()),ci))},destroy:function(){a.each((function(e){e.destroy()})),f.each((function(n){var t=n
e.inline&&Xt(t.parent())}))}}}(e),w=pm(e,v.lazyResize,h),C=function(e,n,t){function r(e){return"table"===Ye(Uo(e))}function u(t,r,o,u,c){return function(l,a,f){void 0===f&&(f=!1),Yo(l)
var s=u(),m=Ve.fromDom(e.getDoc()),d=Ho(o,m,i),g={sizing:ui(e,l),resize:(ni(e)?lu:au)(),section:function(n){switch(Qu(e)){case"section":return Aa()
case"sectionCells":return ka()
case"cells":return Ia()
default:return function(e,n){switch(H(Gt.fromTable(e).all,(function(e){var n=mi(e)
return"header"===n.type?q.from(n.subType):q.none()})).getOr("section")){case"section":return pi()
case"sectionCells":return bi()
case"cells":return hi()}}(n)}}(l)}
return r(l)?t(s,l,a,d,g).bind((function(t){O(t.newRows,(function(n){zu(e,n.dom)})),O(t.newCells,(function(n){Lu(e,n.dom)}))
var r,o=(r=l,t.cursor.fold((function(){return j(et(r)).filter(Cn).map((function(t){n.clear(r)
var o=e.dom.createRng()
return o.selectNode(t.dom),e.selection.setRng(o),Bn(t,"data-mce-selected","1"),o}))}),(function(t){var o=xa(Ra,t),u=e.dom.createRng()
return u.setStart(o.element.dom,o.offset),u.setEnd(o.element.dom,o.offset),e.selection.setRng(u),n.clear(r),q.some(u)})))
return Cn(l)&&(Yo(l),f||_u(e,l.dom,c)),o.map((function(e){return{rng:e,effect:c}}))})):q.none()}}var i=ti(e),c=ni(e)?o:fi
return{deleteRow:u(Ka,(function(n){return!1===r(e)||1<pu(n).rows}),o,t,aa),deleteColumn:u($a,(function(n){return!1===r(e)||1<pu(n).columns}),o,t,aa),insertRowsBefore:u(Va,y,o,t,aa),insertRowsAfter:u(qa,y,o,t,aa),insertColumnsBefore:u(Ua,y,c,t,aa),insertColumnsAfter:u(Ga,y,c,t,aa),mergeCells:u(tf,y,o,t,aa),unmergeCells:u(rf,y,o,t,aa),pasteColsBefore:u(uf,y,o,t,aa),pasteColsAfter:u(cf,y,o,t,aa),pasteRowsBefore:u(lf,y,o,t,aa),pasteRowsAfter:u(af,y,o,t,aa),pasteCells:u(of,y,o,t,fa),makeCellsHeader:u(ef,y,o,t,aa),unmakeCellsHeader:u(nf,y,o,t,aa),makeColumnsHeader:u(Xa,y,o,t,aa),unmakeColumnsHeader:u(Ya,y,o,t,aa),makeRowsHeader:u(Ja,y,o,t,aa),makeRowsBody:u(Qa,y,o,t,aa),makeRowsFooter:u(Za,y,o,t,aa),getTableRowType:ff,getTableCellType:yc,getTableColType:wc}}(e,w,v.lazyWire),S=(i=_c(),c=_c(),{getRows:i.get,setRows:function(e){e.fold(i.clear,i.set),c.clear()},clearRows:i.clear,getColumns:c.get,setColumns:function(e){e.fold(c.clear,c.set),i.clear()},clearColumns:c.clear})
return cl(e,C,0,b,S),d=C,g=b,p=Ko(m=e),ae({mceTableRowType:function(){return x(d.getTableRowType)},mceTableCellType:function(){return x(d.getTableCellType)},mceTableColType:function(){return x(d.getTableColType)}},(function(e,n){return m.addQueryValueHandler(n,e)})),nu(e,b,C),function(e,n,t,r){function o(n){return function(){return e.execCommand(n)}}function i(n){e.execCommand("mceInsertTable",!1,{rows:n.numRows,columns:n.numColumns})}var c={text:"Table properties",onSetup:t.onSetupTable,onAction:o("mceTableProps")},l={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:o("mceTableDelete")}
e.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)})
var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:u("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}
e.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:t.onSetupColumn("onFirst")}),e.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:t.onSetupColumn("onLast")}),e.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),e.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")})
var f={type:"nestedmenuitem",text:"Column",getSubmenuItems:u("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}
e.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:t.onSetupMergeable}),e.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:t.onSetupUnmergeable})
var s={type:"nestedmenuitem",text:"Cell",getSubmenuItems:u("tablecellprops tablemergecells tablesplitcells")}
!1===e.getParam("table_grid",!0,"boolean")?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}]}}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),e.ui.registry.addMenuItem("tableprops",c),e.ui.registry.addMenuItem("deletetable",l),e.ui.registry.addNestedMenuItem("row",a),e.ui.registry.addNestedMenuItem("column",f),e.ui.registry.addNestedMenuItem("cell",s),e.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(u(""),(function(e){return"caption"===Ye(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}})
var m=yf(Yu(e))
0!==m.length&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return wf(e,n,m,"tableclass",(function(n){return e.execCommand("mceTableToggleClass",!1,n)}))},onSetup:t.onSetupTable})
var d=yf(Xu(e))
0!==d.length&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return wf(e,n,d,"tablecellclass",(function(n){return e.execCommand("mceTableCellToggleClass",!1,n)}))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return wf(e,n,df,"tablecellverticalalign",jc(e,"vertical-align"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return wf(e,n,Fu(e),"tablecellborderwidth",jc(e,"border-width"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return wf(e,n,Hu(e),"tablecellborderstyle",jc(e,"border-style"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:t.onSetupTableWithCaption}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Hc(e,ri(e),"background-color")},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Hc(e,oi(e),"border-color")},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Vc(e),onSetup:t.onSetupTableRowHeaders}),e.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:qc(e),onSetup:t.onSetupTableColumnHeaders})}(e,b,h,S),function(e,n,t,r){function o(n){return function(){return e.execCommand(n)}}e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}}),e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),e.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")}),e.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"})
var u=yf(Yu(e))
0!==u.length&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Fc(e,n,u,"tableclass",(function(n){return e.execCommand("mceTableToggleClass",!1,n)})),onSetup:t.onSetupTable})
var i=yf(Xu(e))
0!==i.length&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Fc(e,n,i,"tablecellclass",(function(n){return e.execCommand("mceTableCellToggleClass",!1,n)})),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Fc(e,n,df,"tablecellverticalalign",jc(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Fc(e,n,Fu(e),"tablecellborderwidth",jc(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Fc(e,n,Hu(e),"tablecellborderstyle",jc(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:t.onSetupTableWithCaption}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(n){return n(Hc(e,ri(e),"background-color"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(n){return n(Hc(e,oi(e),"border-color"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Vc(e),onSetup:t.onSetupTableRowHeaders}),e.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:qc(e),onSetup:t.onSetupTableColumnHeaders})}(e,b,h,S),0<(s=(f=e).getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&f.ui.registry.addContextToolbar("table",{predicate:function(e){return f.dom.is(e,"table")&&f.getBody().contains(e)},items:s,scope:"node",position:"node"}),e.on("PreInit",(function(){e.serializer.addTempAttr(zl.firstSelected),e.serializer.addTempAttr(zl.lastSelected),e.formatter.register(kf)})),e.getParam("table_tab_navigation",!0,"boolean")&&e.on("keydown",(function(n){var t,r,o,u,i=e,c=w;(t=n).keyCode===zs.TAB&&(r=Uo(i),o=function(e){var n=Ye(e)
return ce(e,r)||T(_s,n)},u=i.selection.getRng(),Zn(Ve.fromDom(t.shiftKey?u.startContainer:u.endContainer),o).each((function(e){t.preventDefault(),tt(e,o).each(c.clear),i.selection.collapse(t.shiftKey),(t.shiftKey?function(e,n,t){return Ls(e,n,(o=Au,ll(r=t,void 0).fold((function(){return Bf.none()}),(function(e){return Mf(e.all,r,e.index,-1,o)}))))
var r,o}:os)(i,o,e).each((function(e){i.selection.setRng(e)}))})))})),e.on("remove",(function(){v.destroy()})),{insertTable:(a=e,function(e,n,t){var r=xc(a,n,e,t=void 0===t?{}:t,"Invalid values for insertTable - rows and columns values are required to insert a table.")
return a.undoManager.add(),r}),setClipboardRows:Dc(S.setRows),getClipboardRows:Rc(S.getRows),setClipboardCols:Dc(S.setColumns),getClipboardCols:Rc(S.getColumns),resizeHandler:v,selectionTargets:h}
function x(e){return _l(Jo(m)).bind((function(n){return tt(n,p).map((function(t){var r=Zo(g,t,n)
return e(t,r)}))})).getOr("")}}))}()
